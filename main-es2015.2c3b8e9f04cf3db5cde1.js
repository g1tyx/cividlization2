(window.webpackJsonp = window.webpackJsonp || []).push([[1], {
            0: function (l, n, e) {
                l.exports = e("zUnb")
            },
            "16wW": function (l, n, e) {
                "use strict";
                var t = {};
                (0, e("vn/o").assign)(t, e("QSbz"), e("cX6o"), e("LOvY")), l.exports = t
            },
            "1uat": function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), e("MlIO"), function () {
                    var l = t,
                        n = l.lib.Hasher,
                        e = l.x64,
                        i = e.Word,
                        s = e.WordArray,
                        u = l.algo;

                    function r() {
                        return i.create.apply(i, arguments)
                    }
                    var a = [r(1116352408, 3609767458), r(1899447441, 602891725), r(3049323471, 3964484399), r(3921009573, 2173295548), r(961987163, 4081628472), r(1508970993, 3053834265), r(2453635748, 2937671579), r(2870763221, 3664609560), r(3624381080, 2734883394), r(310598401, 1164996542), r(607225278, 1323610764), r(1426881987, 3590304994), r(1925078388, 4068182383), r(2162078206, 991336113), r(2614888103, 633803317), r(3248222580, 3479774868), r(3835390401, 2666613458), r(4022224774, 944711139), r(264347078, 2341262773), r(604807628, 2007800933), r(770255983, 1495990901), r(1249150122, 1856431235), r(1555081692, 3175218132), r(1996064986, 2198950837), r(2554220882, 3999719339), r(2821834349, 766784016), r(2952996808, 2566594879), r(3210313671, 3203337956), r(3336571891, 1034457026), r(3584528711, 2466948901), r(113926993, 3758326383), r(338241895, 168717936), r(666307205, 1188179964), r(773529912, 1546045734), r(1294757372, 1522805485), r(1396182291, 2643833823), r(1695183700, 2343527390), r(1986661051, 1014477480), r(2177026350, 1206759142), r(2456956037, 344077627), r(2730485921, 1290863460), r(2820302411, 3158454273), r(3259730800, 3505952657), r(3345764771, 106217008), r(3516065817, 3606008344), r(3600352804, 1432725776), r(4094571909, 1467031594), r(275423344, 851169720), r(430227734, 3100823752), r(506948616, 1363258195), r(659060556, 3750685593), r(883997877, 3785050280), r(958139571, 3318307427), r(1322822218, 3812723403), r(1537002063, 2003034995), r(1747873779, 3602036899), r(1955562222, 1575990012), r(2024104815, 1125592928), r(2227730452, 2716904306), r(2361852424, 442776044), r(2428436474, 593698344), r(2756734187, 3733110249), r(3204031479, 2999351573), r(3329325298, 3815920427), r(3391569614, 3928383900), r(3515267271, 566280711), r(3940187606, 3454069534), r(4118630271, 4000239992), r(116418474, 1914138554), r(174292421, 2731055270), r(289380356, 3203993006), r(460393269, 320620315), r(685471733, 587496836), r(852142971, 1086792851), r(1017036298, 365543100), r(1126000580, 2618297676), r(1288033470, 3409855158), r(1501505948, 4234509866), r(1607167915, 987167468), r(1816402316, 1246189591)],
                        o = [];
                    ! function () {
                        for (var l = 0; l < 80; l++) o[l] = r()
                    }();
                    var c = u.SHA512 = n.extend({
                        _doReset: function () {
                            this._hash = new s.init([new i.init(1779033703, 4089235720), new i.init(3144134277, 2227873595), new i.init(1013904242, 4271175723), new i.init(2773480762, 1595750129), new i.init(1359893119, 2917565137), new i.init(2600822924, 725511199), new i.init(528734635, 4215389547), new i.init(1541459225, 327033209)])
                        },
                        _doProcessBlock: function (l, n) {
                            for (var e = this._hash.words, t = e[0], i = e[1], s = e[2], u = e[3], r = e[4], c = e[5], d = e[6], h = e[7], p = t.high, f = t.low, g = i.high, m = i.low, y = s.high, v = s.low, b = u.high, _ = u.low, w = r.high, x = r.low, k = c.high, S = c.low, C = d.high, I = d.low, T = h.high, E = h.low, A = p, P = f, D = g, M = m, O = y, N = v, R = b, B = _, z = w, $ = x, L = k, F = S, q = C, U = I, H = T, V = E, j = 0; j < 80; j++) {
                                var G = o[j];
                                if (j < 16) var W = G.high = 0 | l[n + 2 * j],
                                    K = G.low = 0 | l[n + 2 * j + 1];
                                else {
                                    var Z = o[j - 15],
                                        Q = Z.high,
                                        Y = Z.low,
                                        X = (Y >>> 1 | Q << 31) ^ (Y >>> 8 | Q << 24) ^ (Y >>> 7 | Q << 25),
                                        J = o[j - 2],
                                        ll = J.high,
                                        nl = J.low,
                                        el = (nl >>> 19 | ll << 13) ^ (nl << 3 | ll >>> 29) ^ (nl >>> 6 | ll << 26),
                                        tl = o[j - 7],
                                        il = o[j - 16],
                                        sl = il.low;
                                    G.high = W = (W = (W = ((Q >>> 1 | Y << 31) ^ (Q >>> 8 | Y << 24) ^ Q >>> 7) + tl.high + ((K = X + tl.low) >>> 0 < X >>> 0 ? 1 : 0)) + ((ll >>> 19 | nl << 13) ^ (ll << 3 | nl >>> 29) ^ ll >>> 6) + ((K += el) >>> 0 < el >>> 0 ? 1 : 0)) + il.high + ((K += sl) >>> 0 < sl >>> 0 ? 1 : 0), G.low = K
                                }
                                var ul, rl = z & L ^ ~z & q,
                                    al = $ & F ^ ~$ & U,
                                    ol = A & D ^ A & O ^ D & O,
                                    cl = (P >>> 28 | A << 4) ^ (P << 30 | A >>> 2) ^ (P << 25 | A >>> 7),
                                    dl = a[j],
                                    hl = dl.low,
                                    pl = H + ((z >>> 14 | $ << 18) ^ (z >>> 18 | $ << 14) ^ (z << 23 | $ >>> 9)) + ((ul = V + (($ >>> 14 | z << 18) ^ ($ >>> 18 | z << 14) ^ ($ << 23 | z >>> 9))) >>> 0 < V >>> 0 ? 1 : 0),
                                    fl = cl + (P & M ^ P & N ^ M & N);
                                H = q, V = U, q = L, U = F, L = z, F = $, z = R + (pl = (pl = (pl = pl + rl + ((ul += al) >>> 0 < al >>> 0 ? 1 : 0)) + dl.high + ((ul += hl) >>> 0 < hl >>> 0 ? 1 : 0)) + W + ((ul += K) >>> 0 < K >>> 0 ? 1 : 0)) + (($ = B + ul | 0) >>> 0 < B >>> 0 ? 1 : 0) | 0, R = O, B = N, O = D, N = M, D = A, M = P, A = pl + (((A >>> 28 | P << 4) ^ (A << 30 | P >>> 2) ^ (A << 25 | P >>> 7)) + ol + (fl >>> 0 < cl >>> 0 ? 1 : 0)) + ((P = ul + fl | 0) >>> 0 < ul >>> 0 ? 1 : 0) | 0
                            }
                            f = t.low = f + P, t.high = p + A + (f >>> 0 < P >>> 0 ? 1 : 0), m = i.low = m + M, i.high = g + D + (m >>> 0 < M >>> 0 ? 1 : 0), v = s.low = v + N, s.high = y + O + (v >>> 0 < N >>> 0 ? 1 : 0), _ = u.low = _ + B, u.high = b + R + (_ >>> 0 < B >>> 0 ? 1 : 0), x = r.low = x + $, r.high = w + z + (x >>> 0 < $ >>> 0 ? 1 : 0), S = c.low = S + F, c.high = k + L + (S >>> 0 < F >>> 0 ? 1 : 0), I = d.low = I + U, d.high = C + q + (I >>> 0 < U >>> 0 ? 1 : 0), E = h.low = E + V, h.high = T + H + (E >>> 0 < V >>> 0 ? 1 : 0)
                        },
                        _doFinalize: function () {
                            var l = this._data,
                                n = l.words,
                                e = 8 * this._nDataBytes,
                                t = 8 * l.sigBytes;
                            return n[t >>> 5] |= 128 << 24 - t % 32, n[30 + (t + 128 >>> 10 << 5)] = Math.floor(e / 4294967296), n[31 + (t + 128 >>> 10 << 5)] = e, l.sigBytes = 4 * n.length, this._process(), this._hash.toX32()
                        },
                        clone: function () {
                            var l = n.clone.call(this);
                            return l._hash = this._hash.clone(), l
                        },
                        blockSize: 32
                    });
                    l.SHA512 = n._createHelper(c), l.HmacSHA512 = n._createHmacHelper(c)
                }(), t.SHA512)
            },
            "3y9D": function (l, n, e) {
                var t, i, s, u, r, a, o;
                l.exports = (o = e("Ib8C"), s = (i = (t = o).lib).WordArray, r = [], a = t.algo.SHA1 = (u = i.Hasher).extend({
                    _doReset: function () {
                        this._hash = new s.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520])
                    },
                    _doProcessBlock: function (l, n) {
                        for (var e = this._hash.words, t = e[0], i = e[1], s = e[2], u = e[3], a = e[4], o = 0; o < 80; o++) {
                            if (o < 16) r[o] = 0 | l[n + o];
                            else {
                                var c = r[o - 3] ^ r[o - 8] ^ r[o - 14] ^ r[o - 16];
                                r[o] = c << 1 | c >>> 31
                            }
                            var d = (t << 5 | t >>> 27) + a + r[o];
                            d += o < 20 ? 1518500249 + (i & s | ~i & u) : o < 40 ? 1859775393 + (i ^ s ^ u) : o < 60 ? (i & s | i & u | s & u) - 1894007588 : (i ^ s ^ u) - 899497514, a = u, u = s, s = i << 30 | i >>> 2, i = t, t = d
                        }
                        e[0] = e[0] + t | 0, e[1] = e[1] + i | 0, e[2] = e[2] + s | 0, e[3] = e[3] + u | 0, e[4] = e[4] + a | 0
                    },
                    _doFinalize: function () {
                        var l = this._data,
                            n = l.words,
                            e = 8 * this._nDataBytes,
                            t = 8 * l.sigBytes;
                        return n[t >>> 5] |= 128 << 24 - t % 32, n[14 + (t + 64 >>> 9 << 4)] = Math.floor(e / 4294967296), n[15 + (t + 64 >>> 9 << 4)] = e, l.sigBytes = 4 * n.length, this._process(), this._hash
                    },
                    clone: function () {
                        var l = u.clone.call(this);
                        return l._hash = this._hash.clone(), l
                    }
                }), t.SHA1 = u._createHelper(a), t.HmacSHA1 = u._createHmacHelper(a), o.SHA1)
            },
            "5hvy": function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), e("MlIO"), function (l) {
                    var n = t,
                        e = n.lib,
                        i = e.WordArray,
                        s = e.Hasher,
                        u = n.x64.Word,
                        r = n.algo,
                        a = [],
                        o = [],
                        c = [];
                    ! function () {
                        for (var l = 1, n = 0, e = 0; e < 24; e++) {
                            a[l + 5 * n] = (e + 1) * (e + 2) / 2 % 64;
                            var t = (2 * l + 3 * n) % 5;
                            l = n % 5, n = t
                        }
                        for (l = 0; l < 5; l++)
                            for (n = 0; n < 5; n++) o[l + 5 * n] = n + (2 * l + 3 * n) % 5 * 5;
                        for (var i = 1, s = 0; s < 24; s++) {
                            for (var r = 0, d = 0, h = 0; h < 7; h++) {
                                if (1 & i) {
                                    var p = (1 << h) - 1;
                                    p < 32 ? d ^= 1 << p : r ^= 1 << p - 32
                                }
                                128 & i ? i = i << 1 ^ 113 : i <<= 1
                            }
                            c[s] = u.create(r, d)
                        }
                    }();
                    var d = [];
                    ! function () {
                        for (var l = 0; l < 25; l++) d[l] = u.create()
                    }();
                    var h = r.SHA3 = s.extend({
                        cfg: s.cfg.extend({
                            outputLength: 512
                        }),
                        _doReset: function () {
                            for (var l = this._state = [], n = 0; n < 25; n++) l[n] = new u.init;
                            this.blockSize = (1600 - 2 * this.cfg.outputLength) / 32
                        },
                        _doProcessBlock: function (l, n) {
                            for (var e = this._state, t = this.blockSize / 2, i = 0; i < t; i++) {
                                var s = l[n + 2 * i],
                                    u = l[n + 2 * i + 1];
                                s = 16711935 & (s << 8 | s >>> 24) | 4278255360 & (s << 24 | s >>> 8), (D = e[i]).high ^= u = 16711935 & (u << 8 | u >>> 24) | 4278255360 & (u << 24 | u >>> 8), D.low ^= s
                            }
                            for (var r = 0; r < 24; r++) {
                                for (var h = 0; h < 5; h++) {
                                    for (var p = 0, f = 0, g = 0; g < 5; g++) p ^= (D = e[h + 5 * g]).high, f ^= D.low;
                                    var m = d[h];
                                    m.high = p, m.low = f
                                }
                                for (h = 0; h < 5; h++) {
                                    var y = d[(h + 4) % 5],
                                        v = d[(h + 1) % 5],
                                        b = v.high,
                                        _ = v.low;
                                    for (p = y.high ^ (b << 1 | _ >>> 31), f = y.low ^ (_ << 1 | b >>> 31), g = 0; g < 5; g++)(D = e[h + 5 * g]).high ^= p, D.low ^= f
                                }
                                for (var w = 1; w < 25; w++) {
                                    var x = (D = e[w]).high,
                                        k = D.low,
                                        S = a[w];
                                    S < 32 ? (p = x << S | k >>> 32 - S, f = k << S | x >>> 32 - S) : (p = k << S - 32 | x >>> 64 - S, f = x << S - 32 | k >>> 64 - S);
                                    var C = d[o[w]];
                                    C.high = p, C.low = f
                                }
                                var I = d[0],
                                    T = e[0];
                                for (I.high = T.high, I.low = T.low, h = 0; h < 5; h++)
                                    for (g = 0; g < 5; g++) {
                                        var E = d[w = h + 5 * g],
                                            A = d[(h + 1) % 5 + 5 * g],
                                            P = d[(h + 2) % 5 + 5 * g];
                                        (D = e[w]).high = E.high ^ ~A.high & P.high, D.low = E.low ^ ~A.low & P.low
                                    }
                                var D, M = c[r];
                                (D = e[0]).high ^= M.high, D.low ^= M.low
                            }
                        },
                        _doFinalize: function () {
                            var n = this._data,
                                e = n.words,
                                t = 8 * n.sigBytes,
                                s = 32 * this.blockSize;
                            e[t >>> 5] |= 1 << 24 - t % 32, e[(l.ceil((t + 1) / s) * s >>> 5) - 1] |= 128, n.sigBytes = 4 * e.length, this._process();
                            for (var u = this._state, r = this.cfg.outputLength / 8, a = r / 8, o = [], c = 0; c < a; c++) {
                                var d = u[c],
                                    h = d.high,
                                    p = d.low;
                                h = 16711935 & (h << 8 | h >>> 24) | 4278255360 & (h << 24 | h >>> 8), o.push(p = 16711935 & (p << 8 | p >>> 24) | 4278255360 & (p << 24 | p >>> 8)), o.push(h)
                            }
                            return new i.init(o, r)
                        },
                        clone: function () {
                            for (var l = s.clone.call(this), n = l._state = this._state.slice(0), e = 0; e < 25; e++) n[e] = n[e].clone();
                            return l
                        }
                    });
                    n.SHA3 = s._createHelper(h), n.HmacSHA3 = s._createHmacHelper(h)
                }(Math), t.SHA3)
            },
            "7tol": function (l, n, e) {
                "use strict";
                var t = function () {
                    for (var l, n = [], e = 0; e < 256; e++) {
                        l = e;
                        for (var t = 0; t < 8; t++) l = 1 & l ? 3988292384 ^ l >>> 1 : l >>> 1;
                        n[e] = l
                    }
                    return n
                }();
                l.exports = function (l, n, e, i) {
                    var s = t,
                        u = i + e;
                    l ^= -1;
                    for (var r = i; r < u; r++) l = l >>> 8 ^ s[255 & (l ^ n[r])];
                    return -1 ^ l
                }
            },
            "9OqN": function (l, n, e) {
                var t, i, s;
                l.exports = (s = e("Ib8C"), e("OLod"), s.mode.CTR = (i = (t = s.lib.BlockCipherMode.extend()).Encryptor = t.extend({
                    processBlock: function (l, n) {
                        var e = this._cipher,
                            t = e.blockSize,
                            i = this._iv,
                            s = this._counter;
                        i && (s = this._counter = i.slice(0), this._iv = void 0);
                        var u = s.slice(0);
                        e.encryptBlock(u, 0), s[t - 1] = s[t - 1] + 1 | 0;
                        for (var r = 0; r < t; r++) l[n + r] ^= u[r]
                    }
                }), t.Decryptor = i, t), s.mode.CTR)
            },
            ALsQ: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), e("OLod"), t.mode.CFB = function () {
                    var l = t.lib.BlockCipherMode.extend();

                    function n(l, n, e, t) {
                        var i = this._iv;
                        if (i) {
                            var s = i.slice(0);
                            this._iv = void 0
                        } else s = this._prevBlock;
                        t.encryptBlock(s, 0);
                        for (var u = 0; u < e; u++) l[n + u] ^= s[u]
                    }
                    return l.Encryptor = l.extend({
                        processBlock: function (l, e) {
                            var t = this._cipher,
                                i = t.blockSize;
                            n.call(this, l, e, i, t), this._prevBlock = l.slice(e, e + i)
                        }
                    }), l.Decryptor = l.extend({
                        processBlock: function (l, e) {
                            var t = this._cipher,
                                i = t.blockSize,
                                s = l.slice(e, e + i);
                            n.call(this, l, e, i, t), this._prevBlock = s
                        }
                    }), l
                }(), t.mode.CFB)
            },
            "B/RK": function (l, n, e) {
                "use strict";
                var t = e("vn/o");

                function i(l) {
                    for (var n = l.length; --n >= 0;) l[n] = 0
                }
                var s = 0,
                    u = 256,
                    r = u + 1 + 29,
                    a = 30,
                    o = 19,
                    c = 2 * r + 1,
                    d = 15,
                    h = 16,
                    p = 256,
                    f = 16,
                    g = 17,
                    m = 18,
                    y = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0],
                    v = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13],
                    b = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7],
                    _ = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15],
                    w = new Array(2 * (r + 2));
                i(w);
                var x = new Array(2 * a);
                i(x);
                var k = new Array(512);
                i(k);
                var S = new Array(256);
                i(S);
                var C = new Array(29);
                i(C);
                var I, T, E, A = new Array(a);

                function P(l, n, e, t, i) {
                    this.static_tree = l, this.extra_bits = n, this.extra_base = e, this.elems = t, this.max_length = i, this.has_stree = l && l.length
                }

                function D(l, n) {
                    this.dyn_tree = l, this.max_code = 0, this.stat_desc = n
                }

                function M(l) {
                    return l < 256 ? k[l] : k[256 + (l >>> 7)]
                }

                function O(l, n) {
                    l.pending_buf[l.pending++] = 255 & n, l.pending_buf[l.pending++] = n >>> 8 & 255
                }

                function N(l, n, e) {
                    l.bi_valid > h - e ? (l.bi_buf |= n << l.bi_valid & 65535, O(l, l.bi_buf), l.bi_buf = n >> h - l.bi_valid, l.bi_valid += e - h) : (l.bi_buf |= n << l.bi_valid & 65535, l.bi_valid += e)
                }

                function R(l, n, e) {
                    N(l, e[2 * n], e[2 * n + 1])
                }

                function B(l, n) {
                    var e = 0;
                    do {
                        e |= 1 & l, l >>>= 1, e <<= 1
                    } while (--n > 0);
                    return e >>> 1
                }

                function z(l, n, e) {
                    var t, i, s = new Array(d + 1),
                        u = 0;
                    for (t = 1; t <= d; t++) s[t] = u = u + e[t - 1] << 1;
                    for (i = 0; i <= n; i++) {
                        var r = l[2 * i + 1];
                        0 !== r && (l[2 * i] = B(s[r]++, r))
                    }
                }

                function $(l) {
                    var n;
                    for (n = 0; n < r; n++) l.dyn_ltree[2 * n] = 0;
                    for (n = 0; n < a; n++) l.dyn_dtree[2 * n] = 0;
                    for (n = 0; n < o; n++) l.bl_tree[2 * n] = 0;
                    l.dyn_ltree[2 * p] = 1, l.opt_len = l.static_len = 0, l.last_lit = l.matches = 0
                }

                function L(l) {
                    l.bi_valid > 8 ? O(l, l.bi_buf) : l.bi_valid > 0 && (l.pending_buf[l.pending++] = l.bi_buf), l.bi_buf = 0, l.bi_valid = 0
                }

                function F(l, n, e, t) {
                    var i = 2 * n,
                        s = 2 * e;
                    return l[i] < l[s] || l[i] === l[s] && t[n] <= t[e]
                }

                function q(l, n, e) {
                    for (var t = l.heap[e], i = e << 1; i <= l.heap_len && (i < l.heap_len && F(n, l.heap[i + 1], l.heap[i], l.depth) && i++, !F(n, t, l.heap[i], l.depth));) l.heap[e] = l.heap[i], e = i, i <<= 1;
                    l.heap[e] = t
                }

                function U(l, n, e) {
                    var t, i, s, r, a = 0;
                    if (0 !== l.last_lit)
                        do {
                            t = l.pending_buf[l.d_buf + 2 * a] << 8 | l.pending_buf[l.d_buf + 2 * a + 1], i = l.pending_buf[l.l_buf + a], a++, 0 === t ? R(l, i, n) : (R(l, (s = S[i]) + u + 1, n), 0 !== (r = y[s]) && N(l, i -= C[s], r), R(l, s = M(--t), e), 0 !== (r = v[s]) && N(l, t -= A[s], r))
                        } while (a < l.last_lit);
                    R(l, p, n)
                }

                function H(l, n) {
                    var e, t, i, s = n.dyn_tree,
                        u = n.stat_desc.static_tree,
                        r = n.stat_desc.has_stree,
                        a = n.stat_desc.elems,
                        o = -1;
                    for (l.heap_len = 0, l.heap_max = c, e = 0; e < a; e++) 0 !== s[2 * e] ? (l.heap[++l.heap_len] = o = e, l.depth[e] = 0) : s[2 * e + 1] = 0;
                    for (; l.heap_len < 2;) s[2 * (i = l.heap[++l.heap_len] = o < 2 ? ++o : 0)] = 1, l.depth[i] = 0, l.opt_len--, r && (l.static_len -= u[2 * i + 1]);
                    for (n.max_code = o, e = l.heap_len >> 1; e >= 1; e--) q(l, s, e);
                    i = a;
                    do {
                        e = l.heap[1], l.heap[1] = l.heap[l.heap_len--], q(l, s, 1), t = l.heap[1], l.heap[--l.heap_max] = e, l.heap[--l.heap_max] = t, s[2 * i] = s[2 * e] + s[2 * t], l.depth[i] = (l.depth[e] >= l.depth[t] ? l.depth[e] : l.depth[t]) + 1, s[2 * e + 1] = s[2 * t + 1] = i, l.heap[1] = i++, q(l, s, 1)
                    } while (l.heap_len >= 2);
                    l.heap[--l.heap_max] = l.heap[1],
                        function (l, n) {
                            var e, t, i, s, u, r, a = n.dyn_tree,
                                o = n.max_code,
                                h = n.stat_desc.static_tree,
                                p = n.stat_desc.has_stree,
                                f = n.stat_desc.extra_bits,
                                g = n.stat_desc.extra_base,
                                m = n.stat_desc.max_length,
                                y = 0;
                            for (s = 0; s <= d; s++) l.bl_count[s] = 0;
                            for (a[2 * l.heap[l.heap_max] + 1] = 0, e = l.heap_max + 1; e < c; e++)(s = a[2 * a[2 * (t = l.heap[e]) + 1] + 1] + 1) > m && (s = m, y++), a[2 * t + 1] = s, t > o || (l.bl_count[s]++, u = 0, t >= g && (u = f[t - g]), l.opt_len += (r = a[2 * t]) * (s + u), p && (l.static_len += r * (h[2 * t + 1] + u)));
                            if (0 !== y) {
                                do {
                                    for (s = m - 1; 0 === l.bl_count[s];) s--;
                                    l.bl_count[s]--, l.bl_count[s + 1] += 2, l.bl_count[m]--, y -= 2
                                } while (y > 0);
                                for (s = m; 0 !== s; s--)
                                    for (t = l.bl_count[s]; 0 !== t;)(i = l.heap[--e]) > o || (a[2 * i + 1] !== s && (l.opt_len += (s - a[2 * i + 1]) * a[2 * i], a[2 * i + 1] = s), t--)
                            }
                        }(l, n), z(s, o, l.bl_count)
                }

                function V(l, n, e) {
                    var t, i, s = -1,
                        u = n[1],
                        r = 0,
                        a = 7,
                        o = 4;
                    for (0 === u && (a = 138, o = 3), n[2 * (e + 1) + 1] = 65535, t = 0; t <= e; t++) i = u, u = n[2 * (t + 1) + 1], ++r < a && i === u || (r < o ? l.bl_tree[2 * i] += r : 0 !== i ? (i !== s && l.bl_tree[2 * i]++, l.bl_tree[2 * f]++) : r <= 10 ? l.bl_tree[2 * g]++ : l.bl_tree[2 * m]++, r = 0, s = i, 0 === u ? (a = 138, o = 3) : i === u ? (a = 6, o = 3) : (a = 7, o = 4))
                }

                function j(l, n, e) {
                    var t, i, s = -1,
                        u = n[1],
                        r = 0,
                        a = 7,
                        o = 4;
                    for (0 === u && (a = 138, o = 3), t = 0; t <= e; t++)
                        if (i = u, u = n[2 * (t + 1) + 1], !(++r < a && i === u)) {
                            if (r < o)
                                do {
                                    R(l, i, l.bl_tree)
                                } while (0 != --r);
                            else 0 !== i ? (i !== s && (R(l, i, l.bl_tree), r--), R(l, f, l.bl_tree), N(l, r - 3, 2)) : r <= 10 ? (R(l, g, l.bl_tree), N(l, r - 3, 3)) : (R(l, m, l.bl_tree), N(l, r - 11, 7));
                            r = 0, s = i, 0 === u ? (a = 138, o = 3) : i === u ? (a = 6, o = 3) : (a = 7, o = 4)
                        }
                }
                i(A);
                var G = !1;

                function W(l, n, e, i) {
                    N(l, (s << 1) + (i ? 1 : 0), 3),
                        function (l, n, e, i) {
                            L(l), O(l, e), O(l, ~e), t.arraySet(l.pending_buf, l.window, n, e, l.pending), l.pending += e
                        }(l, n, e)
                }
                n._tr_init = function (l) {
                    G || (function () {
                        var l, n, e, t, i, s = new Array(d + 1);
                        for (e = 0, t = 0; t < 28; t++)
                            for (C[t] = e, l = 0; l < 1 << y[t]; l++) S[e++] = t;
                        for (S[e - 1] = t, i = 0, t = 0; t < 16; t++)
                            for (A[t] = i, l = 0; l < 1 << v[t]; l++) k[i++] = t;
                        for (i >>= 7; t < a; t++)
                            for (A[t] = i << 7, l = 0; l < 1 << v[t] - 7; l++) k[256 + i++] = t;
                        for (n = 0; n <= d; n++) s[n] = 0;
                        for (l = 0; l <= 143;) w[2 * l + 1] = 8, l++, s[8]++;
                        for (; l <= 255;) w[2 * l + 1] = 9, l++, s[9]++;
                        for (; l <= 279;) w[2 * l + 1] = 7, l++, s[7]++;
                        for (; l <= 287;) w[2 * l + 1] = 8, l++, s[8]++;
                        for (z(w, r + 1, s), l = 0; l < a; l++) x[2 * l + 1] = 5, x[2 * l] = B(l, 5);
                        I = new P(w, y, u + 1, r, d), T = new P(x, v, 0, a, d), E = new P(new Array(0), b, 0, o, 7)
                    }(), G = !0), l.l_desc = new D(l.dyn_ltree, I), l.d_desc = new D(l.dyn_dtree, T), l.bl_desc = new D(l.bl_tree, E), l.bi_buf = 0, l.bi_valid = 0, $(l)
                }, n._tr_stored_block = W, n._tr_flush_block = function (l, n, e, t) {
                    var i, s, r = 0;
                    l.level > 0 ? (2 === l.strm.data_type && (l.strm.data_type = function (l) {
                        var n, e = 4093624447;
                        for (n = 0; n <= 31; n++, e >>>= 1)
                            if (1 & e && 0 !== l.dyn_ltree[2 * n]) return 0;
                        if (0 !== l.dyn_ltree[18] || 0 !== l.dyn_ltree[20] || 0 !== l.dyn_ltree[26]) return 1;
                        for (n = 32; n < u; n++)
                            if (0 !== l.dyn_ltree[2 * n]) return 1;
                        return 0
                    }(l)), H(l, l.l_desc), H(l, l.d_desc), r = function (l) {
                        var n;
                        for (V(l, l.dyn_ltree, l.l_desc.max_code), V(l, l.dyn_dtree, l.d_desc.max_code), H(l, l.bl_desc), n = o - 1; n >= 3 && 0 === l.bl_tree[2 * _[n] + 1]; n--);
                        return l.opt_len += 3 * (n + 1) + 5 + 5 + 4, n
                    }(l), (s = l.static_len + 3 + 7 >>> 3) <= (i = l.opt_len + 3 + 7 >>> 3) && (i = s)) : i = s = e + 5, e + 4 <= i && -1 !== n ? W(l, n, e, t) : 4 === l.strategy || s === i ? (N(l, 2 + (t ? 1 : 0), 3), U(l, w, x)) : (N(l, 4 + (t ? 1 : 0), 3), function (l, n, e, t) {
                        var i;
                        for (N(l, n - 257, 5), N(l, e - 1, 5), N(l, t - 4, 4), i = 0; i < t; i++) N(l, l.bl_tree[2 * _[i] + 1], 3);
                        j(l, l.dyn_ltree, n - 1), j(l, l.dyn_dtree, e - 1)
                    }(l, l.l_desc.max_code + 1, l.d_desc.max_code + 1, r + 1), U(l, l.dyn_ltree, l.dyn_dtree)), $(l), t && L(l)
                }, n._tr_tally = function (l, n, e) {
                    return l.pending_buf[l.d_buf + 2 * l.last_lit] = n >>> 8 & 255, l.pending_buf[l.d_buf + 2 * l.last_lit + 1] = 255 & n, l.pending_buf[l.l_buf + l.last_lit] = 255 & e, l.last_lit++, 0 === n ? l.dyn_ltree[2 * e]++ : (l.matches++, n--, l.dyn_ltree[2 * (S[e] + u + 1)]++, l.dyn_dtree[2 * M(n)]++), l.last_lit === l.lit_bufsize - 1
                }, n._tr_align = function (l) {
                    N(l, 2, 3), R(l, p, w),
                        function (l) {
                            16 === l.bi_valid ? (O(l, l.bi_buf), l.bi_buf = 0, l.bi_valid = 0) : l.bi_valid >= 8 && (l.pending_buf[l.pending++] = 255 & l.bi_buf, l.bi_buf >>= 8, l.bi_valid -= 8)
                        }(l)
                }
            },
            E4JC: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), e("ETIr"), e("cv67"), e("K3mO"), e("OLod"), function () {
                    var l = t,
                        n = l.lib.StreamCipher,
                        e = [],
                        i = [],
                        s = [],
                        u = l.algo.Rabbit = n.extend({
                            _doReset: function () {
                                for (var l = this._key.words, n = this.cfg.iv, e = 0; e < 4; e++) l[e] = 16711935 & (l[e] << 8 | l[e] >>> 24) | 4278255360 & (l[e] << 24 | l[e] >>> 8);
                                var t = this._X = [l[0], l[3] << 16 | l[2] >>> 16, l[1], l[0] << 16 | l[3] >>> 16, l[2], l[1] << 16 | l[0] >>> 16, l[3], l[2] << 16 | l[1] >>> 16],
                                    i = this._C = [l[2] << 16 | l[2] >>> 16, 4294901760 & l[0] | 65535 & l[1], l[3] << 16 | l[3] >>> 16, 4294901760 & l[1] | 65535 & l[2], l[0] << 16 | l[0] >>> 16, 4294901760 & l[2] | 65535 & l[3], l[1] << 16 | l[1] >>> 16, 4294901760 & l[3] | 65535 & l[0]];
                                for (this._b = 0, e = 0; e < 4; e++) r.call(this);
                                for (e = 0; e < 8; e++) i[e] ^= t[e + 4 & 7];
                                if (n) {
                                    var s = n.words,
                                        u = s[0],
                                        a = s[1],
                                        o = 16711935 & (u << 8 | u >>> 24) | 4278255360 & (u << 24 | u >>> 8),
                                        c = 16711935 & (a << 8 | a >>> 24) | 4278255360 & (a << 24 | a >>> 8),
                                        d = o >>> 16 | 4294901760 & c,
                                        h = c << 16 | 65535 & o;
                                    for (i[0] ^= o, i[1] ^= d, i[2] ^= c, i[3] ^= h, i[4] ^= o, i[5] ^= d, i[6] ^= c, i[7] ^= h, e = 0; e < 4; e++) r.call(this)
                                }
                            },
                            _doProcessBlock: function (l, n) {
                                var t = this._X;
                                r.call(this), e[0] = t[0] ^ t[5] >>> 16 ^ t[3] << 16, e[1] = t[2] ^ t[7] >>> 16 ^ t[5] << 16, e[2] = t[4] ^ t[1] >>> 16 ^ t[7] << 16, e[3] = t[6] ^ t[3] >>> 16 ^ t[1] << 16;
                                for (var i = 0; i < 4; i++) e[i] = 16711935 & (e[i] << 8 | e[i] >>> 24) | 4278255360 & (e[i] << 24 | e[i] >>> 8), l[n + i] ^= e[i]
                            },
                            blockSize: 4,
                            ivSize: 2
                        });

                    function r() {
                        for (var l = this._X, n = this._C, e = 0; e < 8; e++) i[e] = n[e];
                        for (n[0] = n[0] + 1295307597 + this._b | 0, n[1] = n[1] + 3545052371 + (n[0] >>> 0 < i[0] >>> 0 ? 1 : 0) | 0, n[2] = n[2] + 886263092 + (n[1] >>> 0 < i[1] >>> 0 ? 1 : 0) | 0, n[3] = n[3] + 1295307597 + (n[2] >>> 0 < i[2] >>> 0 ? 1 : 0) | 0, n[4] = n[4] + 3545052371 + (n[3] >>> 0 < i[3] >>> 0 ? 1 : 0) | 0, n[5] = n[5] + 886263092 + (n[4] >>> 0 < i[4] >>> 0 ? 1 : 0) | 0, n[6] = n[6] + 1295307597 + (n[5] >>> 0 < i[5] >>> 0 ? 1 : 0) | 0, n[7] = n[7] + 3545052371 + (n[6] >>> 0 < i[6] >>> 0 ? 1 : 0) | 0, this._b = n[7] >>> 0 < i[7] >>> 0 ? 1 : 0, e = 0; e < 8; e++) {
                            var t = l[e] + n[e],
                                u = 65535 & t,
                                r = t >>> 16;
                            s[e] = ((u * u >>> 17) + u * r >>> 15) + r * r ^ ((4294901760 & t) * t | 0) + ((65535 & t) * t | 0)
                        }
                        l[0] = s[0] + (s[7] << 16 | s[7] >>> 16) + (s[6] << 16 | s[6] >>> 16) | 0, l[1] = s[1] + (s[0] << 8 | s[0] >>> 24) + s[7] | 0, l[2] = s[2] + (s[1] << 16 | s[1] >>> 16) + (s[0] << 16 | s[0] >>> 16) | 0, l[3] = s[3] + (s[2] << 8 | s[2] >>> 24) + s[1] | 0, l[4] = s[4] + (s[3] << 16 | s[3] >>> 16) + (s[2] << 16 | s[2] >>> 16) | 0, l[5] = s[5] + (s[4] << 8 | s[4] >>> 24) + s[3] | 0, l[6] = s[6] + (s[5] << 16 | s[5] >>> 16) + (s[4] << 16 | s[4] >>> 16) | 0, l[7] = s[7] + (s[6] << 8 | s[6] >>> 24) + s[5] | 0
                    }
                    l.Rabbit = n._createHelper(u)
                }(), t.Rabbit)
            },
            ELcG: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), function (l) {
                    var n = t,
                        e = n.lib,
                        i = e.WordArray,
                        s = e.Hasher,
                        u = n.algo,
                        r = i.create([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8, 3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12, 1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2, 4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13]),
                        a = i.create([5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12, 6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2, 15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13, 8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14, 12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11]),
                        o = i.create([11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8, 7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12, 11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5, 11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12, 9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6]),
                        c = i.create([8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6, 9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11, 9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5, 15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8, 8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11]),
                        d = i.create([0, 1518500249, 1859775393, 2400959708, 2840853838]),
                        h = i.create([1352829926, 1548603684, 1836072691, 2053994217, 0]),
                        p = u.RIPEMD160 = s.extend({
                            _doReset: function () {
                                this._hash = i.create([1732584193, 4023233417, 2562383102, 271733878, 3285377520])
                            },
                            _doProcessBlock: function (l, n) {
                                for (var e = 0; e < 16; e++) {
                                    var t = n + e,
                                        i = l[t];
                                    l[t] = 16711935 & (i << 8 | i >>> 24) | 4278255360 & (i << 24 | i >>> 8)
                                }
                                var s, u, p, _, w, x, k, S, C, I, T, E = this._hash.words,
                                    A = d.words,
                                    P = h.words,
                                    D = r.words,
                                    M = a.words,
                                    O = o.words,
                                    N = c.words;
                                for (x = s = E[0], k = u = E[1], S = p = E[2], C = _ = E[3], I = w = E[4], e = 0; e < 80; e += 1) T = s + l[n + D[e]] | 0, T += e < 16 ? f(u, p, _) + A[0] : e < 32 ? g(u, p, _) + A[1] : e < 48 ? m(u, p, _) + A[2] : e < 64 ? y(u, p, _) + A[3] : v(u, p, _) + A[4], T = (T = b(T |= 0, O[e])) + w | 0, s = w, w = _, _ = b(p, 10), p = u, u = T, T = x + l[n + M[e]] | 0, T += e < 16 ? v(k, S, C) + P[0] : e < 32 ? y(k, S, C) + P[1] : e < 48 ? m(k, S, C) + P[2] : e < 64 ? g(k, S, C) + P[3] : f(k, S, C) + P[4], T = (T = b(T |= 0, N[e])) + I | 0, x = I, I = C, C = b(S, 10), S = k, k = T;
                                T = E[1] + p + C | 0, E[1] = E[2] + _ + I | 0, E[2] = E[3] + w + x | 0, E[3] = E[4] + s + k | 0, E[4] = E[0] + u + S | 0, E[0] = T
                            },
                            _doFinalize: function () {
                                var l = this._data,
                                    n = l.words,
                                    e = 8 * this._nDataBytes,
                                    t = 8 * l.sigBytes;
                                n[t >>> 5] |= 128 << 24 - t % 32, n[14 + (t + 64 >>> 9 << 4)] = 16711935 & (e << 8 | e >>> 24) | 4278255360 & (e << 24 | e >>> 8), l.sigBytes = 4 * (n.length + 1), this._process();
                                for (var i = this._hash, s = i.words, u = 0; u < 5; u++) {
                                    var r = s[u];
                                    s[u] = 16711935 & (r << 8 | r >>> 24) | 4278255360 & (r << 24 | r >>> 8)
                                }
                                return i
                            },
                            clone: function () {
                                var l = s.clone.call(this);
                                return l._hash = this._hash.clone(), l
                            }
                        });

                    function f(l, n, e) {
                        return l ^ n ^ e
                    }

                    function g(l, n, e) {
                        return l & n | ~l & e
                    }

                    function m(l, n, e) {
                        return (l | ~n) ^ e
                    }

                    function y(l, n, e) {
                        return l & e | n & ~e
                    }

                    function v(l, n, e) {
                        return l ^ (n | ~e)
                    }

                    function b(l, n) {
                        return l << n | l >>> 32 - n
                    }
                    n.RIPEMD160 = s._createHelper(p), n.HmacRIPEMD160 = s._createHmacHelper(p)
                }(Math), t.RIPEMD160)
            },
            ETIr: function (l, n, e) {
                var t, i;
                l.exports = (i = e("Ib8C"), t = i.lib.WordArray, i.enc.Base64 = {
                    stringify: function (l) {
                        var n = l.words,
                            e = l.sigBytes,
                            t = this._map;
                        l.clamp();
                        for (var i = [], s = 0; s < e; s += 3)
                            for (var u = (n[s >>> 2] >>> 24 - s % 4 * 8 & 255) << 16 | (n[s + 1 >>> 2] >>> 24 - (s + 1) % 4 * 8 & 255) << 8 | n[s + 2 >>> 2] >>> 24 - (s + 2) % 4 * 8 & 255, r = 0; r < 4 && s + .75 * r < e; r++) i.push(t.charAt(u >>> 6 * (3 - r) & 63));
                        var a = t.charAt(64);
                        if (a)
                            for (; i.length % 4;) i.push(a);
                        return i.join("")
                    },
                    parse: function (l) {
                        var n = l.length,
                            e = this._map,
                            i = this._reverseMap;
                        if (!i) {
                            i = this._reverseMap = [];
                            for (var s = 0; s < e.length; s++) i[e.charCodeAt(s)] = s
                        }
                        var u = e.charAt(64);
                        if (u) {
                            var r = l.indexOf(u); - 1 !== r && (n = r)
                        }
                        return function (l, n, e) {
                            for (var i = [], s = 0, u = 0; u < n; u++)
                                if (u % 4) {
                                    var r = e[l.charCodeAt(u - 1)] << u % 4 * 2,
                                        a = e[l.charCodeAt(u)] >>> 6 - u % 4 * 2;
                                    i[s >>> 2] |= (r | a) << 24 - s % 4 * 8, s++
                                } return t.create(i, s)
                        }(l, n, i)
                    },
                    _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
                }, i.enc.Base64)
            },
            "F+F2": function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), function () {
                    if ("function" == typeof ArrayBuffer) {
                        var l = t.lib.WordArray,
                            n = l.init;
                        (l.init = function (l) {
                            if (l instanceof ArrayBuffer && (l = new Uint8Array(l)), (l instanceof Int8Array || "undefined" != typeof Uint8ClampedArray && l instanceof Uint8ClampedArray || l instanceof Int16Array || l instanceof Uint16Array || l instanceof Int32Array || l instanceof Uint32Array || l instanceof Float32Array || l instanceof Float64Array) && (l = new Uint8Array(l.buffer, l.byteOffset, l.byteLength)), l instanceof Uint8Array) {
                                for (var e = l.byteLength, t = [], i = 0; i < e; i++) t[i >>> 2] |= l[i] << 24 - i % 4 * 8;
                                n.call(this, t, e)
                            } else n.apply(this, arguments)
                        }).prototype = l
                    }
                }(), t.lib.WordArray)
            },
            GRuw: function (l, n, e) {
                var t, i, s, u, r, a;
                l.exports = (a = e("Ib8C"), e("lPiR"), i = (t = a).lib.WordArray, r = (s = t.algo).SHA224 = (u = s.SHA256).extend({
                    _doReset: function () {
                        this._hash = new i.init([3238371032, 914150663, 812702999, 4144912697, 4290775857, 1750603025, 1694076839, 3204075428])
                    },
                    _doFinalize: function () {
                        var l = u._doFinalize.call(this);
                        return l.sigBytes -= 4, l
                    }
                }), t.SHA224 = u._createHelper(r), t.HmacSHA224 = u._createHmacHelper(r), a.SHA224)
            },
            HXk2: function (l, n, e) {
                var t, i;
                void 0 === (i = "function" == typeof (t = function () {
                    "use strict";
                    var n = "object" == typeof window && window.window === window ? window : "object" == typeof self && self.self === self ? self : "object" == typeof global && global.global === global ? global : void 0;

                    function e(l, n, e) {
                        var t = new XMLHttpRequest;
                        t.open("GET", l), t.responseType = "blob", t.onload = function () {
                            s(t.response, n, e)
                        }, t.onerror = function () {
                            console.error("could not download file")
                        }, t.send()
                    }

                    function t(l) {
                        var n = new XMLHttpRequest;
                        n.open("HEAD", l, !1);
                        try {
                            n.send()
                        } catch (e) {}
                        return n.status >= 200 && n.status <= 299
                    }

                    function i(l) {
                        try {
                            l.dispatchEvent(new MouseEvent("click"))
                        } catch (e) {
                            var n = document.createEvent("MouseEvents");
                            n.initMouseEvent("click", !0, !0, window, 0, 0, 0, 80, 20, !1, !1, !1, !1, 0, null), l.dispatchEvent(n)
                        }
                    }
                    var s = n.saveAs || ("object" != typeof window || window !== n ? function () {} : "download" in HTMLAnchorElement.prototype ? function (l, s, u) {
                        var r = n.URL || n.webkitURL,
                            a = document.createElement("a");
                        a.download = s = s || l.name || "download", a.rel = "noopener", "string" == typeof l ? (a.href = l, a.origin !== location.origin ? t(a.href) ? e(l, s, u) : i(a, a.target = "_blank") : i(a)) : (a.href = r.createObjectURL(l), setTimeout((function () {
                            r.revokeObjectURL(a.href)
                        }), 4e4), setTimeout((function () {
                            i(a)
                        }), 0))
                    } : "msSaveOrOpenBlob" in navigator ? function (l, n, s) {
                        if (n = n || l.name || "download", "string" == typeof l)
                            if (t(l)) e(l, n, s);
                            else {
                                var u = document.createElement("a");
                                u.href = l, u.target = "_blank", setTimeout((function () {
                                    i(u)
                                }))
                            }
                        else navigator.msSaveOrOpenBlob(function (l, n) {
                            return void 0 === n ? n = {
                                autoBom: !1
                            } : "object" != typeof n && (console.warn("Deprecated: Expected third argument to be a object"), n = {
                                autoBom: !n
                            }), n.autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type) ? new Blob([String.fromCharCode(65279), l], {
                                type: l.type
                            }) : l
                        }(l, s), n)
                    } : function (l, t, i, s) {
                        if ((s = s || open("", "_blank")) && (s.document.title = s.document.body.innerText = "downloading..."), "string" == typeof l) return e(l, t, i);
                        var u = "application/octet-stream" === l.type,
                            r = /constructor/i.test(n.HTMLElement) || n.safari,
                            a = /CriOS\/[\d]+/.test(navigator.userAgent);
                        if ((a || u && r) && "object" == typeof FileReader) {
                            var o = new FileReader;
                            o.onloadend = function () {
                                var l = o.result;
                                l = a ? l : l.replace(/^data:[^;]*;/, "data:attachment/file;"), s ? s.location.href = l : location = l, s = null
                            }, o.readAsDataURL(l)
                        } else {
                            var c = n.URL || n.webkitURL,
                                d = c.createObjectURL(l);
                            s ? s.location = d : location.href = d, s = null, setTimeout((function () {
                                c.revokeObjectURL(d)
                            }), 4e4)
                        }
                    });
                    n.saveAs = s.saveAs = s, l.exports = s
                }) ? t.apply(n, []) : t) || (l.exports = i)
            },
            Ib8C: function (l, n, e) {
                var t;
                l.exports = t = t || function (l, n) {
                    var e = Object.create || function () {
                            function l() {}
                            return function (n) {
                                var e;
                                return l.prototype = n, e = new l, l.prototype = null, e
                            }
                        }(),
                        t = {},
                        i = t.lib = {},
                        s = i.Base = {
                            extend: function (l) {
                                var n = e(this);
                                return l && n.mixIn(l), n.hasOwnProperty("init") && this.init !== n.init || (n.init = function () {
                                    n.$super.init.apply(this, arguments)
                                }), n.init.prototype = n, n.$super = this, n
                            },
                            create: function () {
                                var l = this.extend();
                                return l.init.apply(l, arguments), l
                            },
                            init: function () {},
                            mixIn: function (l) {
                                for (var n in l) l.hasOwnProperty(n) && (this[n] = l[n]);
                                l.hasOwnProperty("toString") && (this.toString = l.toString)
                            },
                            clone: function () {
                                return this.init.prototype.extend(this)
                            }
                        },
                        u = i.WordArray = s.extend({
                            init: function (l, n) {
                                l = this.words = l || [], this.sigBytes = null != n ? n : 4 * l.length
                            },
                            toString: function (l) {
                                return (l || a).stringify(this)
                            },
                            concat: function (l) {
                                var n = this.words,
                                    e = l.words,
                                    t = this.sigBytes,
                                    i = l.sigBytes;
                                if (this.clamp(), t % 4)
                                    for (var s = 0; s < i; s++) n[t + s >>> 2] |= (e[s >>> 2] >>> 24 - s % 4 * 8 & 255) << 24 - (t + s) % 4 * 8;
                                else
                                    for (s = 0; s < i; s += 4) n[t + s >>> 2] = e[s >>> 2];
                                return this.sigBytes += i, this
                            },
                            clamp: function () {
                                var n = this.words,
                                    e = this.sigBytes;
                                n[e >>> 2] &= 4294967295 << 32 - e % 4 * 8, n.length = l.ceil(e / 4)
                            },
                            clone: function () {
                                var l = s.clone.call(this);
                                return l.words = this.words.slice(0), l
                            },
                            random: function (n) {
                                for (var e, t = [], i = function (n) {
                                        n = n;
                                        var e = 987654321,
                                            t = 4294967295;
                                        return function () {
                                            var i = ((e = 36969 * (65535 & e) + (e >> 16) & t) << 16) + (n = 18e3 * (65535 & n) + (n >> 16) & t) & t;
                                            return i /= 4294967296, (i += .5) * (l.random() > .5 ? 1 : -1)
                                        }
                                    }, s = 0; s < n; s += 4) {
                                    var r = i(4294967296 * (e || l.random()));
                                    e = 987654071 * r(), t.push(4294967296 * r() | 0)
                                }
                                return new u.init(t, n)
                            }
                        }),
                        r = t.enc = {},
                        a = r.Hex = {
                            stringify: function (l) {
                                for (var n = l.words, e = l.sigBytes, t = [], i = 0; i < e; i++) {
                                    var s = n[i >>> 2] >>> 24 - i % 4 * 8 & 255;
                                    t.push((s >>> 4).toString(16)), t.push((15 & s).toString(16))
                                }
                                return t.join("")
                            },
                            parse: function (l) {
                                for (var n = l.length, e = [], t = 0; t < n; t += 2) e[t >>> 3] |= parseInt(l.substr(t, 2), 16) << 24 - t % 8 * 4;
                                return new u.init(e, n / 2)
                            }
                        },
                        o = r.Latin1 = {
                            stringify: function (l) {
                                for (var n = l.words, e = l.sigBytes, t = [], i = 0; i < e; i++) t.push(String.fromCharCode(n[i >>> 2] >>> 24 - i % 4 * 8 & 255));
                                return t.join("")
                            },
                            parse: function (l) {
                                for (var n = l.length, e = [], t = 0; t < n; t++) e[t >>> 2] |= (255 & l.charCodeAt(t)) << 24 - t % 4 * 8;
                                return new u.init(e, n)
                            }
                        },
                        c = r.Utf8 = {
                            stringify: function (l) {
                                try {
                                    return decodeURIComponent(escape(o.stringify(l)))
                                } catch (n) {
                                    throw new Error("Malformed UTF-8 data")
                                }
                            },
                            parse: function (l) {
                                return o.parse(unescape(encodeURIComponent(l)))
                            }
                        },
                        d = i.BufferedBlockAlgorithm = s.extend({
                            reset: function () {
                                this._data = new u.init, this._nDataBytes = 0
                            },
                            _append: function (l) {
                                "string" == typeof l && (l = c.parse(l)), this._data.concat(l), this._nDataBytes += l.sigBytes
                            },
                            _process: function (n) {
                                var e = this._data,
                                    t = e.words,
                                    i = e.sigBytes,
                                    s = this.blockSize,
                                    r = i / (4 * s),
                                    a = (r = n ? l.ceil(r) : l.max((0 | r) - this._minBufferSize, 0)) * s,
                                    o = l.min(4 * a, i);
                                if (a) {
                                    for (var c = 0; c < a; c += s) this._doProcessBlock(t, c);
                                    var d = t.splice(0, a);
                                    e.sigBytes -= o
                                }
                                return new u.init(d, o)
                            },
                            clone: function () {
                                var l = s.clone.call(this);
                                return l._data = this._data.clone(), l
                            },
                            _minBufferSize: 0
                        }),
                        h = (i.Hasher = d.extend({
                            cfg: s.extend(),
                            init: function (l) {
                                this.cfg = this.cfg.extend(l), this.reset()
                            },
                            reset: function () {
                                d.reset.call(this), this._doReset()
                            },
                            update: function (l) {
                                return this._append(l), this._process(), this
                            },
                            finalize: function (l) {
                                return l && this._append(l), this._doFinalize()
                            },
                            blockSize: 16,
                            _createHelper: function (l) {
                                return function (n, e) {
                                    return new l.init(e).finalize(n)
                                }
                            },
                            _createHmacHelper: function (l) {
                                return function (n, e) {
                                    return new h.HMAC.init(l, e).finalize(n)
                                }
                            }
                        }), t.algo = {});
                    return t
                }(Math)
            },
            K3mO: function (l, n, e) {
                var t, i, s, u, r, a, o;
                l.exports = (o = e("Ib8C"), e("3y9D"), e("WYAk"), u = (i = (t = o).lib).WordArray, a = (r = t.algo).EvpKDF = (s = i.Base).extend({
                    cfg: s.extend({
                        keySize: 4,
                        hasher: r.MD5,
                        iterations: 1
                    }),
                    init: function (l) {
                        this.cfg = this.cfg.extend(l)
                    },
                    compute: function (l, n) {
                        for (var e = this.cfg, t = e.hasher.create(), i = u.create(), s = i.words, r = e.keySize, a = e.iterations; s.length < r;) {
                            o && t.update(o);
                            var o = t.update(l).finalize(n);
                            t.reset();
                            for (var c = 1; c < a; c++) o = t.finalize(o), t.reset();
                            i.concat(o)
                        }
                        return i.sigBytes = 4 * r, i
                    }
                }), t.EvpKDF = function (l, n, e) {
                    return a.create(e).compute(l, n)
                }, o.EvpKDF)
            },
            KmYQ: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), e("OLod"), t.pad.ZeroPadding = {
                    pad: function (l, n) {
                        var e = 4 * n;
                        l.clamp(), l.sigBytes += e - (l.sigBytes % e || e)
                    },
                    unpad: function (l) {
                        for (var n = l.words, e = l.sigBytes - 1; !(n[e >>> 2] >>> 24 - e % 4 * 8 & 255);) e--;
                        l.sigBytes = e + 1
                    }
                }, t.pad.ZeroPadding)
            },
            LOvY: function (l, n, e) {
                "use strict";
                l.exports = {
                    Z_NO_FLUSH: 0,
                    Z_PARTIAL_FLUSH: 1,
                    Z_SYNC_FLUSH: 2,
                    Z_FULL_FLUSH: 3,
                    Z_FINISH: 4,
                    Z_BLOCK: 5,
                    Z_TREES: 6,
                    Z_OK: 0,
                    Z_STREAM_END: 1,
                    Z_NEED_DICT: 2,
                    Z_ERRNO: -1,
                    Z_STREAM_ERROR: -2,
                    Z_DATA_ERROR: -3,
                    Z_BUF_ERROR: -5,
                    Z_NO_COMPRESSION: 0,
                    Z_BEST_SPEED: 1,
                    Z_BEST_COMPRESSION: 9,
                    Z_DEFAULT_COMPRESSION: -1,
                    Z_FILTERED: 1,
                    Z_HUFFMAN_ONLY: 2,
                    Z_RLE: 3,
                    Z_FIXED: 4,
                    Z_DEFAULT_STRATEGY: 0,
                    Z_BINARY: 0,
                    Z_TEXT: 1,
                    Z_UNKNOWN: 2,
                    Z_DEFLATED: 8
                }
            },
            MlIO: function (l, n, e) {
                var t, i, s, u, r;
                l.exports = (r = e("Ib8C"), i = (t = r.lib).Base, s = t.WordArray, (u = r.x64 = {}).Word = i.extend({
                    init: function (l, n) {
                        this.high = l, this.low = n
                    }
                }), u.WordArray = i.extend({
                    init: function (l, n) {
                        l = this.words = l || [], this.sigBytes = null != n ? n : 8 * l.length
                    },
                    toX32: function () {
                        for (var l = this.words, n = l.length, e = [], t = 0; t < n; t++) {
                            var i = l[t];
                            e.push(i.high), e.push(i.low)
                        }
                        return s.create(e, this.sigBytes)
                    },
                    clone: function () {
                        for (var l = i.clone.call(this), n = l.words = this.words.slice(0), e = n.length, t = 0; t < e; t++) n[t] = n[t].clone();
                        return l
                    }
                }), r)
            },
            NFKh: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), e("MlIO"), e("F+F2"), e("qM6L"), e("ETIr"), e("cv67"), e("3y9D"), e("lPiR"), e("GRuw"), e("1uat"), e("uGsb"), e("5hvy"), e("ELcG"), e("WYAk"), e("e7zE"), e("K3mO"), e("OLod"), e("ALsQ"), e("9OqN"), e("qu8F"), e("S6kV"), e("gb/T"), e("qBft"), e("oRuE"), e("jO9C"), e("KmYQ"), e("uGxW"), e("bQjk"), e("wZgz"), e("pA7S"), e("w7YG"), e("E4JC"), e("PVpz"), t)
            },
            OLod: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), e("K3mO"), void(t.lib.Cipher || function (l) {
                    var n = t,
                        e = n.lib,
                        i = e.Base,
                        s = e.WordArray,
                        u = e.BufferedBlockAlgorithm,
                        r = n.enc.Base64,
                        a = n.algo.EvpKDF,
                        o = e.Cipher = u.extend({
                            cfg: i.extend(),
                            createEncryptor: function (l, n) {
                                return this.create(this._ENC_XFORM_MODE, l, n)
                            },
                            createDecryptor: function (l, n) {
                                return this.create(this._DEC_XFORM_MODE, l, n)
                            },
                            init: function (l, n, e) {
                                this.cfg = this.cfg.extend(e), this._xformMode = l, this._key = n, this.reset()
                            },
                            reset: function () {
                                u.reset.call(this), this._doReset()
                            },
                            process: function (l) {
                                return this._append(l), this._process()
                            },
                            finalize: function (l) {
                                return l && this._append(l), this._doFinalize()
                            },
                            keySize: 4,
                            ivSize: 4,
                            _ENC_XFORM_MODE: 1,
                            _DEC_XFORM_MODE: 2,
                            _createHelper: function () {
                                function l(l) {
                                    return "string" == typeof l ? v : m
                                }
                                return function (n) {
                                    return {
                                        encrypt: function (e, t, i) {
                                            return l(t).encrypt(n, e, t, i)
                                        },
                                        decrypt: function (e, t, i) {
                                            return l(t).decrypt(n, e, t, i)
                                        }
                                    }
                                }
                            }()
                        }),
                        c = (e.StreamCipher = o.extend({
                            _doFinalize: function () {
                                return this._process(!0)
                            },
                            blockSize: 1
                        }), n.mode = {}),
                        d = e.BlockCipherMode = i.extend({
                            createEncryptor: function (l, n) {
                                return this.Encryptor.create(l, n)
                            },
                            createDecryptor: function (l, n) {
                                return this.Decryptor.create(l, n)
                            },
                            init: function (l, n) {
                                this._cipher = l, this._iv = n
                            }
                        }),
                        h = c.CBC = function () {
                            var n = d.extend();

                            function e(n, e, t) {
                                var i = this._iv;
                                if (i) {
                                    var s = i;
                                    this._iv = l
                                } else s = this._prevBlock;
                                for (var u = 0; u < t; u++) n[e + u] ^= s[u]
                            }
                            return n.Encryptor = n.extend({
                                processBlock: function (l, n) {
                                    var t = this._cipher,
                                        i = t.blockSize;
                                    e.call(this, l, n, i), t.encryptBlock(l, n), this._prevBlock = l.slice(n, n + i)
                                }
                            }), n.Decryptor = n.extend({
                                processBlock: function (l, n) {
                                    var t = this._cipher,
                                        i = t.blockSize,
                                        s = l.slice(n, n + i);
                                    t.decryptBlock(l, n), e.call(this, l, n, i), this._prevBlock = s
                                }
                            }), n
                        }(),
                        p = (n.pad = {}).Pkcs7 = {
                            pad: function (l, n) {
                                for (var e = 4 * n, t = e - l.sigBytes % e, i = t << 24 | t << 16 | t << 8 | t, u = [], r = 0; r < t; r += 4) u.push(i);
                                var a = s.create(u, t);
                                l.concat(a)
                            },
                            unpad: function (l) {
                                l.sigBytes -= 255 & l.words[l.sigBytes - 1 >>> 2]
                            }
                        },
                        f = (e.BlockCipher = o.extend({
                            cfg: o.cfg.extend({
                                mode: h,
                                padding: p
                            }),
                            reset: function () {
                                o.reset.call(this);
                                var l = this.cfg,
                                    n = l.iv,
                                    e = l.mode;
                                if (this._xformMode == this._ENC_XFORM_MODE) var t = e.createEncryptor;
                                else t = e.createDecryptor, this._minBufferSize = 1;
                                this._mode && this._mode.__creator == t ? this._mode.init(this, n && n.words) : (this._mode = t.call(e, this, n && n.words), this._mode.__creator = t)
                            },
                            _doProcessBlock: function (l, n) {
                                this._mode.processBlock(l, n)
                            },
                            _doFinalize: function () {
                                var l = this.cfg.padding;
                                if (this._xformMode == this._ENC_XFORM_MODE) {
                                    l.pad(this._data, this.blockSize);
                                    var n = this._process(!0)
                                } else n = this._process(!0), l.unpad(n);
                                return n
                            },
                            blockSize: 4
                        }), e.CipherParams = i.extend({
                            init: function (l) {
                                this.mixIn(l)
                            },
                            toString: function (l) {
                                return (l || this.formatter).stringify(this)
                            }
                        })),
                        g = (n.format = {}).OpenSSL = {
                            stringify: function (l) {
                                var n = l.ciphertext,
                                    e = l.salt;
                                if (e) var t = s.create([1398893684, 1701076831]).concat(e).concat(n);
                                else t = n;
                                return t.toString(r)
                            },
                            parse: function (l) {
                                var n = r.parse(l),
                                    e = n.words;
                                if (1398893684 == e[0] && 1701076831 == e[1]) {
                                    var t = s.create(e.slice(2, 4));
                                    e.splice(0, 4), n.sigBytes -= 16
                                }
                                return f.create({
                                    ciphertext: n,
                                    salt: t
                                })
                            }
                        },
                        m = e.SerializableCipher = i.extend({
                            cfg: i.extend({
                                format: g
                            }),
                            encrypt: function (l, n, e, t) {
                                t = this.cfg.extend(t);
                                var i = l.createEncryptor(e, t),
                                    s = i.finalize(n),
                                    u = i.cfg;
                                return f.create({
                                    ciphertext: s,
                                    key: e,
                                    iv: u.iv,
                                    algorithm: l,
                                    mode: u.mode,
                                    padding: u.padding,
                                    blockSize: l.blockSize,
                                    formatter: t.format
                                })
                            },
                            decrypt: function (l, n, e, t) {
                                return t = this.cfg.extend(t), n = this._parse(n, t.format), l.createDecryptor(e, t).finalize(n.ciphertext)
                            },
                            _parse: function (l, n) {
                                return "string" == typeof l ? n.parse(l, this) : l
                            }
                        }),
                        y = (n.kdf = {}).OpenSSL = {
                            execute: function (l, n, e, t) {
                                t || (t = s.random(8));
                                var i = a.create({
                                        keySize: n + e
                                    }).compute(l, t),
                                    u = s.create(i.words.slice(n), 4 * e);
                                return i.sigBytes = 4 * n, f.create({
                                    key: i,
                                    iv: u,
                                    salt: t
                                })
                            }
                        },
                        v = e.PasswordBasedCipher = m.extend({
                            cfg: m.cfg.extend({
                                kdf: y
                            }),
                            encrypt: function (l, n, e, t) {
                                var i = (t = this.cfg.extend(t)).kdf.execute(e, l.keySize, l.ivSize);
                                t.iv = i.iv;
                                var s = m.encrypt.call(this, l, n, i.key, t);
                                return s.mixIn(i), s
                            },
                            decrypt: function (l, n, e, t) {
                                t = this.cfg.extend(t), n = this._parse(n, t.format);
                                var i = t.kdf.execute(e, l.keySize, l.ivSize, n.salt);
                                return t.iv = i.iv, m.decrypt.call(this, l, n, i.key, t)
                            }
                        })
                }()))
            },
            PVpz: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), e("ETIr"), e("cv67"), e("K3mO"), e("OLod"), function () {
                    var l = t,
                        n = l.lib.StreamCipher,
                        e = [],
                        i = [],
                        s = [],
                        u = l.algo.RabbitLegacy = n.extend({
                            _doReset: function () {
                                var l = this._key.words,
                                    n = this.cfg.iv,
                                    e = this._X = [l[0], l[3] << 16 | l[2] >>> 16, l[1], l[0] << 16 | l[3] >>> 16, l[2], l[1] << 16 | l[0] >>> 16, l[3], l[2] << 16 | l[1] >>> 16],
                                    t = this._C = [l[2] << 16 | l[2] >>> 16, 4294901760 & l[0] | 65535 & l[1], l[3] << 16 | l[3] >>> 16, 4294901760 & l[1] | 65535 & l[2], l[0] << 16 | l[0] >>> 16, 4294901760 & l[2] | 65535 & l[3], l[1] << 16 | l[1] >>> 16, 4294901760 & l[3] | 65535 & l[0]];
                                this._b = 0;
                                for (var i = 0; i < 4; i++) r.call(this);
                                for (i = 0; i < 8; i++) t[i] ^= e[i + 4 & 7];
                                if (n) {
                                    var s = n.words,
                                        u = s[0],
                                        a = s[1],
                                        o = 16711935 & (u << 8 | u >>> 24) | 4278255360 & (u << 24 | u >>> 8),
                                        c = 16711935 & (a << 8 | a >>> 24) | 4278255360 & (a << 24 | a >>> 8),
                                        d = o >>> 16 | 4294901760 & c,
                                        h = c << 16 | 65535 & o;
                                    for (t[0] ^= o, t[1] ^= d, t[2] ^= c, t[3] ^= h, t[4] ^= o, t[5] ^= d, t[6] ^= c, t[7] ^= h, i = 0; i < 4; i++) r.call(this)
                                }
                            },
                            _doProcessBlock: function (l, n) {
                                var t = this._X;
                                r.call(this), e[0] = t[0] ^ t[5] >>> 16 ^ t[3] << 16, e[1] = t[2] ^ t[7] >>> 16 ^ t[5] << 16, e[2] = t[4] ^ t[1] >>> 16 ^ t[7] << 16, e[3] = t[6] ^ t[3] >>> 16 ^ t[1] << 16;
                                for (var i = 0; i < 4; i++) e[i] = 16711935 & (e[i] << 8 | e[i] >>> 24) | 4278255360 & (e[i] << 24 | e[i] >>> 8), l[n + i] ^= e[i]
                            },
                            blockSize: 4,
                            ivSize: 2
                        });

                    function r() {
                        for (var l = this._X, n = this._C, e = 0; e < 8; e++) i[e] = n[e];
                        for (n[0] = n[0] + 1295307597 + this._b | 0, n[1] = n[1] + 3545052371 + (n[0] >>> 0 < i[0] >>> 0 ? 1 : 0) | 0, n[2] = n[2] + 886263092 + (n[1] >>> 0 < i[1] >>> 0 ? 1 : 0) | 0, n[3] = n[3] + 1295307597 + (n[2] >>> 0 < i[2] >>> 0 ? 1 : 0) | 0, n[4] = n[4] + 3545052371 + (n[3] >>> 0 < i[3] >>> 0 ? 1 : 0) | 0, n[5] = n[5] + 886263092 + (n[4] >>> 0 < i[4] >>> 0 ? 1 : 0) | 0, n[6] = n[6] + 1295307597 + (n[5] >>> 0 < i[5] >>> 0 ? 1 : 0) | 0, n[7] = n[7] + 3545052371 + (n[6] >>> 0 < i[6] >>> 0 ? 1 : 0) | 0, this._b = n[7] >>> 0 < i[7] >>> 0 ? 1 : 0, e = 0; e < 8; e++) {
                            var t = l[e] + n[e],
                                u = 65535 & t,
                                r = t >>> 16;
                            s[e] = ((u * u >>> 17) + u * r >>> 15) + r * r ^ ((4294901760 & t) * t | 0) + ((65535 & t) * t | 0)
                        }
                        l[0] = s[0] + (s[7] << 16 | s[7] >>> 16) + (s[6] << 16 | s[6] >>> 16) | 0, l[1] = s[1] + (s[0] << 8 | s[0] >>> 24) + s[7] | 0, l[2] = s[2] + (s[1] << 16 | s[1] >>> 16) + (s[0] << 16 | s[0] >>> 16) | 0, l[3] = s[3] + (s[2] << 8 | s[2] >>> 24) + s[1] | 0, l[4] = s[4] + (s[3] << 16 | s[3] >>> 16) + (s[2] << 16 | s[2] >>> 16) | 0, l[5] = s[5] + (s[4] << 8 | s[4] >>> 24) + s[3] | 0, l[6] = s[6] + (s[5] << 16 | s[5] >>> 16) + (s[4] << 16 | s[4] >>> 16) | 0, l[7] = s[7] + (s[6] << 8 | s[6] >>> 24) + s[5] | 0
                    }
                    l.RabbitLegacy = n._createHelper(u)
                }(), t.RabbitLegacy)
            },
            QSbz: function (l, n, e) {
                "use strict";
                var t = e("oXfm"),
                    i = e("vn/o"),
                    s = e("eydS"),
                    u = e("Tcbo"),
                    r = e("iTZm"),
                    a = Object.prototype.toString,
                    o = 0,
                    c = -1,
                    d = 0,
                    h = 8;

                function p(l) {
                    if (!(this instanceof p)) return new p(l);
                    this.options = i.assign({
                        level: c,
                        method: h,
                        chunkSize: 16384,
                        windowBits: 15,
                        memLevel: 8,
                        strategy: d,
                        to: ""
                    }, l || {});
                    var n = this.options;
                    n.raw && n.windowBits > 0 ? n.windowBits = -n.windowBits : n.gzip && n.windowBits > 0 && n.windowBits < 16 && (n.windowBits += 16), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new r, this.strm.avail_out = 0;
                    var e = t.deflateInit2(this.strm, n.level, n.method, n.windowBits, n.memLevel, n.strategy);
                    if (e !== o) throw new Error(u[e]);
                    if (n.header && t.deflateSetHeader(this.strm, n.header), n.dictionary) {
                        var f;
                        if (f = "string" == typeof n.dictionary ? s.string2buf(n.dictionary) : "[object ArrayBuffer]" === a.call(n.dictionary) ? new Uint8Array(n.dictionary) : n.dictionary, (e = t.deflateSetDictionary(this.strm, f)) !== o) throw new Error(u[e]);
                        this._dict_set = !0
                    }
                }

                function f(l, n) {
                    var e = new p(n);
                    if (e.push(l, !0), e.err) throw e.msg || u[e.err];
                    return e.result
                }
                p.prototype.push = function (l, n) {
                    var e, u, r = this.strm,
                        c = this.options.chunkSize;
                    if (this.ended) return !1;
                    u = n === ~~n ? n : !0 === n ? 4 : 0, r.input = "string" == typeof l ? s.string2buf(l) : "[object ArrayBuffer]" === a.call(l) ? new Uint8Array(l) : l, r.next_in = 0, r.avail_in = r.input.length;
                    do {
                        if (0 === r.avail_out && (r.output = new i.Buf8(c), r.next_out = 0, r.avail_out = c), 1 !== (e = t.deflate(r, u)) && e !== o) return this.onEnd(e), this.ended = !0, !1;
                        0 !== r.avail_out && (0 !== r.avail_in || 4 !== u && 2 !== u) || this.onData("string" === this.options.to ? s.buf2binstring(i.shrinkBuf(r.output, r.next_out)) : i.shrinkBuf(r.output, r.next_out))
                    } while ((r.avail_in > 0 || 0 === r.avail_out) && 1 !== e);
                    return 4 === u ? (e = t.deflateEnd(this.strm), this.onEnd(e), this.ended = !0, e === o) : 2 !== u || (this.onEnd(o), r.avail_out = 0, !0)
                }, p.prototype.onData = function (l) {
                    this.chunks.push(l)
                }, p.prototype.onEnd = function (l) {
                    l === o && (this.result = "string" === this.options.to ? this.chunks.join("") : i.flattenChunks(this.chunks)), this.chunks = [], this.err = l, this.msg = this.strm.msg
                }, n.Deflate = p, n.deflate = f, n.deflateRaw = function (l, n) {
                    return (n = n || {}).raw = !0, f(l, n)
                }, n.gzip = function (l, n) {
                    return (n = n || {}).gzip = !0, f(l, n)
                }
            },
            S6kV: function (l, n, e) {
                var t, i, s;
                l.exports = (s = e("Ib8C"), e("OLod"), s.mode.OFB = (i = (t = s.lib.BlockCipherMode.extend()).Encryptor = t.extend({
                    processBlock: function (l, n) {
                        var e = this._cipher,
                            t = e.blockSize,
                            i = this._iv,
                            s = this._keystream;
                        i && (s = this._keystream = i.slice(0), this._iv = void 0), e.encryptBlock(s, 0);
                        for (var u = 0; u < t; u++) l[n + u] ^= s[u]
                    }
                }), t.Decryptor = i, t), s.mode.OFB)
            },
            Tcbo: function (l, n, e) {
                "use strict";
                l.exports = {
                    2: "need dictionary",
                    1: "stream end",
                    0: "",
                    "-1": "file error",
                    "-2": "stream error",
                    "-3": "data error",
                    "-4": "insufficient memory",
                    "-5": "buffer error",
                    "-6": "incompatible version"
                }
            },
            WYAk: function (l, n, e) {
                var t, i;
                l.exports = (t = e("Ib8C"), i = t.enc.Utf8, void(t.algo.HMAC = t.lib.Base.extend({
                    init: function (l, n) {
                        l = this._hasher = new l.init, "string" == typeof n && (n = i.parse(n));
                        var e = l.blockSize,
                            t = 4 * e;
                        n.sigBytes > t && (n = l.finalize(n)), n.clamp();
                        for (var s = this._oKey = n.clone(), u = this._iKey = n.clone(), r = s.words, a = u.words, o = 0; o < e; o++) r[o] ^= 1549556828, a[o] ^= 909522486;
                        s.sigBytes = u.sigBytes = t, this.reset()
                    },
                    reset: function () {
                        var l = this._hasher;
                        l.reset(), l.update(this._iKey)
                    },
                    update: function (l) {
                        return this._hasher.update(l), this
                    },
                    finalize: function (l) {
                        var n = this._hasher,
                            e = n.finalize(l);
                        return n.reset(), n.finalize(this._oKey.clone().concat(e))
                    }
                })))
            },
            aFNf: function (l, n, e) {
                "use strict";
                var t = e("vn/o"),
                    i = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0],
                    s = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78],
                    u = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0],
                    r = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];
                l.exports = function (l, n, e, a, o, c, d, h) {
                    var p, f, g, m, y, v, b, _, w, x = h.bits,
                        k = 0,
                        S = 0,
                        C = 0,
                        I = 0,
                        T = 0,
                        E = 0,
                        A = 0,
                        P = 0,
                        D = 0,
                        M = 0,
                        O = null,
                        N = 0,
                        R = new t.Buf16(16),
                        B = new t.Buf16(16),
                        z = null,
                        $ = 0;
                    for (k = 0; k <= 15; k++) R[k] = 0;
                    for (S = 0; S < a; S++) R[n[e + S]]++;
                    for (T = x, I = 15; I >= 1 && 0 === R[I]; I--);
                    if (T > I && (T = I), 0 === I) return o[c++] = 20971520, o[c++] = 20971520, h.bits = 1, 0;
                    for (C = 1; C < I && 0 === R[C]; C++);
                    for (T < C && (T = C), P = 1, k = 1; k <= 15; k++)
                        if (P <<= 1, (P -= R[k]) < 0) return -1;
                    if (P > 0 && (0 === l || 1 !== I)) return -1;
                    for (B[1] = 0, k = 1; k < 15; k++) B[k + 1] = B[k] + R[k];
                    for (S = 0; S < a; S++) 0 !== n[e + S] && (d[B[n[e + S]]++] = S);
                    if (0 === l ? (O = z = d, v = 19) : 1 === l ? (O = i, N -= 257, z = s, $ -= 257, v = 256) : (O = u, z = r, v = -1), M = 0, S = 0, k = C, y = c, E = T, A = 0, g = -1, m = (D = 1 << T) - 1, 1 === l && D > 852 || 2 === l && D > 592) return 1;
                    for (;;) {
                        b = k - A, d[S] < v ? (_ = 0, w = d[S]) : d[S] > v ? (_ = z[$ + d[S]], w = O[N + d[S]]) : (_ = 96, w = 0), p = 1 << k - A, C = f = 1 << E;
                        do {
                            o[y + (M >> A) + (f -= p)] = b << 24 | _ << 16 | w | 0
                        } while (0 !== f);
                        for (p = 1 << k - 1; M & p;) p >>= 1;
                        if (0 !== p ? (M &= p - 1, M += p) : M = 0, S++, 0 == --R[k]) {
                            if (k === I) break;
                            k = n[e + d[S]]
                        }
                        if (k > T && (M & m) !== g) {
                            for (0 === A && (A = T), y += C, P = 1 << (E = k - A); E + A < I && !((P -= R[E + A]) <= 0);) E++, P <<= 1;
                            if (D += 1 << E, 1 === l && D > 852 || 2 === l && D > 592) return 1;
                            o[g = M & m] = T << 24 | E << 16 | y - c | 0
                        }
                    }
                    return 0 !== M && (o[y + M] = k - A << 24 | 64 << 16 | 0), h.bits = T, 0
                }
            },
            bQjk: function (l, n, e) {
                var t, i, s;
                l.exports = (s = e("Ib8C"), e("OLod"), t = s.lib.CipherParams, i = s.enc.Hex, s.format.Hex = {
                    stringify: function (l) {
                        return l.ciphertext.toString(i)
                    },
                    parse: function (l) {
                        var n = i.parse(l);
                        return t.create({
                            ciphertext: n
                        })
                    }
                }, s.format.Hex)
            },
            cX6o: function (l, n, e) {
                "use strict";
                var t = e("nm4c"),
                    i = e("vn/o"),
                    s = e("eydS"),
                    u = e("LOvY"),
                    r = e("Tcbo"),
                    a = e("iTZm"),
                    o = e("gBP8"),
                    c = Object.prototype.toString;

                function d(l) {
                    if (!(this instanceof d)) return new d(l);
                    this.options = i.assign({
                        chunkSize: 16384,
                        windowBits: 0,
                        to: ""
                    }, l || {});
                    var n = this.options;
                    n.raw && n.windowBits >= 0 && n.windowBits < 16 && (n.windowBits = -n.windowBits, 0 === n.windowBits && (n.windowBits = -15)), !(n.windowBits >= 0 && n.windowBits < 16) || l && l.windowBits || (n.windowBits += 32), n.windowBits > 15 && n.windowBits < 48 && 0 == (15 & n.windowBits) && (n.windowBits |= 15), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new a, this.strm.avail_out = 0;
                    var e = t.inflateInit2(this.strm, n.windowBits);
                    if (e !== u.Z_OK) throw new Error(r[e]);
                    if (this.header = new o, t.inflateGetHeader(this.strm, this.header), n.dictionary && ("string" == typeof n.dictionary ? n.dictionary = s.string2buf(n.dictionary) : "[object ArrayBuffer]" === c.call(n.dictionary) && (n.dictionary = new Uint8Array(n.dictionary)), n.raw && (e = t.inflateSetDictionary(this.strm, n.dictionary)) !== u.Z_OK)) throw new Error(r[e])
                }

                function h(l, n) {
                    var e = new d(n);
                    if (e.push(l, !0), e.err) throw e.msg || r[e.err];
                    return e.result
                }
                d.prototype.push = function (l, n) {
                    var e, r, a, o, d, h = this.strm,
                        p = this.options.chunkSize,
                        f = this.options.dictionary,
                        g = !1;
                    if (this.ended) return !1;
                    r = n === ~~n ? n : !0 === n ? u.Z_FINISH : u.Z_NO_FLUSH, h.input = "string" == typeof l ? s.binstring2buf(l) : "[object ArrayBuffer]" === c.call(l) ? new Uint8Array(l) : l, h.next_in = 0, h.avail_in = h.input.length;
                    do {
                        if (0 === h.avail_out && (h.output = new i.Buf8(p), h.next_out = 0, h.avail_out = p), (e = t.inflate(h, u.Z_NO_FLUSH)) === u.Z_NEED_DICT && f && (e = t.inflateSetDictionary(this.strm, f)), e === u.Z_BUF_ERROR && !0 === g && (e = u.Z_OK, g = !1), e !== u.Z_STREAM_END && e !== u.Z_OK) return this.onEnd(e), this.ended = !0, !1;
                        h.next_out && (0 !== h.avail_out && e !== u.Z_STREAM_END && (0 !== h.avail_in || r !== u.Z_FINISH && r !== u.Z_SYNC_FLUSH) || ("string" === this.options.to ? (a = s.utf8border(h.output, h.next_out), o = h.next_out - a, d = s.buf2string(h.output, a), h.next_out = o, h.avail_out = p - o, o && i.arraySet(h.output, h.output, a, o, 0), this.onData(d)) : this.onData(i.shrinkBuf(h.output, h.next_out)))), 0 === h.avail_in && 0 === h.avail_out && (g = !0)
                    } while ((h.avail_in > 0 || 0 === h.avail_out) && e !== u.Z_STREAM_END);
                    return e === u.Z_STREAM_END && (r = u.Z_FINISH), r === u.Z_FINISH ? (e = t.inflateEnd(this.strm), this.onEnd(e), this.ended = !0, e === u.Z_OK) : r !== u.Z_SYNC_FLUSH || (this.onEnd(u.Z_OK), h.avail_out = 0, !0)
                }, d.prototype.onData = function (l) {
                    this.chunks.push(l)
                }, d.prototype.onEnd = function (l) {
                    l === u.Z_OK && (this.result = "string" === this.options.to ? this.chunks.join("") : i.flattenChunks(this.chunks)), this.chunks = [], this.err = l, this.msg = this.strm.msg
                }, n.Inflate = d, n.inflate = h, n.inflateRaw = function (l, n) {
                    return (n = n || {}).raw = !0, h(l, n)
                }, n.ungzip = h
            },
            cv67: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), function (l) {
                    var n = t,
                        e = n.lib,
                        i = e.WordArray,
                        s = e.Hasher,
                        u = n.algo,
                        r = [];
                    ! function () {
                        for (var n = 0; n < 64; n++) r[n] = 4294967296 * l.abs(l.sin(n + 1)) | 0
                    }();
                    var a = u.MD5 = s.extend({
                        _doReset: function () {
                            this._hash = new i.init([1732584193, 4023233417, 2562383102, 271733878])
                        },
                        _doProcessBlock: function (l, n) {
                            for (var e = 0; e < 16; e++) {
                                var t = n + e,
                                    i = l[t];
                                l[t] = 16711935 & (i << 8 | i >>> 24) | 4278255360 & (i << 24 | i >>> 8)
                            }
                            var s = this._hash.words,
                                u = l[n + 0],
                                a = l[n + 1],
                                p = l[n + 2],
                                f = l[n + 3],
                                g = l[n + 4],
                                m = l[n + 5],
                                y = l[n + 6],
                                v = l[n + 7],
                                b = l[n + 8],
                                _ = l[n + 9],
                                w = l[n + 10],
                                x = l[n + 11],
                                k = l[n + 12],
                                S = l[n + 13],
                                C = l[n + 14],
                                I = l[n + 15],
                                T = s[0],
                                E = s[1],
                                A = s[2],
                                P = s[3];
                            T = o(T, E, A, P, u, 7, r[0]), P = o(P, T, E, A, a, 12, r[1]), A = o(A, P, T, E, p, 17, r[2]), E = o(E, A, P, T, f, 22, r[3]), T = o(T, E, A, P, g, 7, r[4]), P = o(P, T, E, A, m, 12, r[5]), A = o(A, P, T, E, y, 17, r[6]), E = o(E, A, P, T, v, 22, r[7]), T = o(T, E, A, P, b, 7, r[8]), P = o(P, T, E, A, _, 12, r[9]), A = o(A, P, T, E, w, 17, r[10]), E = o(E, A, P, T, x, 22, r[11]), T = o(T, E, A, P, k, 7, r[12]), P = o(P, T, E, A, S, 12, r[13]), A = o(A, P, T, E, C, 17, r[14]), T = c(T, E = o(E, A, P, T, I, 22, r[15]), A, P, a, 5, r[16]), P = c(P, T, E, A, y, 9, r[17]), A = c(A, P, T, E, x, 14, r[18]), E = c(E, A, P, T, u, 20, r[19]), T = c(T, E, A, P, m, 5, r[20]), P = c(P, T, E, A, w, 9, r[21]), A = c(A, P, T, E, I, 14, r[22]), E = c(E, A, P, T, g, 20, r[23]), T = c(T, E, A, P, _, 5, r[24]), P = c(P, T, E, A, C, 9, r[25]), A = c(A, P, T, E, f, 14, r[26]), E = c(E, A, P, T, b, 20, r[27]), T = c(T, E, A, P, S, 5, r[28]), P = c(P, T, E, A, p, 9, r[29]), A = c(A, P, T, E, v, 14, r[30]), T = d(T, E = c(E, A, P, T, k, 20, r[31]), A, P, m, 4, r[32]), P = d(P, T, E, A, b, 11, r[33]), A = d(A, P, T, E, x, 16, r[34]), E = d(E, A, P, T, C, 23, r[35]), T = d(T, E, A, P, a, 4, r[36]), P = d(P, T, E, A, g, 11, r[37]), A = d(A, P, T, E, v, 16, r[38]), E = d(E, A, P, T, w, 23, r[39]), T = d(T, E, A, P, S, 4, r[40]), P = d(P, T, E, A, u, 11, r[41]), A = d(A, P, T, E, f, 16, r[42]), E = d(E, A, P, T, y, 23, r[43]), T = d(T, E, A, P, _, 4, r[44]), P = d(P, T, E, A, k, 11, r[45]), A = d(A, P, T, E, I, 16, r[46]), T = h(T, E = d(E, A, P, T, p, 23, r[47]), A, P, u, 6, r[48]), P = h(P, T, E, A, v, 10, r[49]), A = h(A, P, T, E, C, 15, r[50]), E = h(E, A, P, T, m, 21, r[51]), T = h(T, E, A, P, k, 6, r[52]), P = h(P, T, E, A, f, 10, r[53]), A = h(A, P, T, E, w, 15, r[54]), E = h(E, A, P, T, a, 21, r[55]), T = h(T, E, A, P, b, 6, r[56]), P = h(P, T, E, A, I, 10, r[57]), A = h(A, P, T, E, y, 15, r[58]), E = h(E, A, P, T, S, 21, r[59]), T = h(T, E, A, P, g, 6, r[60]), P = h(P, T, E, A, x, 10, r[61]), A = h(A, P, T, E, p, 15, r[62]), E = h(E, A, P, T, _, 21, r[63]), s[0] = s[0] + T | 0, s[1] = s[1] + E | 0, s[2] = s[2] + A | 0, s[3] = s[3] + P | 0
                        },
                        _doFinalize: function () {
                            var n = this._data,
                                e = n.words,
                                t = 8 * this._nDataBytes,
                                i = 8 * n.sigBytes;
                            e[i >>> 5] |= 128 << 24 - i % 32;
                            var s = l.floor(t / 4294967296),
                                u = t;
                            e[15 + (i + 64 >>> 9 << 4)] = 16711935 & (s << 8 | s >>> 24) | 4278255360 & (s << 24 | s >>> 8), e[14 + (i + 64 >>> 9 << 4)] = 16711935 & (u << 8 | u >>> 24) | 4278255360 & (u << 24 | u >>> 8), n.sigBytes = 4 * (e.length + 1), this._process();
                            for (var r = this._hash, a = r.words, o = 0; o < 4; o++) {
                                var c = a[o];
                                a[o] = 16711935 & (c << 8 | c >>> 24) | 4278255360 & (c << 24 | c >>> 8)
                            }
                            return r
                        },
                        clone: function () {
                            var l = s.clone.call(this);
                            return l._hash = this._hash.clone(), l
                        }
                    });

                    function o(l, n, e, t, i, s, u) {
                        var r = l + (n & e | ~n & t) + i + u;
                        return (r << s | r >>> 32 - s) + n
                    }

                    function c(l, n, e, t, i, s, u) {
                        var r = l + (n & t | e & ~t) + i + u;
                        return (r << s | r >>> 32 - s) + n
                    }

                    function d(l, n, e, t, i, s, u) {
                        var r = l + (n ^ e ^ t) + i + u;
                        return (r << s | r >>> 32 - s) + n
                    }

                    function h(l, n, e, t, i, s, u) {
                        var r = l + (e ^ (n | ~t)) + i + u;
                        return (r << s | r >>> 32 - s) + n
                    }
                    n.MD5 = s._createHelper(a), n.HmacMD5 = s._createHmacHelper(a)
                }(Math), t.MD5)
            },
            e7zE: function (l, n, e) {
                var t, i, s, u, r, a, o, c;
                l.exports = (c = e("Ib8C"), e("3y9D"), e("WYAk"), u = (i = (t = c).lib).WordArray, a = (r = t.algo).HMAC, o = r.PBKDF2 = (s = i.Base).extend({
                    cfg: s.extend({
                        keySize: 4,
                        hasher: r.SHA1,
                        iterations: 1
                    }),
                    init: function (l) {
                        this.cfg = this.cfg.extend(l)
                    },
                    compute: function (l, n) {
                        for (var e = this.cfg, t = a.create(e.hasher, l), i = u.create(), s = u.create([1]), r = i.words, o = s.words, c = e.keySize, d = e.iterations; r.length < c;) {
                            var h = t.update(n).finalize(s);
                            t.reset();
                            for (var p = h.words, f = p.length, g = h, m = 1; m < d; m++) {
                                g = t.finalize(g), t.reset();
                                for (var y = g.words, v = 0; v < f; v++) p[v] ^= y[v]
                            }
                            i.concat(h), o[0]++
                        }
                        return i.sigBytes = 4 * c, i
                    }
                }), t.PBKDF2 = function (l, n, e) {
                    return o.create(e).compute(l, n)
                }, c.PBKDF2)
            },
            eydS: function (l, n, e) {
                "use strict";
                var t = e("vn/o"),
                    i = !0,
                    s = !0;
                try {
                    String.fromCharCode.apply(null, [0])
                } catch (o) {
                    i = !1
                }
                try {
                    String.fromCharCode.apply(null, new Uint8Array(1))
                } catch (o) {
                    s = !1
                }
                for (var u = new t.Buf8(256), r = 0; r < 256; r++) u[r] = r >= 252 ? 6 : r >= 248 ? 5 : r >= 240 ? 4 : r >= 224 ? 3 : r >= 192 ? 2 : 1;

                function a(l, n) {
                    if (n < 65534 && (l.subarray && s || !l.subarray && i)) return String.fromCharCode.apply(null, t.shrinkBuf(l, n));
                    for (var e = "", u = 0; u < n; u++) e += String.fromCharCode(l[u]);
                    return e
                }
                u[254] = u[254] = 1, n.string2buf = function (l) {
                    var n, e, i, s, u, r = l.length,
                        a = 0;
                    for (s = 0; s < r; s++) 55296 == (64512 & (e = l.charCodeAt(s))) && s + 1 < r && 56320 == (64512 & (i = l.charCodeAt(s + 1))) && (e = 65536 + (e - 55296 << 10) + (i - 56320), s++), a += e < 128 ? 1 : e < 2048 ? 2 : e < 65536 ? 3 : 4;
                    for (n = new t.Buf8(a), u = 0, s = 0; u < a; s++) 55296 == (64512 & (e = l.charCodeAt(s))) && s + 1 < r && 56320 == (64512 & (i = l.charCodeAt(s + 1))) && (e = 65536 + (e - 55296 << 10) + (i - 56320), s++), e < 128 ? n[u++] = e : e < 2048 ? (n[u++] = 192 | e >>> 6, n[u++] = 128 | 63 & e) : e < 65536 ? (n[u++] = 224 | e >>> 12, n[u++] = 128 | e >>> 6 & 63, n[u++] = 128 | 63 & e) : (n[u++] = 240 | e >>> 18, n[u++] = 128 | e >>> 12 & 63, n[u++] = 128 | e >>> 6 & 63, n[u++] = 128 | 63 & e);
                    return n
                }, n.buf2binstring = function (l) {
                    return a(l, l.length)
                }, n.binstring2buf = function (l) {
                    for (var n = new t.Buf8(l.length), e = 0, i = n.length; e < i; e++) n[e] = l.charCodeAt(e);
                    return n
                }, n.buf2string = function (l, n) {
                    var e, t, i, s, r = n || l.length,
                        o = new Array(2 * r);
                    for (t = 0, e = 0; e < r;)
                        if ((i = l[e++]) < 128) o[t++] = i;
                        else if ((s = u[i]) > 4) o[t++] = 65533, e += s - 1;
                    else {
                        for (i &= 2 === s ? 31 : 3 === s ? 15 : 7; s > 1 && e < r;) i = i << 6 | 63 & l[e++], s--;
                        s > 1 ? o[t++] = 65533 : i < 65536 ? o[t++] = i : (o[t++] = 55296 | (i -= 65536) >> 10 & 1023, o[t++] = 56320 | 1023 & i)
                    }
                    return a(o, t)
                }, n.utf8border = function (l, n) {
                    var e;
                    for ((n = n || l.length) > l.length && (n = l.length), e = n - 1; e >= 0 && 128 == (192 & l[e]);) e--;
                    return e < 0 ? n : 0 === e ? n : e + u[l[e]] > n ? e : n
                }
            },
            frGm: function (l, n, e) {
                "use strict";
                l.exports = function (l, n) {
                    var e, t, i, s, u, r, a, o, c, d, h, p, f, g, m, y, v, b, _, w, x, k, S, C, I;
                    C = l.input, i = (t = l.next_in) + (l.avail_in - 5), I = l.output, u = (s = l.next_out) - (n - l.avail_out), r = s + (l.avail_out - 257), a = (e = l.state).dmax, o = e.wsize, c = e.whave, d = e.wnext, h = e.window, p = e.hold, f = e.bits, g = e.lencode, m = e.distcode, y = (1 << e.lenbits) - 1, v = (1 << e.distbits) - 1;
                    l: do {
                        f < 15 && (p += C[t++] << f, p += C[t++] << (f += 8), f += 8), b = g[p & y];
                        n: for (;;) {
                            if (p >>>= _ = b >>> 24, f -= _, 0 == (_ = b >>> 16 & 255)) I[s++] = 65535 & b;
                            else {
                                if (!(16 & _)) {
                                    if (0 == (64 & _)) {
                                        b = g[(65535 & b) + (p & (1 << _) - 1)];
                                        continue n
                                    }
                                    if (32 & _) {
                                        e.mode = 12;
                                        break l
                                    }
                                    l.msg = "invalid literal/length code", e.mode = 30;
                                    break l
                                }
                                w = 65535 & b, (_ &= 15) && (f < _ && (p += C[t++] << f, f += 8), w += p & (1 << _) - 1, p >>>= _, f -= _), f < 15 && (p += C[t++] << f, p += C[t++] << (f += 8), f += 8), b = m[p & v];
                                e: for (;;) {
                                    if (p >>>= _ = b >>> 24, f -= _, !(16 & (_ = b >>> 16 & 255))) {
                                        if (0 == (64 & _)) {
                                            b = m[(65535 & b) + (p & (1 << _) - 1)];
                                            continue e
                                        }
                                        l.msg = "invalid distance code", e.mode = 30;
                                        break l
                                    }
                                    if (x = 65535 & b, f < (_ &= 15) && (p += C[t++] << f, (f += 8) < _ && (p += C[t++] << f, f += 8)), (x += p & (1 << _) - 1) > a) {
                                        l.msg = "invalid distance too far back", e.mode = 30;
                                        break l
                                    }
                                    if (p >>>= _, f -= _, x > (_ = s - u)) {
                                        if ((_ = x - _) > c && e.sane) {
                                            l.msg = "invalid distance too far back", e.mode = 30;
                                            break l
                                        }
                                        if (k = 0, S = h, 0 === d) {
                                            if (k += o - _, _ < w) {
                                                w -= _;
                                                do {
                                                    I[s++] = h[k++]
                                                } while (--_);
                                                k = s - x, S = I
                                            }
                                        } else if (d < _) {
                                            if (k += o + d - _, (_ -= d) < w) {
                                                w -= _;
                                                do {
                                                    I[s++] = h[k++]
                                                } while (--_);
                                                if (k = 0, d < w) {
                                                    w -= _ = d;
                                                    do {
                                                        I[s++] = h[k++]
                                                    } while (--_);
                                                    k = s - x, S = I
                                                }
                                            }
                                        } else if (k += d - _, _ < w) {
                                            w -= _;
                                            do {
                                                I[s++] = h[k++]
                                            } while (--_);
                                            k = s - x, S = I
                                        }
                                        for (; w > 2;) I[s++] = S[k++], I[s++] = S[k++], I[s++] = S[k++], w -= 3;
                                        w && (I[s++] = S[k++], w > 1 && (I[s++] = S[k++]))
                                    } else {
                                        k = s - x;
                                        do {
                                            I[s++] = I[k++], I[s++] = I[k++], I[s++] = I[k++], w -= 3
                                        } while (w > 2);
                                        w && (I[s++] = I[k++], w > 1 && (I[s++] = I[k++]))
                                    }
                                    break
                                }
                            }
                            break
                        }
                    } while (t < i && s < r);
                    p &= (1 << (f -= (w = f >> 3) << 3)) - 1, l.next_in = t -= w, l.next_out = s, l.avail_in = t < i ? i - t + 5 : 5 - (t - i), l.avail_out = s < r ? r - s + 257 : 257 - (s - r), e.hold = p, e.bits = f
                }
            },
            gBP8: function (l, n, e) {
                "use strict";
                l.exports = function () {
                    this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = !1
                }
            },
            "gb/T": function (l, n, e) {
                var t, i;
                l.exports = (i = e("Ib8C"), e("OLod"), i.mode.ECB = ((t = i.lib.BlockCipherMode.extend()).Encryptor = t.extend({
                    processBlock: function (l, n) {
                        this._cipher.encryptBlock(l, n)
                    }
                }), t.Decryptor = t.extend({
                    processBlock: function (l, n) {
                        this._cipher.decryptBlock(l, n)
                    }
                }), t), i.mode.ECB)
            },
            iTZm: function (l, n, e) {
                "use strict";
                l.exports = function () {
                    this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0
                }
            },
            jO9C: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), e("OLod"), t.pad.Iso97971 = {
                    pad: function (l, n) {
                        l.concat(t.lib.WordArray.create([2147483648], 1)), t.pad.ZeroPadding.pad(l, n)
                    },
                    unpad: function (l) {
                        t.pad.ZeroPadding.unpad(l), l.sigBytes--
                    }
                }, t.pad.Iso97971)
            },
            lPiR: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), function (l) {
                    var n = t,
                        e = n.lib,
                        i = e.WordArray,
                        s = e.Hasher,
                        u = n.algo,
                        r = [],
                        a = [];
                    ! function () {
                        function n(n) {
                            for (var e = l.sqrt(n), t = 2; t <= e; t++)
                                if (!(n % t)) return !1;
                            return !0
                        }

                        function e(l) {
                            return 4294967296 * (l - (0 | l)) | 0
                        }
                        for (var t = 2, i = 0; i < 64;) n(t) && (i < 8 && (r[i] = e(l.pow(t, .5))), a[i] = e(l.pow(t, 1 / 3)), i++), t++
                    }();
                    var o = [],
                        c = u.SHA256 = s.extend({
                            _doReset: function () {
                                this._hash = new i.init(r.slice(0))
                            },
                            _doProcessBlock: function (l, n) {
                                for (var e = this._hash.words, t = e[0], i = e[1], s = e[2], u = e[3], r = e[4], c = e[5], d = e[6], h = e[7], p = 0; p < 64; p++) {
                                    if (p < 16) o[p] = 0 | l[n + p];
                                    else {
                                        var f = o[p - 15],
                                            g = o[p - 2];
                                        o[p] = ((f << 25 | f >>> 7) ^ (f << 14 | f >>> 18) ^ f >>> 3) + o[p - 7] + ((g << 15 | g >>> 17) ^ (g << 13 | g >>> 19) ^ g >>> 10) + o[p - 16]
                                    }
                                    var m = t & i ^ t & s ^ i & s,
                                        y = h + ((r << 26 | r >>> 6) ^ (r << 21 | r >>> 11) ^ (r << 7 | r >>> 25)) + (r & c ^ ~r & d) + a[p] + o[p];
                                    h = d, d = c, c = r, r = u + y | 0, u = s, s = i, i = t, t = y + (((t << 30 | t >>> 2) ^ (t << 19 | t >>> 13) ^ (t << 10 | t >>> 22)) + m) | 0
                                }
                                e[0] = e[0] + t | 0, e[1] = e[1] + i | 0, e[2] = e[2] + s | 0, e[3] = e[3] + u | 0, e[4] = e[4] + r | 0, e[5] = e[5] + c | 0, e[6] = e[6] + d | 0, e[7] = e[7] + h | 0
                            },
                            _doFinalize: function () {
                                var n = this._data,
                                    e = n.words,
                                    t = 8 * this._nDataBytes,
                                    i = 8 * n.sigBytes;
                                return e[i >>> 5] |= 128 << 24 - i % 32, e[14 + (i + 64 >>> 9 << 4)] = l.floor(t / 4294967296), e[15 + (i + 64 >>> 9 << 4)] = t, n.sigBytes = 4 * e.length, this._process(), this._hash
                            },
                            clone: function () {
                                var l = s.clone.call(this);
                                return l._hash = this._hash.clone(), l
                            }
                        });
                    n.SHA256 = s._createHelper(c), n.HmacSHA256 = s._createHmacHelper(c)
                }(Math), t.SHA256)
            },
            nm4c: function (l, n, e) {
                "use strict";
                var t = e("vn/o"),
                    i = e("yDR0"),
                    s = e("7tol"),
                    u = e("frGm"),
                    r = e("aFNf"),
                    a = 1,
                    o = 2,
                    c = 0,
                    d = -2,
                    h = 1,
                    p = 852,
                    f = 592;

                function g(l) {
                    return (l >>> 24 & 255) + (l >>> 8 & 65280) + ((65280 & l) << 8) + ((255 & l) << 24)
                }

                function m() {
                    this.mode = 0, this.last = !1, this.wrap = 0, this.havedict = !1, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new t.Buf16(320), this.work = new t.Buf16(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0
                }

                function y(l) {
                    var n;
                    return l && l.state ? (l.total_in = l.total_out = (n = l.state).total = 0, l.msg = "", n.wrap && (l.adler = 1 & n.wrap), n.mode = h, n.last = 0, n.havedict = 0, n.dmax = 32768, n.head = null, n.hold = 0, n.bits = 0, n.lencode = n.lendyn = new t.Buf32(p), n.distcode = n.distdyn = new t.Buf32(f), n.sane = 1, n.back = -1, c) : d
                }

                function v(l) {
                    var n;
                    return l && l.state ? ((n = l.state).wsize = 0, n.whave = 0, n.wnext = 0, y(l)) : d
                }

                function b(l, n) {
                    var e, t;
                    return l && l.state ? (n < 0 ? (e = 0, n = -n) : (e = 1 + (n >> 4), n < 48 && (n &= 15)), n && (n < 8 || n > 15) ? d : (null !== (t = l.state).window && t.wbits !== n && (t.window = null), t.wrap = e, t.wbits = n, v(l))) : d
                }

                function _(l, n) {
                    var e, t;
                    return l ? (t = new m, l.state = t, t.window = null, (e = b(l, n)) !== c && (l.state = null), e) : d
                }
                var w, x, k = !0;

                function S(l) {
                    if (k) {
                        var n;
                        for (w = new t.Buf32(512), x = new t.Buf32(32), n = 0; n < 144;) l.lens[n++] = 8;
                        for (; n < 256;) l.lens[n++] = 9;
                        for (; n < 280;) l.lens[n++] = 7;
                        for (; n < 288;) l.lens[n++] = 8;
                        for (r(a, l.lens, 0, 288, w, 0, l.work, {
                                bits: 9
                            }), n = 0; n < 32;) l.lens[n++] = 5;
                        r(o, l.lens, 0, 32, x, 0, l.work, {
                            bits: 5
                        }), k = !1
                    }
                    l.lencode = w, l.lenbits = 9, l.distcode = x, l.distbits = 5
                }

                function C(l, n, e, i) {
                    var s, u = l.state;
                    return null === u.window && (u.wsize = 1 << u.wbits, u.wnext = 0, u.whave = 0, u.window = new t.Buf8(u.wsize)), i >= u.wsize ? (t.arraySet(u.window, n, e - u.wsize, u.wsize, 0), u.wnext = 0, u.whave = u.wsize) : ((s = u.wsize - u.wnext) > i && (s = i), t.arraySet(u.window, n, e - i, s, u.wnext), (i -= s) ? (t.arraySet(u.window, n, e - i, i, 0), u.wnext = i, u.whave = u.wsize) : (u.wnext += s, u.wnext === u.wsize && (u.wnext = 0), u.whave < u.wsize && (u.whave += s))), 0
                }
                n.inflateReset = v, n.inflateReset2 = b, n.inflateResetKeep = y, n.inflateInit = function (l) {
                    return _(l, 15)
                }, n.inflateInit2 = _, n.inflate = function (l, n) {
                    var e, p, f, m, y, v, b, _, w, x, k, I, T, E, A, P, D, M, O, N, R, B, z, $, L = 0,
                        F = new t.Buf8(4),
                        q = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
                    if (!l || !l.state || !l.output || !l.input && 0 !== l.avail_in) return d;
                    12 === (e = l.state).mode && (e.mode = 13), y = l.next_out, f = l.output, m = l.next_in, p = l.input, _ = e.hold, w = e.bits, x = v = l.avail_in, k = b = l.avail_out, B = c;
                    l: for (;;) switch (e.mode) {
                        case h:
                            if (0 === e.wrap) {
                                e.mode = 13;
                                break
                            }
                            for (; w < 16;) {
                                if (0 === v) break l;
                                v--, _ += p[m++] << w, w += 8
                            }
                            if (2 & e.wrap && 35615 === _) {
                                e.check = 0, F[0] = 255 & _, F[1] = _ >>> 8 & 255, e.check = s(e.check, F, 2, 0), _ = 0, w = 0, e.mode = 2;
                                break
                            }
                            if (e.flags = 0, e.head && (e.head.done = !1), !(1 & e.wrap) || (((255 & _) << 8) + (_ >> 8)) % 31) {
                                l.msg = "incorrect header check", e.mode = 30;
                                break
                            }
                            if (8 != (15 & _)) {
                                l.msg = "unknown compression method", e.mode = 30;
                                break
                            }
                            if (w -= 4, R = 8 + (15 & (_ >>>= 4)), 0 === e.wbits) e.wbits = R;
                            else if (R > e.wbits) {
                                l.msg = "invalid window size", e.mode = 30;
                                break
                            }
                            e.dmax = 1 << R, l.adler = e.check = 1, e.mode = 512 & _ ? 10 : 12, _ = 0, w = 0;
                            break;
                        case 2:
                            for (; w < 16;) {
                                if (0 === v) break l;
                                v--, _ += p[m++] << w, w += 8
                            }
                            if (e.flags = _, 8 != (255 & e.flags)) {
                                l.msg = "unknown compression method", e.mode = 30;
                                break
                            }
                            if (57344 & e.flags) {
                                l.msg = "unknown header flags set", e.mode = 30;
                                break
                            }
                            e.head && (e.head.text = _ >> 8 & 1), 512 & e.flags && (F[0] = 255 & _, F[1] = _ >>> 8 & 255, e.check = s(e.check, F, 2, 0)), _ = 0, w = 0, e.mode = 3;
                        case 3:
                            for (; w < 32;) {
                                if (0 === v) break l;
                                v--, _ += p[m++] << w, w += 8
                            }
                            e.head && (e.head.time = _), 512 & e.flags && (F[0] = 255 & _, F[1] = _ >>> 8 & 255, F[2] = _ >>> 16 & 255, F[3] = _ >>> 24 & 255, e.check = s(e.check, F, 4, 0)), _ = 0, w = 0, e.mode = 4;
                        case 4:
                            for (; w < 16;) {
                                if (0 === v) break l;
                                v--, _ += p[m++] << w, w += 8
                            }
                            e.head && (e.head.xflags = 255 & _, e.head.os = _ >> 8), 512 & e.flags && (F[0] = 255 & _, F[1] = _ >>> 8 & 255, e.check = s(e.check, F, 2, 0)), _ = 0, w = 0, e.mode = 5;
                        case 5:
                            if (1024 & e.flags) {
                                for (; w < 16;) {
                                    if (0 === v) break l;
                                    v--, _ += p[m++] << w, w += 8
                                }
                                e.length = _, e.head && (e.head.extra_len = _), 512 & e.flags && (F[0] = 255 & _, F[1] = _ >>> 8 & 255, e.check = s(e.check, F, 2, 0)), _ = 0, w = 0
                            } else e.head && (e.head.extra = null);
                            e.mode = 6;
                        case 6:
                            if (1024 & e.flags && ((I = e.length) > v && (I = v), I && (e.head && (R = e.head.extra_len - e.length, e.head.extra || (e.head.extra = new Array(e.head.extra_len)), t.arraySet(e.head.extra, p, m, I, R)), 512 & e.flags && (e.check = s(e.check, p, I, m)), v -= I, m += I, e.length -= I), e.length)) break l;
                            e.length = 0, e.mode = 7;
                        case 7:
                            if (2048 & e.flags) {
                                if (0 === v) break l;
                                I = 0;
                                do {
                                    R = p[m + I++], e.head && R && e.length < 65536 && (e.head.name += String.fromCharCode(R))
                                } while (R && I < v);
                                if (512 & e.flags && (e.check = s(e.check, p, I, m)), v -= I, m += I, R) break l
                            } else e.head && (e.head.name = null);
                            e.length = 0, e.mode = 8;
                        case 8:
                            if (4096 & e.flags) {
                                if (0 === v) break l;
                                I = 0;
                                do {
                                    R = p[m + I++], e.head && R && e.length < 65536 && (e.head.comment += String.fromCharCode(R))
                                } while (R && I < v);
                                if (512 & e.flags && (e.check = s(e.check, p, I, m)), v -= I, m += I, R) break l
                            } else e.head && (e.head.comment = null);
                            e.mode = 9;
                        case 9:
                            if (512 & e.flags) {
                                for (; w < 16;) {
                                    if (0 === v) break l;
                                    v--, _ += p[m++] << w, w += 8
                                }
                                if (_ !== (65535 & e.check)) {
                                    l.msg = "header crc mismatch", e.mode = 30;
                                    break
                                }
                                _ = 0, w = 0
                            }
                            e.head && (e.head.hcrc = e.flags >> 9 & 1, e.head.done = !0), l.adler = e.check = 0, e.mode = 12;
                            break;
                        case 10:
                            for (; w < 32;) {
                                if (0 === v) break l;
                                v--, _ += p[m++] << w, w += 8
                            }
                            l.adler = e.check = g(_), _ = 0, w = 0, e.mode = 11;
                        case 11:
                            if (0 === e.havedict) return l.next_out = y, l.avail_out = b, l.next_in = m, l.avail_in = v, e.hold = _, e.bits = w, 2;
                            l.adler = e.check = 1, e.mode = 12;
                        case 12:
                            if (5 === n || 6 === n) break l;
                        case 13:
                            if (e.last) {
                                _ >>>= 7 & w, w -= 7 & w, e.mode = 27;
                                break
                            }
                            for (; w < 3;) {
                                if (0 === v) break l;
                                v--, _ += p[m++] << w, w += 8
                            }
                            switch (e.last = 1 & _, w -= 1, 3 & (_ >>>= 1)) {
                                case 0:
                                    e.mode = 14;
                                    break;
                                case 1:
                                    if (S(e), e.mode = 20, 6 === n) {
                                        _ >>>= 2, w -= 2;
                                        break l
                                    }
                                    break;
                                case 2:
                                    e.mode = 17;
                                    break;
                                case 3:
                                    l.msg = "invalid block type", e.mode = 30
                            }
                            _ >>>= 2, w -= 2;
                            break;
                        case 14:
                            for (_ >>>= 7 & w, w -= 7 & w; w < 32;) {
                                if (0 === v) break l;
                                v--, _ += p[m++] << w, w += 8
                            }
                            if ((65535 & _) != (_ >>> 16 ^ 65535)) {
                                l.msg = "invalid stored block lengths", e.mode = 30;
                                break
                            }
                            if (e.length = 65535 & _, _ = 0, w = 0, e.mode = 15, 6 === n) break l;
                        case 15:
                            e.mode = 16;
                        case 16:
                            if (I = e.length) {
                                if (I > v && (I = v), I > b && (I = b), 0 === I) break l;
                                t.arraySet(f, p, m, I, y), v -= I, m += I, b -= I, y += I, e.length -= I;
                                break
                            }
                            e.mode = 12;
                            break;
                        case 17:
                            for (; w < 14;) {
                                if (0 === v) break l;
                                v--, _ += p[m++] << w, w += 8
                            }
                            if (e.nlen = 257 + (31 & _), w -= 5, e.ndist = 1 + (31 & (_ >>>= 5)), w -= 5, e.ncode = 4 + (15 & (_ >>>= 5)), _ >>>= 4, w -= 4, e.nlen > 286 || e.ndist > 30) {
                                l.msg = "too many length or distance symbols", e.mode = 30;
                                break
                            }
                            e.have = 0, e.mode = 18;
                        case 18:
                            for (; e.have < e.ncode;) {
                                for (; w < 3;) {
                                    if (0 === v) break l;
                                    v--, _ += p[m++] << w, w += 8
                                }
                                e.lens[q[e.have++]] = 7 & _, _ >>>= 3, w -= 3
                            }
                            for (; e.have < 19;) e.lens[q[e.have++]] = 0;
                            if (e.lencode = e.lendyn, e.lenbits = 7, B = r(0, e.lens, 0, 19, e.lencode, 0, e.work, z = {
                                    bits: e.lenbits
                                }), e.lenbits = z.bits, B) {
                                l.msg = "invalid code lengths set", e.mode = 30;
                                break
                            }
                            e.have = 0, e.mode = 19;
                        case 19:
                            for (; e.have < e.nlen + e.ndist;) {
                                for (; P = (L = e.lencode[_ & (1 << e.lenbits) - 1]) >>> 16 & 255, D = 65535 & L, !((A = L >>> 24) <= w);) {
                                    if (0 === v) break l;
                                    v--, _ += p[m++] << w, w += 8
                                }
                                if (D < 16) _ >>>= A, w -= A, e.lens[e.have++] = D;
                                else {
                                    if (16 === D) {
                                        for ($ = A + 2; w < $;) {
                                            if (0 === v) break l;
                                            v--, _ += p[m++] << w, w += 8
                                        }
                                        if (_ >>>= A, w -= A, 0 === e.have) {
                                            l.msg = "invalid bit length repeat", e.mode = 30;
                                            break
                                        }
                                        R = e.lens[e.have - 1], I = 3 + (3 & _), _ >>>= 2, w -= 2
                                    } else if (17 === D) {
                                        for ($ = A + 3; w < $;) {
                                            if (0 === v) break l;
                                            v--, _ += p[m++] << w, w += 8
                                        }
                                        w -= A, R = 0, I = 3 + (7 & (_ >>>= A)), _ >>>= 3, w -= 3
                                    } else {
                                        for ($ = A + 7; w < $;) {
                                            if (0 === v) break l;
                                            v--, _ += p[m++] << w, w += 8
                                        }
                                        w -= A, R = 0, I = 11 + (127 & (_ >>>= A)), _ >>>= 7, w -= 7
                                    }
                                    if (e.have + I > e.nlen + e.ndist) {
                                        l.msg = "invalid bit length repeat", e.mode = 30;
                                        break
                                    }
                                    for (; I--;) e.lens[e.have++] = R
                                }
                            }
                            if (30 === e.mode) break;
                            if (0 === e.lens[256]) {
                                l.msg = "invalid code -- missing end-of-block", e.mode = 30;
                                break
                            }
                            if (e.lenbits = 9, B = r(a, e.lens, 0, e.nlen, e.lencode, 0, e.work, z = {
                                    bits: e.lenbits
                                }), e.lenbits = z.bits, B) {
                                l.msg = "invalid literal/lengths set", e.mode = 30;
                                break
                            }
                            if (e.distbits = 6, e.distcode = e.distdyn, B = r(o, e.lens, e.nlen, e.ndist, e.distcode, 0, e.work, z = {
                                    bits: e.distbits
                                }), e.distbits = z.bits, B) {
                                l.msg = "invalid distances set", e.mode = 30;
                                break
                            }
                            if (e.mode = 20, 6 === n) break l;
                        case 20:
                            e.mode = 21;
                        case 21:
                            if (v >= 6 && b >= 258) {
                                l.next_out = y, l.avail_out = b, l.next_in = m, l.avail_in = v, e.hold = _, e.bits = w, u(l, k), y = l.next_out, f = l.output, b = l.avail_out, m = l.next_in, p = l.input, v = l.avail_in, _ = e.hold, w = e.bits, 12 === e.mode && (e.back = -1);
                                break
                            }
                            for (e.back = 0; P = (L = e.lencode[_ & (1 << e.lenbits) - 1]) >>> 16 & 255, D = 65535 & L, !((A = L >>> 24) <= w);) {
                                if (0 === v) break l;
                                v--, _ += p[m++] << w, w += 8
                            }
                            if (P && 0 == (240 & P)) {
                                for (M = A, O = P, N = D; P = (L = e.lencode[N + ((_ & (1 << M + O) - 1) >> M)]) >>> 16 & 255, D = 65535 & L, !(M + (A = L >>> 24) <= w);) {
                                    if (0 === v) break l;
                                    v--, _ += p[m++] << w, w += 8
                                }
                                _ >>>= M, w -= M, e.back += M
                            }
                            if (_ >>>= A, w -= A, e.back += A, e.length = D, 0 === P) {
                                e.mode = 26;
                                break
                            }
                            if (32 & P) {
                                e.back = -1, e.mode = 12;
                                break
                            }
                            if (64 & P) {
                                l.msg = "invalid literal/length code", e.mode = 30;
                                break
                            }
                            e.extra = 15 & P, e.mode = 22;
                        case 22:
                            if (e.extra) {
                                for ($ = e.extra; w < $;) {
                                    if (0 === v) break l;
                                    v--, _ += p[m++] << w, w += 8
                                }
                                e.length += _ & (1 << e.extra) - 1, _ >>>= e.extra, w -= e.extra, e.back += e.extra
                            }
                            e.was = e.length, e.mode = 23;
                        case 23:
                            for (; P = (L = e.distcode[_ & (1 << e.distbits) - 1]) >>> 16 & 255, D = 65535 & L, !((A = L >>> 24) <= w);) {
                                if (0 === v) break l;
                                v--, _ += p[m++] << w, w += 8
                            }
                            if (0 == (240 & P)) {
                                for (M = A, O = P, N = D; P = (L = e.distcode[N + ((_ & (1 << M + O) - 1) >> M)]) >>> 16 & 255, D = 65535 & L, !(M + (A = L >>> 24) <= w);) {
                                    if (0 === v) break l;
                                    v--, _ += p[m++] << w, w += 8
                                }
                                _ >>>= M, w -= M, e.back += M
                            }
                            if (_ >>>= A, w -= A, e.back += A, 64 & P) {
                                l.msg = "invalid distance code", e.mode = 30;
                                break
                            }
                            e.offset = D, e.extra = 15 & P, e.mode = 24;
                        case 24:
                            if (e.extra) {
                                for ($ = e.extra; w < $;) {
                                    if (0 === v) break l;
                                    v--, _ += p[m++] << w, w += 8
                                }
                                e.offset += _ & (1 << e.extra) - 1, _ >>>= e.extra, w -= e.extra, e.back += e.extra
                            }
                            if (e.offset > e.dmax) {
                                l.msg = "invalid distance too far back", e.mode = 30;
                                break
                            }
                            e.mode = 25;
                        case 25:
                            if (0 === b) break l;
                            if (e.offset > (I = k - b)) {
                                if ((I = e.offset - I) > e.whave && e.sane) {
                                    l.msg = "invalid distance too far back", e.mode = 30;
                                    break
                                }
                                T = I > e.wnext ? e.wsize - (I -= e.wnext) : e.wnext - I, I > e.length && (I = e.length), E = e.window
                            } else E = f, T = y - e.offset, I = e.length;
                            I > b && (I = b), b -= I, e.length -= I;
                            do {
                                f[y++] = E[T++]
                            } while (--I);
                            0 === e.length && (e.mode = 21);
                            break;
                        case 26:
                            if (0 === b) break l;
                            f[y++] = e.length, b--, e.mode = 21;
                            break;
                        case 27:
                            if (e.wrap) {
                                for (; w < 32;) {
                                    if (0 === v) break l;
                                    v--, _ |= p[m++] << w, w += 8
                                }
                                if (l.total_out += k -= b, e.total += k, k && (l.adler = e.check = e.flags ? s(e.check, f, k, y - k) : i(e.check, f, k, y - k)), k = b, (e.flags ? _ : g(_)) !== e.check) {
                                    l.msg = "incorrect data check", e.mode = 30;
                                    break
                                }
                                _ = 0, w = 0
                            }
                            e.mode = 28;
                        case 28:
                            if (e.wrap && e.flags) {
                                for (; w < 32;) {
                                    if (0 === v) break l;
                                    v--, _ += p[m++] << w, w += 8
                                }
                                if (_ !== (4294967295 & e.total)) {
                                    l.msg = "incorrect length check", e.mode = 30;
                                    break
                                }
                                _ = 0, w = 0
                            }
                            e.mode = 29;
                        case 29:
                            B = 1;
                            break l;
                        case 30:
                            B = -3;
                            break l;
                        case 31:
                            return -4;
                        case 32:
                        default:
                            return d
                    }
                    return l.next_out = y, l.avail_out = b, l.next_in = m, l.avail_in = v, e.hold = _, e.bits = w, (e.wsize || k !== l.avail_out && e.mode < 30 && (e.mode < 27 || 4 !== n)) && C(l, l.output, l.next_out, k - l.avail_out) ? (e.mode = 31, -4) : (k -= l.avail_out, l.total_in += x -= l.avail_in, l.total_out += k, e.total += k, e.wrap && k && (l.adler = e.check = e.flags ? s(e.check, f, k, l.next_out - k) : i(e.check, f, k, l.next_out - k)), l.data_type = e.bits + (e.last ? 64 : 0) + (12 === e.mode ? 128 : 0) + (20 === e.mode || 15 === e.mode ? 256 : 0), (0 === x && 0 === k || 4 === n) && B === c && (B = -5), B)
                }, n.inflateEnd = function (l) {
                    if (!l || !l.state) return d;
                    var n = l.state;
                    return n.window && (n.window = null), l.state = null, c
                }, n.inflateGetHeader = function (l, n) {
                    var e;
                    return l && l.state ? 0 == (2 & (e = l.state).wrap) ? d : (e.head = n, n.done = !1, c) : d
                }, n.inflateSetDictionary = function (l, n) {
                    var e, t = n.length;
                    return l && l.state ? 0 !== (e = l.state).wrap && 11 !== e.mode ? d : 11 === e.mode && i(1, n, t, 0) !== e.check ? -3 : C(l, n, t, t) ? (e.mode = 31, -4) : (e.havedict = 1, c) : d
                }, n.inflateInfo = "pako inflate (from Nodeca project)"
            },
            oRuE: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), e("OLod"), t.pad.Iso10126 = {
                    pad: function (l, n) {
                        var e = 4 * n,
                            i = e - l.sigBytes % e;
                        l.concat(t.lib.WordArray.random(i - 1)).concat(t.lib.WordArray.create([i << 24], 1))
                    },
                    unpad: function (l) {
                        l.sigBytes -= 255 & l.words[l.sigBytes - 1 >>> 2]
                    }
                }, t.pad.Iso10126)
            },
            oXfm: function (l, n, e) {
                "use strict";
                var t, i = e("vn/o"),
                    s = e("B/RK"),
                    u = e("yDR0"),
                    r = e("7tol"),
                    a = e("Tcbo"),
                    o = 0,
                    c = 4,
                    d = 0,
                    h = -2,
                    p = -1,
                    f = 1,
                    g = 4,
                    m = 2,
                    y = 8,
                    v = 9,
                    b = 286,
                    _ = 30,
                    w = 19,
                    x = 2 * b + 1,
                    k = 15,
                    S = 3,
                    C = 258,
                    I = C + S + 1,
                    T = 42,
                    E = 113,
                    A = 1,
                    P = 2,
                    D = 3,
                    M = 4;

                function O(l, n) {
                    return l.msg = a[n], n
                }

                function N(l) {
                    return (l << 1) - (l > 4 ? 9 : 0)
                }

                function R(l) {
                    for (var n = l.length; --n >= 0;) l[n] = 0
                }

                function B(l) {
                    var n = l.state,
                        e = n.pending;
                    e > l.avail_out && (e = l.avail_out), 0 !== e && (i.arraySet(l.output, n.pending_buf, n.pending_out, e, l.next_out), l.next_out += e, n.pending_out += e, l.total_out += e, l.avail_out -= e, n.pending -= e, 0 === n.pending && (n.pending_out = 0))
                }

                function z(l, n) {
                    s._tr_flush_block(l, l.block_start >= 0 ? l.block_start : -1, l.strstart - l.block_start, n), l.block_start = l.strstart, B(l.strm)
                }

                function $(l, n) {
                    l.pending_buf[l.pending++] = n
                }

                function L(l, n) {
                    l.pending_buf[l.pending++] = n >>> 8 & 255, l.pending_buf[l.pending++] = 255 & n
                }

                function F(l, n) {
                    var e, t, i = l.max_chain_length,
                        s = l.strstart,
                        u = l.prev_length,
                        r = l.nice_match,
                        a = l.strstart > l.w_size - I ? l.strstart - (l.w_size - I) : 0,
                        o = l.window,
                        c = l.w_mask,
                        d = l.prev,
                        h = l.strstart + C,
                        p = o[s + u - 1],
                        f = o[s + u];
                    l.prev_length >= l.good_match && (i >>= 2), r > l.lookahead && (r = l.lookahead);
                    do {
                        if (o[(e = n) + u] === f && o[e + u - 1] === p && o[e] === o[s] && o[++e] === o[s + 1]) {
                            s += 2, e++;
                            do {} while (o[++s] === o[++e] && o[++s] === o[++e] && o[++s] === o[++e] && o[++s] === o[++e] && o[++s] === o[++e] && o[++s] === o[++e] && o[++s] === o[++e] && o[++s] === o[++e] && s < h);
                            if (t = C - (h - s), s = h - C, t > u) {
                                if (l.match_start = n, u = t, t >= r) break;
                                p = o[s + u - 1], f = o[s + u]
                            }
                        }
                    } while ((n = d[n & c]) > a && 0 != --i);
                    return u <= l.lookahead ? u : l.lookahead
                }

                function q(l) {
                    var n, e, t, s, a, o, c, d, h, p, f = l.w_size;
                    do {
                        if (s = l.window_size - l.lookahead - l.strstart, l.strstart >= f + (f - I)) {
                            i.arraySet(l.window, l.window, f, f, 0), l.match_start -= f, l.strstart -= f, l.block_start -= f, n = e = l.hash_size;
                            do {
                                t = l.head[--n], l.head[n] = t >= f ? t - f : 0
                            } while (--e);
                            n = e = f;
                            do {
                                t = l.prev[--n], l.prev[n] = t >= f ? t - f : 0
                            } while (--e);
                            s += f
                        }
                        if (0 === l.strm.avail_in) break;
                        if (c = l.window, d = l.strstart + l.lookahead, p = void 0, (p = (o = l.strm).avail_in) > (h = s) && (p = h), e = 0 === p ? 0 : (o.avail_in -= p, i.arraySet(c, o.input, o.next_in, p, d), 1 === o.state.wrap ? o.adler = u(o.adler, c, p, d) : 2 === o.state.wrap && (o.adler = r(o.adler, c, p, d)), o.next_in += p, o.total_in += p, p), l.lookahead += e, l.lookahead + l.insert >= S)
                            for (l.ins_h = l.window[a = l.strstart - l.insert], l.ins_h = (l.ins_h << l.hash_shift ^ l.window[a + 1]) & l.hash_mask; l.insert && (l.ins_h = (l.ins_h << l.hash_shift ^ l.window[a + S - 1]) & l.hash_mask, l.prev[a & l.w_mask] = l.head[l.ins_h], l.head[l.ins_h] = a, a++, l.insert--, !(l.lookahead + l.insert < S)););
                    } while (l.lookahead < I && 0 !== l.strm.avail_in)
                }

                function U(l, n) {
                    for (var e, t;;) {
                        if (l.lookahead < I) {
                            if (q(l), l.lookahead < I && n === o) return A;
                            if (0 === l.lookahead) break
                        }
                        if (e = 0, l.lookahead >= S && (l.ins_h = (l.ins_h << l.hash_shift ^ l.window[l.strstart + S - 1]) & l.hash_mask, e = l.prev[l.strstart & l.w_mask] = l.head[l.ins_h], l.head[l.ins_h] = l.strstart), 0 !== e && l.strstart - e <= l.w_size - I && (l.match_length = F(l, e)), l.match_length >= S)
                            if (t = s._tr_tally(l, l.strstart - l.match_start, l.match_length - S), l.lookahead -= l.match_length, l.match_length <= l.max_lazy_match && l.lookahead >= S) {
                                l.match_length--;
                                do {
                                    l.strstart++, l.ins_h = (l.ins_h << l.hash_shift ^ l.window[l.strstart + S - 1]) & l.hash_mask, e = l.prev[l.strstart & l.w_mask] = l.head[l.ins_h], l.head[l.ins_h] = l.strstart
                                } while (0 != --l.match_length);
                                l.strstart++
                            } else l.strstart += l.match_length, l.match_length = 0, l.ins_h = l.window[l.strstart], l.ins_h = (l.ins_h << l.hash_shift ^ l.window[l.strstart + 1]) & l.hash_mask;
                        else t = s._tr_tally(l, 0, l.window[l.strstart]), l.lookahead--, l.strstart++;
                        if (t && (z(l, !1), 0 === l.strm.avail_out)) return A
                    }
                    return l.insert = l.strstart < S - 1 ? l.strstart : S - 1, n === c ? (z(l, !0), 0 === l.strm.avail_out ? D : M) : l.last_lit && (z(l, !1), 0 === l.strm.avail_out) ? A : P
                }

                function H(l, n) {
                    for (var e, t, i;;) {
                        if (l.lookahead < I) {
                            if (q(l), l.lookahead < I && n === o) return A;
                            if (0 === l.lookahead) break
                        }
                        if (e = 0, l.lookahead >= S && (l.ins_h = (l.ins_h << l.hash_shift ^ l.window[l.strstart + S - 1]) & l.hash_mask, e = l.prev[l.strstart & l.w_mask] = l.head[l.ins_h], l.head[l.ins_h] = l.strstart), l.prev_length = l.match_length, l.prev_match = l.match_start, l.match_length = S - 1, 0 !== e && l.prev_length < l.max_lazy_match && l.strstart - e <= l.w_size - I && (l.match_length = F(l, e), l.match_length <= 5 && (l.strategy === f || l.match_length === S && l.strstart - l.match_start > 4096) && (l.match_length = S - 1)), l.prev_length >= S && l.match_length <= l.prev_length) {
                            i = l.strstart + l.lookahead - S, t = s._tr_tally(l, l.strstart - 1 - l.prev_match, l.prev_length - S), l.lookahead -= l.prev_length - 1, l.prev_length -= 2;
                            do {
                                ++l.strstart <= i && (l.ins_h = (l.ins_h << l.hash_shift ^ l.window[l.strstart + S - 1]) & l.hash_mask, e = l.prev[l.strstart & l.w_mask] = l.head[l.ins_h], l.head[l.ins_h] = l.strstart)
                            } while (0 != --l.prev_length);
                            if (l.match_available = 0, l.match_length = S - 1, l.strstart++, t && (z(l, !1), 0 === l.strm.avail_out)) return A
                        } else if (l.match_available) {
                            if ((t = s._tr_tally(l, 0, l.window[l.strstart - 1])) && z(l, !1), l.strstart++, l.lookahead--, 0 === l.strm.avail_out) return A
                        } else l.match_available = 1, l.strstart++, l.lookahead--
                    }
                    return l.match_available && (t = s._tr_tally(l, 0, l.window[l.strstart - 1]), l.match_available = 0), l.insert = l.strstart < S - 1 ? l.strstart : S - 1, n === c ? (z(l, !0), 0 === l.strm.avail_out ? D : M) : l.last_lit && (z(l, !1), 0 === l.strm.avail_out) ? A : P
                }

                function V(l, n, e, t, i) {
                    this.good_length = l, this.max_lazy = n, this.nice_length = e, this.max_chain = t, this.func = i
                }

                function j() {
                    this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = y, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new i.Buf16(2 * x), this.dyn_dtree = new i.Buf16(2 * (2 * _ + 1)), this.bl_tree = new i.Buf16(2 * (2 * w + 1)), R(this.dyn_ltree), R(this.dyn_dtree), R(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new i.Buf16(k + 1), this.heap = new i.Buf16(2 * b + 1), R(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new i.Buf16(2 * b + 1), R(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0
                }

                function G(l) {
                    var n;
                    return l && l.state ? (l.total_in = l.total_out = 0, l.data_type = m, (n = l.state).pending = 0, n.pending_out = 0, n.wrap < 0 && (n.wrap = -n.wrap), n.status = n.wrap ? T : E, l.adler = 2 === n.wrap ? 0 : 1, n.last_flush = o, s._tr_init(n), d) : O(l, h)
                }

                function W(l) {
                    var n, e = G(l);
                    return e === d && ((n = l.state).window_size = 2 * n.w_size, R(n.head), n.max_lazy_match = t[n.level].max_lazy, n.good_match = t[n.level].good_length, n.nice_match = t[n.level].nice_length, n.max_chain_length = t[n.level].max_chain, n.strstart = 0, n.block_start = 0, n.lookahead = 0, n.insert = 0, n.match_length = n.prev_length = S - 1, n.match_available = 0, n.ins_h = 0), e
                }

                function K(l, n, e, t, s, u) {
                    if (!l) return h;
                    var r = 1;
                    if (n === p && (n = 6), t < 0 ? (r = 0, t = -t) : t > 15 && (r = 2, t -= 16), s < 1 || s > v || e !== y || t < 8 || t > 15 || n < 0 || n > 9 || u < 0 || u > g) return O(l, h);
                    8 === t && (t = 9);
                    var a = new j;
                    return l.state = a, a.strm = l, a.wrap = r, a.gzhead = null, a.w_bits = t, a.w_size = 1 << a.w_bits, a.w_mask = a.w_size - 1, a.hash_bits = s + 7, a.hash_size = 1 << a.hash_bits, a.hash_mask = a.hash_size - 1, a.hash_shift = ~~((a.hash_bits + S - 1) / S), a.window = new i.Buf8(2 * a.w_size), a.head = new i.Buf16(a.hash_size), a.prev = new i.Buf16(a.w_size), a.lit_bufsize = 1 << s + 6, a.pending_buf_size = 4 * a.lit_bufsize, a.pending_buf = new i.Buf8(a.pending_buf_size), a.d_buf = 1 * a.lit_bufsize, a.l_buf = 3 * a.lit_bufsize, a.level = n, a.strategy = u, a.method = e, W(l)
                }
                t = [new V(0, 0, 0, 0, (function (l, n) {
                    var e = 65535;
                    for (e > l.pending_buf_size - 5 && (e = l.pending_buf_size - 5);;) {
                        if (l.lookahead <= 1) {
                            if (q(l), 0 === l.lookahead && n === o) return A;
                            if (0 === l.lookahead) break
                        }
                        l.strstart += l.lookahead, l.lookahead = 0;
                        var t = l.block_start + e;
                        if ((0 === l.strstart || l.strstart >= t) && (l.lookahead = l.strstart - t, l.strstart = t, z(l, !1), 0 === l.strm.avail_out)) return A;
                        if (l.strstart - l.block_start >= l.w_size - I && (z(l, !1), 0 === l.strm.avail_out)) return A
                    }
                    return l.insert = 0, n === c ? (z(l, !0), 0 === l.strm.avail_out ? D : M) : (l.strstart > l.block_start && z(l, !1), A)
                })), new V(4, 4, 8, 4, U), new V(4, 5, 16, 8, U), new V(4, 6, 32, 32, U), new V(4, 4, 16, 16, H), new V(8, 16, 32, 32, H), new V(8, 16, 128, 128, H), new V(8, 32, 128, 256, H), new V(32, 128, 258, 1024, H), new V(32, 258, 258, 4096, H)], n.deflateInit = function (l, n) {
                    return K(l, n, y, 15, 8, 0)
                }, n.deflateInit2 = K, n.deflateReset = W, n.deflateResetKeep = G, n.deflateSetHeader = function (l, n) {
                    return l && l.state ? 2 !== l.state.wrap ? h : (l.state.gzhead = n, d) : h
                }, n.deflate = function (l, n) {
                    var e, i, u, a;
                    if (!l || !l.state || n > 5 || n < 0) return l ? O(l, h) : h;
                    if (i = l.state, !l.output || !l.input && 0 !== l.avail_in || 666 === i.status && n !== c) return O(l, 0 === l.avail_out ? -5 : h);
                    if (i.strm = l, e = i.last_flush, i.last_flush = n, i.status === T)
                        if (2 === i.wrap) l.adler = 0, $(i, 31), $(i, 139), $(i, 8), i.gzhead ? ($(i, (i.gzhead.text ? 1 : 0) + (i.gzhead.hcrc ? 2 : 0) + (i.gzhead.extra ? 4 : 0) + (i.gzhead.name ? 8 : 0) + (i.gzhead.comment ? 16 : 0)), $(i, 255 & i.gzhead.time), $(i, i.gzhead.time >> 8 & 255), $(i, i.gzhead.time >> 16 & 255), $(i, i.gzhead.time >> 24 & 255), $(i, 9 === i.level ? 2 : i.strategy >= 2 || i.level < 2 ? 4 : 0), $(i, 255 & i.gzhead.os), i.gzhead.extra && i.gzhead.extra.length && ($(i, 255 & i.gzhead.extra.length), $(i, i.gzhead.extra.length >> 8 & 255)), i.gzhead.hcrc && (l.adler = r(l.adler, i.pending_buf, i.pending, 0)), i.gzindex = 0, i.status = 69) : ($(i, 0), $(i, 0), $(i, 0), $(i, 0), $(i, 0), $(i, 9 === i.level ? 2 : i.strategy >= 2 || i.level < 2 ? 4 : 0), $(i, 3), i.status = E);
                        else {
                            var p = y + (i.w_bits - 8 << 4) << 8;
                            p |= (i.strategy >= 2 || i.level < 2 ? 0 : i.level < 6 ? 1 : 6 === i.level ? 2 : 3) << 6, 0 !== i.strstart && (p |= 32), p += 31 - p % 31, i.status = E, L(i, p), 0 !== i.strstart && (L(i, l.adler >>> 16), L(i, 65535 & l.adler)), l.adler = 1
                        } if (69 === i.status)
                        if (i.gzhead.extra) {
                            for (u = i.pending; i.gzindex < (65535 & i.gzhead.extra.length) && (i.pending !== i.pending_buf_size || (i.gzhead.hcrc && i.pending > u && (l.adler = r(l.adler, i.pending_buf, i.pending - u, u)), B(l), u = i.pending, i.pending !== i.pending_buf_size));) $(i, 255 & i.gzhead.extra[i.gzindex]), i.gzindex++;
                            i.gzhead.hcrc && i.pending > u && (l.adler = r(l.adler, i.pending_buf, i.pending - u, u)), i.gzindex === i.gzhead.extra.length && (i.gzindex = 0, i.status = 73)
                        } else i.status = 73;
                    if (73 === i.status)
                        if (i.gzhead.name) {
                            u = i.pending;
                            do {
                                if (i.pending === i.pending_buf_size && (i.gzhead.hcrc && i.pending > u && (l.adler = r(l.adler, i.pending_buf, i.pending - u, u)), B(l), u = i.pending, i.pending === i.pending_buf_size)) {
                                    a = 1;
                                    break
                                }
                                a = i.gzindex < i.gzhead.name.length ? 255 & i.gzhead.name.charCodeAt(i.gzindex++) : 0, $(i, a)
                            } while (0 !== a);
                            i.gzhead.hcrc && i.pending > u && (l.adler = r(l.adler, i.pending_buf, i.pending - u, u)), 0 === a && (i.gzindex = 0, i.status = 91)
                        } else i.status = 91;
                    if (91 === i.status)
                        if (i.gzhead.comment) {
                            u = i.pending;
                            do {
                                if (i.pending === i.pending_buf_size && (i.gzhead.hcrc && i.pending > u && (l.adler = r(l.adler, i.pending_buf, i.pending - u, u)), B(l), u = i.pending, i.pending === i.pending_buf_size)) {
                                    a = 1;
                                    break
                                }
                                a = i.gzindex < i.gzhead.comment.length ? 255 & i.gzhead.comment.charCodeAt(i.gzindex++) : 0, $(i, a)
                            } while (0 !== a);
                            i.gzhead.hcrc && i.pending > u && (l.adler = r(l.adler, i.pending_buf, i.pending - u, u)), 0 === a && (i.status = 103)
                        } else i.status = 103;
                    if (103 === i.status && (i.gzhead.hcrc ? (i.pending + 2 > i.pending_buf_size && B(l), i.pending + 2 <= i.pending_buf_size && ($(i, 255 & l.adler), $(i, l.adler >> 8 & 255), l.adler = 0, i.status = E)) : i.status = E), 0 !== i.pending) {
                        if (B(l), 0 === l.avail_out) return i.last_flush = -1, d
                    } else if (0 === l.avail_in && N(n) <= N(e) && n !== c) return O(l, -5);
                    if (666 === i.status && 0 !== l.avail_in) return O(l, -5);
                    if (0 !== l.avail_in || 0 !== i.lookahead || n !== o && 666 !== i.status) {
                        var f = 2 === i.strategy ? function (l, n) {
                            for (var e;;) {
                                if (0 === l.lookahead && (q(l), 0 === l.lookahead)) {
                                    if (n === o) return A;
                                    break
                                }
                                if (l.match_length = 0, e = s._tr_tally(l, 0, l.window[l.strstart]), l.lookahead--, l.strstart++, e && (z(l, !1), 0 === l.strm.avail_out)) return A
                            }
                            return l.insert = 0, n === c ? (z(l, !0), 0 === l.strm.avail_out ? D : M) : l.last_lit && (z(l, !1), 0 === l.strm.avail_out) ? A : P
                        }(i, n) : 3 === i.strategy ? function (l, n) {
                            for (var e, t, i, u, r = l.window;;) {
                                if (l.lookahead <= C) {
                                    if (q(l), l.lookahead <= C && n === o) return A;
                                    if (0 === l.lookahead) break
                                }
                                if (l.match_length = 0, l.lookahead >= S && l.strstart > 0 && (t = r[i = l.strstart - 1]) === r[++i] && t === r[++i] && t === r[++i]) {
                                    u = l.strstart + C;
                                    do {} while (t === r[++i] && t === r[++i] && t === r[++i] && t === r[++i] && t === r[++i] && t === r[++i] && t === r[++i] && t === r[++i] && i < u);
                                    l.match_length = C - (u - i), l.match_length > l.lookahead && (l.match_length = l.lookahead)
                                }
                                if (l.match_length >= S ? (e = s._tr_tally(l, 1, l.match_length - S), l.lookahead -= l.match_length, l.strstart += l.match_length, l.match_length = 0) : (e = s._tr_tally(l, 0, l.window[l.strstart]), l.lookahead--, l.strstart++), e && (z(l, !1), 0 === l.strm.avail_out)) return A
                            }
                            return l.insert = 0, n === c ? (z(l, !0), 0 === l.strm.avail_out ? D : M) : l.last_lit && (z(l, !1), 0 === l.strm.avail_out) ? A : P
                        }(i, n) : t[i.level].func(i, n);
                        if (f !== D && f !== M || (i.status = 666), f === A || f === D) return 0 === l.avail_out && (i.last_flush = -1), d;
                        if (f === P && (1 === n ? s._tr_align(i) : 5 !== n && (s._tr_stored_block(i, 0, 0, !1), 3 === n && (R(i.head), 0 === i.lookahead && (i.strstart = 0, i.block_start = 0, i.insert = 0))), B(l), 0 === l.avail_out)) return i.last_flush = -1, d
                    }
                    return n !== c ? d : i.wrap <= 0 ? 1 : (2 === i.wrap ? ($(i, 255 & l.adler), $(i, l.adler >> 8 & 255), $(i, l.adler >> 16 & 255), $(i, l.adler >> 24 & 255), $(i, 255 & l.total_in), $(i, l.total_in >> 8 & 255), $(i, l.total_in >> 16 & 255), $(i, l.total_in >> 24 & 255)) : (L(i, l.adler >>> 16), L(i, 65535 & l.adler)), B(l), i.wrap > 0 && (i.wrap = -i.wrap), 0 !== i.pending ? d : 1)
                }, n.deflateEnd = function (l) {
                    var n;
                    return l && l.state ? (n = l.state.status) !== T && 69 !== n && 73 !== n && 91 !== n && 103 !== n && n !== E && 666 !== n ? O(l, h) : (l.state = null, n === E ? O(l, -3) : d) : h
                }, n.deflateSetDictionary = function (l, n) {
                    var e, t, s, r, a, o, c, p, f = n.length;
                    if (!l || !l.state) return h;
                    if (2 === (r = (e = l.state).wrap) || 1 === r && e.status !== T || e.lookahead) return h;
                    for (1 === r && (l.adler = u(l.adler, n, f, 0)), e.wrap = 0, f >= e.w_size && (0 === r && (R(e.head), e.strstart = 0, e.block_start = 0, e.insert = 0), p = new i.Buf8(e.w_size), i.arraySet(p, n, f - e.w_size, e.w_size, 0), n = p, f = e.w_size), a = l.avail_in, o = l.next_in, c = l.input, l.avail_in = f, l.next_in = 0, l.input = n, q(e); e.lookahead >= S;) {
                        t = e.strstart, s = e.lookahead - (S - 1);
                        do {
                            e.ins_h = (e.ins_h << e.hash_shift ^ e.window[t + S - 1]) & e.hash_mask, e.prev[t & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = t, t++
                        } while (--s);
                        e.strstart = t, e.lookahead = S - 1, q(e)
                    }
                    return e.strstart += e.lookahead, e.block_start = e.strstart, e.insert = e.lookahead, e.lookahead = 0, e.match_length = e.prev_length = S - 1, e.match_available = 0, l.next_in = o, l.input = c, l.avail_in = a, e.wrap = r, d
                }, n.deflateInfo = "pako deflate (from Nodeca project)"
            },
            pA7S: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), e("ETIr"), e("cv67"), e("K3mO"), e("OLod"), function () {
                    var l = t,
                        n = l.lib,
                        e = n.WordArray,
                        i = n.BlockCipher,
                        s = l.algo,
                        u = [57, 49, 41, 33, 25, 17, 9, 1, 58, 50, 42, 34, 26, 18, 10, 2, 59, 51, 43, 35, 27, 19, 11, 3, 60, 52, 44, 36, 63, 55, 47, 39, 31, 23, 15, 7, 62, 54, 46, 38, 30, 22, 14, 6, 61, 53, 45, 37, 29, 21, 13, 5, 28, 20, 12, 4],
                        r = [14, 17, 11, 24, 1, 5, 3, 28, 15, 6, 21, 10, 23, 19, 12, 4, 26, 8, 16, 7, 27, 20, 13, 2, 41, 52, 31, 37, 47, 55, 30, 40, 51, 45, 33, 48, 44, 49, 39, 56, 34, 53, 46, 42, 50, 36, 29, 32],
                        a = [1, 2, 4, 6, 8, 10, 12, 14, 15, 17, 19, 21, 23, 25, 27, 28],
                        o = [{
                            0: 8421888,
                            268435456: 32768,
                            536870912: 8421378,
                            805306368: 2,
                            1073741824: 512,
                            1342177280: 8421890,
                            1610612736: 8389122,
                            1879048192: 8388608,
                            2147483648: 514,
                            2415919104: 8389120,
                            2684354560: 33280,
                            2952790016: 8421376,
                            3221225472: 32770,
                            3489660928: 8388610,
                            3758096384: 0,
                            4026531840: 33282,
                            134217728: 0,
                            402653184: 8421890,
                            671088640: 33282,
                            939524096: 32768,
                            1207959552: 8421888,
                            1476395008: 512,
                            1744830464: 8421378,
                            2013265920: 2,
                            2281701376: 8389120,
                            2550136832: 33280,
                            2818572288: 8421376,
                            3087007744: 8389122,
                            3355443200: 8388610,
                            3623878656: 32770,
                            3892314112: 514,
                            4160749568: 8388608,
                            1: 32768,
                            268435457: 2,
                            536870913: 8421888,
                            805306369: 8388608,
                            1073741825: 8421378,
                            1342177281: 33280,
                            1610612737: 512,
                            1879048193: 8389122,
                            2147483649: 8421890,
                            2415919105: 8421376,
                            2684354561: 8388610,
                            2952790017: 33282,
                            3221225473: 514,
                            3489660929: 8389120,
                            3758096385: 32770,
                            4026531841: 0,
                            134217729: 8421890,
                            402653185: 8421376,
                            671088641: 8388608,
                            939524097: 512,
                            1207959553: 32768,
                            1476395009: 8388610,
                            1744830465: 2,
                            2013265921: 33282,
                            2281701377: 32770,
                            2550136833: 8389122,
                            2818572289: 514,
                            3087007745: 8421888,
                            3355443201: 8389120,
                            3623878657: 0,
                            3892314113: 33280,
                            4160749569: 8421378
                        }, {
                            0: 1074282512,
                            16777216: 16384,
                            33554432: 524288,
                            50331648: 1074266128,
                            67108864: 1073741840,
                            83886080: 1074282496,
                            100663296: 1073758208,
                            117440512: 16,
                            134217728: 540672,
                            150994944: 1073758224,
                            167772160: 1073741824,
                            184549376: 540688,
                            201326592: 524304,
                            218103808: 0,
                            234881024: 16400,
                            251658240: 1074266112,
                            8388608: 1073758208,
                            25165824: 540688,
                            41943040: 16,
                            58720256: 1073758224,
                            75497472: 1074282512,
                            92274688: 1073741824,
                            109051904: 524288,
                            125829120: 1074266128,
                            142606336: 524304,
                            159383552: 0,
                            176160768: 16384,
                            192937984: 1074266112,
                            209715200: 1073741840,
                            226492416: 540672,
                            243269632: 1074282496,
                            260046848: 16400,
                            268435456: 0,
                            285212672: 1074266128,
                            301989888: 1073758224,
                            318767104: 1074282496,
                            335544320: 1074266112,
                            352321536: 16,
                            369098752: 540688,
                            385875968: 16384,
                            402653184: 16400,
                            419430400: 524288,
                            436207616: 524304,
                            452984832: 1073741840,
                            469762048: 540672,
                            486539264: 1073758208,
                            503316480: 1073741824,
                            520093696: 1074282512,
                            276824064: 540688,
                            293601280: 524288,
                            310378496: 1074266112,
                            327155712: 16384,
                            343932928: 1073758208,
                            360710144: 1074282512,
                            377487360: 16,
                            394264576: 1073741824,
                            411041792: 1074282496,
                            427819008: 1073741840,
                            444596224: 1073758224,
                            461373440: 524304,
                            478150656: 0,
                            494927872: 16400,
                            511705088: 1074266128,
                            528482304: 540672
                        }, {
                            0: 260,
                            1048576: 0,
                            2097152: 67109120,
                            3145728: 65796,
                            4194304: 65540,
                            5242880: 67108868,
                            6291456: 67174660,
                            7340032: 67174400,
                            8388608: 67108864,
                            9437184: 67174656,
                            10485760: 65792,
                            11534336: 67174404,
                            12582912: 67109124,
                            13631488: 65536,
                            14680064: 4,
                            15728640: 256,
                            524288: 67174656,
                            1572864: 67174404,
                            2621440: 0,
                            3670016: 67109120,
                            4718592: 67108868,
                            5767168: 65536,
                            6815744: 65540,
                            7864320: 260,
                            8912896: 4,
                            9961472: 256,
                            11010048: 67174400,
                            12058624: 65796,
                            13107200: 65792,
                            14155776: 67109124,
                            15204352: 67174660,
                            16252928: 67108864,
                            16777216: 67174656,
                            17825792: 65540,
                            18874368: 65536,
                            19922944: 67109120,
                            20971520: 256,
                            22020096: 67174660,
                            23068672: 67108868,
                            24117248: 0,
                            25165824: 67109124,
                            26214400: 67108864,
                            27262976: 4,
                            28311552: 65792,
                            29360128: 67174400,
                            30408704: 260,
                            31457280: 65796,
                            32505856: 67174404,
                            17301504: 67108864,
                            18350080: 260,
                            19398656: 67174656,
                            20447232: 0,
                            21495808: 65540,
                            22544384: 67109120,
                            23592960: 256,
                            24641536: 67174404,
                            25690112: 65536,
                            26738688: 67174660,
                            27787264: 65796,
                            28835840: 67108868,
                            29884416: 67109124,
                            30932992: 67174400,
                            31981568: 4,
                            33030144: 65792
                        }, {
                            0: 2151682048,
                            65536: 2147487808,
                            131072: 4198464,
                            196608: 2151677952,
                            262144: 0,
                            327680: 4198400,
                            393216: 2147483712,
                            458752: 4194368,
                            524288: 2147483648,
                            589824: 4194304,
                            655360: 64,
                            720896: 2147487744,
                            786432: 2151678016,
                            851968: 4160,
                            917504: 4096,
                            983040: 2151682112,
                            32768: 2147487808,
                            98304: 64,
                            163840: 2151678016,
                            229376: 2147487744,
                            294912: 4198400,
                            360448: 2151682112,
                            425984: 0,
                            491520: 2151677952,
                            557056: 4096,
                            622592: 2151682048,
                            688128: 4194304,
                            753664: 4160,
                            819200: 2147483648,
                            884736: 4194368,
                            950272: 4198464,
                            1015808: 2147483712,
                            1048576: 4194368,
                            1114112: 4198400,
                            1179648: 2147483712,
                            1245184: 0,
                            1310720: 4160,
                            1376256: 2151678016,
                            1441792: 2151682048,
                            1507328: 2147487808,
                            1572864: 2151682112,
                            1638400: 2147483648,
                            1703936: 2151677952,
                            1769472: 4198464,
                            1835008: 2147487744,
                            1900544: 4194304,
                            1966080: 64,
                            2031616: 4096,
                            1081344: 2151677952,
                            1146880: 2151682112,
                            1212416: 0,
                            1277952: 4198400,
                            1343488: 4194368,
                            1409024: 2147483648,
                            1474560: 2147487808,
                            1540096: 64,
                            1605632: 2147483712,
                            1671168: 4096,
                            1736704: 2147487744,
                            1802240: 2151678016,
                            1867776: 4160,
                            1933312: 2151682048,
                            1998848: 4194304,
                            2064384: 4198464
                        }, {
                            0: 128,
                            4096: 17039360,
                            8192: 262144,
                            12288: 536870912,
                            16384: 537133184,
                            20480: 16777344,
                            24576: 553648256,
                            28672: 262272,
                            32768: 16777216,
                            36864: 537133056,
                            40960: 536871040,
                            45056: 553910400,
                            49152: 553910272,
                            53248: 0,
                            57344: 17039488,
                            61440: 553648128,
                            2048: 17039488,
                            6144: 553648256,
                            10240: 128,
                            14336: 17039360,
                            18432: 262144,
                            22528: 537133184,
                            26624: 553910272,
                            30720: 536870912,
                            34816: 537133056,
                            38912: 0,
                            43008: 553910400,
                            47104: 16777344,
                            51200: 536871040,
                            55296: 553648128,
                            59392: 16777216,
                            63488: 262272,
                            65536: 262144,
                            69632: 128,
                            73728: 536870912,
                            77824: 553648256,
                            81920: 16777344,
                            86016: 553910272,
                            90112: 537133184,
                            94208: 16777216,
                            98304: 553910400,
                            102400: 553648128,
                            106496: 17039360,
                            110592: 537133056,
                            114688: 262272,
                            118784: 536871040,
                            122880: 0,
                            126976: 17039488,
                            67584: 553648256,
                            71680: 16777216,
                            75776: 17039360,
                            79872: 537133184,
                            83968: 536870912,
                            88064: 17039488,
                            92160: 128,
                            96256: 553910272,
                            100352: 262272,
                            104448: 553910400,
                            108544: 0,
                            112640: 553648128,
                            116736: 16777344,
                            120832: 262144,
                            124928: 537133056,
                            129024: 536871040
                        }, {
                            0: 268435464,
                            256: 8192,
                            512: 270532608,
                            768: 270540808,
                            1024: 268443648,
                            1280: 2097152,
                            1536: 2097160,
                            1792: 268435456,
                            2048: 0,
                            2304: 268443656,
                            2560: 2105344,
                            2816: 8,
                            3072: 270532616,
                            3328: 2105352,
                            3584: 8200,
                            3840: 270540800,
                            128: 270532608,
                            384: 270540808,
                            640: 8,
                            896: 2097152,
                            1152: 2105352,
                            1408: 268435464,
                            1664: 268443648,
                            1920: 8200,
                            2176: 2097160,
                            2432: 8192,
                            2688: 268443656,
                            2944: 270532616,
                            3200: 0,
                            3456: 270540800,
                            3712: 2105344,
                            3968: 268435456,
                            4096: 268443648,
                            4352: 270532616,
                            4608: 270540808,
                            4864: 8200,
                            5120: 2097152,
                            5376: 268435456,
                            5632: 268435464,
                            5888: 2105344,
                            6144: 2105352,
                            6400: 0,
                            6656: 8,
                            6912: 270532608,
                            7168: 8192,
                            7424: 268443656,
                            7680: 270540800,
                            7936: 2097160,
                            4224: 8,
                            4480: 2105344,
                            4736: 2097152,
                            4992: 268435464,
                            5248: 268443648,
                            5504: 8200,
                            5760: 270540808,
                            6016: 270532608,
                            6272: 270540800,
                            6528: 270532616,
                            6784: 8192,
                            7040: 2105352,
                            7296: 2097160,
                            7552: 0,
                            7808: 268435456,
                            8064: 268443656
                        }, {
                            0: 1048576,
                            16: 33555457,
                            32: 1024,
                            48: 1049601,
                            64: 34604033,
                            80: 0,
                            96: 1,
                            112: 34603009,
                            128: 33555456,
                            144: 1048577,
                            160: 33554433,
                            176: 34604032,
                            192: 34603008,
                            208: 1025,
                            224: 1049600,
                            240: 33554432,
                            8: 34603009,
                            24: 0,
                            40: 33555457,
                            56: 34604032,
                            72: 1048576,
                            88: 33554433,
                            104: 33554432,
                            120: 1025,
                            136: 1049601,
                            152: 33555456,
                            168: 34603008,
                            184: 1048577,
                            200: 1024,
                            216: 34604033,
                            232: 1,
                            248: 1049600,
                            256: 33554432,
                            272: 1048576,
                            288: 33555457,
                            304: 34603009,
                            320: 1048577,
                            336: 33555456,
                            352: 34604032,
                            368: 1049601,
                            384: 1025,
                            400: 34604033,
                            416: 1049600,
                            432: 1,
                            448: 0,
                            464: 34603008,
                            480: 33554433,
                            496: 1024,
                            264: 1049600,
                            280: 33555457,
                            296: 34603009,
                            312: 1,
                            328: 33554432,
                            344: 1048576,
                            360: 1025,
                            376: 34604032,
                            392: 33554433,
                            408: 34603008,
                            424: 0,
                            440: 34604033,
                            456: 1049601,
                            472: 1024,
                            488: 33555456,
                            504: 1048577
                        }, {
                            0: 134219808,
                            1: 131072,
                            2: 134217728,
                            3: 32,
                            4: 131104,
                            5: 134350880,
                            6: 134350848,
                            7: 2048,
                            8: 134348800,
                            9: 134219776,
                            10: 133120,
                            11: 134348832,
                            12: 2080,
                            13: 0,
                            14: 134217760,
                            15: 133152,
                            2147483648: 2048,
                            2147483649: 134350880,
                            2147483650: 134219808,
                            2147483651: 134217728,
                            2147483652: 134348800,
                            2147483653: 133120,
                            2147483654: 133152,
                            2147483655: 32,
                            2147483656: 134217760,
                            2147483657: 2080,
                            2147483658: 131104,
                            2147483659: 134350848,
                            2147483660: 0,
                            2147483661: 134348832,
                            2147483662: 134219776,
                            2147483663: 131072,
                            16: 133152,
                            17: 134350848,
                            18: 32,
                            19: 2048,
                            20: 134219776,
                            21: 134217760,
                            22: 134348832,
                            23: 131072,
                            24: 0,
                            25: 131104,
                            26: 134348800,
                            27: 134219808,
                            28: 134350880,
                            29: 133120,
                            30: 2080,
                            31: 134217728,
                            2147483664: 131072,
                            2147483665: 2048,
                            2147483666: 134348832,
                            2147483667: 133152,
                            2147483668: 32,
                            2147483669: 134348800,
                            2147483670: 134217728,
                            2147483671: 134219808,
                            2147483672: 134350880,
                            2147483673: 134217760,
                            2147483674: 134219776,
                            2147483675: 0,
                            2147483676: 133120,
                            2147483677: 2080,
                            2147483678: 131104,
                            2147483679: 134350848
                        }],
                        c = [4160749569, 528482304, 33030144, 2064384, 129024, 8064, 504, 2147483679],
                        d = s.DES = i.extend({
                            _doReset: function () {
                                for (var l = this._key.words, n = [], e = 0; e < 56; e++) {
                                    var t = u[e] - 1;
                                    n[e] = l[t >>> 5] >>> 31 - t % 32 & 1
                                }
                                for (var i = this._subKeys = [], s = 0; s < 16; s++) {
                                    var o = i[s] = [],
                                        c = a[s];
                                    for (e = 0; e < 24; e++) o[e / 6 | 0] |= n[(r[e] - 1 + c) % 28] << 31 - e % 6, o[4 + (e / 6 | 0)] |= n[28 + (r[e + 24] - 1 + c) % 28] << 31 - e % 6;
                                    for (o[0] = o[0] << 1 | o[0] >>> 31, e = 1; e < 7; e++) o[e] = o[e] >>> 4 * (e - 1) + 3;
                                    o[7] = o[7] << 5 | o[7] >>> 27
                                }
                                var d = this._invSubKeys = [];
                                for (e = 0; e < 16; e++) d[e] = i[15 - e]
                            },
                            encryptBlock: function (l, n) {
                                this._doCryptBlock(l, n, this._subKeys)
                            },
                            decryptBlock: function (l, n) {
                                this._doCryptBlock(l, n, this._invSubKeys)
                            },
                            _doCryptBlock: function (l, n, e) {
                                this._lBlock = l[n], this._rBlock = l[n + 1], h.call(this, 4, 252645135), h.call(this, 16, 65535), p.call(this, 2, 858993459), p.call(this, 8, 16711935), h.call(this, 1, 1431655765);
                                for (var t = 0; t < 16; t++) {
                                    for (var i = e[t], s = this._lBlock, u = this._rBlock, r = 0, a = 0; a < 8; a++) r |= o[a][((u ^ i[a]) & c[a]) >>> 0];
                                    this._lBlock = u, this._rBlock = s ^ r
                                }
                                var d = this._lBlock;
                                this._lBlock = this._rBlock, this._rBlock = d, h.call(this, 1, 1431655765), p.call(this, 8, 16711935), p.call(this, 2, 858993459), h.call(this, 16, 65535), h.call(this, 4, 252645135), l[n] = this._lBlock, l[n + 1] = this._rBlock
                            },
                            keySize: 2,
                            ivSize: 2,
                            blockSize: 2
                        });

                    function h(l, n) {
                        var e = (this._lBlock >>> l ^ this._rBlock) & n;
                        this._rBlock ^= e, this._lBlock ^= e << l
                    }

                    function p(l, n) {
                        var e = (this._rBlock >>> l ^ this._lBlock) & n;
                        this._lBlock ^= e, this._rBlock ^= e << l
                    }
                    l.DES = i._createHelper(d);
                    var f = s.TripleDES = i.extend({
                        _doReset: function () {
                            var l = this._key.words;
                            this._des1 = d.createEncryptor(e.create(l.slice(0, 2))), this._des2 = d.createEncryptor(e.create(l.slice(2, 4))), this._des3 = d.createEncryptor(e.create(l.slice(4, 6)))
                        },
                        encryptBlock: function (l, n) {
                            this._des1.encryptBlock(l, n), this._des2.decryptBlock(l, n), this._des3.encryptBlock(l, n)
                        },
                        decryptBlock: function (l, n) {
                            this._des3.decryptBlock(l, n), this._des2.encryptBlock(l, n), this._des1.decryptBlock(l, n)
                        },
                        keySize: 6,
                        ivSize: 2,
                        blockSize: 2
                    });
                    l.TripleDES = i._createHelper(f)
                }(), t.TripleDES)
            },
            qBft: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), e("OLod"), t.pad.AnsiX923 = {
                    pad: function (l, n) {
                        var e = l.sigBytes,
                            t = 4 * n,
                            i = t - e % t,
                            s = e + i - 1;
                        l.clamp(), l.words[s >>> 2] |= i << 24 - s % 4 * 8, l.sigBytes += i
                    },
                    unpad: function (l) {
                        l.sigBytes -= 255 & l.words[l.sigBytes - 1 >>> 2]
                    }
                }, t.pad.Ansix923)
            },
            qM6L: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), function () {
                    var l = t.lib.WordArray,
                        n = t.enc;

                    function e(l) {
                        return l << 8 & 4278255360 | l >>> 8 & 16711935
                    }
                    n.Utf16 = n.Utf16BE = {
                        stringify: function (l) {
                            for (var n = l.words, e = l.sigBytes, t = [], i = 0; i < e; i += 2) t.push(String.fromCharCode(n[i >>> 2] >>> 16 - i % 4 * 8 & 65535));
                            return t.join("")
                        },
                        parse: function (n) {
                            for (var e = n.length, t = [], i = 0; i < e; i++) t[i >>> 1] |= n.charCodeAt(i) << 16 - i % 2 * 16;
                            return l.create(t, 2 * e)
                        }
                    }, n.Utf16LE = {
                        stringify: function (l) {
                            for (var n = l.words, t = l.sigBytes, i = [], s = 0; s < t; s += 2) {
                                var u = e(n[s >>> 2] >>> 16 - s % 4 * 8 & 65535);
                                i.push(String.fromCharCode(u))
                            }
                            return i.join("")
                        },
                        parse: function (n) {
                            for (var t = n.length, i = [], s = 0; s < t; s++) i[s >>> 1] |= e(n.charCodeAt(s) << 16 - s % 2 * 16);
                            return l.create(i, 2 * t)
                        }
                    }
                }(), t.enc.Utf16)
            },
            qu8F: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), e("OLod"), t.mode.CTRGladman = function () {
                    var l = t.lib.BlockCipherMode.extend();

                    function n(l) {
                        if (255 == (l >> 24 & 255)) {
                            var n = l >> 16 & 255,
                                e = l >> 8 & 255,
                                t = 255 & l;
                            255 === n ? (n = 0, 255 === e ? (e = 0, 255 === t ? t = 0 : ++t) : ++e) : ++n, l = 0, l += n << 16, l += e << 8, l += t
                        } else l += 1 << 24;
                        return l
                    }
                    var e = l.Encryptor = l.extend({
                        processBlock: function (l, e) {
                            var t = this._cipher,
                                i = t.blockSize,
                                s = this._iv,
                                u = this._counter;
                            s && (u = this._counter = s.slice(0), this._iv = void 0),
                                function (l) {
                                    0 === (l[0] = n(l[0])) && (l[1] = n(l[1]))
                                }(u);
                            var r = u.slice(0);
                            t.encryptBlock(r, 0);
                            for (var a = 0; a < i; a++) l[e + a] ^= r[a]
                        }
                    });
                    return l.Decryptor = e, l
                }(), t.mode.CTRGladman)
            },
            uGsb: function (l, n, e) {
                var t, i, s, u, r, a, o, c;
                l.exports = (c = e("Ib8C"), e("MlIO"), e("1uat"), s = (i = (t = c).x64).Word, u = i.WordArray, o = (r = t.algo).SHA384 = (a = r.SHA512).extend({
                    _doReset: function () {
                        this._hash = new u.init([new s.init(3418070365, 3238371032), new s.init(1654270250, 914150663), new s.init(2438529370, 812702999), new s.init(355462360, 4144912697), new s.init(1731405415, 4290775857), new s.init(2394180231, 1750603025), new s.init(3675008525, 1694076839), new s.init(1203062813, 3204075428)])
                    },
                    _doFinalize: function () {
                        var l = a._doFinalize.call(this);
                        return l.sigBytes -= 16, l
                    }
                }), t.SHA384 = a._createHelper(o), t.HmacSHA384 = a._createHmacHelper(o), c.SHA384)
            },
            uGxW: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), e("OLod"), t.pad.NoPadding = {
                    pad: function () {},
                    unpad: function () {}
                }, t.pad.NoPadding)
            },
            "vn/o": function (l, n, e) {
                "use strict";
                var t = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Int32Array;

                function i(l, n) {
                    return Object.prototype.hasOwnProperty.call(l, n)
                }
                n.assign = function (l) {
                    for (var n = Array.prototype.slice.call(arguments, 1); n.length;) {
                        var e = n.shift();
                        if (e) {
                            if ("object" != typeof e) throw new TypeError(e + "must be non-object");
                            for (var t in e) i(e, t) && (l[t] = e[t])
                        }
                    }
                    return l
                }, n.shrinkBuf = function (l, n) {
                    return l.length === n ? l : l.subarray ? l.subarray(0, n) : (l.length = n, l)
                };
                var s = {
                        arraySet: function (l, n, e, t, i) {
                            if (n.subarray && l.subarray) l.set(n.subarray(e, e + t), i);
                            else
                                for (var s = 0; s < t; s++) l[i + s] = n[e + s]
                        },
                        flattenChunks: function (l) {
                            var n, e, t, i, s, u;
                            for (t = 0, n = 0, e = l.length; n < e; n++) t += l[n].length;
                            for (u = new Uint8Array(t), i = 0, n = 0, e = l.length; n < e; n++) u.set(s = l[n], i), i += s.length;
                            return u
                        }
                    },
                    u = {
                        arraySet: function (l, n, e, t, i) {
                            for (var s = 0; s < t; s++) l[i + s] = n[e + s]
                        },
                        flattenChunks: function (l) {
                            return [].concat.apply([], l)
                        }
                    };
                n.setTyped = function (l) {
                    l ? (n.Buf8 = Uint8Array, n.Buf16 = Uint16Array, n.Buf32 = Int32Array, n.assign(n, s)) : (n.Buf8 = Array, n.Buf16 = Array, n.Buf32 = Array, n.assign(n, u))
                }, n.setTyped(t)
            },
            w7YG: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), e("ETIr"), e("cv67"), e("K3mO"), e("OLod"), function () {
                    var l = t,
                        n = l.lib.StreamCipher,
                        e = l.algo,
                        i = e.RC4 = n.extend({
                            _doReset: function () {
                                for (var l = this._key, n = l.words, e = l.sigBytes, t = this._S = [], i = 0; i < 256; i++) t[i] = i;
                                i = 0;
                                for (var s = 0; i < 256; i++) {
                                    var u = i % e,
                                        r = t[i];
                                    t[i] = t[s = (s + t[i] + (n[u >>> 2] >>> 24 - u % 4 * 8 & 255)) % 256], t[s] = r
                                }
                                this._i = this._j = 0
                            },
                            _doProcessBlock: function (l, n) {
                                l[n] ^= s.call(this)
                            },
                            keySize: 8,
                            ivSize: 0
                        });

                    function s() {
                        for (var l = this._S, n = this._i, e = this._j, t = 0, i = 0; i < 4; i++) {
                            var s = l[n = (n + 1) % 256];
                            l[n] = l[e = (e + l[n]) % 256], l[e] = s, t |= l[(l[n] + l[e]) % 256] << 24 - 8 * i
                        }
                        return this._i = n, this._j = e, t
                    }
                    l.RC4 = n._createHelper(i);
                    var u = e.RC4Drop = i.extend({
                        cfg: i.cfg.extend({
                            drop: 192
                        }),
                        _doReset: function () {
                            i._doReset.call(this);
                            for (var l = this.cfg.drop; l > 0; l--) s.call(this)
                        }
                    });
                    l.RC4Drop = n._createHelper(u)
                }(), t.RC4)
            },
            wZgz: function (l, n, e) {
                var t;
                l.exports = (t = e("Ib8C"), e("ETIr"), e("cv67"), e("K3mO"), e("OLod"), function () {
                    var l = t,
                        n = l.lib.BlockCipher,
                        e = l.algo,
                        i = [],
                        s = [],
                        u = [],
                        r = [],
                        a = [],
                        o = [],
                        c = [],
                        d = [],
                        h = [],
                        p = [];
                    ! function () {
                        for (var l = [], n = 0; n < 256; n++) l[n] = n < 128 ? n << 1 : n << 1 ^ 283;
                        var e = 0,
                            t = 0;
                        for (n = 0; n < 256; n++) {
                            var f = t ^ t << 1 ^ t << 2 ^ t << 3 ^ t << 4;
                            i[e] = f = f >>> 8 ^ 255 & f ^ 99, s[f] = e;
                            var g, m = l[e],
                                y = l[m],
                                v = l[y];
                            u[e] = (g = 257 * l[f] ^ 16843008 * f) << 24 | g >>> 8, r[e] = g << 16 | g >>> 16, a[e] = g << 8 | g >>> 24, o[e] = g, c[f] = (g = 16843009 * v ^ 65537 * y ^ 257 * m ^ 16843008 * e) << 24 | g >>> 8, d[f] = g << 16 | g >>> 16, h[f] = g << 8 | g >>> 24, p[f] = g, e ? (e = m ^ l[l[l[v ^ m]]], t ^= l[l[t]]) : e = t = 1
                        }
                    }();
                    var f = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54],
                        g = e.AES = n.extend({
                            _doReset: function () {
                                if (!this._nRounds || this._keyPriorReset !== this._key) {
                                    for (var l = this._keyPriorReset = this._key, n = l.words, e = l.sigBytes / 4, t = 4 * ((this._nRounds = e + 6) + 1), s = this._keySchedule = [], u = 0; u < t; u++)
                                        if (u < e) s[u] = n[u];
                                        else {
                                            var r = s[u - 1];
                                            u % e ? e > 6 && u % e == 4 && (r = i[r >>> 24] << 24 | i[r >>> 16 & 255] << 16 | i[r >>> 8 & 255] << 8 | i[255 & r]) : (r = i[(r = r << 8 | r >>> 24) >>> 24] << 24 | i[r >>> 16 & 255] << 16 | i[r >>> 8 & 255] << 8 | i[255 & r], r ^= f[u / e | 0] << 24), s[u] = s[u - e] ^ r
                                        } for (var a = this._invKeySchedule = [], o = 0; o < t; o++) u = t - o, r = o % 4 ? s[u] : s[u - 4], a[o] = o < 4 || u <= 4 ? r : c[i[r >>> 24]] ^ d[i[r >>> 16 & 255]] ^ h[i[r >>> 8 & 255]] ^ p[i[255 & r]]
                                }
                            },
                            encryptBlock: function (l, n) {
                                this._doCryptBlock(l, n, this._keySchedule, u, r, a, o, i)
                            },
                            decryptBlock: function (l, n) {
                                var e = l[n + 1];
                                l[n + 1] = l[n + 3], l[n + 3] = e, this._doCryptBlock(l, n, this._invKeySchedule, c, d, h, p, s), e = l[n + 1], l[n + 1] = l[n + 3], l[n + 3] = e
                            },
                            _doCryptBlock: function (l, n, e, t, i, s, u, r) {
                                for (var a = this._nRounds, o = l[n] ^ e[0], c = l[n + 1] ^ e[1], d = l[n + 2] ^ e[2], h = l[n + 3] ^ e[3], p = 4, f = 1; f < a; f++) {
                                    var g = t[o >>> 24] ^ i[c >>> 16 & 255] ^ s[d >>> 8 & 255] ^ u[255 & h] ^ e[p++],
                                        m = t[c >>> 24] ^ i[d >>> 16 & 255] ^ s[h >>> 8 & 255] ^ u[255 & o] ^ e[p++],
                                        y = t[d >>> 24] ^ i[h >>> 16 & 255] ^ s[o >>> 8 & 255] ^ u[255 & c] ^ e[p++],
                                        v = t[h >>> 24] ^ i[o >>> 16 & 255] ^ s[c >>> 8 & 255] ^ u[255 & d] ^ e[p++];
                                    o = g, c = m, d = y, h = v
                                }
                                g = (r[o >>> 24] << 24 | r[c >>> 16 & 255] << 16 | r[d >>> 8 & 255] << 8 | r[255 & h]) ^ e[p++], m = (r[c >>> 24] << 24 | r[d >>> 16 & 255] << 16 | r[h >>> 8 & 255] << 8 | r[255 & o]) ^ e[p++], y = (r[d >>> 24] << 24 | r[h >>> 16 & 255] << 16 | r[o >>> 8 & 255] << 8 | r[255 & c]) ^ e[p++], v = (r[h >>> 24] << 24 | r[o >>> 16 & 255] << 16 | r[c >>> 8 & 255] << 8 | r[255 & d]) ^ e[p++], l[n] = g, l[n + 1] = m, l[n + 2] = y, l[n + 3] = v
                            },
                            keySize: 8
                        });
                    l.AES = n._createHelper(g)
                }(), t.AES)
            },
            yDR0: function (l, n, e) {
                "use strict";
                l.exports = function (l, n, e, t) {
                    for (var i = 65535 & l | 0, s = l >>> 16 & 65535 | 0, u = 0; 0 !== e;) {
                        e -= u = e > 2e3 ? 2e3 : e;
                        do {
                            s = s + (i = i + n[t++] | 0) | 0
                        } while (--u);
                        i %= 65521, s %= 65521
                    }
                    return i | s << 16 | 0
                }
            },
            zUnb: function (l, n, e) {
                "use strict";

                function t(l) {
                    return "function" == typeof l
                }
                e.r(n);
                let i = !1;
                const s = {
                    Promise: void 0,
                    set useDeprecatedSynchronousErrorHandling(l) {
                        if (l) {
                            const l = new Error;
                            console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n" + l.stack)
                        } else i && console.log("RxJS: Back to a better error behavior. Thank you. <3");
                        i = l
                    },
                    get useDeprecatedSynchronousErrorHandling() {
                        return i
                    }
                };

                function u(l) {
                    setTimeout(() => {
                        throw l
                    })
                }
                const r = {
                        closed: !0,
                        next(l) {},
                        error(l) {
                            if (s.useDeprecatedSynchronousErrorHandling) throw l;
                            u(l)
                        },
                        complete() {}
                    },
                    a = Array.isArray || (l => l && "number" == typeof l.length);

                function o(l) {
                    return null !== l && "object" == typeof l
                }

                function c(l) {
                    return Error.call(this), this.message = l ? `${l.length} errors occurred during unsubscription:\n${l.map((l,n)=>`${n+1}) ${l.toString()}`).join("\n  ")}` : "", this.name = "UnsubscriptionError", this.errors = l, this
                }
                c.prototype = Object.create(Error.prototype);
                const d = c;
                let h = (() => {
                    class l {
                        constructor(l) {
                            this.closed = !1, this._parent = null, this._parents = null, this._subscriptions = null, l && (this._unsubscribe = l)
                        }
                        unsubscribe() {
                            let l, n = !1;
                            if (this.closed) return;
                            let {
                                _parent: e,
                                _parents: i,
                                _unsubscribe: s,
                                _subscriptions: u
                            } = this;
                            this.closed = !0, this._parent = null, this._parents = null, this._subscriptions = null;
                            let r = -1,
                                c = i ? i.length : 0;
                            for (; e;) e.remove(this), e = ++r < c && i[r] || null;
                            if (t(s)) try {
                                s.call(this)
                            } catch (h) {
                                n = !0, l = h instanceof d ? p(h.errors) : [h]
                            }
                            if (a(u))
                                for (r = -1, c = u.length; ++r < c;) {
                                    const e = u[r];
                                    if (o(e)) try {
                                        e.unsubscribe()
                                    } catch (h) {
                                        n = !0, l = l || [], h instanceof d ? l = l.concat(p(h.errors)) : l.push(h)
                                    }
                                }
                            if (n) throw new d(l)
                        }
                        add(n) {
                            let e = n;
                            switch (typeof n) {
                                case "function":
                                    e = new l(n);
                                case "object":
                                    if (e === this || e.closed || "function" != typeof e.unsubscribe) return e;
                                    if (this.closed) return e.unsubscribe(), e;
                                    if (!(e instanceof l)) {
                                        const n = e;
                                        (e = new l)._subscriptions = [n]
                                    }
                                    break;
                                default:
                                    if (!n) return l.EMPTY;
                                    throw new Error("unrecognized teardown " + n + " added to Subscription.")
                            }
                            if (e._addParent(this)) {
                                const l = this._subscriptions;
                                l ? l.push(e) : this._subscriptions = [e]
                            }
                            return e
                        }
                        remove(l) {
                            const n = this._subscriptions;
                            if (n) {
                                const e = n.indexOf(l); - 1 !== e && n.splice(e, 1)
                            }
                        }
                        _addParent(l) {
                            let {
                                _parent: n,
                                _parents: e
                            } = this;
                            return n !== l && (n ? e ? -1 === e.indexOf(l) && (e.push(l), !0) : (this._parents = [l], !0) : (this._parent = l, !0))
                        }
                    }
                    return l.EMPTY = function (l) {
                        return l.closed = !0, l
                    }(new l), l
                })();

                function p(l) {
                    return l.reduce((l, n) => l.concat(n instanceof d ? n.errors : n), [])
                }
                const f = "function" == typeof Symbol ? Symbol("rxSubscriber") : "@@rxSubscriber_" + Math.random();
                class g extends h {
                    constructor(l, n, e) {
                        switch (super(), this.syncErrorValue = null, this.syncErrorThrown = !1, this.syncErrorThrowable = !1, this.isStopped = !1, arguments.length) {
                            case 0:
                                this.destination = r;
                                break;
                            case 1:
                                if (!l) {
                                    this.destination = r;
                                    break
                                }
                                if ("object" == typeof l) {
                                    l instanceof g ? (this.syncErrorThrowable = l.syncErrorThrowable, this.destination = l, l.add(this)) : (this.syncErrorThrowable = !0, this.destination = new m(this, l));
                                    break
                                }
                            default:
                                this.syncErrorThrowable = !0, this.destination = new m(this, l, n, e)
                        }
                    } [f]() {
                        return this
                    }
                    static create(l, n, e) {
                        const t = new g(l, n, e);
                        return t.syncErrorThrowable = !1, t
                    }
                    next(l) {
                        this.isStopped || this._next(l)
                    }
                    error(l) {
                        this.isStopped || (this.isStopped = !0, this._error(l))
                    }
                    complete() {
                        this.isStopped || (this.isStopped = !0, this._complete())
                    }
                    unsubscribe() {
                        this.closed || (this.isStopped = !0, super.unsubscribe())
                    }
                    _next(l) {
                        this.destination.next(l)
                    }
                    _error(l) {
                        this.destination.error(l), this.unsubscribe()
                    }
                    _complete() {
                        this.destination.complete(), this.unsubscribe()
                    }
                    _unsubscribeAndRecycle() {
                        const {
                            _parent: l,
                            _parents: n
                        } = this;
                        return this._parent = null, this._parents = null, this.unsubscribe(), this.closed = !1, this.isStopped = !1, this._parent = l, this._parents = n, this
                    }
                }
                class m extends g {
                    constructor(l, n, e, i) {
                        let s;
                        super(), this._parentSubscriber = l;
                        let u = this;
                        t(n) ? s = n : n && (s = n.next, e = n.error, i = n.complete, n !== r && (t((u = Object.create(n)).unsubscribe) && this.add(u.unsubscribe.bind(u)), u.unsubscribe = this.unsubscribe.bind(this))), this._context = u, this._next = s, this._error = e, this._complete = i
                    }
                    next(l) {
                        if (!this.isStopped && this._next) {
                            const {
                                _parentSubscriber: n
                            } = this;
                            s.useDeprecatedSynchronousErrorHandling && n.syncErrorThrowable ? this.__tryOrSetError(n, this._next, l) && this.unsubscribe() : this.__tryOrUnsub(this._next, l)
                        }
                    }
                    error(l) {
                        if (!this.isStopped) {
                            const {
                                _parentSubscriber: n
                            } = this, {
                                useDeprecatedSynchronousErrorHandling: e
                            } = s;
                            if (this._error) e && n.syncErrorThrowable ? (this.__tryOrSetError(n, this._error, l), this.unsubscribe()) : (this.__tryOrUnsub(this._error, l), this.unsubscribe());
                            else if (n.syncErrorThrowable) e ? (n.syncErrorValue = l, n.syncErrorThrown = !0) : u(l), this.unsubscribe();
                            else {
                                if (this.unsubscribe(), e) throw l;
                                u(l)
                            }
                        }
                    }
                    complete() {
                        if (!this.isStopped) {
                            const {
                                _parentSubscriber: l
                            } = this;
                            if (this._complete) {
                                const n = () => this._complete.call(this._context);
                                s.useDeprecatedSynchronousErrorHandling && l.syncErrorThrowable ? (this.__tryOrSetError(l, n), this.unsubscribe()) : (this.__tryOrUnsub(n), this.unsubscribe())
                            } else this.unsubscribe()
                        }
                    }
                    __tryOrUnsub(l, n) {
                        try {
                            l.call(this._context, n)
                        } catch (e) {
                            if (this.unsubscribe(), s.useDeprecatedSynchronousErrorHandling) throw e;
                            u(e)
                        }
                    }
                    __tryOrSetError(l, n, e) {
                        if (!s.useDeprecatedSynchronousErrorHandling) throw new Error("bad call");
                        try {
                            n.call(this._context, e)
                        } catch (t) {
                            return s.useDeprecatedSynchronousErrorHandling ? (l.syncErrorValue = t, l.syncErrorThrown = !0, !0) : (u(t), !0)
                        }
                        return !1
                    }
                    _unsubscribe() {
                        const {
                            _parentSubscriber: l
                        } = this;
                        this._context = null, this._parentSubscriber = null, l.unsubscribe()
                    }
                }
                const y = "function" == typeof Symbol && Symbol.observable || "@@observable";

                function v() {}

                function b(...l) {
                    return _(l)
                }

                function _(l) {
                    return l ? 1 === l.length ? l[0] : function (n) {
                        return l.reduce((l, n) => n(l), n)
                    } : v
                }
                let w = (() => {
                    class l {
                        constructor(l) {
                            this._isScalar = !1, l && (this._subscribe = l)
                        }
                        lift(n) {
                            const e = new l;
                            return e.source = this, e.operator = n, e
                        }
                        subscribe(l, n, e) {
                            const {
                                operator: t
                            } = this, i = function (l, n, e) {
                                if (l) {
                                    if (l instanceof g) return l;
                                    if (l[f]) return l[f]()
                                }
                                return l || n || e ? new g(l, n, e) : new g(r)
                            }(l, n, e);
                            if (i.add(t ? t.call(i, this.source) : this.source || s.useDeprecatedSynchronousErrorHandling && !i.syncErrorThrowable ? this._subscribe(i) : this._trySubscribe(i)), s.useDeprecatedSynchronousErrorHandling && i.syncErrorThrowable && (i.syncErrorThrowable = !1, i.syncErrorThrown)) throw i.syncErrorValue;
                            return i
                        }
                        _trySubscribe(l) {
                            try {
                                return this._subscribe(l)
                            } catch (n) {
                                s.useDeprecatedSynchronousErrorHandling && (l.syncErrorThrown = !0, l.syncErrorValue = n),
                                    function (l) {
                                        for (; l;) {
                                            const {
                                                closed: n,
                                                destination: e,
                                                isStopped: t
                                            } = l;
                                            if (n || t) return !1;
                                            l = e && e instanceof g ? e : null
                                        }
                                        return !0
                                    }(l) ? l.error(n) : console.warn(n)
                            }
                        }
                        forEach(l, n) {
                            return new(n = x(n))((n, e) => {
                                let t;
                                t = this.subscribe(n => {
                                    try {
                                        l(n)
                                    } catch (i) {
                                        e(i), t && t.unsubscribe()
                                    }
                                }, e, n)
                            })
                        }
                        _subscribe(l) {
                            const {
                                source: n
                            } = this;
                            return n && n.subscribe(l)
                        } [y]() {
                            return this
                        }
                        pipe(...l) {
                            return 0 === l.length ? this : _(l)(this)
                        }
                        toPromise(l) {
                            return new(l = x(l))((l, n) => {
                                let e;
                                this.subscribe(l => e = l, l => n(l), () => l(e))
                            })
                        }
                    }
                    return l.create = n => new l(n), l
                })();

                function x(l) {
                    if (l || (l = s.Promise || Promise), !l) throw new Error("no Promise impl found");
                    return l
                }

                function k() {
                    return Error.call(this), this.message = "object unsubscribed", this.name = "ObjectUnsubscribedError", this
                }
                k.prototype = Object.create(Error.prototype);
                const S = k;
                class C extends h {
                    constructor(l, n) {
                        super(), this.subject = l, this.subscriber = n, this.closed = !1
                    }
                    unsubscribe() {
                        if (this.closed) return;
                        this.closed = !0;
                        const l = this.subject,
                            n = l.observers;
                        if (this.subject = null, !n || 0 === n.length || l.isStopped || l.closed) return;
                        const e = n.indexOf(this.subscriber); - 1 !== e && n.splice(e, 1)
                    }
                }
                class I extends g {
                    constructor(l) {
                        super(l), this.destination = l
                    }
                }
                let T = (() => {
                    class l extends w {
                        constructor() {
                            super(), this.observers = [], this.closed = !1, this.isStopped = !1, this.hasError = !1, this.thrownError = null
                        } [f]() {
                            return new I(this)
                        }
                        lift(l) {
                            const n = new E(this, this);
                            return n.operator = l, n
                        }
                        next(l) {
                            if (this.closed) throw new S;
                            if (!this.isStopped) {
                                const {
                                    observers: n
                                } = this, e = n.length, t = n.slice();
                                for (let i = 0; i < e; i++) t[i].next(l)
                            }
                        }
                        error(l) {
                            if (this.closed) throw new S;
                            this.hasError = !0, this.thrownError = l, this.isStopped = !0;
                            const {
                                observers: n
                            } = this, e = n.length, t = n.slice();
                            for (let i = 0; i < e; i++) t[i].error(l);
                            this.observers.length = 0
                        }
                        complete() {
                            if (this.closed) throw new S;
                            this.isStopped = !0;
                            const {
                                observers: l
                            } = this, n = l.length, e = l.slice();
                            for (let t = 0; t < n; t++) e[t].complete();
                            this.observers.length = 0
                        }
                        unsubscribe() {
                            this.isStopped = !0, this.closed = !0, this.observers = null
                        }
                        _trySubscribe(l) {
                            if (this.closed) throw new S;
                            return super._trySubscribe(l)
                        }
                        _subscribe(l) {
                            if (this.closed) throw new S;
                            return this.hasError ? (l.error(this.thrownError), h.EMPTY) : this.isStopped ? (l.complete(), h.EMPTY) : (this.observers.push(l), new C(this, l))
                        }
                        asObservable() {
                            const l = new w;
                            return l.source = this, l
                        }
                    }
                    return l.create = (l, n) => new E(l, n), l
                })();
                class E extends T {
                    constructor(l, n) {
                        super(), this.destination = l, this.source = n
                    }
                    next(l) {
                        const {
                            destination: n
                        } = this;
                        n && n.next && n.next(l)
                    }
                    error(l) {
                        const {
                            destination: n
                        } = this;
                        n && n.error && this.destination.error(l)
                    }
                    complete() {
                        const {
                            destination: l
                        } = this;
                        l && l.complete && this.destination.complete()
                    }
                    _subscribe(l) {
                        const {
                            source: n
                        } = this;
                        return n ? this.source.subscribe(l) : h.EMPTY
                    }
                }

                function A(l) {
                    return l && "function" == typeof l.schedule
                }
                class P extends g {
                    constructor(l, n, e) {
                        super(), this.parent = l, this.outerValue = n, this.outerIndex = e, this.index = 0
                    }
                    _next(l) {
                        this.parent.notifyNext(this.outerValue, l, this.outerIndex, this.index++, this)
                    }
                    _error(l) {
                        this.parent.notifyError(l, this), this.unsubscribe()
                    }
                    _complete() {
                        this.parent.notifyComplete(this), this.unsubscribe()
                    }
                }
                const D = l => n => {
                        for (let e = 0, t = l.length; e < t && !n.closed; e++) n.next(l[e]);
                        n.closed || n.complete()
                    },
                    M = l => n => (l.then(l => {
                        n.closed || (n.next(l), n.complete())
                    }, l => n.error(l)).then(null, u), n);

                function O() {
                    return "function" == typeof Symbol && Symbol.iterator ? Symbol.iterator : "@@iterator"
                }
                const N = O(),
                    R = l => n => {
                        const e = l[N]();
                        for (;;) {
                            const l = e.next();
                            if (l.done) {
                                n.complete();
                                break
                            }
                            if (n.next(l.value), n.closed) break
                        }
                        return "function" == typeof e.return && n.add(() => {
                            e.return && e.return()
                        }), n
                    },
                    B = l => n => {
                        const e = l[y]();
                        if ("function" != typeof e.subscribe) throw new TypeError("Provided object does not correctly implement Symbol.observable");
                        return e.subscribe(n)
                    },
                    z = l => l && "number" == typeof l.length && "function" != typeof l;

                function $(l) {
                    return !!l && "function" != typeof l.subscribe && "function" == typeof l.then
                }
                const L = l => {
                    if (l instanceof w) return n => l._isScalar ? (n.next(l.value), void n.complete()) : l.subscribe(n);
                    if (l && "function" == typeof l[y]) return B(l);
                    if (z(l)) return D(l);
                    if ($(l)) return M(l);
                    if (l && "function" == typeof l[N]) return R(l); {
                        const n = o(l) ? "an invalid object" : `'${l}'`;
                        throw new TypeError(`You provided ${n} where a stream was expected.` + " You can provide an Observable, Promise, Array, or Iterable.")
                    }
                };

                function F(l, n, e, t, i = new P(l, e, t)) {
                    if (!i.closed) return L(n)(i)
                }
                class q extends g {
                    notifyNext(l, n, e, t, i) {
                        this.destination.next(n)
                    }
                    notifyError(l, n) {
                        this.destination.error(l)
                    }
                    notifyComplete(l) {
                        this.destination.complete()
                    }
                }

                function U(l, n) {
                    return function (e) {
                        if ("function" != typeof l) throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");
                        return e.lift(new H(l, n))
                    }
                }
                class H {
                    constructor(l, n) {
                        this.project = l, this.thisArg = n
                    }
                    call(l, n) {
                        return n.subscribe(new V(l, this.project, this.thisArg))
                    }
                }
                class V extends g {
                    constructor(l, n, e) {
                        super(l), this.project = n, this.count = 0, this.thisArg = e || this
                    }
                    _next(l) {
                        let n;
                        try {
                            n = this.project.call(this.thisArg, l, this.count++)
                        } catch (e) {
                            return void this.destination.error(e)
                        }
                        this.destination.next(n)
                    }
                }

                function j(l, n) {
                    return new w(n ? e => {
                        const t = new h;
                        let i = 0;
                        return t.add(n.schedule((function () {
                            i !== l.length ? (e.next(l[i++]), e.closed || t.add(this.schedule())) : e.complete()
                        }))), t
                    } : D(l))
                }

                function G(l, n) {
                    if (!n) return l instanceof w ? l : new w(L(l));
                    if (null != l) {
                        if (function (l) {
                                return l && "function" == typeof l[y]
                            }(l)) return function (l, n) {
                            return new w(n ? e => {
                                const t = new h;
                                return t.add(n.schedule(() => {
                                    const i = l[y]();
                                    t.add(i.subscribe({
                                        next(l) {
                                            t.add(n.schedule(() => e.next(l)))
                                        },
                                        error(l) {
                                            t.add(n.schedule(() => e.error(l)))
                                        },
                                        complete() {
                                            t.add(n.schedule(() => e.complete()))
                                        }
                                    }))
                                })), t
                            } : B(l))
                        }(l, n);
                        if ($(l)) return function (l, n) {
                            return new w(n ? e => {
                                const t = new h;
                                return t.add(n.schedule(() => l.then(l => {
                                    t.add(n.schedule(() => {
                                        e.next(l), t.add(n.schedule(() => e.complete()))
                                    }))
                                }, l => {
                                    t.add(n.schedule(() => e.error(l)))
                                }))), t
                            } : M(l))
                        }(l, n);
                        if (z(l)) return j(l, n);
                        if (function (l) {
                                return l && "function" == typeof l[N]
                            }(l) || "string" == typeof l) return function (l, n) {
                            if (!l) throw new Error("Iterable cannot be null");
                            return new w(n ? e => {
                                const t = new h;
                                let i;
                                return t.add(() => {
                                    i && "function" == typeof i.return && i.return()
                                }), t.add(n.schedule(() => {
                                    i = l[N](), t.add(n.schedule((function () {
                                        if (e.closed) return;
                                        let l, n;
                                        try {
                                            const e = i.next();
                                            l = e.value, n = e.done
                                        } catch (t) {
                                            return void e.error(t)
                                        }
                                        n ? e.complete() : (e.next(l), this.schedule())
                                    })))
                                })), t
                            } : R(l))
                        }(l, n)
                    }
                    throw new TypeError((null !== l && typeof l || l) + " is not observable")
                }

                function W(l, n, e = Number.POSITIVE_INFINITY) {
                    return "function" == typeof n ? t => t.pipe(W((e, t) => G(l(e, t)).pipe(U((l, i) => n(e, l, t, i))), e)) : ("number" == typeof n && (e = n), n => n.lift(new K(l, e)))
                }
                class K {
                    constructor(l, n = Number.POSITIVE_INFINITY) {
                        this.project = l, this.concurrent = n
                    }
                    call(l, n) {
                        return n.subscribe(new Z(l, this.project, this.concurrent))
                    }
                }
                class Z extends q {
                    constructor(l, n, e = Number.POSITIVE_INFINITY) {
                        super(l), this.project = n, this.concurrent = e, this.hasCompleted = !1, this.buffer = [], this.active = 0, this.index = 0
                    }
                    _next(l) {
                        this.active < this.concurrent ? this._tryNext(l) : this.buffer.push(l)
                    }
                    _tryNext(l) {
                        let n;
                        const e = this.index++;
                        try {
                            n = this.project(l, e)
                        } catch (t) {
                            return void this.destination.error(t)
                        }
                        this.active++, this._innerSub(n, l, e)
                    }
                    _innerSub(l, n, e) {
                        const t = new P(this, void 0, void 0);
                        this.destination.add(t), F(this, l, n, e, t)
                    }
                    _complete() {
                        this.hasCompleted = !0, 0 === this.active && 0 === this.buffer.length && this.destination.complete(), this.unsubscribe()
                    }
                    notifyNext(l, n, e, t, i) {
                        this.destination.next(n)
                    }
                    notifyComplete(l) {
                        const n = this.buffer;
                        this.remove(l), this.active--, n.length > 0 ? this._next(n.shift()) : 0 === this.active && this.hasCompleted && this.destination.complete()
                    }
                }

                function Q(l) {
                    return l
                }

                function Y(l = Number.POSITIVE_INFINITY) {
                    return W(Q, l)
                }

                function X(...l) {
                    let n = Number.POSITIVE_INFINITY,
                        e = null,
                        t = l[l.length - 1];
                    return A(t) ? (e = l.pop(), l.length > 1 && "number" == typeof l[l.length - 1] && (n = l.pop())) : "number" == typeof t && (n = l.pop()), null === e && 1 === l.length && l[0] instanceof w ? l[0] : Y(n)(j(l, e))
                }

                function J() {
                    return function (l) {
                        return l.lift(new ll(l))
                    }
                }
                class ll {
                    constructor(l) {
                        this.connectable = l
                    }
                    call(l, n) {
                        const {
                            connectable: e
                        } = this;
                        e._refCount++;
                        const t = new nl(l, e),
                            i = n.subscribe(t);
                        return t.closed || (t.connection = e.connect()), i
                    }
                }
                class nl extends g {
                    constructor(l, n) {
                        super(l), this.connectable = n
                    }
                    _unsubscribe() {
                        const {
                            connectable: l
                        } = this;
                        if (!l) return void(this.connection = null);
                        this.connectable = null;
                        const n = l._refCount;
                        if (n <= 0) return void(this.connection = null);
                        if (l._refCount = n - 1, n > 1) return void(this.connection = null);
                        const {
                            connection: e
                        } = this, t = l._connection;
                        this.connection = null, !t || e && t !== e || t.unsubscribe()
                    }
                }
                const el = class extends w {
                        constructor(l, n) {
                            super(), this.source = l, this.subjectFactory = n, this._refCount = 0, this._isComplete = !1
                        }
                        _subscribe(l) {
                            return this.getSubject().subscribe(l)
                        }
                        getSubject() {
                            const l = this._subject;
                            return l && !l.isStopped || (this._subject = this.subjectFactory()), this._subject
                        }
                        connect() {
                            let l = this._connection;
                            return l || (this._isComplete = !1, (l = this._connection = new h).add(this.source.subscribe(new il(this.getSubject(), this))), l.closed ? (this._connection = null, l = h.EMPTY) : this._connection = l), l
                        }
                        refCount() {
                            return J()(this)
                        }
                    }.prototype,
                    tl = {
                        operator: {
                            value: null
                        },
                        _refCount: {
                            value: 0,
                            writable: !0
                        },
                        _subject: {
                            value: null,
                            writable: !0
                        },
                        _connection: {
                            value: null,
                            writable: !0
                        },
                        _subscribe: {
                            value: el._subscribe
                        },
                        _isComplete: {
                            value: el._isComplete,
                            writable: !0
                        },
                        getSubject: {
                            value: el.getSubject
                        },
                        connect: {
                            value: el.connect
                        },
                        refCount: {
                            value: el.refCount
                        }
                    };
                class il extends I {
                    constructor(l, n) {
                        super(l), this.connectable = n
                    }
                    _error(l) {
                        this._unsubscribe(), super._error(l)
                    }
                    _complete() {
                        this.connectable._isComplete = !0, this._unsubscribe(), super._complete()
                    }
                    _unsubscribe() {
                        const l = this.connectable;
                        if (l) {
                            this.connectable = null;
                            const n = l._connection;
                            l._refCount = 0, l._subject = null, l._connection = null, n && n.unsubscribe()
                        }
                    }
                }

                function sl() {
                    return new T
                }

                function ul() {
                    return l => J()(function (l, n) {
                        return function (n) {
                            let e;
                            e = "function" == typeof l ? l : function () {
                                return l
                            };
                            const t = Object.create(n, tl);
                            return t.source = n, t.subjectFactory = e, t
                        }
                    }(sl)(l))
                }
                const rl = "__parameters__";

                function al(l, n, e) {
                    const t = function (l) {
                        return function (...n) {
                            if (l) {
                                const e = l(...n);
                                for (const l in e) this[l] = e[l]
                            }
                        }
                    }(n);

                    function i(...l) {
                        if (this instanceof i) return t.apply(this, l), this;
                        const n = new i(...l);
                        return e.annotation = n, e;

                        function e(l, e, t) {
                            const i = l.hasOwnProperty(rl) ? l[rl] : Object.defineProperty(l, rl, {
                                value: []
                            })[rl];
                            for (; i.length <= t;) i.push(null);
                            return (i[t] = i[t] || []).push(n), l
                        }
                    }
                    return e && (i.prototype = Object.create(e.prototype)), i.prototype.ngMetadataName = l, i.annotationCls = i, i
                }
                const ol = al("Inject", l => ({
                        token: l
                    })),
                    cl = al("Optional"),
                    dl = al("Self"),
                    hl = al("SkipSelf");
                var pl = function (l) {
                    return l[l.Default = 0] = "Default", l[l.Host = 1] = "Host", l[l.Self = 2] = "Self", l[l.SkipSelf = 4] = "SkipSelf", l[l.Optional = 8] = "Optional", l
                }({});

                function fl(l) {
                    for (let n in l)
                        if (l[n] === fl) return n;
                    throw Error("Could not find renamed property on target object.")
                }

                function gl(l) {
                    return {
                        token: l.token,
                        providedIn: l.providedIn || null,
                        factory: l.factory,
                        value: void 0
                    }
                }
                const ml = gl;

                function yl(l) {
                    const n = l[vl];
                    return n && n.token === l ? n : null
                }
                const vl = fl({
                    ngInjectableDef: fl
                });

                function bl(l) {
                    if ("string" == typeof l) return l;
                    if (l instanceof Array) return "[" + l.map(bl).join(", ") + "]";
                    if (null == l) return "" + l;
                    if (l.overriddenName) return `${l.overriddenName}`;
                    if (l.name) return `${l.name}`;
                    const n = l.toString();
                    if (null == n) return "" + n;
                    const e = n.indexOf("\n");
                    return -1 === e ? n : n.substring(0, e)
                }
                const _l = fl({
                    __forward_ref__: fl
                });

                function wl(l) {
                    return l.__forward_ref__ = wl, l.toString = function () {
                        return bl(this())
                    }, l
                }

                function xl(l) {
                    const n = l;
                    return "function" == typeof n && n.hasOwnProperty(_l) && n.__forward_ref__ === wl ? n() : l
                }
                const kl = "undefined" != typeof globalThis && globalThis,
                    Sl = "undefined" != typeof window && window,
                    Cl = "undefined" != typeof self && "undefined" != typeof WorkerGlobalScope && self instanceof WorkerGlobalScope && self,
                    Il = "undefined" != typeof global && global,
                    Tl = kl || Il || Sl || Cl;
                class El {
                    constructor(l, n) {
                        this._desc = l, this.ngMetadataName = "InjectionToken", this.ngInjectableDef = void 0, "number" == typeof n ? this.__NG_ELEMENT_ID__ = n : void 0 !== n && (this.ngInjectableDef = gl({
                            token: this,
                            providedIn: n.providedIn || "root",
                            factory: n.factory
                        }))
                    }
                    toString() {
                        return `InjectionToken ${this._desc}`
                    }
                }
                const Al = new El("INJECTOR", -1),
                    Pl = new Object,
                    Dl = "ngTempTokenPath",
                    Ml = "ngTokenPath",
                    Ol = /\n/gm,
                    Nl = "\u0275",
                    Rl = "__source",
                    Bl = fl({
                        provide: String,
                        useValue: fl
                    });
                let zl, $l = void 0;

                function Ll(l) {
                    const n = $l;
                    return $l = l, n
                }

                function Fl(l, n = pl.Default) {
                    if (void 0 === $l) throw new Error("inject() must be called from an injection context");
                    return null === $l ? function (l, n, e) {
                        const t = yl(l);
                        if (t && "root" == t.providedIn) return void 0 === t.value ? t.value = t.factory() : t.value;
                        if (e & pl.Optional) return null;
                        throw new Error(`Injector: NOT_FOUND [${bl(l)}]`)
                    }(l, 0, n) : $l.get(l, n & pl.Optional ? null : void 0, n)
                }

                function ql(l, n = pl.Default) {
                    return (zl || Fl)(l, n)
                }
                const Ul = ql;
                class Hl {
                    get(l, n = Pl) {
                        if (n === Pl) {
                            const n = new Error(`NullInjectorError: No provider for ${bl(l)}!`);
                            throw n.name = "NullInjectorError", n
                        }
                        return n
                    }
                }

                function Vl(l, n, e, t = null) {
                    l = l && "\n" === l.charAt(0) && l.charAt(1) == Nl ? l.substr(2) : l;
                    let i = bl(n);
                    if (n instanceof Array) i = n.map(bl).join(" -> ");
                    else if ("object" == typeof n) {
                        let l = [];
                        for (let e in n)
                            if (n.hasOwnProperty(e)) {
                                let t = n[e];
                                l.push(e + ":" + ("string" == typeof t ? JSON.stringify(t) : bl(t)))
                            } i = `{${l.join(", ")}}`
                    }
                    return `${e}${t?"("+t+")":""}[${i}]: ${l.replace(Ol,"\n  ")}`
                }
                class jl {}
                class Gl {}

                function Wl(l, n, e) {
                    n >= l.length ? l.push(e) : l.splice(n, 0, e)
                }

                function Kl(l, n) {
                    return n >= l.length - 1 ? l.pop() : l.splice(n, 1)[0]
                }
                const Zl = function () {
                        var l = {
                            Emulated: 0,
                            Native: 1,
                            None: 2,
                            ShadowDom: 3
                        };
                        return l[l.Emulated] = "Emulated", l[l.Native] = "Native", l[l.None] = "None", l[l.ShadowDom] = "ShadowDom", l
                    }(),
                    Ql = (() => ("undefined" != typeof requestAnimationFrame && requestAnimationFrame || setTimeout).bind(Tl))(),
                    Yl = "ngDebugContext",
                    Xl = "ngOriginalError",
                    Jl = "ngErrorLogger";

                function ln(l) {
                    return l[Yl]
                }

                function nn(l) {
                    return l[Xl]
                }

                function en(l, ...n) {
                    l.error(...n)
                }
                class tn {
                    constructor() {
                        this._console = console
                    }
                    handleError(l) {
                        const n = this._findOriginalError(l),
                            e = this._findContext(l),
                            t = function (l) {
                                return l[Jl] || en
                            }(l);
                        t(this._console, "ERROR", l), n && t(this._console, "ORIGINAL ERROR", n), e && t(this._console, "ERROR CONTEXT", e)
                    }
                    _findContext(l) {
                        return l ? ln(l) ? ln(l) : this._findContext(nn(l)) : null
                    }
                    _findOriginalError(l) {
                        let n = nn(l);
                        for (; n && nn(n);) n = nn(n);
                        return n
                    }
                }
                let sn = !0,
                    un = !1;

                function rn() {
                    return un = !0, sn
                }
                class an {
                    constructor(l) {
                        if (this.defaultDoc = l, this.inertDocument = this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"), this.inertBodyElement = this.inertDocument.body, null == this.inertBodyElement) {
                            const l = this.inertDocument.createElement("html");
                            this.inertDocument.appendChild(l), this.inertBodyElement = this.inertDocument.createElement("body"), l.appendChild(this.inertBodyElement)
                        }
                        this.inertBodyElement.innerHTML = '<svg><g onload="this.parentNode.remove()"></g></svg>', !this.inertBodyElement.querySelector || this.inertBodyElement.querySelector("svg") ? (this.inertBodyElement.innerHTML = '<svg><p><style><img src="</style><img src=x onerror=alert(1)//">', this.getInertBodyElement = this.inertBodyElement.querySelector && this.inertBodyElement.querySelector("svg img") && function () {
                            try {
                                return !!window.DOMParser
                            } catch (l) {
                                return !1
                            }
                        }() ? this.getInertBodyElement_DOMParser : this.getInertBodyElement_InertDocument) : this.getInertBodyElement = this.getInertBodyElement_XHR
                    }
                    getInertBodyElement_XHR(l) {
                        l = "<body><remove></remove>" + l + "</body>";
                        try {
                            l = encodeURI(l)
                        } catch (t) {
                            return null
                        }
                        const n = new XMLHttpRequest;
                        n.responseType = "document", n.open("GET", "data:text/html;charset=utf-8," + l, !1), n.send(void 0);
                        const e = n.response.body;
                        return e.removeChild(e.firstChild), e
                    }
                    getInertBodyElement_DOMParser(l) {
                        l = "<body><remove></remove>" + l + "</body>";
                        try {
                            const n = (new window.DOMParser).parseFromString(l, "text/html").body;
                            return n.removeChild(n.firstChild), n
                        } catch (n) {
                            return null
                        }
                    }
                    getInertBodyElement_InertDocument(l) {
                        const n = this.inertDocument.createElement("template");
                        return "content" in n ? (n.innerHTML = l, n) : (this.inertBodyElement.innerHTML = l, this.defaultDoc.documentMode && this.stripCustomNsAttrs(this.inertBodyElement), this.inertBodyElement)
                    }
                    stripCustomNsAttrs(l) {
                        const n = l.attributes;
                        for (let t = n.length - 1; 0 < t; t--) {
                            const e = n.item(t).name;
                            "xmlns:ns1" !== e && 0 !== e.indexOf("ns1:") || l.removeAttribute(e)
                        }
                        let e = l.firstChild;
                        for (; e;) e.nodeType === Node.ELEMENT_NODE && this.stripCustomNsAttrs(e), e = e.nextSibling
                    }
                }
                const on = /^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,
                    cn = /^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;

                function dn(l) {
                    return (l = String(l)).match(on) || l.match(cn) ? l : (rn() && console.warn(`WARNING: sanitizing unsafe URL value ${l} (see http://g.co/ng/security#xss)`), "unsafe:" + l)
                }

                function hn(l) {
                    const n = {};
                    for (const e of l.split(",")) n[e] = !0;
                    return n
                }

                function pn(...l) {
                    const n = {};
                    for (const e of l)
                        for (const l in e) e.hasOwnProperty(l) && (n[l] = !0);
                    return n
                }
                const fn = hn("area,br,col,hr,img,wbr"),
                    gn = hn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),
                    mn = hn("rp,rt"),
                    yn = pn(mn, gn),
                    vn = pn(fn, pn(gn, hn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")), pn(mn, hn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")), yn),
                    bn = hn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),
                    _n = hn("srcset"),
                    wn = pn(bn, _n, hn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"), hn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),
                    xn = hn("script,style,template");
                class kn {
                    constructor() {
                        this.sanitizedSomething = !1, this.buf = []
                    }
                    sanitizeChildren(l) {
                        let n = l.firstChild,
                            e = !0;
                        for (; n;)
                            if (n.nodeType === Node.ELEMENT_NODE ? e = this.startElement(n) : n.nodeType === Node.TEXT_NODE ? this.chars(n.nodeValue) : this.sanitizedSomething = !0, e && n.firstChild) n = n.firstChild;
                            else
                                for (; n;) {
                                    n.nodeType === Node.ELEMENT_NODE && this.endElement(n);
                                    let l = this.checkClobberedElement(n, n.nextSibling);
                                    if (l) {
                                        n = l;
                                        break
                                    }
                                    n = this.checkClobberedElement(n, n.parentNode)
                                }
                        return this.buf.join("")
                    }
                    startElement(l) {
                        const n = l.nodeName.toLowerCase();
                        if (!vn.hasOwnProperty(n)) return this.sanitizedSomething = !0, !xn.hasOwnProperty(n);
                        this.buf.push("<"), this.buf.push(n);
                        const e = l.attributes;
                        for (let i = 0; i < e.length; i++) {
                            const l = e.item(i),
                                n = l.name,
                                s = n.toLowerCase();
                            if (!wn.hasOwnProperty(s)) {
                                this.sanitizedSomething = !0;
                                continue
                            }
                            let u = l.value;
                            bn[s] && (u = dn(u)), _n[s] && (t = u, u = (t = String(t)).split(",").map(l => dn(l.trim())).join(", ")), this.buf.push(" ", n, '="', In(u), '"')
                        }
                        var t;
                        return this.buf.push(">"), !0
                    }
                    endElement(l) {
                        const n = l.nodeName.toLowerCase();
                        vn.hasOwnProperty(n) && !fn.hasOwnProperty(n) && (this.buf.push("</"), this.buf.push(n), this.buf.push(">"))
                    }
                    chars(l) {
                        this.buf.push(In(l))
                    }
                    checkClobberedElement(l, n) {
                        if (n && (l.compareDocumentPosition(n) & Node.DOCUMENT_POSITION_CONTAINED_BY) === Node.DOCUMENT_POSITION_CONTAINED_BY) throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);
                        return n
                    }
                }
                const Sn = /[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
                    Cn = /([^\#-~ |!])/g;

                function In(l) {
                    return l.replace(/&/g, "&amp;").replace(Sn, (function (l) {
                        return "&#" + (1024 * (l.charCodeAt(0) - 55296) + (l.charCodeAt(1) - 56320) + 65536) + ";"
                    })).replace(Cn, (function (l) {
                        return "&#" + l.charCodeAt(0) + ";"
                    })).replace(/</g, "&lt;").replace(/>/g, "&gt;")
                }
                let Tn;

                function En(l) {
                    return "content" in l && function (l) {
                        return l.nodeType === Node.ELEMENT_NODE && "TEMPLATE" === l.nodeName
                    }(l) ? l.content : null
                }
                const An = function () {
                    var l = {
                        NONE: 0,
                        HTML: 1,
                        STYLE: 2,
                        SCRIPT: 3,
                        URL: 4,
                        RESOURCE_URL: 5
                    };
                    return l[l.NONE] = "NONE", l[l.HTML] = "HTML", l[l.STYLE] = "STYLE", l[l.SCRIPT] = "SCRIPT", l[l.URL] = "URL", l[l.RESOURCE_URL] = "RESOURCE_URL", l
                }();
                class Pn {}
                const Dn = new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$", "g"),
                    Mn = /^url\(([^)]+)\)$/,
                    On = /([A-Z])/g;

                function Nn(l) {
                    try {
                        return null != l ? l.toString().slice(0, 30) : l
                    } catch (n) {
                        return "[ERROR] Exception while trying to serialize the value"
                    }
                }
                let Rn = (() => {
                    class l {}
                    return l.__NG_ELEMENT_ID__ = () => Bn(), l
                })();
                const Bn = (...l) => {},
                    zn = new El("The presence of this token marks an injector as being the root injector."),
                    $n = function (l, n, e) {
                        return new jn(l, n, e)
                    };
                let Ln = (() => {
                    class l {
                        static create(l, n) {
                            return Array.isArray(l) ? $n(l, n, "") : $n(l.providers, l.parent, l.name || "")
                        }
                    }
                    return l.THROW_IF_NOT_FOUND = Pl, l.NULL = new Hl, l.ngInjectableDef = gl({
                        token: l,
                        providedIn: "any",
                        factory: () => ql(Al)
                    }), l.__NG_ELEMENT_ID__ = -1, l
                })();
                const Fn = function (l) {
                        return l
                    },
                    qn = [],
                    Un = Fn,
                    Hn = function () {
                        return Array.prototype.slice.call(arguments)
                    },
                    Vn = "\u0275";
                class jn {
                    constructor(l, n = Ln.NULL, e = null) {
                        this.parent = n, this.source = e;
                        const t = this._records = new Map;
                        t.set(Ln, {
                                token: Ln,
                                fn: Fn,
                                deps: qn,
                                value: this,
                                useNew: !1
                            }), t.set(Al, {
                                token: Al,
                                fn: Fn,
                                deps: qn,
                                value: this,
                                useNew: !1
                            }),
                            function l(n, e) {
                                if (e)
                                    if ((e = xl(e)) instanceof Array)
                                        for (let t = 0; t < e.length; t++) l(n, e[t]);
                                    else {
                                        if ("function" == typeof e) throw Wn("Function/Class not supported", e);
                                        if (!e || "object" != typeof e || !e.provide) throw Wn("Unexpected provider", e); {
                                            let l = xl(e.provide);
                                            const t = function (l) {
                                                const n = function (l) {
                                                    let n = qn;
                                                    const e = l.deps;
                                                    if (e && e.length) {
                                                        n = [];
                                                        for (let l = 0; l < e.length; l++) {
                                                            let t = 6,
                                                                i = xl(e[l]);
                                                            if (i instanceof Array)
                                                                for (let l = 0, n = i; l < n.length; l++) {
                                                                    const e = n[l];
                                                                    e instanceof cl || e == cl ? t |= 1 : e instanceof hl || e == hl ? t &= -3 : e instanceof dl || e == dl ? t &= -5 : i = e instanceof ol ? e.token : xl(e)
                                                                }
                                                            n.push({
                                                                token: i,
                                                                options: t
                                                            })
                                                        }
                                                    } else if (l.useExisting) n = [{
                                                        token: xl(l.useExisting),
                                                        options: 6
                                                    }];
                                                    else if (!(e || Bl in l)) throw Wn("'deps' required", l);
                                                    return n
                                                }(l);
                                                let e = Fn,
                                                    t = qn,
                                                    i = !1,
                                                    s = xl(l.provide);
                                                if (Bl in l) t = l.useValue;
                                                else if (l.useFactory) e = l.useFactory;
                                                else if (l.useExisting);
                                                else if (l.useClass) i = !0, e = xl(l.useClass);
                                                else {
                                                    if ("function" != typeof s) throw Wn("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable", l);
                                                    i = !0, e = s
                                                }
                                                return {
                                                    deps: n,
                                                    fn: e,
                                                    useNew: i,
                                                    value: t
                                                }
                                            }(e);
                                            if (!0 === e.multi) {
                                                let t = n.get(l);
                                                if (t) {
                                                    if (t.fn !== Hn) throw Gn(l)
                                                } else n.set(l, t = {
                                                    token: e.provide,
                                                    deps: [],
                                                    useNew: !1,
                                                    fn: Hn,
                                                    value: qn
                                                });
                                                t.deps.push({
                                                    token: l = e,
                                                    options: 6
                                                })
                                            }
                                            const i = n.get(l);
                                            if (i && i.fn == Hn) throw Gn(l);
                                            n.set(l, t)
                                        }
                                    }
                            }(t, l)
                    }
                    get(l, n, e = pl.Default) {
                        const t = this._records.get(l);
                        try {
                            return function l(n, e, t, i, s, u) {
                                try {
                                    return function (n, e, t, i, s, u) {
                                        let r;
                                        if (!e || u & pl.SkipSelf) u & pl.Self || (r = i.get(n, s, pl.Default));
                                        else {
                                            if ((r = e.value) == Un) throw Error(Vn + "Circular dependency");
                                            if (r === qn) {
                                                e.value = Un;
                                                let n = void 0,
                                                    s = e.useNew,
                                                    u = e.fn,
                                                    a = e.deps,
                                                    o = qn;
                                                if (a.length) {
                                                    o = [];
                                                    for (let n = 0; n < a.length; n++) {
                                                        const e = a[n],
                                                            s = e.options,
                                                            u = 2 & s ? t.get(e.token) : void 0;
                                                        o.push(l(e.token, u, t, u || 4 & s ? i : Ln.NULL, 1 & s ? null : Ln.THROW_IF_NOT_FOUND, pl.Default))
                                                    }
                                                }
                                                e.value = r = s ? new u(...o) : u.apply(n, o)
                                            }
                                        }
                                        return r
                                    }(n, e, t, i, s, u)
                                } catch (r) {
                                    throw r instanceof Error || (r = new Error(r)), (r[Dl] = r[Dl] || []).unshift(n), e && e.value == Un && (e.value = qn), r
                                }
                            }(l, t, this._records, this.parent, n, e)
                        } catch (i) {
                            return function (l, n, e, t) {
                                const i = l[Dl];
                                throw n[Rl] && i.unshift(n[Rl]), l.message = Vl("\n" + l.message, i, "StaticInjectorError", t), l[Ml] = i, l[Dl] = null, l
                            }(i, l, 0, this.source)
                        }
                    }
                    toString() {
                        const l = [];
                        return this._records.forEach((n, e) => l.push(bl(e))), `StaticInjector[${l.join(", ")}]`
                    }
                }

                function Gn(l) {
                    return Wn("Cannot mix multi providers and regular providers", l)
                }

                function Wn(l, n) {
                    return new Error(Vl(l, n, "StaticInjectorError"))
                }
                const Kn = new El("AnalyzeForEntryComponents");
                let Zn = null;

                function Qn() {
                    if (!Zn) {
                        const l = Tl.Symbol;
                        if (l && l.iterator) Zn = l.iterator;
                        else {
                            const l = Object.getOwnPropertyNames(Map.prototype);
                            for (let n = 0; n < l.length; ++n) {
                                const e = l[n];
                                "entries" !== e && "size" !== e && Map.prototype[e] === Map.prototype.entries && (Zn = e)
                            }
                        }
                    }
                    return Zn
                }

                function Yn(l, n) {
                    return l === n || "number" == typeof l && "number" == typeof n && isNaN(l) && isNaN(n)
                }

                function Xn(l, n) {
                    const e = le(l),
                        t = le(n);
                    if (e && t) return function (l, n, e) {
                        const t = l[Qn()](),
                            i = n[Qn()]();
                        for (;;) {
                            const l = t.next(),
                                n = i.next();
                            if (l.done && n.done) return !0;
                            if (l.done || n.done) return !1;
                            if (!e(l.value, n.value)) return !1
                        }
                    }(l, n, Xn); {
                        const i = l && ("object" == typeof l || "function" == typeof l),
                            s = n && ("object" == typeof n || "function" == typeof n);
                        return !(e || !i || t || !s) || Yn(l, n)
                    }
                }
                class Jn {
                    constructor(l) {
                        this.wrapped = l
                    }
                    static wrap(l) {
                        return new Jn(l)
                    }
                    static unwrap(l) {
                        return Jn.isWrapped(l) ? l.wrapped : l
                    }
                    static isWrapped(l) {
                        return l instanceof Jn
                    }
                }

                function le(l) {
                    return !!ne(l) && (Array.isArray(l) || !(l instanceof Map) && Qn() in l)
                }

                function ne(l) {
                    return null !== l && ("function" == typeof l || "object" == typeof l)
                }

                function ee(l) {
                    return !!l && "function" == typeof l.then
                }

                function te(l) {
                    return !!l && "function" == typeof l.subscribe
                }
                class ie {
                    constructor(l, n, e) {
                        this.previousValue = l, this.currentValue = n, this.firstChange = e
                    }
                    isFirstChange() {
                        return this.firstChange
                    }
                }
                class se {}
                class ue {}

                function re(l) {
                    const n = Error(`No component factory found for ${bl(l)}. Did you add it to @NgModule.entryComponents?`);
                    return n[ae] = l, n
                }
                const ae = "ngComponent";
                class oe {
                    resolveComponentFactory(l) {
                        throw re(l)
                    }
                }
                let ce = (() => {
                    class l {}
                    return l.NULL = new oe, l
                })();
                class de {
                    constructor(l, n, e) {
                        this._parent = n, this._ngModule = e, this._factories = new Map;
                        for (let t = 0; t < l.length; t++) {
                            const n = l[t];
                            this._factories.set(n.componentType, n)
                        }
                    }
                    resolveComponentFactory(l) {
                        let n = this._factories.get(l);
                        if (!n && this._parent && (n = this._parent.resolveComponentFactory(l)), !n) throw re(l);
                        return new he(n, this._ngModule)
                    }
                }
                class he extends ue {
                    constructor(l, n) {
                        super(), this.factory = l, this.ngModule = n, this.selector = l.selector, this.componentType = l.componentType, this.ngContentSelectors = l.ngContentSelectors, this.inputs = l.inputs, this.outputs = l.outputs
                    }
                    create(l, n, e, t) {
                        return this.factory.create(l, n, e, t || this.ngModule)
                    }
                }

                function pe(...l) {}
                let fe = (() => {
                    class l {
                        constructor(l) {
                            this.nativeElement = l
                        }
                    }
                    return l.__NG_ELEMENT_ID__ = () => ge(l), l
                })();
                const ge = pe;
                class me {}
                class ye {}
                const ve = function () {
                    var l = {
                        Important: 1,
                        DashCase: 2
                    };
                    return l[l.Important] = "Important", l[l.DashCase] = "DashCase", l
                }();
                let be = (() => {
                    class l {}
                    return l.__NG_ELEMENT_ID__ = () => _e(), l
                })();
                const _e = pe;
                class we {
                    constructor(l) {
                        this.full = l, this.major = l.split(".")[0], this.minor = l.split(".")[1], this.patch = l.split(".").slice(2).join(".")
                    }
                }
                const xe = new we("8.2.14");
                class ke {
                    constructor() {}
                    supports(l) {
                        return le(l)
                    }
                    create(l) {
                        return new Ce(l)
                    }
                }
                const Se = (l, n) => n;
                class Ce {
                    constructor(l) {
                        this.length = 0, this._linkedRecords = null, this._unlinkedRecords = null, this._previousItHead = null, this._itHead = null, this._itTail = null, this._additionsHead = null, this._additionsTail = null, this._movesHead = null, this._movesTail = null, this._removalsHead = null, this._removalsTail = null, this._identityChangesHead = null, this._identityChangesTail = null, this._trackByFn = l || Se
                    }
                    forEachItem(l) {
                        let n;
                        for (n = this._itHead; null !== n; n = n._next) l(n)
                    }
                    forEachOperation(l) {
                        let n = this._itHead,
                            e = this._removalsHead,
                            t = 0,
                            i = null;
                        for (; n || e;) {
                            const s = !e || n && n.currentIndex < Ae(e, t, i) ? n : e,
                                u = Ae(s, t, i),
                                r = s.currentIndex;
                            if (s === e) t--, e = e._nextRemoved;
                            else if (n = n._next, null == s.previousIndex) t++;
                            else {
                                i || (i = []);
                                const l = u - t,
                                    n = r - t;
                                if (l != n) {
                                    for (let e = 0; e < l; e++) {
                                        const t = e < i.length ? i[e] : i[e] = 0,
                                            s = t + e;
                                        n <= s && s < l && (i[e] = t + 1)
                                    }
                                    i[s.previousIndex] = n - l
                                }
                            }
                            u !== r && l(s, u, r)
                        }
                    }
                    forEachPreviousItem(l) {
                        let n;
                        for (n = this._previousItHead; null !== n; n = n._nextPrevious) l(n)
                    }
                    forEachAddedItem(l) {
                        let n;
                        for (n = this._additionsHead; null !== n; n = n._nextAdded) l(n)
                    }
                    forEachMovedItem(l) {
                        let n;
                        for (n = this._movesHead; null !== n; n = n._nextMoved) l(n)
                    }
                    forEachRemovedItem(l) {
                        let n;
                        for (n = this._removalsHead; null !== n; n = n._nextRemoved) l(n)
                    }
                    forEachIdentityChange(l) {
                        let n;
                        for (n = this._identityChangesHead; null !== n; n = n._nextIdentityChange) l(n)
                    }
                    diff(l) {
                        if (null == l && (l = []), !le(l)) throw new Error(`Error trying to diff '${bl(l)}'. Only arrays and iterables are allowed`);
                        return this.check(l) ? this : null
                    }
                    onDestroy() {}
                    check(l) {
                        this._reset();
                        let n, e, t, i = this._itHead,
                            s = !1;
                        if (Array.isArray(l)) {
                            this.length = l.length;
                            for (let n = 0; n < this.length; n++) t = this._trackByFn(n, e = l[n]), null !== i && Yn(i.trackById, t) ? (s && (i = this._verifyReinsertion(i, e, t, n)), Yn(i.item, e) || this._addIdentityChange(i, e)) : (i = this._mismatch(i, e, t, n), s = !0), i = i._next
                        } else n = 0,
                            function (l, n) {
                                if (Array.isArray(l))
                                    for (let e = 0; e < l.length; e++) n(l[e]);
                                else {
                                    const e = l[Qn()]();
                                    let t;
                                    for (; !(t = e.next()).done;) n(t.value)
                                }
                            }(l, l => {
                                t = this._trackByFn(n, l), null !== i && Yn(i.trackById, t) ? (s && (i = this._verifyReinsertion(i, l, t, n)), Yn(i.item, l) || this._addIdentityChange(i, l)) : (i = this._mismatch(i, l, t, n), s = !0), i = i._next, n++
                            }), this.length = n;
                        return this._truncate(i), this.collection = l, this.isDirty
                    }
                    get isDirty() {
                        return null !== this._additionsHead || null !== this._movesHead || null !== this._removalsHead || null !== this._identityChangesHead
                    }
                    _reset() {
                        if (this.isDirty) {
                            let l, n;
                            for (l = this._previousItHead = this._itHead; null !== l; l = l._next) l._nextPrevious = l._next;
                            for (l = this._additionsHead; null !== l; l = l._nextAdded) l.previousIndex = l.currentIndex;
                            for (this._additionsHead = this._additionsTail = null, l = this._movesHead; null !== l; l = n) l.previousIndex = l.currentIndex, n = l._nextMoved;
                            this._movesHead = this._movesTail = null, this._removalsHead = this._removalsTail = null, this._identityChangesHead = this._identityChangesTail = null
                        }
                    }
                    _mismatch(l, n, e, t) {
                        let i;
                        return null === l ? i = this._itTail : (i = l._prev, this._remove(l)), null !== (l = null === this._linkedRecords ? null : this._linkedRecords.get(e, t)) ? (Yn(l.item, n) || this._addIdentityChange(l, n), this._moveAfter(l, i, t)) : null !== (l = null === this._unlinkedRecords ? null : this._unlinkedRecords.get(e, null)) ? (Yn(l.item, n) || this._addIdentityChange(l, n), this._reinsertAfter(l, i, t)) : l = this._addAfter(new Ie(n, e), i, t), l
                    }
                    _verifyReinsertion(l, n, e, t) {
                        let i = null === this._unlinkedRecords ? null : this._unlinkedRecords.get(e, null);
                        return null !== i ? l = this._reinsertAfter(i, l._prev, t) : l.currentIndex != t && (l.currentIndex = t, this._addToMoves(l, t)), l
                    }
                    _truncate(l) {
                        for (; null !== l;) {
                            const n = l._next;
                            this._addToRemovals(this._unlink(l)), l = n
                        }
                        null !== this._unlinkedRecords && this._unlinkedRecords.clear(), null !== this._additionsTail && (this._additionsTail._nextAdded = null), null !== this._movesTail && (this._movesTail._nextMoved = null), null !== this._itTail && (this._itTail._next = null), null !== this._removalsTail && (this._removalsTail._nextRemoved = null), null !== this._identityChangesTail && (this._identityChangesTail._nextIdentityChange = null)
                    }
                    _reinsertAfter(l, n, e) {
                        null !== this._unlinkedRecords && this._unlinkedRecords.remove(l);
                        const t = l._prevRemoved,
                            i = l._nextRemoved;
                        return null === t ? this._removalsHead = i : t._nextRemoved = i, null === i ? this._removalsTail = t : i._prevRemoved = t, this._insertAfter(l, n, e), this._addToMoves(l, e), l
                    }
                    _moveAfter(l, n, e) {
                        return this._unlink(l), this._insertAfter(l, n, e), this._addToMoves(l, e), l
                    }
                    _addAfter(l, n, e) {
                        return this._insertAfter(l, n, e), this._additionsTail = null === this._additionsTail ? this._additionsHead = l : this._additionsTail._nextAdded = l, l
                    }
                    _insertAfter(l, n, e) {
                        const t = null === n ? this._itHead : n._next;
                        return l._next = t, l._prev = n, null === t ? this._itTail = l : t._prev = l, null === n ? this._itHead = l : n._next = l, null === this._linkedRecords && (this._linkedRecords = new Ee), this._linkedRecords.put(l), l.currentIndex = e, l
                    }
                    _remove(l) {
                        return this._addToRemovals(this._unlink(l))
                    }
                    _unlink(l) {
                        null !== this._linkedRecords && this._linkedRecords.remove(l);
                        const n = l._prev,
                            e = l._next;
                        return null === n ? this._itHead = e : n._next = e, null === e ? this._itTail = n : e._prev = n, l
                    }
                    _addToMoves(l, n) {
                        return l.previousIndex === n ? l : (this._movesTail = null === this._movesTail ? this._movesHead = l : this._movesTail._nextMoved = l, l)
                    }
                    _addToRemovals(l) {
                        return null === this._unlinkedRecords && (this._unlinkedRecords = new Ee), this._unlinkedRecords.put(l), l.currentIndex = null, l._nextRemoved = null, null === this._removalsTail ? (this._removalsTail = this._removalsHead = l, l._prevRemoved = null) : (l._prevRemoved = this._removalsTail, this._removalsTail = this._removalsTail._nextRemoved = l), l
                    }
                    _addIdentityChange(l, n) {
                        return l.item = n, this._identityChangesTail = null === this._identityChangesTail ? this._identityChangesHead = l : this._identityChangesTail._nextIdentityChange = l, l
                    }
                }
                class Ie {
                    constructor(l, n) {
                        this.item = l, this.trackById = n, this.currentIndex = null, this.previousIndex = null, this._nextPrevious = null, this._prev = null, this._next = null, this._prevDup = null, this._nextDup = null, this._prevRemoved = null, this._nextRemoved = null, this._nextAdded = null, this._nextMoved = null, this._nextIdentityChange = null
                    }
                }
                class Te {
                    constructor() {
                        this._head = null, this._tail = null
                    }
                    add(l) {
                        null === this._head ? (this._head = this._tail = l, l._nextDup = null, l._prevDup = null) : (this._tail._nextDup = l, l._prevDup = this._tail, l._nextDup = null, this._tail = l)
                    }
                    get(l, n) {
                        let e;
                        for (e = this._head; null !== e; e = e._nextDup)
                            if ((null === n || n <= e.currentIndex) && Yn(e.trackById, l)) return e;
                        return null
                    }
                    remove(l) {
                        const n = l._prevDup,
                            e = l._nextDup;
                        return null === n ? this._head = e : n._nextDup = e, null === e ? this._tail = n : e._prevDup = n, null === this._head
                    }
                }
                class Ee {
                    constructor() {
                        this.map = new Map
                    }
                    put(l) {
                        const n = l.trackById;
                        let e = this.map.get(n);
                        e || (e = new Te, this.map.set(n, e)), e.add(l)
                    }
                    get(l, n) {
                        const e = this.map.get(l);
                        return e ? e.get(l, n) : null
                    }
                    remove(l) {
                        const n = l.trackById;
                        return this.map.get(n).remove(l) && this.map.delete(n), l
                    }
                    get isEmpty() {
                        return 0 === this.map.size
                    }
                    clear() {
                        this.map.clear()
                    }
                }

                function Ae(l, n, e) {
                    const t = l.previousIndex;
                    if (null === t) return t;
                    let i = 0;
                    return e && t < e.length && (i = e[t]), t + n + i
                }
                class Pe {
                    constructor() {}
                    supports(l) {
                        return l instanceof Map || ne(l)
                    }
                    create() {
                        return new De
                    }
                }
                class De {
                    constructor() {
                        this._records = new Map, this._mapHead = null, this._appendAfter = null, this._previousMapHead = null, this._changesHead = null, this._changesTail = null, this._additionsHead = null, this._additionsTail = null, this._removalsHead = null, this._removalsTail = null
                    }
                    get isDirty() {
                        return null !== this._additionsHead || null !== this._changesHead || null !== this._removalsHead
                    }
                    forEachItem(l) {
                        let n;
                        for (n = this._mapHead; null !== n; n = n._next) l(n)
                    }
                    forEachPreviousItem(l) {
                        let n;
                        for (n = this._previousMapHead; null !== n; n = n._nextPrevious) l(n)
                    }
                    forEachChangedItem(l) {
                        let n;
                        for (n = this._changesHead; null !== n; n = n._nextChanged) l(n)
                    }
                    forEachAddedItem(l) {
                        let n;
                        for (n = this._additionsHead; null !== n; n = n._nextAdded) l(n)
                    }
                    forEachRemovedItem(l) {
                        let n;
                        for (n = this._removalsHead; null !== n; n = n._nextRemoved) l(n)
                    }
                    diff(l) {
                        if (l) {
                            if (!(l instanceof Map || ne(l))) throw new Error(`Error trying to diff '${bl(l)}'. Only maps and objects are allowed`)
                        } else l = new Map;
                        return this.check(l) ? this : null
                    }
                    onDestroy() {}
                    check(l) {
                        this._reset();
                        let n = this._mapHead;
                        if (this._appendAfter = null, this._forEach(l, (l, e) => {
                                if (n && n.key === e) this._maybeAddToChanges(n, l), this._appendAfter = n, n = n._next;
                                else {
                                    const t = this._getOrCreateRecordForKey(e, l);
                                    n = this._insertBeforeOrAppend(n, t)
                                }
                            }), n) {
                            n._prev && (n._prev._next = null), this._removalsHead = n;
                            for (let l = n; null !== l; l = l._nextRemoved) l === this._mapHead && (this._mapHead = null), this._records.delete(l.key), l._nextRemoved = l._next, l.previousValue = l.currentValue, l.currentValue = null, l._prev = null, l._next = null
                        }
                        return this._changesTail && (this._changesTail._nextChanged = null), this._additionsTail && (this._additionsTail._nextAdded = null), this.isDirty
                    }
                    _insertBeforeOrAppend(l, n) {
                        if (l) {
                            const e = l._prev;
                            return n._next = l, n._prev = e, l._prev = n, e && (e._next = n), l === this._mapHead && (this._mapHead = n), this._appendAfter = l, l
                        }
                        return this._appendAfter ? (this._appendAfter._next = n, n._prev = this._appendAfter) : this._mapHead = n, this._appendAfter = n, null
                    }
                    _getOrCreateRecordForKey(l, n) {
                        if (this._records.has(l)) {
                            const e = this._records.get(l);
                            this._maybeAddToChanges(e, n);
                            const t = e._prev,
                                i = e._next;
                            return t && (t._next = i), i && (i._prev = t), e._next = null, e._prev = null, e
                        }
                        const e = new Me(l);
                        return this._records.set(l, e), e.currentValue = n, this._addToAdditions(e), e
                    }
                    _reset() {
                        if (this.isDirty) {
                            let l;
                            for (this._previousMapHead = this._mapHead, l = this._previousMapHead; null !== l; l = l._next) l._nextPrevious = l._next;
                            for (l = this._changesHead; null !== l; l = l._nextChanged) l.previousValue = l.currentValue;
                            for (l = this._additionsHead; null != l; l = l._nextAdded) l.previousValue = l.currentValue;
                            this._changesHead = this._changesTail = null, this._additionsHead = this._additionsTail = null, this._removalsHead = null
                        }
                    }
                    _maybeAddToChanges(l, n) {
                        Yn(n, l.currentValue) || (l.previousValue = l.currentValue, l.currentValue = n, this._addToChanges(l))
                    }
                    _addToAdditions(l) {
                        null === this._additionsHead ? this._additionsHead = this._additionsTail = l : (this._additionsTail._nextAdded = l, this._additionsTail = l)
                    }
                    _addToChanges(l) {
                        null === this._changesHead ? this._changesHead = this._changesTail = l : (this._changesTail._nextChanged = l, this._changesTail = l)
                    }
                    _forEach(l, n) {
                        l instanceof Map ? l.forEach(n) : Object.keys(l).forEach(e => n(l[e], e))
                    }
                }
                class Me {
                    constructor(l) {
                        this.key = l, this.previousValue = null, this.currentValue = null, this._nextPrevious = null, this._next = null, this._prev = null, this._nextAdded = null, this._nextRemoved = null, this._nextChanged = null
                    }
                }
                let Oe = (() => {
                        class l {
                            constructor(l) {
                                this.factories = l
                            }
                            static create(n, e) {
                                if (null != e) {
                                    const l = e.factories.slice();
                                    n = n.concat(l)
                                }
                                return new l(n)
                            }
                            static extend(n) {
                                return {
                                    provide: l,
                                    useFactory: e => {
                                        if (!e) throw new Error("Cannot extend IterableDiffers without a parent injector");
                                        return l.create(n, e)
                                    },
                                    deps: [[l, new hl, new cl]]
                                }
                            }
                            find(l) {
                                const n = this.factories.find(n => n.supports(l));
                                if (null != n) return n;
                                throw new Error(`Cannot find a differ supporting object '${l}' of type '${e=l,e.name||typeof e}'`);
                                var e
                            }
                        }
                        return l.ngInjectableDef = gl({
                            token: l,
                            providedIn: "root",
                            factory: () => new l([new ke])
                        }), l
                    })(),
                    Ne = (() => {
                        class l {
                            constructor(l) {
                                this.factories = l
                            }
                            static create(n, e) {
                                if (e) {
                                    const l = e.factories.slice();
                                    n = n.concat(l)
                                }
                                return new l(n)
                            }
                            static extend(n) {
                                return {
                                    provide: l,
                                    useFactory: e => {
                                        if (!e) throw new Error("Cannot extend KeyValueDiffers without a parent injector");
                                        return l.create(n, e)
                                    },
                                    deps: [[l, new hl, new cl]]
                                }
                            }
                            find(l) {
                                const n = this.factories.find(n => n.supports(l));
                                if (n) return n;
                                throw new Error(`Cannot find a differ supporting object '${l}'`)
                            }
                        }
                        return l.ngInjectableDef = gl({
                            token: l,
                            providedIn: "root",
                            factory: () => new l([new Pe])
                        }), l
                    })();
                const Re = [new Pe],
                    Be = new Oe([new ke]),
                    ze = new Ne(Re);
                let $e = (() => {
                    class l {}
                    return l.__NG_ELEMENT_ID__ = () => Le(l, fe), l
                })();
                const Le = pe;
                let Fe = (() => {
                    class l {}
                    return l.__NG_ELEMENT_ID__ = () => qe(l, fe), l
                })();
                const qe = pe;

                function Ue(l, n, e, t) {
                    let i = `ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${n}'. Current value: '${e}'.`;
                    return t && (i += " It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),
                        function (l, n) {
                            const e = new Error(l);
                            return He(e, n), e
                        }(i, l)
                }

                function He(l, n) {
                    l[Yl] = n, l[Jl] = n.logError.bind(n)
                }

                function Ve(l) {
                    return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${l}`)
                }

                function je(l, n, e) {
                    const t = l.state,
                        i = 1792 & t;
                    return i === n ? (l.state = -1793 & t | e, l.initIndex = -1, !0) : i === e
                }

                function Ge(l, n, e) {
                    return (1792 & l.state) === n && l.initIndex <= e && (l.initIndex = e + 1, !0)
                }

                function We(l, n) {
                    return l.nodes[n]
                }

                function Ke(l, n) {
                    return l.nodes[n]
                }

                function Ze(l, n) {
                    return l.nodes[n]
                }

                function Qe(l, n) {
                    return l.nodes[n]
                }

                function Ye(l, n) {
                    return l.nodes[n]
                }
                const Xe = {
                        setCurrentNode: void 0,
                        createRootView: void 0,
                        createEmbeddedView: void 0,
                        createComponentView: void 0,
                        createNgModuleRef: void 0,
                        overrideProvider: void 0,
                        overrideComponentView: void 0,
                        clearOverrides: void 0,
                        checkAndUpdateView: void 0,
                        checkNoChangesView: void 0,
                        destroyView: void 0,
                        resolveDep: void 0,
                        createDebugContext: void 0,
                        handleEvent: void 0,
                        updateDirectives: void 0,
                        updateRenderer: void 0,
                        dirtyParentQueries: void 0
                    },
                    Je = () => {},
                    lt = new Map;

                function nt(l) {
                    let n = lt.get(l);
                    return n || (n = bl(l) + "_" + lt.size, lt.set(l, n)), n
                }

                function et(l, n, e, t) {
                    if (Jn.isWrapped(t)) {
                        t = Jn.unwrap(t);
                        const i = l.def.nodes[n].bindingIndex + e,
                            s = Jn.unwrap(l.oldValues[i]);
                        l.oldValues[i] = new Jn(s)
                    }
                    return t
                }
                const tt = "$$undefined",
                    it = "$$empty";

                function st(l) {
                    return {
                        id: tt,
                        styles: l.styles,
                        encapsulation: l.encapsulation,
                        data: l.data
                    }
                }
                let ut = 0;

                function rt(l, n, e, t) {
                    return !(!(2 & l.state) && Yn(l.oldValues[n.bindingIndex + e], t))
                }

                function at(l, n, e, t) {
                    return !!rt(l, n, e, t) && (l.oldValues[n.bindingIndex + e] = t, !0)
                }

                function ot(l, n, e, t) {
                    const i = l.oldValues[n.bindingIndex + e];
                    if (1 & l.state || !Xn(i, t)) {
                        const s = n.bindings[e].name;
                        throw Ue(Xe.createDebugContext(l, n.nodeIndex), `${s}: ${i}`, `${s}: ${t}`, 0 != (1 & l.state))
                    }
                }

                function ct(l) {
                    let n = l;
                    for (; n;) 2 & n.def.flags && (n.state |= 8), n = n.viewContainerParent || n.parent
                }

                function dt(l, n) {
                    let e = l;
                    for (; e && e !== n;) e.state |= 64, e = e.viewContainerParent || e.parent
                }

                function ht(l, n, e, t) {
                    try {
                        return ct(33554432 & l.def.nodes[n].flags ? Ke(l, n).componentView : l), Xe.handleEvent(l, n, e, t)
                    } catch (i) {
                        l.root.errorHandler.handleError(i)
                    }
                }

                function pt(l) {
                    return l.parent ? Ke(l.parent, l.parentNodeDef.nodeIndex) : null
                }

                function ft(l) {
                    return l.parent ? l.parentNodeDef.parent : null
                }

                function gt(l, n) {
                    switch (201347067 & n.flags) {
                        case 1:
                            return Ke(l, n.nodeIndex).renderElement;
                        case 2:
                            return We(l, n.nodeIndex).renderText
                    }
                }

                function mt(l) {
                    return !!l.parent && !!(32768 & l.parentNodeDef.flags)
                }

                function yt(l) {
                    return !(!l.parent || 32768 & l.parentNodeDef.flags)
                }

                function vt(l) {
                    return 1 << l % 32
                }

                function bt(l) {
                    const n = {};
                    let e = 0;
                    const t = {};
                    return l && l.forEach(([l, i]) => {
                        "number" == typeof l ? (n[l] = i, e |= vt(l)) : t[l] = i
                    }), {
                        matchedQueries: n,
                        references: t,
                        matchedQueryIds: e
                    }
                }

                function _t(l, n) {
                    return l.map(l => {
                        let e, t;
                        return Array.isArray(l) ? [t, e] = l : (t = 0, e = l), e && ("function" == typeof e || "object" == typeof e) && n && Object.defineProperty(e, Rl, {
                            value: n,
                            configurable: !0
                        }), {
                            flags: t,
                            token: e,
                            tokenKey: nt(e)
                        }
                    })
                }

                function wt(l, n, e) {
                    let t = e.renderParent;
                    return t ? 0 == (1 & t.flags) || 0 == (33554432 & t.flags) || t.element.componentRendererType && t.element.componentRendererType.encapsulation === Zl.Native ? Ke(l, e.renderParent.nodeIndex).renderElement : void 0 : n
                }
                const xt = new WeakMap;

                function kt(l) {
                    let n = xt.get(l);
                    return n || ((n = l(() => Je)).factory = l, xt.set(l, n)), n
                }

                function St(l, n, e, t, i) {
                    3 === n && (e = l.renderer.parentNode(gt(l, l.def.lastRenderRootNode))), Ct(l, n, 0, l.def.nodes.length - 1, e, t, i)
                }

                function Ct(l, n, e, t, i, s, u) {
                    for (let r = e; r <= t; r++) {
                        const e = l.def.nodes[r];
                        11 & e.flags && Tt(l, e, n, i, s, u), r += e.childCount
                    }
                }

                function It(l, n, e, t, i, s) {
                    let u = l;
                    for (; u && !mt(u);) u = u.parent;
                    const r = u.parent,
                        a = ft(u),
                        o = a.nodeIndex + a.childCount;
                    for (let c = a.nodeIndex + 1; c <= o; c++) {
                        const l = r.def.nodes[c];
                        l.ngContentIndex === n && Tt(r, l, e, t, i, s), c += l.childCount
                    }
                    if (!r.parent) {
                        const u = l.root.projectableNodes[n];
                        if (u)
                            for (let n = 0; n < u.length; n++) Et(l, u[n], e, t, i, s)
                    }
                }

                function Tt(l, n, e, t, i, s) {
                    if (8 & n.flags) It(l, n.ngContent.index, e, t, i, s);
                    else {
                        const u = gt(l, n);
                        if (3 === e && 33554432 & n.flags && 48 & n.bindingFlags ? (16 & n.bindingFlags && Et(l, u, e, t, i, s), 32 & n.bindingFlags && Et(Ke(l, n.nodeIndex).componentView, u, e, t, i, s)) : Et(l, u, e, t, i, s), 16777216 & n.flags) {
                            const u = Ke(l, n.nodeIndex).viewContainer._embeddedViews;
                            for (let l = 0; l < u.length; l++) St(u[l], e, t, i, s)
                        }
                        1 & n.flags && !n.element.name && Ct(l, e, n.nodeIndex + 1, n.nodeIndex + n.childCount, t, i, s)
                    }
                }

                function Et(l, n, e, t, i, s) {
                    const u = l.renderer;
                    switch (e) {
                        case 1:
                            u.appendChild(t, n);
                            break;
                        case 2:
                            u.insertBefore(t, n, i);
                            break;
                        case 3:
                            u.removeChild(t, n);
                            break;
                        case 0:
                            s.push(n)
                    }
                }
                const At = /^:([^:]+):(.+)$/;

                function Pt(l) {
                    if (":" === l[0]) {
                        const n = l.match(At);
                        return [n[1], n[2]]
                    }
                    return ["", l]
                }

                function Dt(l) {
                    let n = 0;
                    for (let e = 0; e < l.length; e++) n |= l[e].flags;
                    return n
                }

                function Mt(l, n, e, t, i, s, u, r, a, o, c, d, h, p, f, g, m, y, v, b) {
                    switch (l) {
                        case 1:
                            return n + Ot(e) + t;
                        case 2:
                            return n + Ot(e) + t + Ot(i) + s;
                        case 3:
                            return n + Ot(e) + t + Ot(i) + s + Ot(u) + r;
                        case 4:
                            return n + Ot(e) + t + Ot(i) + s + Ot(u) + r + Ot(a) + o;
                        case 5:
                            return n + Ot(e) + t + Ot(i) + s + Ot(u) + r + Ot(a) + o + Ot(c) + d;
                        case 6:
                            return n + Ot(e) + t + Ot(i) + s + Ot(u) + r + Ot(a) + o + Ot(c) + d + Ot(h) + p;
                        case 7:
                            return n + Ot(e) + t + Ot(i) + s + Ot(u) + r + Ot(a) + o + Ot(c) + d + Ot(h) + p + Ot(f) + g;
                        case 8:
                            return n + Ot(e) + t + Ot(i) + s + Ot(u) + r + Ot(a) + o + Ot(c) + d + Ot(h) + p + Ot(f) + g + Ot(m) + y;
                        case 9:
                            return n + Ot(e) + t + Ot(i) + s + Ot(u) + r + Ot(a) + o + Ot(c) + d + Ot(h) + p + Ot(f) + g + Ot(m) + y + Ot(v) + b;
                        default:
                            throw new Error("Does not support more than 9 expressions")
                    }
                }

                function Ot(l) {
                    return null != l ? l.toString() : ""
                }
                const Nt = new Object,
                    Rt = nt(Ln),
                    Bt = nt(Al),
                    zt = nt(jl);

                function $t(l, n, e, t) {
                    return e = xl(e), {
                        index: -1,
                        deps: _t(t, bl(n)),
                        flags: l,
                        token: n,
                        value: e
                    }
                }

                function Lt(l, n, e = Ln.THROW_IF_NOT_FOUND) {
                    const t = Ll(l);
                    try {
                        if (8 & n.flags) return n.token;
                        if (2 & n.flags && (e = null), 1 & n.flags) return l._parent.get(n.token, e);
                        const u = n.tokenKey;
                        switch (u) {
                            case Rt:
                            case Bt:
                            case zt:
                                return l
                        }
                        const r = l._def.providersByKey[u];
                        let a;
                        if (r) {
                            let n = l._providers[r.index];
                            return void 0 === n && (n = l._providers[r.index] = Ft(l, r)), n === Nt ? void 0 : n
                        }
                        if ((a = yl(n.token)) && (i = l, null != (s = a).providedIn && (function (l, n) {
                                return l._def.modules.indexOf(n) > -1
                            }(i, s.providedIn) || "root" === s.providedIn && i._def.isRoot))) {
                            const e = l._providers.length;
                            return l._def.providers[e] = l._def.providersByKey[n.tokenKey] = {
                                flags: 5120,
                                value: a.factory,
                                deps: [],
                                index: e,
                                token: n.token
                            }, l._providers[e] = Nt, l._providers[e] = Ft(l, l._def.providersByKey[n.tokenKey])
                        }
                        return 4 & n.flags ? e : l._parent.get(n.token, e)
                    } finally {
                        Ll(t)
                    }
                    var i, s
                }

                function Ft(l, n) {
                    let e;
                    switch (201347067 & n.flags) {
                        case 512:
                            e = function (l, n, e) {
                                const t = e.length;
                                switch (t) {
                                    case 0:
                                        return new n;
                                    case 1:
                                        return new n(Lt(l, e[0]));
                                    case 2:
                                        return new n(Lt(l, e[0]), Lt(l, e[1]));
                                    case 3:
                                        return new n(Lt(l, e[0]), Lt(l, e[1]), Lt(l, e[2]));
                                    default:
                                        const i = new Array(t);
                                        for (let n = 0; n < t; n++) i[n] = Lt(l, e[n]);
                                        return new n(...i)
                                }
                            }(l, n.value, n.deps);
                            break;
                        case 1024:
                            e = function (l, n, e) {
                                const t = e.length;
                                switch (t) {
                                    case 0:
                                        return n();
                                    case 1:
                                        return n(Lt(l, e[0]));
                                    case 2:
                                        return n(Lt(l, e[0]), Lt(l, e[1]));
                                    case 3:
                                        return n(Lt(l, e[0]), Lt(l, e[1]), Lt(l, e[2]));
                                    default:
                                        const i = Array(t);
                                        for (let n = 0; n < t; n++) i[n] = Lt(l, e[n]);
                                        return n(...i)
                                }
                            }(l, n.value, n.deps);
                            break;
                        case 2048:
                            e = Lt(l, n.deps[0]);
                            break;
                        case 256:
                            e = n.value
                    }
                    return e === Nt || null === e || "object" != typeof e || 131072 & n.flags || "function" != typeof e.ngOnDestroy || (n.flags |= 131072), void 0 === e ? Nt : e
                }

                function qt(l, n) {
                    const e = l.viewContainer._embeddedViews;
                    if ((null == n || n >= e.length) && (n = e.length - 1), n < 0) return null;
                    const t = e[n];
                    return t.viewContainerParent = null, Kl(e, n), Xe.dirtyParentQueries(t), Ht(t), t
                }

                function Ut(l, n, e) {
                    const t = n ? gt(n, n.def.lastRenderRootNode) : l.renderElement,
                        i = e.renderer.parentNode(t),
                        s = e.renderer.nextSibling(t);
                    St(e, 2, i, s, void 0)
                }

                function Ht(l) {
                    St(l, 3, null, null, void 0)
                }
                const Vt = new Object;

                function jt(l, n, e, t, i, s) {
                    return new Gt(l, n, e, t, i, s)
                }
                class Gt extends ue {
                    constructor(l, n, e, t, i, s) {
                        super(), this.selector = l, this.componentType = n, this._inputs = t, this._outputs = i, this.ngContentSelectors = s, this.viewDefFactory = e
                    }
                    get inputs() {
                        const l = [],
                            n = this._inputs;
                        for (let e in n) l.push({
                            propName: e,
                            templateName: n[e]
                        });
                        return l
                    }
                    get outputs() {
                        const l = [];
                        for (let n in this._outputs) l.push({
                            propName: n,
                            templateName: this._outputs[n]
                        });
                        return l
                    }
                    create(l, n, e, t) {
                        if (!t) throw new Error("ngModule should be provided");
                        const i = kt(this.viewDefFactory),
                            s = i.nodes[0].element.componentProvider.nodeIndex,
                            u = Xe.createRootView(l, n || [], e, i, t, Vt),
                            r = Ze(u, s).instance;
                        return e && u.renderer.setAttribute(Ke(u, 0).renderElement, "ng-version", xe.full), new Wt(u, new Yt(u), r)
                    }
                }
                class Wt extends se {
                    constructor(l, n, e) {
                        super(), this._view = l, this._viewRef = n, this._component = e, this._elDef = this._view.def.nodes[0], this.hostView = n, this.changeDetectorRef = n, this.instance = e
                    }
                    get location() {
                        return new fe(Ke(this._view, this._elDef.nodeIndex).renderElement)
                    }
                    get injector() {
                        return new ni(this._view, this._elDef)
                    }
                    get componentType() {
                        return this._component.constructor
                    }
                    destroy() {
                        this._viewRef.destroy()
                    }
                    onDestroy(l) {
                        this._viewRef.onDestroy(l)
                    }
                }

                function Kt(l, n, e) {
                    return new Zt(l, n, e)
                }
                class Zt {
                    constructor(l, n, e) {
                        this._view = l, this._elDef = n, this._data = e, this._embeddedViews = []
                    }
                    get element() {
                        return new fe(this._data.renderElement)
                    }
                    get injector() {
                        return new ni(this._view, this._elDef)
                    }
                    get parentInjector() {
                        let l = this._view,
                            n = this._elDef.parent;
                        for (; !n && l;) n = ft(l), l = l.parent;
                        return l ? new ni(l, n) : new ni(this._view, null)
                    }
                    clear() {
                        for (let l = this._embeddedViews.length - 1; l >= 0; l--) {
                            const n = qt(this._data, l);
                            Xe.destroyView(n)
                        }
                    }
                    get(l) {
                        const n = this._embeddedViews[l];
                        if (n) {
                            const l = new Yt(n);
                            return l.attachToViewContainerRef(this), l
                        }
                        return null
                    }
                    get length() {
                        return this._embeddedViews.length
                    }
                    createEmbeddedView(l, n, e) {
                        const t = l.createEmbeddedView(n || {});
                        return this.insert(t, e), t
                    }
                    createComponent(l, n, e, t, i) {
                        const s = e || this.parentInjector;
                        i || l instanceof he || (i = s.get(jl));
                        const u = l.create(s, t, void 0, i);
                        return this.insert(u.hostView, n), u
                    }
                    insert(l, n) {
                        if (l.destroyed) throw new Error("Cannot insert a destroyed View in a ViewContainer!");
                        const e = l;
                        return function (l, n, e, t) {
                            let i = n.viewContainer._embeddedViews;
                            null == e && (e = i.length), t.viewContainerParent = l, Wl(i, e, t),
                                function (l, n) {
                                    const e = pt(n);
                                    if (!e || e === l || 16 & n.state) return;
                                    n.state |= 16;
                                    let t = e.template._projectedViews;
                                    t || (t = e.template._projectedViews = []), t.push(n),
                                        function (l, n) {
                                            if (4 & n.flags) return;
                                            l.nodeFlags |= 4, n.flags |= 4;
                                            let e = n.parent;
                                            for (; e;) e.childFlags |= 4, e = e.parent
                                        }(n.parent.def, n.parentNodeDef)
                                }(n, t), Xe.dirtyParentQueries(t), Ut(n, e > 0 ? i[e - 1] : null, t)
                        }(this._view, this._data, n, e._view), e.attachToViewContainerRef(this), l
                    }
                    move(l, n) {
                        if (l.destroyed) throw new Error("Cannot move a destroyed View in a ViewContainer!");
                        const e = this._embeddedViews.indexOf(l._view);
                        return function (l, n, e) {
                            const t = l.viewContainer._embeddedViews,
                                i = t[n];
                            Kl(t, n), null == e && (e = t.length), Wl(t, e, i), Xe.dirtyParentQueries(i), Ht(i), Ut(l, e > 0 ? t[e - 1] : null, i)
                        }(this._data, e, n), l
                    }
                    indexOf(l) {
                        return this._embeddedViews.indexOf(l._view)
                    }
                    remove(l) {
                        const n = qt(this._data, l);
                        n && Xe.destroyView(n)
                    }
                    detach(l) {
                        const n = qt(this._data, l);
                        return n ? new Yt(n) : null
                    }
                }

                function Qt(l) {
                    return new Yt(l)
                }
                class Yt {
                    constructor(l) {
                        this._view = l, this._viewContainerRef = null, this._appRef = null
                    }
                    get rootNodes() {
                        return function (l) {
                            const n = [];
                            return St(l, 0, void 0, void 0, n), n
                        }(this._view)
                    }
                    get context() {
                        return this._view.context
                    }
                    get destroyed() {
                        return 0 != (128 & this._view.state)
                    }
                    markForCheck() {
                        ct(this._view)
                    }
                    detach() {
                        this._view.state &= -5
                    }
                    detectChanges() {
                        const l = this._view.root.rendererFactory;
                        l.begin && l.begin();
                        try {
                            Xe.checkAndUpdateView(this._view)
                        } finally {
                            l.end && l.end()
                        }
                    }
                    checkNoChanges() {
                        Xe.checkNoChangesView(this._view)
                    }
                    reattach() {
                        this._view.state |= 4
                    }
                    onDestroy(l) {
                        this._view.disposables || (this._view.disposables = []), this._view.disposables.push(l)
                    }
                    destroy() {
                        this._appRef ? this._appRef.detachView(this) : this._viewContainerRef && this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)), Xe.destroyView(this._view)
                    }
                    detachFromAppRef() {
                        this._appRef = null, Ht(this._view), Xe.dirtyParentQueries(this._view)
                    }
                    attachToAppRef(l) {
                        if (this._viewContainerRef) throw new Error("This view is already attached to a ViewContainer!");
                        this._appRef = l
                    }
                    attachToViewContainerRef(l) {
                        if (this._appRef) throw new Error("This view is already attached directly to the ApplicationRef!");
                        this._viewContainerRef = l
                    }
                }

                function Xt(l, n) {
                    return new Jt(l, n)
                }
                class Jt extends $e {
                    constructor(l, n) {
                        super(), this._parentView = l, this._def = n
                    }
                    createEmbeddedView(l) {
                        return new Yt(Xe.createEmbeddedView(this._parentView, this._def, this._def.element.template, l))
                    }
                    get elementRef() {
                        return new fe(Ke(this._parentView, this._def.nodeIndex).renderElement)
                    }
                }

                function li(l, n) {
                    return new ni(l, n)
                }
                class ni {
                    constructor(l, n) {
                        this.view = l, this.elDef = n
                    }
                    get(l, n = Ln.THROW_IF_NOT_FOUND) {
                        return Xe.resolveDep(this.view, this.elDef, !!this.elDef && 0 != (33554432 & this.elDef.flags), {
                            flags: 0,
                            token: l,
                            tokenKey: nt(l)
                        }, n)
                    }
                }

                function ei(l, n) {
                    const e = l.def.nodes[n];
                    if (1 & e.flags) {
                        const n = Ke(l, e.nodeIndex);
                        return e.element.template ? n.template : n.renderElement
                    }
                    if (2 & e.flags) return We(l, e.nodeIndex).renderText;
                    if (20240 & e.flags) return Ze(l, e.nodeIndex).instance;
                    throw new Error(`Illegal state: read nodeValue for node index ${n}`)
                }

                function ti(l) {
                    return new ii(l.renderer)
                }
                class ii {
                    constructor(l) {
                        this.delegate = l
                    }
                    selectRootElement(l) {
                        return this.delegate.selectRootElement(l)
                    }
                    createElement(l, n) {
                        const [e, t] = Pt(n), i = this.delegate.createElement(t, e);
                        return l && this.delegate.appendChild(l, i), i
                    }
                    createViewRoot(l) {
                        return l
                    }
                    createTemplateAnchor(l) {
                        const n = this.delegate.createComment("");
                        return l && this.delegate.appendChild(l, n), n
                    }
                    createText(l, n) {
                        const e = this.delegate.createText(n);
                        return l && this.delegate.appendChild(l, e), e
                    }
                    projectNodes(l, n) {
                        for (let e = 0; e < n.length; e++) this.delegate.appendChild(l, n[e])
                    }
                    attachViewAfter(l, n) {
                        const e = this.delegate.parentNode(l),
                            t = this.delegate.nextSibling(l);
                        for (let i = 0; i < n.length; i++) this.delegate.insertBefore(e, n[i], t)
                    }
                    detachView(l) {
                        for (let n = 0; n < l.length; n++) {
                            const e = l[n],
                                t = this.delegate.parentNode(e);
                            this.delegate.removeChild(t, e)
                        }
                    }
                    destroyView(l, n) {
                        for (let e = 0; e < n.length; e++) this.delegate.destroyNode(n[e])
                    }
                    listen(l, n, e) {
                        return this.delegate.listen(l, n, e)
                    }
                    listenGlobal(l, n, e) {
                        return this.delegate.listen(l, n, e)
                    }
                    setElementProperty(l, n, e) {
                        this.delegate.setProperty(l, n, e)
                    }
                    setElementAttribute(l, n, e) {
                        const [t, i] = Pt(n);
                        null != e ? this.delegate.setAttribute(l, i, e, t) : this.delegate.removeAttribute(l, i, t)
                    }
                    setBindingDebugInfo(l, n, e) {}
                    setElementClass(l, n, e) {
                        e ? this.delegate.addClass(l, n) : this.delegate.removeClass(l, n)
                    }
                    setElementStyle(l, n, e) {
                        null != e ? this.delegate.setStyle(l, n, e) : this.delegate.removeStyle(l, n)
                    }
                    invokeElementMethod(l, n, e) {
                        l[n].apply(l, e)
                    }
                    setText(l, n) {
                        this.delegate.setValue(l, n)
                    }
                    animate() {
                        throw new Error("Renderer.animate is no longer supported!")
                    }
                }

                function si(l, n, e, t) {
                    return new ui(l, n, e, t)
                }
                class ui {
                    constructor(l, n, e, t) {
                        this._moduleType = l, this._parent = n, this._bootstrapComponents = e, this._def = t, this._destroyListeners = [], this._destroyed = !1, this.injector = this,
                            function (l) {
                                const n = l._def,
                                    e = l._providers = new Array(n.providers.length);
                                for (let t = 0; t < n.providers.length; t++) {
                                    const i = n.providers[t];
                                    4096 & i.flags || void 0 === e[t] && (e[t] = Ft(l, i))
                                }
                            }(this)
                    }
                    get(l, n = Ln.THROW_IF_NOT_FOUND, e = pl.Default) {
                        let t = 0;
                        return e & pl.SkipSelf ? t |= 1 : e & pl.Self && (t |= 4), Lt(this, {
                            token: l,
                            tokenKey: nt(l),
                            flags: t
                        }, n)
                    }
                    get instance() {
                        return this.get(this._moduleType)
                    }
                    get componentFactoryResolver() {
                        return this.get(ce)
                    }
                    destroy() {
                        if (this._destroyed) throw new Error(`The ng module ${bl(this.instance.constructor)} has already been destroyed.`);
                        this._destroyed = !0,
                            function (l, n) {
                                const e = l._def,
                                    t = new Set;
                                for (let i = 0; i < e.providers.length; i++)
                                    if (131072 & e.providers[i].flags) {
                                        const n = l._providers[i];
                                        if (n && n !== Nt) {
                                            const l = n.ngOnDestroy;
                                            "function" != typeof l || t.has(n) || (l.apply(n), t.add(n))
                                        }
                                    }
                            }(this), this._destroyListeners.forEach(l => l())
                    }
                    onDestroy(l) {
                        this._destroyListeners.push(l)
                    }
                }
                const ri = nt(me),
                    ai = nt(be),
                    oi = nt(fe),
                    ci = nt(Fe),
                    di = nt($e),
                    hi = nt(Rn),
                    pi = nt(Ln),
                    fi = nt(Al);

                function gi(l, n, e, t, i, s, u, r) {
                    const a = [];
                    if (u)
                        for (let c in u) {
                            const [l, n] = u[c];
                            a[l] = {
                                flags: 8,
                                name: c,
                                nonMinifiedName: n,
                                ns: null,
                                securityContext: null,
                                suffix: null
                            }
                        }
                    const o = [];
                    if (r)
                        for (let c in r) o.push({
                            type: 1,
                            propName: c,
                            target: null,
                            eventName: r[c]
                        });
                    return vi(l, n |= 16384, e, t, i, i, s, a, o)
                }

                function mi(l, n, e) {
                    return vi(-1, l |= 16, null, 0, n, n, e)
                }

                function yi(l, n, e, t, i) {
                    return vi(-1, l, n, 0, e, t, i)
                }

                function vi(l, n, e, t, i, s, u, r, a) {
                    const {
                        matchedQueries: o,
                        references: c,
                        matchedQueryIds: d
                    } = bt(e);
                    a || (a = []), r || (r = []), s = xl(s);
                    const h = _t(u, bl(i));
                    return {
                        nodeIndex: -1,
                        parent: null,
                        renderParent: null,
                        bindingIndex: -1,
                        outputIndex: -1,
                        checkIndex: l,
                        flags: n,
                        childFlags: 0,
                        directChildFlags: 0,
                        childMatchedQueries: 0,
                        matchedQueries: o,
                        matchedQueryIds: d,
                        references: c,
                        ngContentIndex: -1,
                        childCount: t,
                        bindings: r,
                        bindingFlags: Dt(r),
                        outputs: a,
                        element: null,
                        provider: {
                            token: i,
                            value: s,
                            deps: h
                        },
                        text: null,
                        query: null,
                        ngContent: null
                    }
                }

                function bi(l, n) {
                    return ki(l, n)
                }

                function _i(l, n) {
                    let e = l;
                    for (; e.parent && !mt(e);) e = e.parent;
                    return Si(e.parent, ft(e), !0, n.provider.value, n.provider.deps)
                }

                function wi(l, n) {
                    const e = Si(l, n.parent, (32768 & n.flags) > 0, n.provider.value, n.provider.deps);
                    if (n.outputs.length)
                        for (let t = 0; t < n.outputs.length; t++) {
                            const i = n.outputs[t],
                                s = e[i.propName];
                            if (!te(s)) throw new Error(`@Output ${i.propName} not initialized in '${e.constructor.name}'.`); {
                                const e = s.subscribe(xi(l, n.parent.nodeIndex, i.eventName));
                                l.disposables[n.outputIndex + t] = e.unsubscribe.bind(e)
                            }
                        }
                    return e
                }

                function xi(l, n, e) {
                    return t => ht(l, n, e, t)
                }

                function ki(l, n) {
                    const e = (8192 & n.flags) > 0,
                        t = n.provider;
                    switch (201347067 & n.flags) {
                        case 512:
                            return Si(l, n.parent, e, t.value, t.deps);
                        case 1024:
                            return function (l, n, e, t, i) {
                                const s = i.length;
                                switch (s) {
                                    case 0:
                                        return t();
                                    case 1:
                                        return t(Ii(l, n, e, i[0]));
                                    case 2:
                                        return t(Ii(l, n, e, i[0]), Ii(l, n, e, i[1]));
                                    case 3:
                                        return t(Ii(l, n, e, i[0]), Ii(l, n, e, i[1]), Ii(l, n, e, i[2]));
                                    default:
                                        const u = Array(s);
                                        for (let t = 0; t < s; t++) u[t] = Ii(l, n, e, i[t]);
                                        return t(...u)
                                }
                            }(l, n.parent, e, t.value, t.deps);
                        case 2048:
                            return Ii(l, n.parent, e, t.deps[0]);
                        case 256:
                            return t.value
                    }
                }

                function Si(l, n, e, t, i) {
                    const s = i.length;
                    switch (s) {
                        case 0:
                            return new t;
                        case 1:
                            return new t(Ii(l, n, e, i[0]));
                        case 2:
                            return new t(Ii(l, n, e, i[0]), Ii(l, n, e, i[1]));
                        case 3:
                            return new t(Ii(l, n, e, i[0]), Ii(l, n, e, i[1]), Ii(l, n, e, i[2]));
                        default:
                            const u = new Array(s);
                            for (let t = 0; t < s; t++) u[t] = Ii(l, n, e, i[t]);
                            return new t(...u)
                    }
                }
                const Ci = {};

                function Ii(l, n, e, t, i = Ln.THROW_IF_NOT_FOUND) {
                    if (8 & t.flags) return t.token;
                    const s = l;
                    2 & t.flags && (i = null);
                    const u = t.tokenKey;
                    u === hi && (e = !(!n || !n.element.componentView)), n && 1 & t.flags && (e = !1, n = n.parent);
                    let r = l;
                    for (; r;) {
                        if (n) switch (u) {
                            case ri:
                                return ti(Ti(r, n, e));
                            case ai:
                                return Ti(r, n, e).renderer;
                            case oi:
                                return new fe(Ke(r, n.nodeIndex).renderElement);
                            case ci:
                                return Ke(r, n.nodeIndex).viewContainer;
                            case di:
                                if (n.element.template) return Ke(r, n.nodeIndex).template;
                                break;
                            case hi:
                                return Qt(Ti(r, n, e));
                            case pi:
                            case fi:
                                return li(r, n);
                            default:
                                const l = (e ? n.element.allProviders : n.element.publicProviders)[u];
                                if (l) {
                                    let n = Ze(r, l.nodeIndex);
                                    return n || (n = {
                                        instance: ki(r, l)
                                    }, r.nodes[l.nodeIndex] = n), n.instance
                                }
                        }
                        e = mt(r), n = ft(r), r = r.parent, 4 & t.flags && (r = null)
                    }
                    const a = s.root.injector.get(t.token, Ci);
                    return a !== Ci || i === Ci ? a : s.root.ngModule.injector.get(t.token, i)
                }

                function Ti(l, n, e) {
                    let t;
                    if (e) t = Ke(l, n.nodeIndex).componentView;
                    else
                        for (t = l; t.parent && !mt(t);) t = t.parent;
                    return t
                }

                function Ei(l, n, e, t, i, s) {
                    if (32768 & e.flags) {
                        const n = Ke(l, e.parent.nodeIndex).componentView;
                        2 & n.def.flags && (n.state |= 8)
                    }
                    if (n.instance[e.bindings[t].name] = i, 524288 & e.flags) {
                        s = s || {};
                        const n = Jn.unwrap(l.oldValues[e.bindingIndex + t]);
                        s[e.bindings[t].nonMinifiedName] = new ie(n, i, 0 != (2 & l.state))
                    }
                    return l.oldValues[e.bindingIndex + t] = i, s
                }

                function Ai(l, n) {
                    if (!(l.def.nodeFlags & n)) return;
                    const e = l.def.nodes;
                    let t = 0;
                    for (let i = 0; i < e.length; i++) {
                        const s = e[i];
                        let u = s.parent;
                        for (!u && s.flags & n && Di(l, i, s.flags & n, t++), 0 == (s.childFlags & n) && (i += s.childCount); u && 1 & u.flags && i === u.nodeIndex + u.childCount;) u.directChildFlags & n && (t = Pi(l, u, n, t)), u = u.parent
                    }
                }

                function Pi(l, n, e, t) {
                    for (let i = n.nodeIndex + 1; i <= n.nodeIndex + n.childCount; i++) {
                        const n = l.def.nodes[i];
                        n.flags & e && Di(l, i, n.flags & e, t++), i += n.childCount
                    }
                    return t
                }

                function Di(l, n, e, t) {
                    const i = Ze(l, n);
                    if (!i) return;
                    const s = i.instance;
                    s && (Xe.setCurrentNode(l, n), 1048576 & e && Ge(l, 512, t) && s.ngAfterContentInit(), 2097152 & e && s.ngAfterContentChecked(), 4194304 & e && Ge(l, 768, t) && s.ngAfterViewInit(), 8388608 & e && s.ngAfterViewChecked(), 131072 & e && s.ngOnDestroy())
                }
                const Mi = new El("SCHEDULER_TOKEN", {
                        providedIn: "root",
                        factory: () => Ql
                    }),
                    Oi = {},
                    Ni = function () {
                        var l = {
                            LocaleId: 0,
                            DayPeriodsFormat: 1,
                            DayPeriodsStandalone: 2,
                            DaysFormat: 3,
                            DaysStandalone: 4,
                            MonthsFormat: 5,
                            MonthsStandalone: 6,
                            Eras: 7,
                            FirstDayOfWeek: 8,
                            WeekendRange: 9,
                            DateFormat: 10,
                            TimeFormat: 11,
                            DateTimeFormat: 12,
                            NumberSymbols: 13,
                            NumberFormats: 14,
                            CurrencySymbol: 15,
                            CurrencyName: 16,
                            Currencies: 17,
                            PluralCase: 18,
                            ExtraData: 19
                        };
                        return l[l.LocaleId] = "LocaleId", l[l.DayPeriodsFormat] = "DayPeriodsFormat", l[l.DayPeriodsStandalone] = "DayPeriodsStandalone", l[l.DaysFormat] = "DaysFormat", l[l.DaysStandalone] = "DaysStandalone", l[l.MonthsFormat] = "MonthsFormat", l[l.MonthsStandalone] = "MonthsStandalone", l[l.Eras] = "Eras", l[l.FirstDayOfWeek] = "FirstDayOfWeek", l[l.WeekendRange] = "WeekendRange", l[l.DateFormat] = "DateFormat", l[l.TimeFormat] = "TimeFormat", l[l.DateTimeFormat] = "DateTimeFormat", l[l.NumberSymbols] = "NumberSymbols", l[l.NumberFormats] = "NumberFormats", l[l.CurrencySymbol] = "CurrencySymbol", l[l.CurrencyName] = "CurrencyName", l[l.Currencies] = "Currencies", l[l.PluralCase] = "PluralCase", l[l.ExtraData] = "ExtraData", l
                    }(),
                    Ri = void 0;
                var Bi = ["en", [["a", "p"], ["AM", "PM"], Ri], [["AM", "PM"], Ri, Ri], [["S", "M", "T", "W", "T", "F", "S"], ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"]], Ri, [["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"], ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]], Ri, [["B", "A"], ["BC", "AD"], ["Before Christ", "Anno Domini"]], 0, [6, 0], ["M/d/yy", "MMM d, y", "MMMM d, y", "EEEE, MMMM d, y"], ["h:mm a", "h:mm:ss a", "h:mm:ss a z", "h:mm:ss a zzzz"], ["{1}, {0}", Ri, "{1} 'at' {0}", Ri], [".", ",", ";", "%", "+", "-", "E", "\xd7", "\u2030", "\u221e", "NaN", ":"], ["#,##0.###", "#,##0%", "\xa4#,##0.00", "#E0"], "$", "US Dollar", {}, function (l) {
                    let n = Math.floor(Math.abs(l)),
                        e = l.toString().replace(/^[^.]*\.?/, "").length;
                    return 1 === n && 0 === e ? 1 : 5
                }];

                function zi(l) {
                    const n = l.toLowerCase().replace(/_/g, "-");
                    let e = Oi[n];
                    if (e) return e;
                    const t = n.split("-")[0];
                    if (e = Oi[t]) return e;
                    if ("en" === t) return Bi;
                    throw new Error(`Missing locale data for the locale "${l}".`)
                }
                const $i = "en-US";
                let Li = $i;

                function Fi(l) {
                    var n;
                    n = "Expected localeId to be defined", null == l && function (l) {
                        throw new Error(`ASSERTION ERROR: ${l}`)
                    }(n), "string" == typeof l && (Li = l.toLowerCase().replace(/_/g, "-"))
                }
                class qi extends T {
                    constructor(l = !1) {
                        super(), this.__isAsync = l
                    }
                    emit(l) {
                        super.next(l)
                    }
                    subscribe(l, n, e) {
                        let t, i = l => null,
                            s = () => null;
                        l && "object" == typeof l ? (t = this.__isAsync ? n => {
                            setTimeout(() => l.next(n))
                        } : n => {
                            l.next(n)
                        }, l.error && (i = this.__isAsync ? n => {
                            setTimeout(() => l.error(n))
                        } : n => {
                            l.error(n)
                        }), l.complete && (s = this.__isAsync ? () => {
                            setTimeout(() => l.complete())
                        } : () => {
                            l.complete()
                        })) : (t = this.__isAsync ? n => {
                            setTimeout(() => l(n))
                        } : n => {
                            l(n)
                        }, n && (i = this.__isAsync ? l => {
                            setTimeout(() => n(l))
                        } : l => {
                            n(l)
                        }), e && (s = this.__isAsync ? () => {
                            setTimeout(() => e())
                        } : () => {
                            e()
                        }));
                        const u = super.subscribe(t, i, s);
                        return l instanceof h && l.add(u), u
                    }
                }

                function Ui() {
                    return this._results[Qn()]()
                }
                class Hi {
                    constructor() {
                        this.dirty = !0, this._results = [], this.changes = new qi, this.length = 0;
                        const l = Qn(),
                            n = Hi.prototype;
                        n[l] || (n[l] = Ui)
                    }
                    map(l) {
                        return this._results.map(l)
                    }
                    filter(l) {
                        return this._results.filter(l)
                    }
                    find(l) {
                        return this._results.find(l)
                    }
                    reduce(l, n) {
                        return this._results.reduce(l, n)
                    }
                    forEach(l) {
                        this._results.forEach(l)
                    }
                    some(l) {
                        return this._results.some(l)
                    }
                    toArray() {
                        return this._results.slice()
                    }
                    toString() {
                        return this._results.toString()
                    }
                    reset(l) {
                        this._results = function l(n, e) {
                            void 0 === e && (e = n);
                            for (let t = 0; t < n.length; t++) {
                                let i = n[t];
                                Array.isArray(i) ? (e === n && (e = n.slice(0, t)), l(i, e)) : e !== n && e.push(i)
                            }
                            return e
                        }(l), this.dirty = !1, this.length = this._results.length, this.last = this._results[this.length - 1], this.first = this._results[0]
                    }
                    notifyOnChanges() {
                        this.changes.emit(this)
                    }
                    setDirty() {
                        this.dirty = !0
                    }
                    destroy() {
                        this.changes.complete(), this.changes.unsubscribe()
                    }
                }
                const Vi = new El("Application Initializer");
                class ji {
                    constructor(l) {
                        this.appInits = l, this.initialized = !1, this.done = !1, this.donePromise = new Promise((l, n) => {
                            this.resolve = l, this.reject = n
                        })
                    }
                    runInitializers() {
                        if (this.initialized) return;
                        const l = [],
                            n = () => {
                                this.done = !0, this.resolve()
                            };
                        if (this.appInits)
                            for (let e = 0; e < this.appInits.length; e++) {
                                const n = this.appInits[e]();
                                ee(n) && l.push(n)
                            }
                        Promise.all(l).then(() => {
                            n()
                        }).catch(l => {
                            this.reject(l)
                        }), 0 === l.length && n(), this.initialized = !0
                    }
                }
                const Gi = new El("AppId");

                function Wi() {
                    return `${Ki()}${Ki()}${Ki()}`
                }

                function Ki() {
                    return String.fromCharCode(97 + Math.floor(25 * Math.random()))
                }
                const Zi = new El("Platform Initializer"),
                    Qi = new El("Platform ID"),
                    Yi = new El("appBootstrapListener");
                class Xi {
                    log(l) {
                        console.log(l)
                    }
                    warn(l) {
                        console.warn(l)
                    }
                }
                const Ji = new El("LocaleId"),
                    ls = !1;

                function ns() {
                    throw new Error("Runtime compiler is not loaded")
                }
                const es = ns,
                    ts = ns,
                    is = ns,
                    ss = ns;
                class us {
                    constructor() {
                        this.compileModuleSync = es, this.compileModuleAsync = ts, this.compileModuleAndAllComponentsSync = is, this.compileModuleAndAllComponentsAsync = ss
                    }
                    clearCache() {}
                    clearCacheFor(l) {}
                    getModuleId(l) {}
                }
                class rs {}
                let as, os;

                function cs() {
                    const l = Tl.wtf;
                    return !(!l || !(as = l.trace) || (os = as.events, 0))
                }
                const ds = cs();

                function hs(l, n) {
                    return null
                }
                const ps = ds ? function (l, n = null) {
                        return os.createScope(l, n)
                    } : (l, n) => hs,
                    fs = ds ? function (l, n) {
                        return as.leaveScope(l, n), n
                    } : (l, n) => n,
                    gs = (() => Promise.resolve(0))();

                function ms(l) {
                    "undefined" == typeof Zone ? gs.then(() => {
                        l && l.apply(null, null)
                    }) : Zone.current.scheduleMicroTask("scheduleMicrotask", l)
                }
                class ys {
                    constructor({
                        enableLongStackTrace: l = !1
                    }) {
                        if (this.hasPendingMicrotasks = !1, this.hasPendingMacrotasks = !1, this.isStable = !0, this.onUnstable = new qi(!1), this.onMicrotaskEmpty = new qi(!1), this.onStable = new qi(!1), this.onError = new qi(!1), "undefined" == typeof Zone) throw new Error("In this configuration Angular requires Zone.js");
                        var n;
                        Zone.assertZonePatched(), this._nesting = 0, this._outer = this._inner = Zone.current, Zone.wtfZoneSpec && (this._inner = this._inner.fork(Zone.wtfZoneSpec)), Zone.TaskTrackingZoneSpec && (this._inner = this._inner.fork(new Zone.TaskTrackingZoneSpec)), l && Zone.longStackTraceZoneSpec && (this._inner = this._inner.fork(Zone.longStackTraceZoneSpec)), (n = this)._inner = n._inner.fork({
                            name: "angular",
                            properties: {
                                isAngularZone: !0
                            },
                            onInvokeTask: (l, e, t, i, s, u) => {
                                try {
                                    return ws(n), l.invokeTask(t, i, s, u)
                                } finally {
                                    xs(n)
                                }
                            },
                            onInvoke: (l, e, t, i, s, u, r) => {
                                try {
                                    return ws(n), l.invoke(t, i, s, u, r)
                                } finally {
                                    xs(n)
                                }
                            },
                            onHasTask: (l, e, t, i) => {
                                l.hasTask(t, i), e === t && ("microTask" == i.change ? (n.hasPendingMicrotasks = i.microTask, _s(n)) : "macroTask" == i.change && (n.hasPendingMacrotasks = i.macroTask))
                            },
                            onHandleError: (l, e, t, i) => (l.handleError(t, i), n.runOutsideAngular(() => n.onError.emit(i)), !1)
                        })
                    }
                    static isInAngularZone() {
                        return !0 === Zone.current.get("isAngularZone")
                    }
                    static assertInAngularZone() {
                        if (!ys.isInAngularZone()) throw new Error("Expected to be in Angular Zone, but it is not!")
                    }
                    static assertNotInAngularZone() {
                        if (ys.isInAngularZone()) throw new Error("Expected to not be in Angular Zone, but it is!")
                    }
                    run(l, n, e) {
                        return this._inner.run(l, n, e)
                    }
                    runTask(l, n, e, t) {
                        const i = this._inner,
                            s = i.scheduleEventTask("NgZoneEvent: " + t, l, bs, vs, vs);
                        try {
                            return i.runTask(s, n, e)
                        } finally {
                            i.cancelTask(s)
                        }
                    }
                    runGuarded(l, n, e) {
                        return this._inner.runGuarded(l, n, e)
                    }
                    runOutsideAngular(l) {
                        return this._outer.run(l)
                    }
                }

                function vs() {}
                const bs = {};

                function _s(l) {
                    if (0 == l._nesting && !l.hasPendingMicrotasks && !l.isStable) try {
                        l._nesting++, l.onMicrotaskEmpty.emit(null)
                    } finally {
                        if (l._nesting--, !l.hasPendingMicrotasks) try {
                            l.runOutsideAngular(() => l.onStable.emit(null))
                        } finally {
                            l.isStable = !0
                        }
                    }
                }

                function ws(l) {
                    l._nesting++, l.isStable && (l.isStable = !1, l.onUnstable.emit(null))
                }

                function xs(l) {
                    l._nesting--, _s(l)
                }
                class ks {
                    constructor() {
                        this.hasPendingMicrotasks = !1, this.hasPendingMacrotasks = !1, this.isStable = !0, this.onUnstable = new qi, this.onMicrotaskEmpty = new qi, this.onStable = new qi, this.onError = new qi
                    }
                    run(l) {
                        return l()
                    }
                    runGuarded(l) {
                        return l()
                    }
                    runOutsideAngular(l) {
                        return l()
                    }
                    runTask(l) {
                        return l()
                    }
                }
                class Ss {
                    constructor(l) {
                        this._ngZone = l, this._pendingCount = 0, this._isZoneStable = !0, this._didWork = !1, this._callbacks = [], this.taskTrackingZone = null, this._watchAngularEvents(), l.run(() => {
                            this.taskTrackingZone = "undefined" == typeof Zone ? null : Zone.current.get("TaskTrackingZone")
                        })
                    }
                    _watchAngularEvents() {
                        this._ngZone.onUnstable.subscribe({
                            next: () => {
                                this._didWork = !0, this._isZoneStable = !1
                            }
                        }), this._ngZone.runOutsideAngular(() => {
                            this._ngZone.onStable.subscribe({
                                next: () => {
                                    ys.assertNotInAngularZone(), ms(() => {
                                        this._isZoneStable = !0, this._runCallbacksIfReady()
                                    })
                                }
                            })
                        })
                    }
                    increasePendingRequestCount() {
                        return this._pendingCount += 1, this._didWork = !0, this._pendingCount
                    }
                    decreasePendingRequestCount() {
                        if (this._pendingCount -= 1, this._pendingCount < 0) throw new Error("pending async requests below zero");
                        return this._runCallbacksIfReady(), this._pendingCount
                    }
                    isStable() {
                        return this._isZoneStable && 0 === this._pendingCount && !this._ngZone.hasPendingMacrotasks
                    }
                    _runCallbacksIfReady() {
                        if (this.isStable()) ms(() => {
                            for (; 0 !== this._callbacks.length;) {
                                let l = this._callbacks.pop();
                                clearTimeout(l.timeoutId), l.doneCb(this._didWork)
                            }
                            this._didWork = !1
                        });
                        else {
                            let l = this.getPendingTasks();
                            this._callbacks = this._callbacks.filter(n => !n.updateCb || !n.updateCb(l) || (clearTimeout(n.timeoutId), !1)), this._didWork = !0
                        }
                    }
                    getPendingTasks() {
                        return this.taskTrackingZone ? this.taskTrackingZone.macroTasks.map(l => ({
                            source: l.source,
                            creationLocation: l.creationLocation,
                            data: l.data
                        })) : []
                    }
                    addCallback(l, n, e) {
                        let t = -1;
                        n && n > 0 && (t = setTimeout(() => {
                            this._callbacks = this._callbacks.filter(l => l.timeoutId !== t), l(this._didWork, this.getPendingTasks())
                        }, n)), this._callbacks.push({
                            doneCb: l,
                            timeoutId: t,
                            updateCb: e
                        })
                    }
                    whenStable(l, n, e) {
                        if (e && !this.taskTrackingZone) throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');
                        this.addCallback(l, n, e), this._runCallbacksIfReady()
                    }
                    getPendingRequestCount() {
                        return this._pendingCount
                    }
                    findProviders(l, n, e) {
                        return []
                    }
                }
                class Cs {
                    constructor() {
                        this._applications = new Map, Es.addToWindow(this)
                    }
                    registerApplication(l, n) {
                        this._applications.set(l, n)
                    }
                    unregisterApplication(l) {
                        this._applications.delete(l)
                    }
                    unregisterAllApplications() {
                        this._applications.clear()
                    }
                    getTestability(l) {
                        return this._applications.get(l) || null
                    }
                    getAllTestabilities() {
                        return Array.from(this._applications.values())
                    }
                    getAllRootElements() {
                        return Array.from(this._applications.keys())
                    }
                    findTestabilityInTree(l, n = !0) {
                        return Es.findTestabilityInTree(this, l, n)
                    }
                }
                class Is {
                    addToWindow(l) {}
                    findTestabilityInTree(l, n, e) {
                        return null
                    }
                }
                let Ts, Es = new Is,
                    As = function (l, n, e) {
                        return l.get(rs).createCompiler([n]).compileModuleAsync(e)
                    },
                    Ps = function (l) {
                        return l instanceof he
                    };
                const Ds = new El("AllowMultipleToken");
                class Ms {
                    constructor(l, n) {
                        this.name = l, this.token = n
                    }
                }

                function Os(l, n, e = []) {
                    const t = `Platform: ${n}`,
                        i = new El(t);
                    return (n = []) => {
                        let s = Ns();
                        if (!s || s.injector.get(Ds, !1))
                            if (l) l(e.concat(n).concat({
                                provide: i,
                                useValue: !0
                            }));
                            else {
                                const l = e.concat(n).concat({
                                    provide: i,
                                    useValue: !0
                                });
                                ! function (l) {
                                    if (Ts && !Ts.destroyed && !Ts.injector.get(Ds, !1)) throw new Error("There can be only one platform. Destroy the previous one to create a new one.");
                                    Ts = l.get(Rs);
                                    const n = l.get(Zi, null);
                                    n && n.forEach(l => l())
                                }(Ln.create({
                                    providers: l,
                                    name: t
                                }))
                            } return function (l) {
                            const n = Ns();
                            if (!n) throw new Error("No platform exists!");
                            if (!n.injector.get(l, null)) throw new Error("A platform with a different configuration has been created. Please destroy it first.");
                            return n
                        }(i)
                    }
                }

                function Ns() {
                    return Ts && !Ts.destroyed ? Ts : null
                }
                class Rs {
                    constructor(l) {
                        this._injector = l, this._modules = [], this._destroyListeners = [], this._destroyed = !1
                    }
                    bootstrapModuleFactory(l, n) {
                        const e = "noop" === (i = n ? n.ngZone : void 0) ? new ks : ("zone.js" === i ? void 0 : i) || new ys({
                                enableLongStackTrace: rn()
                            }),
                            t = [{
                                provide: ys,
                                useValue: e
                            }];
                        var i;
                        return e.run(() => {
                            const n = Ln.create({
                                    providers: t,
                                    parent: this.injector,
                                    name: l.moduleType.name
                                }),
                                i = l.create(n),
                                s = i.injector.get(tn, null);
                            if (!s) throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");
                            return ls && Fi(i.injector.get(Ji, $i) || $i), i.onDestroy(() => $s(this._modules, i)), e.runOutsideAngular(() => e.onError.subscribe({
                                    next: l => {
                                        s.handleError(l)
                                    }
                                })),
                                function (l, n, e) {
                                    try {
                                        const t = e();
                                        return ee(t) ? t.catch(e => {
                                            throw n.runOutsideAngular(() => l.handleError(e)), e
                                        }) : t
                                    } catch (t) {
                                        throw n.runOutsideAngular(() => l.handleError(t)), t
                                    }
                                }(s, e, () => {
                                    const l = i.injector.get(ji);
                                    return l.runInitializers(), l.donePromise.then(() => (this._moduleDoBootstrap(i), i))
                                })
                        })
                    }
                    bootstrapModule(l, n = []) {
                        const e = Bs({}, n);
                        return As(this.injector, e, l).then(l => this.bootstrapModuleFactory(l, e))
                    }
                    _moduleDoBootstrap(l) {
                        const n = l.injector.get(zs);
                        if (l._bootstrapComponents.length > 0) l._bootstrapComponents.forEach(l => n.bootstrap(l));
                        else {
                            if (!l.instance.ngDoBootstrap) throw new Error(`The module ${bl(l.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. ` + "Please define one of these.");
                            l.instance.ngDoBootstrap(n)
                        }
                        this._modules.push(l)
                    }
                    onDestroy(l) {
                        this._destroyListeners.push(l)
                    }
                    get injector() {
                        return this._injector
                    }
                    destroy() {
                        if (this._destroyed) throw new Error("The platform has already been destroyed!");
                        this._modules.slice().forEach(l => l.destroy()), this._destroyListeners.forEach(l => l()), this._destroyed = !0
                    }
                    get destroyed() {
                        return this._destroyed
                    }
                }

                function Bs(l, n) {
                    return Array.isArray(n) ? n.reduce(Bs, l) : Object.assign({}, l, n)
                }
                let zs = (() => {
                    class l {
                        constructor(l, n, e, t, i, s) {
                            this._zone = l, this._console = n, this._injector = e, this._exceptionHandler = t, this._componentFactoryResolver = i, this._initStatus = s, this._bootstrapListeners = [], this._views = [], this._runningTick = !1, this._enforceNoNewChanges = !1, this._stable = !0, this.componentTypes = [], this.components = [], this._enforceNoNewChanges = rn(), this._zone.onMicrotaskEmpty.subscribe({
                                next: () => {
                                    this._zone.run(() => {
                                        this.tick()
                                    })
                                }
                            });
                            const u = new w(l => {
                                    this._stable = this._zone.isStable && !this._zone.hasPendingMacrotasks && !this._zone.hasPendingMicrotasks, this._zone.runOutsideAngular(() => {
                                        l.next(this._stable), l.complete()
                                    })
                                }),
                                r = new w(l => {
                                    let n;
                                    this._zone.runOutsideAngular(() => {
                                        n = this._zone.onStable.subscribe(() => {
                                            ys.assertNotInAngularZone(), ms(() => {
                                                this._stable || this._zone.hasPendingMacrotasks || this._zone.hasPendingMicrotasks || (this._stable = !0, l.next(!0))
                                            })
                                        })
                                    });
                                    const e = this._zone.onUnstable.subscribe(() => {
                                        ys.assertInAngularZone(), this._stable && (this._stable = !1, this._zone.runOutsideAngular(() => {
                                            l.next(!1)
                                        }))
                                    });
                                    return () => {
                                        n.unsubscribe(), e.unsubscribe()
                                    }
                                });
                            this.isStable = X(u, r.pipe(ul()))
                        }
                        bootstrap(l, n) {
                            if (!this._initStatus.done) throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");
                            let e;
                            e = l instanceof ue ? l : this._componentFactoryResolver.resolveComponentFactory(l), this.componentTypes.push(e.componentType);
                            const t = Ps(e) ? null : this._injector.get(jl),
                                i = e.create(Ln.NULL, [], n || e.selector, t);
                            i.onDestroy(() => {
                                this._unloadComponent(i)
                            });
                            const s = i.injector.get(Ss, null);
                            return s && i.injector.get(Cs).registerApplication(i.location.nativeElement, s), this._loadComponent(i), rn() && this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."), i
                        }
                        tick() {
                            if (this._runningTick) throw new Error("ApplicationRef.tick is called recursively");
                            const n = l._tickScope();
                            try {
                                this._runningTick = !0;
                                for (let l of this._views) l.detectChanges();
                                if (this._enforceNoNewChanges)
                                    for (let l of this._views) l.checkNoChanges()
                            } catch (e) {
                                this._zone.runOutsideAngular(() => this._exceptionHandler.handleError(e))
                            } finally {
                                this._runningTick = !1, fs(n)
                            }
                        }
                        attachView(l) {
                            const n = l;
                            this._views.push(n), n.attachToAppRef(this)
                        }
                        detachView(l) {
                            const n = l;
                            $s(this._views, n), n.detachFromAppRef()
                        }
                        _loadComponent(l) {
                            this.attachView(l.hostView), this.tick(), this.components.push(l), this._injector.get(Yi, []).concat(this._bootstrapListeners).forEach(n => n(l))
                        }
                        _unloadComponent(l) {
                            this.detachView(l.hostView), $s(this.components, l)
                        }
                        ngOnDestroy() {
                            this._views.slice().forEach(l => l.destroy())
                        }
                        get viewCount() {
                            return this._views.length
                        }
                    }
                    return l._tickScope = ps("ApplicationRef#tick()"), l
                })();

                function $s(l, n) {
                    const e = l.indexOf(n);
                    e > -1 && l.splice(e, 1)
                }
                class Ls {}
                const Fs = "#",
                    qs = "NgFactory";
                class Us {}
                const Hs = {
                    factoryPathPrefix: "",
                    factoryPathSuffix: ".ngfactory"
                };
                class Vs {
                    constructor(l, n) {
                        this._compiler = l, this._config = n || Hs
                    }
                    load(l) {
                        return !ls && this._compiler instanceof us ? this.loadFactory(l) : this.loadAndCompile(l)
                    }
                    loadAndCompile(l) {
                        let [n, t] = l.split(Fs);
                        return void 0 === t && (t = "default"), e("zn8P")(n).then(l => l[t]).then(l => js(l, n, t)).then(l => this._compiler.compileModuleAsync(l))
                    }
                    loadFactory(l) {
                        let [n, t] = l.split(Fs), i = qs;
                        return void 0 === t && (t = "default", i = ""), e("zn8P")(this._config.factoryPathPrefix + n + this._config.factoryPathSuffix).then(l => l[t + i]).then(l => js(l, n, t))
                    }
                }

                function js(l, n, e) {
                    if (!l) throw new Error(`Cannot find '${e}' in '${n}'`);
                    return l
                }
                class Gs {
                    constructor(l, n) {
                        this.name = l, this.callback = n
                    }
                }
                class Ws {
                    constructor(l, n, e) {
                        this.listeners = [], this.parent = null, this._debugContext = e, this.nativeNode = l, n && n instanceof Ks && n.addChild(this)
                    }
                    get injector() {
                        return this._debugContext.injector
                    }
                    get componentInstance() {
                        return this._debugContext.component
                    }
                    get context() {
                        return this._debugContext.context
                    }
                    get references() {
                        return this._debugContext.references
                    }
                    get providerTokens() {
                        return this._debugContext.providerTokens
                    }
                }
                class Ks extends Ws {
                    constructor(l, n, e) {
                        super(l, n, e), this.properties = {}, this.attributes = {}, this.classes = {}, this.styles = {}, this.childNodes = [], this.nativeElement = l
                    }
                    addChild(l) {
                        l && (this.childNodes.push(l), l.parent = this)
                    }
                    removeChild(l) {
                        const n = this.childNodes.indexOf(l); - 1 !== n && (l.parent = null, this.childNodes.splice(n, 1))
                    }
                    insertChildrenAfter(l, n) {
                        const e = this.childNodes.indexOf(l); - 1 !== e && (this.childNodes.splice(e + 1, 0, ...n), n.forEach(n => {
                            n.parent && n.parent.removeChild(n), l.parent = this
                        }))
                    }
                    insertBefore(l, n) {
                        const e = this.childNodes.indexOf(l); - 1 === e ? this.addChild(n) : (n.parent && n.parent.removeChild(n), n.parent = this, this.childNodes.splice(e, 0, n))
                    }
                    query(l) {
                        return this.queryAll(l)[0] || null
                    }
                    queryAll(l) {
                        const n = [];
                        return function l(n, e, t) {
                            n.childNodes.forEach(n => {
                                n instanceof Ks && (e(n) && t.push(n), l(n, e, t))
                            })
                        }(this, l, n), n
                    }
                    queryAllNodes(l) {
                        const n = [];
                        return function l(n, e, t) {
                            n instanceof Ks && n.childNodes.forEach(n => {
                                e(n) && t.push(n), n instanceof Ks && l(n, e, t)
                            })
                        }(this, l, n), n
                    }
                    get children() {
                        return this.childNodes.filter(l => l instanceof Ks)
                    }
                    triggerEventHandler(l, n) {
                        this.listeners.forEach(e => {
                            e.name == l && e.callback(n)
                        })
                    }
                }
                const Zs = new Map,
                    Qs = function (l) {
                        return Zs.get(l) || null
                    };

                function Ys(l) {
                    Zs.set(l.nativeNode, l)
                }
                const Xs = Os(null, "core", [{
                    provide: Qi,
                    useValue: "unknown"
                }, {
                    provide: Rs,
                    deps: [Ln]
                }, {
                    provide: Cs,
                    deps: []
                }, {
                    provide: Xi,
                    deps: []
                }]);

                function Js() {
                    return Be
                }

                function lu() {
                    return ze
                }

                function nu(l) {
                    return l ? (ls && Fi(l), l) : $i
                }

                function eu(l) {
                    let n = [];
                    return l.onStable.subscribe(() => {
                            for (; n.length;) n.pop()()
                        }),
                        function (l) {
                            n.push(l)
                        }
                }
                class tu {
                    constructor(l) {}
                }

                function iu(l, n, e, t, i, s) {
                    l |= 1;
                    const {
                        matchedQueries: u,
                        references: r,
                        matchedQueryIds: a
                    } = bt(n);
                    return {
                        nodeIndex: -1,
                        parent: null,
                        renderParent: null,
                        bindingIndex: -1,
                        outputIndex: -1,
                        flags: l,
                        checkIndex: -1,
                        childFlags: 0,
                        directChildFlags: 0,
                        childMatchedQueries: 0,
                        matchedQueries: u,
                        matchedQueryIds: a,
                        references: r,
                        ngContentIndex: e,
                        childCount: t,
                        bindings: [],
                        bindingFlags: 0,
                        outputs: [],
                        element: {
                            ns: null,
                            name: null,
                            attrs: null,
                            template: s ? kt(s) : null,
                            componentProvider: null,
                            componentView: null,
                            componentRendererType: null,
                            publicProviders: null,
                            allProviders: null,
                            handleEvent: i || Je
                        },
                        provider: null,
                        text: null,
                        query: null,
                        ngContent: null
                    }
                }

                function su(l, n, e, t, i, s, u = [], r, a, o, c, d) {
                    o || (o = Je);
                    const {
                        matchedQueries: h,
                        references: p,
                        matchedQueryIds: f
                    } = bt(e);
                    let g = null,
                        m = null;
                    s && ([g, m] = Pt(s)), r = r || [];
                    const y = new Array(r.length);
                    for (let _ = 0; _ < r.length; _++) {
                        const [l, n, e] = r[_], [t, i] = Pt(n);
                        let s = void 0,
                            u = void 0;
                        switch (15 & l) {
                            case 4:
                                u = e;
                                break;
                            case 1:
                            case 8:
                                s = e
                        }
                        y[_] = {
                            flags: l,
                            ns: t,
                            name: i,
                            nonMinifiedName: i,
                            securityContext: s,
                            suffix: u
                        }
                    }
                    a = a || [];
                    const v = new Array(a.length);
                    for (let _ = 0; _ < a.length; _++) {
                        const [l, n] = a[_];
                        v[_] = {
                            type: 0,
                            target: l,
                            eventName: n,
                            propName: null
                        }
                    }
                    const b = (u = u || []).map(([l, n]) => {
                        const [e, t] = Pt(l);
                        return [e, t, n]
                    });
                    return d = function (l) {
                        if (l && l.id === tt) {
                            const n = null != l.encapsulation && l.encapsulation !== Zl.None || l.styles.length || Object.keys(l.data).length;
                            l.id = n ? `c${ut++}` : it
                        }
                        return l && l.id === it && (l = null), l || null
                    }(d), c && (n |= 33554432), {
                        nodeIndex: -1,
                        parent: null,
                        renderParent: null,
                        bindingIndex: -1,
                        outputIndex: -1,
                        checkIndex: l,
                        flags: n |= 1,
                        childFlags: 0,
                        directChildFlags: 0,
                        childMatchedQueries: 0,
                        matchedQueries: h,
                        matchedQueryIds: f,
                        references: p,
                        ngContentIndex: t,
                        childCount: i,
                        bindings: y,
                        bindingFlags: Dt(y),
                        outputs: v,
                        element: {
                            ns: g,
                            name: m,
                            attrs: b,
                            template: null,
                            componentProvider: null,
                            componentView: c || null,
                            componentRendererType: d,
                            publicProviders: null,
                            allProviders: null,
                            handleEvent: o || Je
                        },
                        provider: null,
                        text: null,
                        query: null,
                        ngContent: null
                    }
                }

                function uu(l, n, e) {
                    const t = e.element,
                        i = l.root.selectorOrNode,
                        s = l.renderer;
                    let u;
                    if (l.parent || !i) {
                        u = t.name ? s.createElement(t.name, t.ns) : s.createComment("");
                        const i = wt(l, n, e);
                        i && s.appendChild(i, u)
                    } else u = s.selectRootElement(i, !!t.componentRendererType && t.componentRendererType.encapsulation === Zl.ShadowDom);
                    if (t.attrs)
                        for (let r = 0; r < t.attrs.length; r++) {
                            const [l, n, e] = t.attrs[r];
                            s.setAttribute(u, n, e, l)
                        }
                    return u
                }

                function ru(l, n, e, t) {
                    for (let u = 0; u < e.outputs.length; u++) {
                        const r = e.outputs[u],
                            a = au(l, e.nodeIndex, (s = r.eventName, (i = r.target) ? `${i}:${s}` : s));
                        let o = r.target,
                            c = l;
                        "component" === r.target && (o = null, c = n);
                        const d = c.renderer.listen(o || t, r.eventName, a);
                        l.disposables[e.outputIndex + u] = d
                    }
                    var i, s
                }

                function au(l, n, e) {
                    return t => ht(l, n, e, t)
                }

                function ou(l, n, e, t) {
                    if (!at(l, n, e, t)) return !1;
                    const i = n.bindings[e],
                        s = Ke(l, n.nodeIndex),
                        u = s.renderElement,
                        r = i.name;
                    switch (15 & i.flags) {
                        case 1:
                            ! function (l, n, e, t, i, s) {
                                const u = n.securityContext;
                                let r = u ? l.root.sanitizer.sanitize(u, s) : s;
                                r = null != r ? r.toString() : null;
                                const a = l.renderer;
                                null != s ? a.setAttribute(e, i, r, t) : a.removeAttribute(e, i, t)
                            }(l, i, u, i.ns, r, t);
                            break;
                        case 2:
                            ! function (l, n, e, t) {
                                const i = l.renderer;
                                t ? i.addClass(n, e) : i.removeClass(n, e)
                            }(l, u, r, t);
                            break;
                        case 4:
                            ! function (l, n, e, t, i) {
                                let s = l.root.sanitizer.sanitize(An.STYLE, i);
                                if (null != s) {
                                    s = s.toString();
                                    const l = n.suffix;
                                    null != l && (s += l)
                                } else s = null;
                                const u = l.renderer;
                                null != s ? u.setStyle(e, t, s) : u.removeStyle(e, t)
                            }(l, i, u, r, t);
                            break;
                        case 8:
                            ! function (l, n, e, t, i) {
                                const s = n.securityContext;
                                let u = s ? l.root.sanitizer.sanitize(s, i) : i;
                                l.renderer.setProperty(e, t, u)
                            }(33554432 & n.flags && 32 & i.flags ? s.componentView : l, i, u, r, t)
                    }
                    return !0
                }

                function cu(l, n, e) {
                    let t = [];
                    for (let i in e) t.push({
                        propName: i,
                        bindingType: e[i]
                    });
                    return {
                        nodeIndex: -1,
                        parent: null,
                        renderParent: null,
                        bindingIndex: -1,
                        outputIndex: -1,
                        checkIndex: -1,
                        flags: l,
                        childFlags: 0,
                        directChildFlags: 0,
                        childMatchedQueries: 0,
                        ngContentIndex: -1,
                        matchedQueries: {},
                        matchedQueryIds: 0,
                        references: {},
                        childCount: 0,
                        bindings: [],
                        bindingFlags: 0,
                        outputs: [],
                        element: null,
                        provider: null,
                        text: null,
                        query: {
                            id: n,
                            filterId: vt(n),
                            bindings: t
                        },
                        ngContent: null
                    }
                }

                function du(l) {
                    const n = l.def.nodeMatchedQueries;
                    for (; l.parent && yt(l);) {
                        let e = l.parentNodeDef;
                        l = l.parent;
                        const t = e.nodeIndex + e.childCount;
                        for (let i = 0; i <= t; i++) {
                            const t = l.def.nodes[i];
                            67108864 & t.flags && 536870912 & t.flags && (t.query.filterId & n) === t.query.filterId && Ye(l, i).setDirty(), !(1 & t.flags && i + t.childCount < e.nodeIndex) && 67108864 & t.childFlags && 536870912 & t.childFlags || (i += t.childCount)
                        }
                    }
                    if (134217728 & l.def.nodeFlags)
                        for (let e = 0; e < l.def.nodes.length; e++) {
                            const n = l.def.nodes[e];
                            134217728 & n.flags && 536870912 & n.flags && Ye(l, e).setDirty(), e += n.childCount
                        }
                }

                function hu(l, n) {
                    const e = Ye(l, n.nodeIndex);
                    if (!e.dirty) return;
                    let t, i = void 0;
                    if (67108864 & n.flags) {
                        const e = n.parent.parent;
                        i = pu(l, e.nodeIndex, e.nodeIndex + e.childCount, n.query, []), t = Ze(l, n.parent.nodeIndex).instance
                    } else 134217728 & n.flags && (i = pu(l, 0, l.def.nodes.length - 1, n.query, []), t = l.component);
                    e.reset(i);
                    const s = n.query.bindings;
                    let u = !1;
                    for (let r = 0; r < s.length; r++) {
                        const l = s[r];
                        let n;
                        switch (l.bindingType) {
                            case 0:
                                n = e.first;
                                break;
                            case 1:
                                n = e, u = !0
                        }
                        t[l.propName] = n
                    }
                    u && e.notifyOnChanges()
                }

                function pu(l, n, e, t, i) {
                    for (let s = n; s <= e; s++) {
                        const n = l.def.nodes[s],
                            e = n.matchedQueries[t.id];
                        if (null != e && i.push(fu(l, n, e)), 1 & n.flags && n.element.template && (n.element.template.nodeMatchedQueries & t.filterId) === t.filterId) {
                            const e = Ke(l, s);
                            if ((n.childMatchedQueries & t.filterId) === t.filterId && (pu(l, s + 1, s + n.childCount, t, i), s += n.childCount), 16777216 & n.flags) {
                                const l = e.viewContainer._embeddedViews;
                                for (let n = 0; n < l.length; n++) {
                                    const s = l[n],
                                        u = pt(s);
                                    u && u === e && pu(s, 0, s.def.nodes.length - 1, t, i)
                                }
                            }
                            const u = e.template._projectedViews;
                            if (u)
                                for (let l = 0; l < u.length; l++) {
                                    const n = u[l];
                                    pu(n, 0, n.def.nodes.length - 1, t, i)
                                }
                        }(n.childMatchedQueries & t.filterId) !== t.filterId && (s += n.childCount)
                    }
                    return i
                }

                function fu(l, n, e) {
                    if (null != e) switch (e) {
                        case 1:
                            return Ke(l, n.nodeIndex).renderElement;
                        case 0:
                            return new fe(Ke(l, n.nodeIndex).renderElement);
                        case 2:
                            return Ke(l, n.nodeIndex).template;
                        case 3:
                            return Ke(l, n.nodeIndex).viewContainer;
                        case 4:
                            return Ze(l, n.nodeIndex).instance
                    }
                }

                function gu(l, n) {
                    return {
                        nodeIndex: -1,
                        parent: null,
                        renderParent: null,
                        bindingIndex: -1,
                        outputIndex: -1,
                        checkIndex: -1,
                        flags: 8,
                        childFlags: 0,
                        directChildFlags: 0,
                        childMatchedQueries: 0,
                        matchedQueries: {},
                        matchedQueryIds: 0,
                        references: {},
                        ngContentIndex: l,
                        childCount: 0,
                        bindings: [],
                        bindingFlags: 0,
                        outputs: [],
                        element: null,
                        provider: null,
                        text: null,
                        query: null,
                        ngContent: {
                            index: n
                        }
                    }
                }

                function mu(l, n, e) {
                    const t = wt(l, n, e);
                    t && It(l, e.ngContent.index, 1, t, null, void 0)
                }

                function yu(l, n) {
                    return bu(128, l, new Array(n + 1))
                }

                function vu(l, n) {
                    const e = Object.keys(n),
                        t = e.length,
                        i = new Array(t);
                    for (let s = 0; s < t; s++) {
                        const l = e[s];
                        i[n[l]] = l
                    }
                    return bu(64, l, i)
                }

                function bu(l, n, e) {
                    const t = new Array(e.length);
                    for (let i = 0; i < e.length; i++) {
                        const l = e[i];
                        t[i] = {
                            flags: 8,
                            name: l,
                            ns: null,
                            nonMinifiedName: l,
                            securityContext: null,
                            suffix: null
                        }
                    }
                    return {
                        nodeIndex: -1,
                        parent: null,
                        renderParent: null,
                        bindingIndex: -1,
                        outputIndex: -1,
                        checkIndex: n,
                        flags: l,
                        childFlags: 0,
                        directChildFlags: 0,
                        childMatchedQueries: 0,
                        matchedQueries: {},
                        matchedQueryIds: 0,
                        references: {},
                        ngContentIndex: -1,
                        childCount: 0,
                        bindings: t,
                        bindingFlags: Dt(t),
                        outputs: [],
                        element: null,
                        provider: null,
                        text: null,
                        query: null,
                        ngContent: null
                    }
                }

                function _u(l, n, e) {
                    const t = new Array(e.length - 1);
                    for (let i = 1; i < e.length; i++) t[i - 1] = {
                        flags: 8,
                        name: null,
                        ns: null,
                        nonMinifiedName: null,
                        securityContext: null,
                        suffix: e[i]
                    };
                    return {
                        nodeIndex: -1,
                        parent: null,
                        renderParent: null,
                        bindingIndex: -1,
                        outputIndex: -1,
                        checkIndex: l,
                        flags: 2,
                        childFlags: 0,
                        directChildFlags: 0,
                        childMatchedQueries: 0,
                        matchedQueries: {},
                        matchedQueryIds: 0,
                        references: {},
                        ngContentIndex: n,
                        childCount: 0,
                        bindings: t,
                        bindingFlags: 8,
                        outputs: [],
                        element: null,
                        provider: null,
                        text: {
                            prefix: e[0]
                        },
                        query: null,
                        ngContent: null
                    }
                }

                function wu(l, n, e) {
                    let t;
                    const i = l.renderer;
                    t = i.createText(e.text.prefix);
                    const s = wt(l, n, e);
                    return s && i.appendChild(s, t), {
                        renderText: t
                    }
                }

                function xu(l, n) {
                    return (null != l ? l.toString() : "") + n.suffix
                }

                function ku(l, n, e, t) {
                    let i = 0,
                        s = 0,
                        u = 0,
                        r = 0,
                        a = 0,
                        o = null,
                        c = null,
                        d = !1,
                        h = !1,
                        p = null;
                    for (let f = 0; f < n.length; f++) {
                        const l = n[f];
                        if (l.nodeIndex = f, l.parent = o, l.bindingIndex = i, l.outputIndex = s, l.renderParent = c, u |= l.flags, a |= l.matchedQueryIds, l.element) {
                            const n = l.element;
                            n.publicProviders = o ? o.element.publicProviders : Object.create(null), n.allProviders = n.publicProviders, d = !1, h = !1, l.element.template && (a |= l.element.template.nodeMatchedQueries)
                        }
                        if (Cu(o, l, n.length), i += l.bindings.length, s += l.outputs.length, !c && 3 & l.flags && (p = l), 20224 & l.flags) {
                            d || (d = !0, o.element.publicProviders = Object.create(o.element.publicProviders), o.element.allProviders = o.element.publicProviders);
                            const n = 0 != (32768 & l.flags);
                            0 == (8192 & l.flags) || n ? o.element.publicProviders[nt(l.provider.token)] = l : (h || (h = !0, o.element.allProviders = Object.create(o.element.publicProviders)), o.element.allProviders[nt(l.provider.token)] = l), n && (o.element.componentProvider = l)
                        }
                        if (o ? (o.childFlags |= l.flags, o.directChildFlags |= l.flags, o.childMatchedQueries |= l.matchedQueryIds, l.element && l.element.template && (o.childMatchedQueries |= l.element.template.nodeMatchedQueries)) : r |= l.flags, l.childCount > 0) o = l, Su(l) || (c = l);
                        else
                            for (; o && f === o.nodeIndex + o.childCount;) {
                                const l = o.parent;
                                l && (l.childFlags |= o.childFlags, l.childMatchedQueries |= o.childMatchedQueries), c = (o = l) && Su(o) ? o.renderParent : o
                            }
                    }
                    return {
                        factory: null,
                        nodeFlags: u,
                        rootNodeFlags: r,
                        nodeMatchedQueries: a,
                        flags: l,
                        nodes: n,
                        updateDirectives: e || Je,
                        updateRenderer: t || Je,
                        handleEvent: (l, e, t, i) => n[e].element.handleEvent(l, t, i),
                        bindingCount: i,
                        outputCount: s,
                        lastRenderRootNode: p
                    }
                }

                function Su(l) {
                    return 0 != (1 & l.flags) && null === l.element.name
                }

                function Cu(l, n, e) {
                    const t = n.element && n.element.template;
                    if (t) {
                        if (!t.lastRenderRootNode) throw new Error("Illegal State: Embedded templates without nodes are not allowed!");
                        if (t.lastRenderRootNode && 16777216 & t.lastRenderRootNode.flags) throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${n.nodeIndex}!`)
                    }
                    if (20224 & n.flags && 0 == (1 & (l ? l.flags : 0))) throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${n.nodeIndex}!`);
                    if (n.query) {
                        if (67108864 & n.flags && (!l || 0 == (16384 & l.flags))) throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${n.nodeIndex}!`);
                        if (134217728 & n.flags && l) throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${n.nodeIndex}!`)
                    }
                    if (n.childCount) {
                        const t = l ? l.nodeIndex + l.childCount : e - 1;
                        if (n.nodeIndex <= t && n.nodeIndex + n.childCount > t) throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${n.nodeIndex}!`)
                    }
                }

                function Iu(l, n, e, t) {
                    const i = Au(l.root, l.renderer, l, n, e);
                    return Pu(i, l.component, t), Du(i), i
                }

                function Tu(l, n, e) {
                    const t = Au(l, l.renderer, null, null, n);
                    return Pu(t, e, e), Du(t), t
                }

                function Eu(l, n, e, t) {
                    const i = n.element.componentRendererType;
                    let s;
                    return s = i ? l.root.rendererFactory.createRenderer(t, i) : l.root.renderer, Au(l.root, s, l, n.element.componentProvider, e)
                }

                function Au(l, n, e, t, i) {
                    const s = new Array(i.nodes.length),
                        u = i.outputCount ? new Array(i.outputCount) : null;
                    return {
                        def: i,
                        parent: e,
                        viewContainerParent: null,
                        parentNodeDef: t,
                        context: null,
                        component: null,
                        nodes: s,
                        state: 13,
                        root: l,
                        renderer: n,
                        oldValues: new Array(i.bindingCount),
                        disposables: u,
                        initIndex: -1
                    }
                }

                function Pu(l, n, e) {
                    l.component = n, l.context = e
                }

                function Du(l) {
                    let n;
                    mt(l) && (n = Ke(l.parent, l.parentNodeDef.parent.nodeIndex).renderElement);
                    const e = l.def,
                        t = l.nodes;
                    for (let i = 0; i < e.nodes.length; i++) {
                        const s = e.nodes[i];
                        let u;
                        switch (Xe.setCurrentNode(l, i), 201347067 & s.flags) {
                            case 1:
                                const e = uu(l, n, s);
                                let r = void 0;
                                if (33554432 & s.flags) {
                                    const n = kt(s.element.componentView);
                                    r = Xe.createComponentView(l, s, n, e)
                                }
                                ru(l, r, s, e), u = {
                                    renderElement: e,
                                    componentView: r,
                                    viewContainer: null,
                                    template: s.element.template ? Xt(l, s) : void 0
                                }, 16777216 & s.flags && (u.viewContainer = Kt(l, s, u));
                                break;
                            case 2:
                                u = wu(l, n, s);
                                break;
                            case 512:
                            case 1024:
                            case 2048:
                            case 256:
                                (u = t[i]) || 4096 & s.flags || (u = {
                                    instance: bi(l, s)
                                });
                                break;
                            case 16:
                                u = {
                                    instance: _i(l, s)
                                };
                                break;
                            case 16384:
                                (u = t[i]) || (u = {
                                    instance: wi(l, s)
                                }), 32768 & s.flags && Pu(Ke(l, s.parent.nodeIndex).componentView, u.instance, u.instance);
                                break;
                            case 32:
                            case 64:
                            case 128:
                                u = {
                                    value: void 0
                                };
                                break;
                            case 67108864:
                            case 134217728:
                                u = new Hi;
                                break;
                            case 8:
                                mu(l, n, s), u = void 0
                        }
                        t[i] = u
                    }
                    Fu(l, Lu.CreateViewNodes), Vu(l, 201326592, 268435456, 0)
                }

                function Mu(l) {
                    Ru(l), Xe.updateDirectives(l, 1), qu(l, Lu.CheckNoChanges), Xe.updateRenderer(l, 1), Fu(l, Lu.CheckNoChanges), l.state &= -97
                }

                function Ou(l) {
                    1 & l.state ? (l.state &= -2, l.state |= 2) : l.state &= -3, je(l, 0, 256), Ru(l), Xe.updateDirectives(l, 0), qu(l, Lu.CheckAndUpdate), Vu(l, 67108864, 536870912, 0);
                    let n = je(l, 256, 512);
                    Ai(l, 2097152 | (n ? 1048576 : 0)), Xe.updateRenderer(l, 0), Fu(l, Lu.CheckAndUpdate), Vu(l, 134217728, 536870912, 0), Ai(l, 8388608 | ((n = je(l, 512, 768)) ? 4194304 : 0)), 2 & l.def.flags && (l.state &= -9), l.state &= -97, je(l, 768, 1024)
                }

                function Nu(l, n, e, t, i, s, u, r, a, o, c, d, h) {
                    return 0 === e ? function (l, n, e, t, i, s, u, r, a, o, c, d) {
                        switch (201347067 & n.flags) {
                            case 1:
                                return function (l, n, e, t, i, s, u, r, a, o, c, d) {
                                    const h = n.bindings.length;
                                    let p = !1;
                                    return h > 0 && ou(l, n, 0, e) && (p = !0), h > 1 && ou(l, n, 1, t) && (p = !0), h > 2 && ou(l, n, 2, i) && (p = !0), h > 3 && ou(l, n, 3, s) && (p = !0), h > 4 && ou(l, n, 4, u) && (p = !0), h > 5 && ou(l, n, 5, r) && (p = !0), h > 6 && ou(l, n, 6, a) && (p = !0), h > 7 && ou(l, n, 7, o) && (p = !0), h > 8 && ou(l, n, 8, c) && (p = !0), h > 9 && ou(l, n, 9, d) && (p = !0), p
                                }(l, n, e, t, i, s, u, r, a, o, c, d);
                            case 2:
                                return function (l, n, e, t, i, s, u, r, a, o, c, d) {
                                    let h = !1;
                                    const p = n.bindings,
                                        f = p.length;
                                    if (f > 0 && at(l, n, 0, e) && (h = !0), f > 1 && at(l, n, 1, t) && (h = !0), f > 2 && at(l, n, 2, i) && (h = !0), f > 3 && at(l, n, 3, s) && (h = !0), f > 4 && at(l, n, 4, u) && (h = !0), f > 5 && at(l, n, 5, r) && (h = !0), f > 6 && at(l, n, 6, a) && (h = !0), f > 7 && at(l, n, 7, o) && (h = !0), f > 8 && at(l, n, 8, c) && (h = !0), f > 9 && at(l, n, 9, d) && (h = !0), h) {
                                        let h = n.text.prefix;
                                        f > 0 && (h += xu(e, p[0])), f > 1 && (h += xu(t, p[1])), f > 2 && (h += xu(i, p[2])), f > 3 && (h += xu(s, p[3])), f > 4 && (h += xu(u, p[4])), f > 5 && (h += xu(r, p[5])), f > 6 && (h += xu(a, p[6])), f > 7 && (h += xu(o, p[7])), f > 8 && (h += xu(c, p[8])), f > 9 && (h += xu(d, p[9]));
                                        const g = We(l, n.nodeIndex).renderText;
                                        l.renderer.setValue(g, h)
                                    }
                                    return h
                                }(l, n, e, t, i, s, u, r, a, o, c, d);
                            case 16384:
                                return function (l, n, e, t, i, s, u, r, a, o, c, d) {
                                    const h = Ze(l, n.nodeIndex),
                                        p = h.instance;
                                    let f = !1,
                                        g = void 0;
                                    const m = n.bindings.length;
                                    return m > 0 && rt(l, n, 0, e) && (f = !0, g = Ei(l, h, n, 0, e, g)), m > 1 && rt(l, n, 1, t) && (f = !0, g = Ei(l, h, n, 1, t, g)), m > 2 && rt(l, n, 2, i) && (f = !0, g = Ei(l, h, n, 2, i, g)), m > 3 && rt(l, n, 3, s) && (f = !0, g = Ei(l, h, n, 3, s, g)), m > 4 && rt(l, n, 4, u) && (f = !0, g = Ei(l, h, n, 4, u, g)), m > 5 && rt(l, n, 5, r) && (f = !0, g = Ei(l, h, n, 5, r, g)), m > 6 && rt(l, n, 6, a) && (f = !0, g = Ei(l, h, n, 6, a, g)), m > 7 && rt(l, n, 7, o) && (f = !0, g = Ei(l, h, n, 7, o, g)), m > 8 && rt(l, n, 8, c) && (f = !0, g = Ei(l, h, n, 8, c, g)), m > 9 && rt(l, n, 9, d) && (f = !0, g = Ei(l, h, n, 9, d, g)), g && p.ngOnChanges(g), 65536 & n.flags && Ge(l, 256, n.nodeIndex) && p.ngOnInit(), 262144 & n.flags && p.ngDoCheck(), f
                                }(l, n, e, t, i, s, u, r, a, o, c, d);
                            case 32:
                            case 64:
                            case 128:
                                return function (l, n, e, t, i, s, u, r, a, o, c, d) {
                                    const h = n.bindings;
                                    let p = !1;
                                    const f = h.length;
                                    if (f > 0 && at(l, n, 0, e) && (p = !0), f > 1 && at(l, n, 1, t) && (p = !0), f > 2 && at(l, n, 2, i) && (p = !0), f > 3 && at(l, n, 3, s) && (p = !0), f > 4 && at(l, n, 4, u) && (p = !0), f > 5 && at(l, n, 5, r) && (p = !0), f > 6 && at(l, n, 6, a) && (p = !0), f > 7 && at(l, n, 7, o) && (p = !0), f > 8 && at(l, n, 8, c) && (p = !0), f > 9 && at(l, n, 9, d) && (p = !0), p) {
                                        const p = Qe(l, n.nodeIndex);
                                        let g;
                                        switch (201347067 & n.flags) {
                                            case 32:
                                                g = new Array(h.length), f > 0 && (g[0] = e), f > 1 && (g[1] = t), f > 2 && (g[2] = i), f > 3 && (g[3] = s), f > 4 && (g[4] = u), f > 5 && (g[5] = r), f > 6 && (g[6] = a), f > 7 && (g[7] = o), f > 8 && (g[8] = c), f > 9 && (g[9] = d);
                                                break;
                                            case 64:
                                                g = {}, f > 0 && (g[h[0].name] = e), f > 1 && (g[h[1].name] = t), f > 2 && (g[h[2].name] = i), f > 3 && (g[h[3].name] = s), f > 4 && (g[h[4].name] = u), f > 5 && (g[h[5].name] = r), f > 6 && (g[h[6].name] = a), f > 7 && (g[h[7].name] = o), f > 8 && (g[h[8].name] = c), f > 9 && (g[h[9].name] = d);
                                                break;
                                            case 128:
                                                const l = e;
                                                switch (f) {
                                                    case 1:
                                                        g = l.transform(e);
                                                        break;
                                                    case 2:
                                                        g = l.transform(t);
                                                        break;
                                                    case 3:
                                                        g = l.transform(t, i);
                                                        break;
                                                    case 4:
                                                        g = l.transform(t, i, s);
                                                        break;
                                                    case 5:
                                                        g = l.transform(t, i, s, u);
                                                        break;
                                                    case 6:
                                                        g = l.transform(t, i, s, u, r);
                                                        break;
                                                    case 7:
                                                        g = l.transform(t, i, s, u, r, a);
                                                        break;
                                                    case 8:
                                                        g = l.transform(t, i, s, u, r, a, o);
                                                        break;
                                                    case 9:
                                                        g = l.transform(t, i, s, u, r, a, o, c);
                                                        break;
                                                    case 10:
                                                        g = l.transform(t, i, s, u, r, a, o, c, d)
                                                }
                                        }
                                        p.value = g
                                    }
                                    return p
                                }(l, n, e, t, i, s, u, r, a, o, c, d);
                            default:
                                throw "unreachable"
                        }
                    }(l, n, t, i, s, u, r, a, o, c, d, h) : function (l, n, e) {
                        switch (201347067 & n.flags) {
                            case 1:
                                return function (l, n, e) {
                                    let t = !1;
                                    for (let i = 0; i < e.length; i++) ou(l, n, i, e[i]) && (t = !0);
                                    return t
                                }(l, n, e);
                            case 2:
                                return function (l, n, e) {
                                    const t = n.bindings;
                                    let i = !1;
                                    for (let s = 0; s < e.length; s++) at(l, n, s, e[s]) && (i = !0);
                                    if (i) {
                                        let i = "";
                                        for (let l = 0; l < e.length; l++) i += xu(e[l], t[l]);
                                        i = n.text.prefix + i;
                                        const s = We(l, n.nodeIndex).renderText;
                                        l.renderer.setValue(s, i)
                                    }
                                    return i
                                }(l, n, e);
                            case 16384:
                                return function (l, n, e) {
                                    const t = Ze(l, n.nodeIndex),
                                        i = t.instance;
                                    let s = !1,
                                        u = void 0;
                                    for (let r = 0; r < e.length; r++) rt(l, n, r, e[r]) && (s = !0, u = Ei(l, t, n, r, e[r], u));
                                    return u && i.ngOnChanges(u), 65536 & n.flags && Ge(l, 256, n.nodeIndex) && i.ngOnInit(), 262144 & n.flags && i.ngDoCheck(), s
                                }(l, n, e);
                            case 32:
                            case 64:
                            case 128:
                                return function (l, n, e) {
                                    const t = n.bindings;
                                    let i = !1;
                                    for (let s = 0; s < e.length; s++) at(l, n, s, e[s]) && (i = !0);
                                    if (i) {
                                        const i = Qe(l, n.nodeIndex);
                                        let s;
                                        switch (201347067 & n.flags) {
                                            case 32:
                                                s = e;
                                                break;
                                            case 64:
                                                s = {};
                                                for (let i = 0; i < e.length; i++) s[t[i].name] = e[i];
                                                break;
                                            case 128:
                                                const l = e[0],
                                                    n = e.slice(1);
                                                s = l.transform(...n)
                                        }
                                        i.value = s
                                    }
                                    return i
                                }(l, n, e);
                            default:
                                throw "unreachable"
                        }
                    }(l, n, t)
                }

                function Ru(l) {
                    const n = l.def;
                    if (4 & n.nodeFlags)
                        for (let e = 0; e < n.nodes.length; e++) {
                            const t = n.nodes[e];
                            if (4 & t.flags) {
                                const n = Ke(l, e).template._projectedViews;
                                if (n)
                                    for (let e = 0; e < n.length; e++) {
                                        const t = n[e];
                                        t.state |= 32, dt(t, l)
                                    }
                            } else 0 == (4 & t.childFlags) && (e += t.childCount)
                        }
                }

                function Bu(l, n, e, t, i, s, u, r, a, o, c, d, h) {
                    return 0 === e ? function (l, n, e, t, i, s, u, r, a, o, c, d) {
                        const h = n.bindings.length;
                        h > 0 && ot(l, n, 0, e), h > 1 && ot(l, n, 1, t), h > 2 && ot(l, n, 2, i), h > 3 && ot(l, n, 3, s), h > 4 && ot(l, n, 4, u), h > 5 && ot(l, n, 5, r), h > 6 && ot(l, n, 6, a), h > 7 && ot(l, n, 7, o), h > 8 && ot(l, n, 8, c), h > 9 && ot(l, n, 9, d)
                    }(l, n, t, i, s, u, r, a, o, c, d, h) : function (l, n, e) {
                        for (let t = 0; t < e.length; t++) ot(l, n, t, e[t])
                    }(l, n, t), !1
                }

                function zu(l, n) {
                    if (Ye(l, n.nodeIndex).dirty) throw Ue(Xe.createDebugContext(l, n.nodeIndex), `Query ${n.query.id} not dirty`, `Query ${n.query.id} dirty`, 0 != (1 & l.state))
                }

                function $u(l) {
                    if (!(128 & l.state)) {
                        if (qu(l, Lu.Destroy), Fu(l, Lu.Destroy), Ai(l, 131072), l.disposables)
                            for (let n = 0; n < l.disposables.length; n++) l.disposables[n]();
                        ! function (l) {
                            if (!(16 & l.state)) return;
                            const n = pt(l);
                            if (n) {
                                const e = n.template._projectedViews;
                                e && (Kl(e, e.indexOf(l)), Xe.dirtyParentQueries(l))
                            }
                        }(l), l.renderer.destroyNode && function (l) {
                            const n = l.def.nodes.length;
                            for (let e = 0; e < n; e++) {
                                const n = l.def.nodes[e];
                                1 & n.flags ? l.renderer.destroyNode(Ke(l, e).renderElement) : 2 & n.flags ? l.renderer.destroyNode(We(l, e).renderText) : (67108864 & n.flags || 134217728 & n.flags) && Ye(l, e).destroy()
                            }
                        }(l), mt(l) && l.renderer.destroy(), l.state |= 128
                    }
                }
                const Lu = function () {
                    var l = {
                        CreateViewNodes: 0,
                        CheckNoChanges: 1,
                        CheckNoChangesProjectedViews: 2,
                        CheckAndUpdate: 3,
                        CheckAndUpdateProjectedViews: 4,
                        Destroy: 5
                    };
                    return l[l.CreateViewNodes] = "CreateViewNodes", l[l.CheckNoChanges] = "CheckNoChanges", l[l.CheckNoChangesProjectedViews] = "CheckNoChangesProjectedViews", l[l.CheckAndUpdate] = "CheckAndUpdate", l[l.CheckAndUpdateProjectedViews] = "CheckAndUpdateProjectedViews", l[l.Destroy] = "Destroy", l
                }();

                function Fu(l, n) {
                    const e = l.def;
                    if (33554432 & e.nodeFlags)
                        for (let t = 0; t < e.nodes.length; t++) {
                            const i = e.nodes[t];
                            33554432 & i.flags ? Uu(Ke(l, t).componentView, n) : 0 == (33554432 & i.childFlags) && (t += i.childCount)
                        }
                }

                function qu(l, n) {
                    const e = l.def;
                    if (16777216 & e.nodeFlags)
                        for (let t = 0; t < e.nodes.length; t++) {
                            const i = e.nodes[t];
                            if (16777216 & i.flags) {
                                const e = Ke(l, t).viewContainer._embeddedViews;
                                for (let l = 0; l < e.length; l++) Uu(e[l], n)
                            } else 0 == (16777216 & i.childFlags) && (t += i.childCount)
                        }
                }

                function Uu(l, n) {
                    const e = l.state;
                    switch (n) {
                        case Lu.CheckNoChanges:
                            0 == (128 & e) && (12 == (12 & e) ? Mu(l) : 64 & e && Hu(l, Lu.CheckNoChangesProjectedViews));
                            break;
                        case Lu.CheckNoChangesProjectedViews:
                            0 == (128 & e) && (32 & e ? Mu(l) : 64 & e && Hu(l, n));
                            break;
                        case Lu.CheckAndUpdate:
                            0 == (128 & e) && (12 == (12 & e) ? Ou(l) : 64 & e && Hu(l, Lu.CheckAndUpdateProjectedViews));
                            break;
                        case Lu.CheckAndUpdateProjectedViews:
                            0 == (128 & e) && (32 & e ? Ou(l) : 64 & e && Hu(l, n));
                            break;
                        case Lu.Destroy:
                            $u(l);
                            break;
                        case Lu.CreateViewNodes:
                            Du(l)
                    }
                }

                function Hu(l, n) {
                    qu(l, n), Fu(l, n)
                }

                function Vu(l, n, e, t) {
                    if (!(l.def.nodeFlags & n && l.def.nodeFlags & e)) return;
                    const i = l.def.nodes.length;
                    for (let s = 0; s < i; s++) {
                        const i = l.def.nodes[s];
                        if (i.flags & n && i.flags & e) switch (Xe.setCurrentNode(l, i.nodeIndex), t) {
                            case 0:
                                hu(l, i);
                                break;
                            case 1:
                                zu(l, i)
                        }
                        i.childFlags & n && i.childFlags & e || (s += i.childCount)
                    }
                }
                let ju = !1;

                function Gu(l, n, e, t, i, s) {
                    const u = i.injector.get(ye);
                    return Tu(Ku(l, i, u, n, e), t, s)
                }

                function Wu(l, n, e, t, i, s) {
                    const u = i.injector.get(ye),
                        r = Ku(l, i, new Ir(u), n, e),
                        a = ir(t);
                    return Sr(cr.create, Tu, null, [r, a, s])
                }

                function Ku(l, n, e, t, i) {
                    const s = n.injector.get(Pn),
                        u = n.injector.get(tn),
                        r = e.createRenderer(null, null);
                    return {
                        ngModule: n,
                        injector: l,
                        projectableNodes: t,
                        selectorOrNode: i,
                        sanitizer: s,
                        rendererFactory: e,
                        renderer: r,
                        errorHandler: u
                    }
                }

                function Zu(l, n, e, t) {
                    const i = ir(e);
                    return Sr(cr.create, Iu, null, [l, n, i, t])
                }

                function Qu(l, n, e, t) {
                    return e = lr.get(n.element.componentProvider.provider.token) || ir(e), Sr(cr.create, Eu, null, [l, n, e, t])
                }

                function Yu(l, n, e, t) {
                    return si(l, n, e, function (l) {
                        const {
                            hasOverrides: n,
                            hasDeprecatedOverrides: e
                        } = function (l) {
                            let n = !1,
                                e = !1;
                            return 0 === Xu.size ? {
                                hasOverrides: n,
                                hasDeprecatedOverrides: e
                            } : (l.providers.forEach(l => {
                                const t = Xu.get(l.token);
                                3840 & l.flags && t && (n = !0, e = e || t.deprecatedBehavior)
                            }), l.modules.forEach(l => {
                                Ju.forEach((t, i) => {
                                    yl(i).providedIn === l && (n = !0, e = e || t.deprecatedBehavior)
                                })
                            }), {
                                hasOverrides: n,
                                hasDeprecatedOverrides: e
                            })
                        }(l);
                        return n ? (function (l) {
                            for (let n = 0; n < l.providers.length; n++) {
                                const t = l.providers[n];
                                e && (t.flags |= 4096);
                                const i = Xu.get(t.token);
                                i && (t.flags = -3841 & t.flags | i.flags, t.deps = _t(i.deps), t.value = i.value)
                            }
                            if (Ju.size > 0) {
                                let n = new Set(l.modules);
                                Ju.forEach((t, i) => {
                                    if (n.has(yl(i).providedIn)) {
                                        let n = {
                                            token: i,
                                            flags: t.flags | (e ? 4096 : 0),
                                            deps: _t(t.deps),
                                            value: t.value,
                                            index: l.providers.length
                                        };
                                        l.providers.push(n), l.providersByKey[nt(i)] = n
                                    }
                                })
                            }
                        }(l = l.factory(() => Je)), l) : l
                    }(t))
                }
                const Xu = new Map,
                    Ju = new Map,
                    lr = new Map;

                function nr(l) {
                    let n;
                    Xu.set(l.token, l), "function" == typeof l.token && (n = yl(l.token)) && "function" == typeof n.providedIn && Ju.set(l.token, l)
                }

                function er(l, n) {
                    const e = kt(n.viewDefFactory),
                        t = kt(e.nodes[0].element.componentView);
                    lr.set(l, t)
                }

                function tr() {
                    Xu.clear(), Ju.clear(), lr.clear()
                }

                function ir(l) {
                    if (0 === Xu.size) return l;
                    const n = function (l) {
                        const n = [];
                        let e = null;
                        for (let t = 0; t < l.nodes.length; t++) {
                            const i = l.nodes[t];
                            1 & i.flags && (e = i), e && 3840 & i.flags && Xu.has(i.provider.token) && (n.push(e.nodeIndex), e = null)
                        }
                        return n
                    }(l);
                    if (0 === n.length) return l;
                    l = l.factory(() => Je);
                    for (let t = 0; t < n.length; t++) e(l, n[t]);
                    return l;

                    function e(l, n) {
                        for (let e = n + 1; e < l.nodes.length; e++) {
                            const n = l.nodes[e];
                            if (1 & n.flags) return;
                            if (3840 & n.flags) {
                                const l = n.provider,
                                    e = Xu.get(l.token);
                                e && (n.flags = -3841 & n.flags | e.flags, l.deps = _t(e.deps), l.value = e.value)
                            }
                        }
                    }
                }

                function sr(l, n, e, t, i, s, u, r, a, o, c, d, h) {
                    const p = l.def.nodes[n];
                    return Nu(l, p, e, t, i, s, u, r, a, o, c, d, h), 224 & p.flags ? Qe(l, n).value : void 0
                }

                function ur(l, n, e, t, i, s, u, r, a, o, c, d, h) {
                    const p = l.def.nodes[n];
                    return Bu(l, p, e, t, i, s, u, r, a, o, c, d, h), 224 & p.flags ? Qe(l, n).value : void 0
                }

                function rr(l) {
                    return Sr(cr.detectChanges, Ou, null, [l])
                }

                function ar(l) {
                    return Sr(cr.checkNoChanges, Mu, null, [l])
                }

                function or(l) {
                    return Sr(cr.destroy, $u, null, [l])
                }
                const cr = function () {
                    var l = {
                        create: 0,
                        detectChanges: 1,
                        checkNoChanges: 2,
                        destroy: 3,
                        handleEvent: 4
                    };
                    return l[l.create] = "create", l[l.detectChanges] = "detectChanges", l[l.checkNoChanges] = "checkNoChanges", l[l.destroy] = "destroy", l[l.handleEvent] = "handleEvent", l
                }();
                let dr, hr, pr;

                function fr(l, n) {
                    hr = l, pr = n
                }

                function gr(l, n, e, t) {
                    return fr(l, n), Sr(cr.handleEvent, l.def.handleEvent, null, [l, n, e, t])
                }

                function mr(l, n) {
                    if (128 & l.state) throw Ve(cr[dr]);
                    return fr(l, _r(l, 0)), l.def.updateDirectives((function (l, e, t, ...i) {
                        const s = l.def.nodes[e];
                        return 0 === n ? vr(l, s, t, i) : br(l, s, t, i), 16384 & s.flags && fr(l, _r(l, e)), 224 & s.flags ? Qe(l, s.nodeIndex).value : void 0
                    }), l)
                }

                function yr(l, n) {
                    if (128 & l.state) throw Ve(cr[dr]);
                    return fr(l, wr(l, 0)), l.def.updateRenderer((function (l, e, t, ...i) {
                        const s = l.def.nodes[e];
                        return 0 === n ? vr(l, s, t, i) : br(l, s, t, i), 3 & s.flags && fr(l, wr(l, e)), 224 & s.flags ? Qe(l, s.nodeIndex).value : void 0
                    }), l)
                }

                function vr(l, n, e, t) {
                    if (Nu(l, n, e, ...t)) {
                        const u = 1 === e ? t[0] : t;
                        if (16384 & n.flags) {
                            const e = {};
                            for (let l = 0; l < n.bindings.length; l++) {
                                const t = n.bindings[l],
                                    r = u[l];
                                8 & t.flags && (e[(i = t.nonMinifiedName, s = void 0, s = i.replace(/[$@]/g, "_"), `ng-reflect-${i=s.replace(On,(...l)=>"-"+l[1].toLowerCase())}`)] = Nn(r))
                            }
                            const t = n.parent,
                                r = Ke(l, t.nodeIndex).renderElement;
                            if (t.element.name)
                                for (let n in e) {
                                    const t = e[n];
                                    null != t ? l.renderer.setAttribute(r, n, t) : l.renderer.removeAttribute(r, n)
                                } else l.renderer.setValue(r, `bindings=${JSON.stringify(e,null,2)}`)
                        }
                    }
                    var i, s
                }

                function br(l, n, e, t) {
                    Bu(l, n, e, ...t)
                }

                function _r(l, n) {
                    for (let e = n; e < l.def.nodes.length; e++) {
                        const n = l.def.nodes[e];
                        if (16384 & n.flags && n.bindings && n.bindings.length) return e
                    }
                    return null
                }

                function wr(l, n) {
                    for (let e = n; e < l.def.nodes.length; e++) {
                        const n = l.def.nodes[e];
                        if (3 & n.flags && n.bindings && n.bindings.length) return e
                    }
                    return null
                }
                class xr {
                    constructor(l, n) {
                        this.view = l, this.nodeIndex = n, null == n && (this.nodeIndex = n = 0), this.nodeDef = l.def.nodes[n];
                        let e = this.nodeDef,
                            t = l;
                        for (; e && 0 == (1 & e.flags);) e = e.parent;
                        if (!e)
                            for (; !e && t;) e = ft(t), t = t.parent;
                        this.elDef = e, this.elView = t
                    }
                    get elOrCompView() {
                        return Ke(this.elView, this.elDef.nodeIndex).componentView || this.view
                    }
                    get injector() {
                        return li(this.elView, this.elDef)
                    }
                    get component() {
                        return this.elOrCompView.component
                    }
                    get context() {
                        return this.elOrCompView.context
                    }
                    get providerTokens() {
                        const l = [];
                        if (this.elDef)
                            for (let n = this.elDef.nodeIndex + 1; n <= this.elDef.nodeIndex + this.elDef.childCount; n++) {
                                const e = this.elView.def.nodes[n];
                                20224 & e.flags && l.push(e.provider.token), n += e.childCount
                            }
                        return l
                    }
                    get references() {
                        const l = {};
                        if (this.elDef) {
                            kr(this.elView, this.elDef, l);
                            for (let n = this.elDef.nodeIndex + 1; n <= this.elDef.nodeIndex + this.elDef.childCount; n++) {
                                const e = this.elView.def.nodes[n];
                                20224 & e.flags && kr(this.elView, e, l), n += e.childCount
                            }
                        }
                        return l
                    }
                    get componentRenderElement() {
                        const l = function (l) {
                            for (; l && !mt(l);) l = l.parent;
                            return l.parent ? Ke(l.parent, ft(l).nodeIndex) : null
                        }(this.elOrCompView);
                        return l ? l.renderElement : void 0
                    }
                    get renderNode() {
                        return 2 & this.nodeDef.flags ? gt(this.view, this.nodeDef) : gt(this.elView, this.elDef)
                    }
                    logError(l, ...n) {
                        let e, t;
                        2 & this.nodeDef.flags ? (e = this.view.def, t = this.nodeDef.nodeIndex) : (e = this.elView.def, t = this.elDef.nodeIndex);
                        const i = function (l, n) {
                            let e = -1;
                            for (let t = 0; t <= n; t++) 3 & l.nodes[t].flags && e++;
                            return e
                        }(e, t);
                        let s = -1;
                        e.factory(() => ++s === i ? l.error.bind(l, ...n) : Je), s < i && (l.error("Illegal state: the ViewDefinitionFactory did not call the logger!"), l.error(...n))
                    }
                }

                function kr(l, n, e) {
                    for (let t in n.references) e[t] = fu(l, n, n.references[t])
                }

                function Sr(l, n, e, t) {
                    const i = dr,
                        s = hr,
                        u = pr;
                    try {
                        dr = l;
                        const r = n.apply(e, t);
                        return hr = s, pr = u, dr = i, r
                    } catch (o) {
                        if (ln(o) || !hr) throw o;
                        throw r = o, a = Cr(), r instanceof Error || (r = new Error(r.toString())), He(r, a), r
                    }
                    var r, a
                }

                function Cr() {
                    return hr ? new xr(hr, pr) : null
                }
                class Ir {
                    constructor(l) {
                        this.delegate = l
                    }
                    createRenderer(l, n) {
                        return new Tr(this.delegate.createRenderer(l, n))
                    }
                    begin() {
                        this.delegate.begin && this.delegate.begin()
                    }
                    end() {
                        this.delegate.end && this.delegate.end()
                    }
                    whenRenderingDone() {
                        return this.delegate.whenRenderingDone ? this.delegate.whenRenderingDone() : Promise.resolve(null)
                    }
                }
                class Tr {
                    constructor(l) {
                        this.delegate = l, this.debugContextFactory = Cr, this.data = this.delegate.data
                    }
                    createDebugContext(l) {
                        return this.debugContextFactory(l)
                    }
                    destroyNode(l) {
                        const n = Qs(l);
                        ! function (l) {
                            Zs.delete(l.nativeNode)
                        }(n), n instanceof Ws && (n.listeners.length = 0), this.delegate.destroyNode && this.delegate.destroyNode(l)
                    }
                    destroy() {
                        this.delegate.destroy()
                    }
                    createElement(l, n) {
                        const e = this.delegate.createElement(l, n),
                            t = this.createDebugContext(e);
                        if (t) {
                            const n = new Ks(e, null, t);
                            n.name = l, Ys(n)
                        }
                        return e
                    }
                    createComment(l) {
                        const n = this.delegate.createComment(l),
                            e = this.createDebugContext(n);
                        return e && Ys(new Ws(n, null, e)), n
                    }
                    createText(l) {
                        const n = this.delegate.createText(l),
                            e = this.createDebugContext(n);
                        return e && Ys(new Ws(n, null, e)), n
                    }
                    appendChild(l, n) {
                        const e = Qs(l),
                            t = Qs(n);
                        e && t && e instanceof Ks && e.addChild(t), this.delegate.appendChild(l, n)
                    }
                    insertBefore(l, n, e) {
                        const t = Qs(l),
                            i = Qs(n),
                            s = Qs(e);
                        t && i && t instanceof Ks && t.insertBefore(s, i), this.delegate.insertBefore(l, n, e)
                    }
                    removeChild(l, n) {
                        const e = Qs(l),
                            t = Qs(n);
                        e && t && e instanceof Ks && e.removeChild(t), this.delegate.removeChild(l, n)
                    }
                    selectRootElement(l, n) {
                        const e = this.delegate.selectRootElement(l, n),
                            t = Cr();
                        return t && Ys(new Ks(e, null, t)), e
                    }
                    setAttribute(l, n, e, t) {
                        const i = Qs(l);
                        i && i instanceof Ks && (i.attributes[t ? t + ":" + n : n] = e), this.delegate.setAttribute(l, n, e, t)
                    }
                    removeAttribute(l, n, e) {
                        const t = Qs(l);
                        t && t instanceof Ks && (t.attributes[e ? e + ":" + n : n] = null), this.delegate.removeAttribute(l, n, e)
                    }
                    addClass(l, n) {
                        const e = Qs(l);
                        e && e instanceof Ks && (e.classes[n] = !0), this.delegate.addClass(l, n)
                    }
                    removeClass(l, n) {
                        const e = Qs(l);
                        e && e instanceof Ks && (e.classes[n] = !1), this.delegate.removeClass(l, n)
                    }
                    setStyle(l, n, e, t) {
                        const i = Qs(l);
                        i && i instanceof Ks && (i.styles[n] = e), this.delegate.setStyle(l, n, e, t)
                    }
                    removeStyle(l, n, e) {
                        const t = Qs(l);
                        t && t instanceof Ks && (t.styles[n] = null), this.delegate.removeStyle(l, n, e)
                    }
                    setProperty(l, n, e) {
                        const t = Qs(l);
                        t && t instanceof Ks && (t.properties[n] = e), this.delegate.setProperty(l, n, e)
                    }
                    listen(l, n, e) {
                        if ("string" != typeof l) {
                            const t = Qs(l);
                            t && t.listeners.push(new Gs(n, e))
                        }
                        return this.delegate.listen(l, n, e)
                    }
                    parentNode(l) {
                        return this.delegate.parentNode(l)
                    }
                    nextSibling(l) {
                        return this.delegate.nextSibling(l)
                    }
                    setValue(l, n) {
                        return this.delegate.setValue(l, n)
                    }
                }

                function Er(l, n, e) {
                    return new Ar(l, n, e)
                }
                class Ar extends Gl {
                    constructor(l, n, e) {
                        super(), this.moduleType = l, this._bootstrapComponents = n, this._ngModuleDefFactory = e
                    }
                    create(l) {
                        ! function () {
                            if (ju) return;
                            ju = !0;
                            const l = rn() ? {
                                setCurrentNode: fr,
                                createRootView: Wu,
                                createEmbeddedView: Zu,
                                createComponentView: Qu,
                                createNgModuleRef: Yu,
                                overrideProvider: nr,
                                overrideComponentView: er,
                                clearOverrides: tr,
                                checkAndUpdateView: rr,
                                checkNoChangesView: ar,
                                destroyView: or,
                                createDebugContext: (l, n) => new xr(l, n),
                                handleEvent: gr,
                                updateDirectives: mr,
                                updateRenderer: yr
                            } : {
                                setCurrentNode: () => {},
                                createRootView: Gu,
                                createEmbeddedView: Iu,
                                createComponentView: Eu,
                                createNgModuleRef: si,
                                overrideProvider: Je,
                                overrideComponentView: Je,
                                clearOverrides: Je,
                                checkAndUpdateView: Ou,
                                checkNoChangesView: Mu,
                                destroyView: $u,
                                createDebugContext: (l, n) => new xr(l, n),
                                handleEvent: (l, n, e, t) => l.def.handleEvent(l, n, e, t),
                                updateDirectives: (l, n) => l.def.updateDirectives(0 === n ? sr : ur, l),
                                updateRenderer: (l, n) => l.def.updateRenderer(0 === n ? sr : ur, l)
                            };
                            Xe.setCurrentNode = l.setCurrentNode, Xe.createRootView = l.createRootView, Xe.createEmbeddedView = l.createEmbeddedView, Xe.createComponentView = l.createComponentView, Xe.createNgModuleRef = l.createNgModuleRef, Xe.overrideProvider = l.overrideProvider, Xe.overrideComponentView = l.overrideComponentView, Xe.clearOverrides = l.clearOverrides, Xe.checkAndUpdateView = l.checkAndUpdateView, Xe.checkNoChangesView = l.checkNoChangesView, Xe.destroyView = l.destroyView, Xe.resolveDep = Ii, Xe.createDebugContext = l.createDebugContext, Xe.handleEvent = l.handleEvent, Xe.updateDirectives = l.updateDirectives, Xe.updateRenderer = l.updateRenderer, Xe.dirtyParentQueries = du
                        }();
                        const n = function (l) {
                            const n = Array.from(l.providers),
                                e = Array.from(l.modules),
                                t = {};
                            for (const i in l.providersByKey) t[i] = l.providersByKey[i];
                            return {
                                factory: l.factory,
                                isRoot: l.isRoot,
                                providers: n,
                                modules: e,
                                providersByKey: t
                            }
                        }(kt(this._ngModuleDefFactory));
                        return Xe.createNgModuleRef(this.moduleType, l || Ln.NULL, this._bootstrapComponents, n)
                    }
                }
                const Pr = {
                    production: !0
                };
                class Dr {}
                class Mr {
                    constructor(l) {
                        this.kongService = l
                    }
                    ngOnInit() {
//                        !Pr.production || document.domain.endsWith("netlify.com") || document.domain.endsWith("netlify.app") || (this.baddomain = !0);
                        let l = !1;
                        try {
                            localStorage && localStorage.fsa && (localStorage.removeItem("fsa"), l = !0)
                        } catch (n) {}!Pr.production || this.inIframe() || l || "festive-perlman-5fad70.netlify.com" != document.location.host || (document.location.href = "https://www.kongregate.com/games/to_change_later/cividlization-2", this.baddomain = !0);
                        try {
                            localStorage.openpages = Date.now(), window.addEventListener("storage", (function (l) {
                                "openpages" == l.key && (localStorage.page_available = Date.now()), "page_available" == l.key && (this.error = "Game is already running in another tab")
                            }).bind(this), !1)
                        } catch (n) {}
                        this.kongService.submmitStat("initialized", 1)
                    }
                    inIframe() {
                        return window.self !== window.top
                    }
                }
                class Or {}
                const Nr = new El("Location Initialized");
                class Rr {}
                const Br = new El("appBaseHref");
                class zr {
                    constructor(l, n) {
                        this._subject = new qi, this._urlChangeListeners = [], this._platformStrategy = l;
                        const e = this._platformStrategy.getBaseHref();
                        this._platformLocation = n, this._baseHref = zr.stripTrailingSlash($r(e)), this._platformStrategy.onPopState(l => {
                            this._subject.emit({
                                url: this.path(!0),
                                pop: !0,
                                state: l.state,
                                type: l.type
                            })
                        })
                    }
                    path(l = !1) {
                        return this.normalize(this._platformStrategy.path(l))
                    }
                    getState() {
                        return this._platformLocation.getState()
                    }
                    isCurrentPathEqualTo(l, n = "") {
                        return this.path() == this.normalize(l + zr.normalizeQueryParams(n))
                    }
                    normalize(l) {
                        return zr.stripTrailingSlash(function (l, n) {
                            return l && n.startsWith(l) ? n.substring(l.length) : n
                        }(this._baseHref, $r(l)))
                    }
                    prepareExternalUrl(l) {
                        return l && "/" !== l[0] && (l = "/" + l), this._platformStrategy.prepareExternalUrl(l)
                    }
                    go(l, n = "", e = null) {
                        this._platformStrategy.pushState(e, "", l, n), this._notifyUrlChangeListeners(this.prepareExternalUrl(l + zr.normalizeQueryParams(n)), e)
                    }
                    replaceState(l, n = "", e = null) {
                        this._platformStrategy.replaceState(e, "", l, n), this._notifyUrlChangeListeners(this.prepareExternalUrl(l + zr.normalizeQueryParams(n)), e)
                    }
                    forward() {
                        this._platformStrategy.forward()
                    }
                    back() {
                        this._platformStrategy.back()
                    }
                    onUrlChange(l) {
                        this._urlChangeListeners.push(l), this.subscribe(l => {
                            this._notifyUrlChangeListeners(l.url, l.state)
                        })
                    }
                    _notifyUrlChangeListeners(l = "", n) {
                        this._urlChangeListeners.forEach(e => e(l, n))
                    }
                    subscribe(l, n, e) {
                        return this._subject.subscribe({
                            next: l,
                            error: n,
                            complete: e
                        })
                    }
                    static normalizeQueryParams(l) {
                        return l && "?" !== l[0] ? "?" + l : l
                    }
                    static joinWithSlash(l, n) {
                        if (0 == l.length) return n;
                        if (0 == n.length) return l;
                        let e = 0;
                        return l.endsWith("/") && e++, n.startsWith("/") && e++, 2 == e ? l + n.substring(1) : 1 == e ? l + n : l + "/" + n
                    }
                    static stripTrailingSlash(l) {
                        const n = l.match(/#|\?|$/),
                            e = n && n.index || l.length;
                        return l.slice(0, e - ("/" === l[e - 1] ? 1 : 0)) + l.slice(e)
                    }
                }

                function $r(l) {
                    return l.replace(/\/index.html$/, "")
                }
                class Lr extends Rr {
                    constructor(l, n) {
                        super(), this._platformLocation = l, this._baseHref = "", null != n && (this._baseHref = n)
                    }
                    onPopState(l) {
                        this._platformLocation.onPopState(l), this._platformLocation.onHashChange(l)
                    }
                    getBaseHref() {
                        return this._baseHref
                    }
                    path(l = !1) {
                        let n = this._platformLocation.hash;
                        return null == n && (n = "#"), n.length > 0 ? n.substring(1) : n
                    }
                    prepareExternalUrl(l) {
                        const n = zr.joinWithSlash(this._baseHref, l);
                        return n.length > 0 ? "#" + n : n
                    }
                    pushState(l, n, e, t) {
                        let i = this.prepareExternalUrl(e + zr.normalizeQueryParams(t));
                        0 == i.length && (i = this._platformLocation.pathname), this._platformLocation.pushState(l, n, i)
                    }
                    replaceState(l, n, e, t) {
                        let i = this.prepareExternalUrl(e + zr.normalizeQueryParams(t));
                        0 == i.length && (i = this._platformLocation.pathname), this._platformLocation.replaceState(l, n, i)
                    }
                    forward() {
                        this._platformLocation.forward()
                    }
                    back() {
                        this._platformLocation.back()
                    }
                }
                class Fr extends Rr {
                    constructor(l, n) {
                        if (super(), this._platformLocation = l, null == n && (n = this._platformLocation.getBaseHrefFromDOM()), null == n) throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");
                        this._baseHref = n
                    }
                    onPopState(l) {
                        this._platformLocation.onPopState(l), this._platformLocation.onHashChange(l)
                    }
                    getBaseHref() {
                        return this._baseHref
                    }
                    prepareExternalUrl(l) {
                        return zr.joinWithSlash(this._baseHref, l)
                    }
                    path(l = !1) {
                        const n = this._platformLocation.pathname + zr.normalizeQueryParams(this._platformLocation.search),
                            e = this._platformLocation.hash;
                        return e && l ? `${n}${e}` : n
                    }
                    pushState(l, n, e, t) {
                        const i = this.prepareExternalUrl(e + zr.normalizeQueryParams(t));
                        this._platformLocation.pushState(l, n, i)
                    }
                    replaceState(l, n, e, t) {
                        const i = this.prepareExternalUrl(e + zr.normalizeQueryParams(t));
                        this._platformLocation.replaceState(l, n, i)
                    }
                    forward() {
                        this._platformLocation.forward()
                    }
                    back() {
                        this._platformLocation.back()
                    }
                }
                const qr = function () {
                        var l = {
                            Zero: 0,
                            One: 1,
                            Two: 2,
                            Few: 3,
                            Many: 4,
                            Other: 5
                        };
                        return l[l.Zero] = "Zero", l[l.One] = "One", l[l.Two] = "Two", l[l.Few] = "Few", l[l.Many] = "Many", l[l.Other] = "Other", l
                    }(),
                    Ur = function () {
                        var l = {
                            Format: 0,
                            Standalone: 1
                        };
                        return l[l.Format] = "Format", l[l.Standalone] = "Standalone", l
                    }(),
                    Hr = function () {
                        var l = {
                            Narrow: 0,
                            Abbreviated: 1,
                            Wide: 2,
                            Short: 3
                        };
                        return l[l.Narrow] = "Narrow", l[l.Abbreviated] = "Abbreviated", l[l.Wide] = "Wide", l[l.Short] = "Short", l
                    }(),
                    Vr = function () {
                        var l = {
                            Short: 0,
                            Medium: 1,
                            Long: 2,
                            Full: 3
                        };
                        return l[l.Short] = "Short", l[l.Medium] = "Medium", l[l.Long] = "Long", l[l.Full] = "Full", l
                    }(),
                    jr = function () {
                        var l = {
                            Decimal: 0,
                            Group: 1,
                            List: 2,
                            PercentSign: 3,
                            PlusSign: 4,
                            MinusSign: 5,
                            Exponential: 6,
                            SuperscriptingExponent: 7,
                            PerMille: 8,
                            Infinity: 9,
                            NaN: 10,
                            TimeSeparator: 11,
                            CurrencyDecimal: 12,
                            CurrencyGroup: 13
                        };
                        return l[l.Decimal] = "Decimal", l[l.Group] = "Group", l[l.List] = "List", l[l.PercentSign] = "PercentSign", l[l.PlusSign] = "PlusSign", l[l.MinusSign] = "MinusSign", l[l.Exponential] = "Exponential", l[l.SuperscriptingExponent] = "SuperscriptingExponent", l[l.PerMille] = "PerMille", l[l.Infinity] = "Infinity", l[l.NaN] = "NaN", l[l.TimeSeparator] = "TimeSeparator", l[l.CurrencyDecimal] = "CurrencyDecimal", l[l.CurrencyGroup] = "CurrencyGroup", l
                    }();

                function Gr(l, n, e) {
                    const t = zi(l),
                        i = la([t[Ni.DaysFormat], t[Ni.DaysStandalone]], n);
                    return la(i, e)
                }

                function Wr(l, n, e) {
                    const t = zi(l),
                        i = la([t[Ni.MonthsFormat], t[Ni.MonthsStandalone]], n);
                    return la(i, e)
                }

                function Kr(l, n) {
                    return la(zi(l)[Ni.DateFormat], n)
                }

                function Zr(l, n) {
                    return la(zi(l)[Ni.TimeFormat], n)
                }

                function Qr(l, n) {
                    return la(zi(l)[Ni.DateTimeFormat], n)
                }

                function Yr(l, n) {
                    const e = zi(l),
                        t = e[Ni.NumberSymbols][n];
                    if (void 0 === t) {
                        if (n === jr.CurrencyDecimal) return e[Ni.NumberSymbols][jr.Decimal];
                        if (n === jr.CurrencyGroup) return e[Ni.NumberSymbols][jr.Group]
                    }
                    return t
                }
                const Xr = function (l) {
                    return zi(l)[Ni.PluralCase]
                };

                function Jr(l) {
                    if (!l[Ni.ExtraData]) throw new Error(`Missing extra locale data for the locale "${l[Ni.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)
                }

                function la(l, n) {
                    for (let e = n; e > -1; e--)
                        if (void 0 !== l[e]) return l[e];
                    throw new Error("Locale data API: locale data undefined")
                }

                function na(l) {
                    const [n, e] = l.split(":");
                    return {
                        hours: +n,
                        minutes: +e
                    }
                }
                const ea = /^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,
                    ta = {},
                    ia = /((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,
                    sa = function () {
                        var l = {
                            Short: 0,
                            ShortGMT: 1,
                            Long: 2,
                            Extended: 3
                        };
                        return l[l.Short] = "Short", l[l.ShortGMT] = "ShortGMT", l[l.Long] = "Long", l[l.Extended] = "Extended", l
                    }(),
                    ua = function () {
                        var l = {
                            FullYear: 0,
                            Month: 1,
                            Date: 2,
                            Hours: 3,
                            Minutes: 4,
                            Seconds: 5,
                            FractionalSeconds: 6,
                            Day: 7
                        };
                        return l[l.FullYear] = "FullYear", l[l.Month] = "Month", l[l.Date] = "Date", l[l.Hours] = "Hours", l[l.Minutes] = "Minutes", l[l.Seconds] = "Seconds", l[l.FractionalSeconds] = "FractionalSeconds", l[l.Day] = "Day", l
                    }(),
                    ra = function () {
                        var l = {
                            DayPeriods: 0,
                            Days: 1,
                            Months: 2,
                            Eras: 3
                        };
                        return l[l.DayPeriods] = "DayPeriods", l[l.Days] = "Days", l[l.Months] = "Months", l[l.Eras] = "Eras", l
                    }();

                function aa(l, n, e, t) {
                    let i = function (l) {
                        if (ba(l)) return l;
                        if ("number" == typeof l && !isNaN(l)) return new Date(l);
                        if ("string" == typeof l) {
                            l = l.trim();
                            const n = parseFloat(l);
                            if (!isNaN(l - n)) return new Date(n);
                            if (/^(\d{4}-\d{1,2}-\d{1,2})$/.test(l)) {
                                const [n, e, t] = l.split("-").map(l => +l);
                                return new Date(n, e - 1, t)
                            }
                            let e;
                            if (e = l.match(ea)) return function (l) {
                                const n = new Date(0);
                                let e = 0,
                                    t = 0;
                                const i = l[8] ? n.setUTCFullYear : n.setFullYear,
                                    s = l[8] ? n.setUTCHours : n.setHours;
                                l[9] && (e = Number(l[9] + l[10]), t = Number(l[9] + l[11])), i.call(n, Number(l[1]), Number(l[2]) - 1, Number(l[3]));
                                const u = Number(l[4] || 0) - e,
                                    r = Number(l[5] || 0) - t,
                                    a = Number(l[6] || 0),
                                    o = Math.round(1e3 * parseFloat("0." + (l[7] || 0)));
                                return s.call(n, u, r, a, o), n
                            }(e)
                        }
                        const n = new Date(l);
                        if (!ba(n)) throw new Error(`Unable to convert "${l}" into a date`);
                        return n
                    }(l);
                    n = function l(n, e) {
                        const t = function (l) {
                            return zi(l)[Ni.LocaleId]
                        }(n);
                        if (ta[t] = ta[t] || {}, ta[t][e]) return ta[t][e];
                        let i = "";
                        switch (e) {
                            case "shortDate":
                                i = Kr(n, Vr.Short);
                                break;
                            case "mediumDate":
                                i = Kr(n, Vr.Medium);
                                break;
                            case "longDate":
                                i = Kr(n, Vr.Long);
                                break;
                            case "fullDate":
                                i = Kr(n, Vr.Full);
                                break;
                            case "shortTime":
                                i = Zr(n, Vr.Short);
                                break;
                            case "mediumTime":
                                i = Zr(n, Vr.Medium);
                                break;
                            case "longTime":
                                i = Zr(n, Vr.Long);
                                break;
                            case "fullTime":
                                i = Zr(n, Vr.Full);
                                break;
                            case "short":
                                const e = l(n, "shortTime"),
                                    t = l(n, "shortDate");
                                i = oa(Qr(n, Vr.Short), [e, t]);
                                break;
                            case "medium":
                                const s = l(n, "mediumTime"),
                                    u = l(n, "mediumDate");
                                i = oa(Qr(n, Vr.Medium), [s, u]);
                                break;
                            case "long":
                                const r = l(n, "longTime"),
                                    a = l(n, "longDate");
                                i = oa(Qr(n, Vr.Long), [r, a]);
                                break;
                            case "full":
                                const o = l(n, "fullTime"),
                                    c = l(n, "fullDate");
                                i = oa(Qr(n, Vr.Full), [o, c])
                        }
                        return i && (ta[t][e] = i), i
                    }(e, n) || n;
                    let s, u = [];
                    for (; n;) {
                        if (!(s = ia.exec(n))) {
                            u.push(n);
                            break
                        } {
                            const l = (u = u.concat(s.slice(1))).pop();
                            if (!l) break;
                            n = l
                        }
                    }
                    let r = i.getTimezoneOffset();
                    t && (r = va(t, r), i = function (l, n, e) {
                        const t = l.getTimezoneOffset();
                        return function (l, n) {
                            return (l = new Date(l.getTime())).setMinutes(l.getMinutes() + n), l
                        }(l, -1 * (va(n, t) - t))
                    }(i, t));
                    let a = "";
                    return u.forEach(l => {
                        const n = function (l) {
                            if (ya[l]) return ya[l];
                            let n;
                            switch (l) {
                                case "G":
                                case "GG":
                                case "GGG":
                                    n = ha(ra.Eras, Hr.Abbreviated);
                                    break;
                                case "GGGG":
                                    n = ha(ra.Eras, Hr.Wide);
                                    break;
                                case "GGGGG":
                                    n = ha(ra.Eras, Hr.Narrow);
                                    break;
                                case "y":
                                    n = da(ua.FullYear, 1, 0, !1, !0);
                                    break;
                                case "yy":
                                    n = da(ua.FullYear, 2, 0, !0, !0);
                                    break;
                                case "yyy":
                                    n = da(ua.FullYear, 3, 0, !1, !0);
                                    break;
                                case "yyyy":
                                    n = da(ua.FullYear, 4, 0, !1, !0);
                                    break;
                                case "M":
                                case "L":
                                    n = da(ua.Month, 1, 1);
                                    break;
                                case "MM":
                                case "LL":
                                    n = da(ua.Month, 2, 1);
                                    break;
                                case "MMM":
                                    n = ha(ra.Months, Hr.Abbreviated);
                                    break;
                                case "MMMM":
                                    n = ha(ra.Months, Hr.Wide);
                                    break;
                                case "MMMMM":
                                    n = ha(ra.Months, Hr.Narrow);
                                    break;
                                case "LLL":
                                    n = ha(ra.Months, Hr.Abbreviated, Ur.Standalone);
                                    break;
                                case "LLLL":
                                    n = ha(ra.Months, Hr.Wide, Ur.Standalone);
                                    break;
                                case "LLLLL":
                                    n = ha(ra.Months, Hr.Narrow, Ur.Standalone);
                                    break;
                                case "w":
                                    n = ma(1);
                                    break;
                                case "ww":
                                    n = ma(2);
                                    break;
                                case "W":
                                    n = ma(1, !0);
                                    break;
                                case "d":
                                    n = da(ua.Date, 1);
                                    break;
                                case "dd":
                                    n = da(ua.Date, 2);
                                    break;
                                case "E":
                                case "EE":
                                case "EEE":
                                    n = ha(ra.Days, Hr.Abbreviated);
                                    break;
                                case "EEEE":
                                    n = ha(ra.Days, Hr.Wide);
                                    break;
                                case "EEEEE":
                                    n = ha(ra.Days, Hr.Narrow);
                                    break;
                                case "EEEEEE":
                                    n = ha(ra.Days, Hr.Short);
                                    break;
                                case "a":
                                case "aa":
                                case "aaa":
                                    n = ha(ra.DayPeriods, Hr.Abbreviated);
                                    break;
                                case "aaaa":
                                    n = ha(ra.DayPeriods, Hr.Wide);
                                    break;
                                case "aaaaa":
                                    n = ha(ra.DayPeriods, Hr.Narrow);
                                    break;
                                case "b":
                                case "bb":
                                case "bbb":
                                    n = ha(ra.DayPeriods, Hr.Abbreviated, Ur.Standalone, !0);
                                    break;
                                case "bbbb":
                                    n = ha(ra.DayPeriods, Hr.Wide, Ur.Standalone, !0);
                                    break;
                                case "bbbbb":
                                    n = ha(ra.DayPeriods, Hr.Narrow, Ur.Standalone, !0);
                                    break;
                                case "B":
                                case "BB":
                                case "BBB":
                                    n = ha(ra.DayPeriods, Hr.Abbreviated, Ur.Format, !0);
                                    break;
                                case "BBBB":
                                    n = ha(ra.DayPeriods, Hr.Wide, Ur.Format, !0);
                                    break;
                                case "BBBBB":
                                    n = ha(ra.DayPeriods, Hr.Narrow, Ur.Format, !0);
                                    break;
                                case "h":
                                    n = da(ua.Hours, 1, -12);
                                    break;
                                case "hh":
                                    n = da(ua.Hours, 2, -12);
                                    break;
                                case "H":
                                    n = da(ua.Hours, 1);
                                    break;
                                case "HH":
                                    n = da(ua.Hours, 2);
                                    break;
                                case "m":
                                    n = da(ua.Minutes, 1);
                                    break;
                                case "mm":
                                    n = da(ua.Minutes, 2);
                                    break;
                                case "s":
                                    n = da(ua.Seconds, 1);
                                    break;
                                case "ss":
                                    n = da(ua.Seconds, 2);
                                    break;
                                case "S":
                                    n = da(ua.FractionalSeconds, 1);
                                    break;
                                case "SS":
                                    n = da(ua.FractionalSeconds, 2);
                                    break;
                                case "SSS":
                                    n = da(ua.FractionalSeconds, 3);
                                    break;
                                case "Z":
                                case "ZZ":
                                case "ZZZ":
                                    n = pa(sa.Short);
                                    break;
                                case "ZZZZZ":
                                    n = pa(sa.Extended);
                                    break;
                                case "O":
                                case "OO":
                                case "OOO":
                                case "z":
                                case "zz":
                                case "zzz":
                                    n = pa(sa.ShortGMT);
                                    break;
                                case "OOOO":
                                case "ZZZZ":
                                case "zzzz":
                                    n = pa(sa.Long);
                                    break;
                                default:
                                    return null
                            }
                            return ya[l] = n, n
                        }(l);
                        a += n ? n(i, e, r) : "''" === l ? "'" : l.replace(/(^'|'$)/g, "").replace(/''/g, "'")
                    }), a
                }

                function oa(l, n) {
                    return n && (l = l.replace(/\{([^}]+)}/g, (function (l, e) {
                        return null != n && e in n ? n[e] : l
                    }))), l
                }

                function ca(l, n, e = "-", t, i) {
                    let s = "";
                    (l < 0 || i && l <= 0) && (i ? l = 1 - l : (l = -l, s = e));
                    let u = String(l);
                    for (; u.length < n;) u = "0" + u;
                    return t && (u = u.substr(u.length - n)), s + u
                }

                function da(l, n, e = 0, t = !1, i = !1) {
                    return function (s, u) {
                        let r = function (l, n) {
                            switch (l) {
                                case ua.FullYear:
                                    return n.getFullYear();
                                case ua.Month:
                                    return n.getMonth();
                                case ua.Date:
                                    return n.getDate();
                                case ua.Hours:
                                    return n.getHours();
                                case ua.Minutes:
                                    return n.getMinutes();
                                case ua.Seconds:
                                    return n.getSeconds();
                                case ua.FractionalSeconds:
                                    return n.getMilliseconds();
                                case ua.Day:
                                    return n.getDay();
                                default:
                                    throw new Error(`Unknown DateType value "${l}".`)
                            }
                        }(l, s);
                        if ((e > 0 || r > -e) && (r += e), l === ua.Hours) 0 === r && -12 === e && (r = 12);
                        else if (l === ua.FractionalSeconds) return a = n, ca(r, 3).substr(0, a);
                        var a;
                        const o = Yr(u, jr.MinusSign);
                        return ca(r, n, o, t, i)
                    }
                }

                function ha(l, n, e = Ur.Format, t = !1) {
                    return function (i, s) {
                        return function (l, n, e, t, i, s) {
                            switch (e) {
                                case ra.Months:
                                    return Wr(n, i, t)[l.getMonth()];
                                case ra.Days:
                                    return Gr(n, i, t)[l.getDay()];
                                case ra.DayPeriods:
                                    const u = l.getHours(),
                                        r = l.getMinutes();
                                    if (s) {
                                        const l = function (l) {
                                                const n = zi(l);
                                                return Jr(n), (n[Ni.ExtraData][2] || []).map(l => "string" == typeof l ? na(l) : [na(l[0]), na(l[1])])
                                            }(n),
                                            e = function (l, n, e) {
                                                const t = zi(l);
                                                Jr(t);
                                                const i = la([t[Ni.ExtraData][0], t[Ni.ExtraData][1]], n) || [];
                                                return la(i, e) || []
                                            }(n, i, t);
                                        let s;
                                        if (l.forEach((l, n) => {
                                                if (Array.isArray(l)) {
                                                    const {
                                                        hours: t,
                                                        minutes: i
                                                    } = l[0], {
                                                        hours: a,
                                                        minutes: o
                                                    } = l[1];
                                                    u >= t && r >= i && (u < a || u === a && r < o) && (s = e[n])
                                                } else {
                                                    const {
                                                        hours: t,
                                                        minutes: i
                                                    } = l;
                                                    t === u && i === r && (s = e[n])
                                                }
                                            }), s) return s
                                    }
                                    return function (l, n, e) {
                                        const t = zi(l),
                                            i = la([t[Ni.DayPeriodsFormat], t[Ni.DayPeriodsStandalone]], n);
                                        return la(i, e)
                                    }(n, i, t)[u < 12 ? 0 : 1];
                                case ra.Eras:
                                    return function (l, n) {
                                        return la(zi(l)[Ni.Eras], n)
                                    }(n, t)[l.getFullYear() <= 0 ? 0 : 1];
                                default:
                                    throw new Error(`unexpected translation type ${e}`)
                            }
                        }(i, s, l, n, e, t)
                    }
                }

                function pa(l) {
                    return function (n, e, t) {
                        const i = -1 * t,
                            s = Yr(e, jr.MinusSign),
                            u = i > 0 ? Math.floor(i / 60) : Math.ceil(i / 60);
                        switch (l) {
                            case sa.Short:
                                return (i >= 0 ? "+" : "") + ca(u, 2, s) + ca(Math.abs(i % 60), 2, s);
                            case sa.ShortGMT:
                                return "GMT" + (i >= 0 ? "+" : "") + ca(u, 1, s);
                            case sa.Long:
                                return "GMT" + (i >= 0 ? "+" : "") + ca(u, 2, s) + ":" + ca(Math.abs(i % 60), 2, s);
                            case sa.Extended:
                                return 0 === t ? "Z" : (i >= 0 ? "+" : "") + ca(u, 2, s) + ":" + ca(Math.abs(i % 60), 2, s);
                            default:
                                throw new Error(`Unknown zone width "${l}"`)
                        }
                    }
                }
                const fa = 0,
                    ga = 4;

                function ma(l, n = !1) {
                    return function (e, t) {
                        let i;
                        if (n) {
                            const l = new Date(e.getFullYear(), e.getMonth(), 1).getDay() - 1,
                                n = e.getDate();
                            i = 1 + Math.floor((n + l) / 7)
                        } else {
                            const l = function (l) {
                                    const n = new Date(l, fa, 1).getDay();
                                    return new Date(l, 0, 1 + (n <= ga ? ga : ga + 7) - n)
                                }(e.getFullYear()),
                                n = (s = e, new Date(s.getFullYear(), s.getMonth(), s.getDate() + (ga - s.getDay()))).getTime() - l.getTime();
                            i = 1 + Math.round(n / 6048e5)
                        }
                        var s;
                        return ca(i, l, Yr(t, jr.MinusSign))
                    }
                }
                const ya = {};

                function va(l, n) {
                    l = l.replace(/:/g, "");
                    const e = Date.parse("Jan 01, 1970 00:00:00 " + l) / 6e4;
                    return isNaN(e) ? n : e
                }

                function ba(l) {
                    return l instanceof Date && !isNaN(l.valueOf())
                }
                const _a = new El("UseV4Plurals");
                class wa {}
                class xa extends wa {
                    constructor(l, n) {
                        super(), this.locale = l, this.deprecatedPluralFn = n
                    }
                    getPluralCategory(l, n) {
                        switch (this.deprecatedPluralFn ? this.deprecatedPluralFn(n || this.locale, l) : Xr(n || this.locale)(l)) {
                            case qr.Zero:
                                return "zero";
                            case qr.One:
                                return "one";
                            case qr.Two:
                                return "two";
                            case qr.Few:
                                return "few";
                            case qr.Many:
                                return "many";
                            default:
                                return "other"
                        }
                    }
                }
                class ka {}
                class Sa {
                    constructor(l, n, e, t) {
                        this._iterableDiffers = l, this._keyValueDiffers = n, this._ngEl = e, this._renderer = t, this._initialClasses = []
                    }
                    getValue() {
                        return null
                    }
                    setClass(l) {
                        this._removeClasses(this._initialClasses), this._initialClasses = "string" == typeof l ? l.split(/\s+/) : [], this._applyClasses(this._initialClasses), this._applyClasses(this._rawClass)
                    }
                    setNgClass(l) {
                        this._removeClasses(this._rawClass), this._applyClasses(this._initialClasses), this._iterableDiffer = null, this._keyValueDiffer = null, this._rawClass = "string" == typeof l ? l.split(/\s+/) : l, this._rawClass && (le(this._rawClass) ? this._iterableDiffer = this._iterableDiffers.find(this._rawClass).create() : this._keyValueDiffer = this._keyValueDiffers.find(this._rawClass).create())
                    }
                    applyChanges() {
                        if (this._iterableDiffer) {
                            const l = this._iterableDiffer.diff(this._rawClass);
                            l && this._applyIterableChanges(l)
                        } else if (this._keyValueDiffer) {
                            const l = this._keyValueDiffer.diff(this._rawClass);
                            l && this._applyKeyValueChanges(l)
                        }
                    }
                    _applyKeyValueChanges(l) {
                        l.forEachAddedItem(l => this._toggleClass(l.key, l.currentValue)), l.forEachChangedItem(l => this._toggleClass(l.key, l.currentValue)), l.forEachRemovedItem(l => {
                            l.previousValue && this._toggleClass(l.key, !1)
                        })
                    }
                    _applyIterableChanges(l) {
                        l.forEachAddedItem(l => {
                            if ("string" != typeof l.item) throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${bl(l.item)}`);
                            this._toggleClass(l.item, !0)
                        }), l.forEachRemovedItem(l => this._toggleClass(l.item, !1))
                    }
                    _applyClasses(l) {
                        l && (Array.isArray(l) || l instanceof Set ? l.forEach(l => this._toggleClass(l, !0)) : Object.keys(l).forEach(n => this._toggleClass(n, !!l[n])))
                    }
                    _removeClasses(l) {
                        l && (Array.isArray(l) || l instanceof Set ? l.forEach(l => this._toggleClass(l, !1)) : Object.keys(l).forEach(l => this._toggleClass(l, !1)))
                    }
                    _toggleClass(l, n) {
                        (l = l.trim()) && l.split(/\s+/g).forEach(l => {
                            n ? this._renderer.addClass(this._ngEl.nativeElement, l) : this._renderer.removeClass(this._ngEl.nativeElement, l)
                        })
                    }
                }
                let Ca = (() => {
                    class l {
                        constructor(l) {
                            this._delegate = l
                        }
                        getValue() {
                            return this._delegate.getValue()
                        }
                    }
                    return l.ngDirectiveDef = void 0, l
                })();
                class Ia extends Ca {
                    constructor(l) {
                        super(l)
                    }
                    set klass(l) {
                        this._delegate.setClass(l)
                    }
                    set ngClass(l) {
                        this._delegate.setNgClass(l)
                    }
                    ngDoCheck() {
                        this._delegate.applyChanges()
                    }
                }
                class Ta {
                    constructor(l, n, e, t) {
                        this.$implicit = l, this.ngForOf = n, this.index = e, this.count = t
                    }
                    get first() {
                        return 0 === this.index
                    }
                    get last() {
                        return this.index === this.count - 1
                    }
                    get even() {
                        return this.index % 2 == 0
                    }
                    get odd() {
                        return !this.even
                    }
                }
                class Ea {
                    constructor(l, n, e) {
                        this._viewContainer = l, this._template = n, this._differs = e, this._ngForOfDirty = !0, this._differ = null
                    }
                    set ngForOf(l) {
                        this._ngForOf = l, this._ngForOfDirty = !0
                    }
                    set ngForTrackBy(l) {
                        rn() && null != l && "function" != typeof l && console && console.warn && console.warn(`trackBy must be a function, but received ${JSON.stringify(l)}. ` + "See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."), this._trackByFn = l
                    }
                    get ngForTrackBy() {
                        return this._trackByFn
                    }
                    set ngForTemplate(l) {
                        l && (this._template = l)
                    }
                    ngDoCheck() {
                        if (this._ngForOfDirty) {
                            this._ngForOfDirty = !1;
                            const e = this._ngForOf;
                            if (!this._differ && e) try {
                                this._differ = this._differs.find(e).create(this.ngForTrackBy)
                            } catch (n) {
                                throw new Error(`Cannot find a differ supporting object '${e}' of type '${l=e,l.name||typeof l}'. NgFor only supports binding to Iterables such as Arrays.`)
                            }
                        }
                        var l;
                        if (this._differ) {
                            const l = this._differ.diff(this._ngForOf);
                            l && this._applyChanges(l)
                        }
                    }
                    _applyChanges(l) {
                        const n = [];
                        l.forEachOperation((l, e, t) => {
                            if (null == l.previousIndex) {
                                const e = this._viewContainer.createEmbeddedView(this._template, new Ta(null, this._ngForOf, -1, -1), null === t ? void 0 : t),
                                    i = new Aa(l, e);
                                n.push(i)
                            } else if (null == t) this._viewContainer.remove(null === e ? void 0 : e);
                            else if (null !== e) {
                                const i = this._viewContainer.get(e);
                                this._viewContainer.move(i, t);
                                const s = new Aa(l, i);
                                n.push(s)
                            }
                        });
                        for (let e = 0; e < n.length; e++) this._perViewChange(n[e].view, n[e].record);
                        for (let e = 0, t = this._viewContainer.length; e < t; e++) {
                            const l = this._viewContainer.get(e);
                            l.context.index = e, l.context.count = t, l.context.ngForOf = this._ngForOf
                        }
                        l.forEachIdentityChange(l => {
                            this._viewContainer.get(l.currentIndex).context.$implicit = l.item
                        })
                    }
                    _perViewChange(l, n) {
                        l.context.$implicit = n.item
                    }
                    static ngTemplateContextGuard(l, n) {
                        return !0
                    }
                }
                class Aa {
                    constructor(l, n) {
                        this.record = l, this.view = n
                    }
                }
                class Pa {
                    constructor(l, n) {
                        this._viewContainer = l, this._context = new Da, this._thenTemplateRef = null, this._elseTemplateRef = null, this._thenViewRef = null, this._elseViewRef = null, this._thenTemplateRef = n
                    }
                    set ngIf(l) {
                        this._context.$implicit = this._context.ngIf = l, this._updateView()
                    }
                    set ngIfThen(l) {
                        Ma("ngIfThen", l), this._thenTemplateRef = l, this._thenViewRef = null, this._updateView()
                    }
                    set ngIfElse(l) {
                        Ma("ngIfElse", l), this._elseTemplateRef = l, this._elseViewRef = null, this._updateView()
                    }
                    _updateView() {
                        this._context.$implicit ? this._thenViewRef || (this._viewContainer.clear(), this._elseViewRef = null, this._thenTemplateRef && (this._thenViewRef = this._viewContainer.createEmbeddedView(this._thenTemplateRef, this._context))) : this._elseViewRef || (this._viewContainer.clear(), this._thenViewRef = null, this._elseTemplateRef && (this._elseViewRef = this._viewContainer.createEmbeddedView(this._elseTemplateRef, this._context)))
                    }
                }
                class Da {
                    constructor() {
                        this.$implicit = null, this.ngIf = null
                    }
                }

                function Ma(l, n) {
                    if (n && !n.createEmbeddedView) throw new Error(`${l} must be a TemplateRef, but received '${bl(n)}'.`)
                }
                class Oa {}
                class Na {
                    constructor(l, n, e) {
                        this._ngEl = l, this._differs = n, this._renderer = e
                    }
                    getValue() {
                        return null
                    }
                    setNgStyle(l) {
                        this._ngStyle = l, !this._differ && l && (this._differ = this._differs.find(l).create())
                    }
                    applyChanges() {
                        if (this._differ) {
                            const l = this._differ.diff(this._ngStyle);
                            l && this._applyChanges(l)
                        }
                    }
                    _applyChanges(l) {
                        l.forEachRemovedItem(l => this._setStyle(l.key, null)), l.forEachAddedItem(l => this._setStyle(l.key, l.currentValue)), l.forEachChangedItem(l => this._setStyle(l.key, l.currentValue))
                    }
                    _setStyle(l, n) {
                        const [e, t] = l.split(".");
                        null != (n = null != n && t ? `${n}${t}` : n) ? this._renderer.setStyle(this._ngEl.nativeElement, e, n) : this._renderer.removeStyle(this._ngEl.nativeElement, e)
                    }
                }
                let Ra = (() => {
                    class l {
                        constructor(l) {
                            this._delegate = l
                        }
                        getValue() {
                            return this._delegate.getValue()
                        }
                    }
                    return l.ngDirectiveDef = void 0, l
                })();
                class Ba extends Ra {
                    constructor(l) {
                        super(l)
                    }
                    set ngStyle(l) {
                        this._delegate.setNgStyle(l)
                    }
                    ngDoCheck() {
                        this._delegate.applyChanges()
                    }
                }
                class za {
                    constructor(l) {
                        this._viewContainerRef = l, this._viewRef = null, this.ngTemplateOutletContext = null, this.ngTemplateOutlet = null
                    }
                    ngOnChanges(l) {
                        this._shouldRecreateView(l) ? (this._viewRef && this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef)), this.ngTemplateOutlet && (this._viewRef = this._viewContainerRef.createEmbeddedView(this.ngTemplateOutlet, this.ngTemplateOutletContext))) : this._viewRef && this.ngTemplateOutletContext && this._updateExistingContext(this.ngTemplateOutletContext)
                    }
                    _shouldRecreateView(l) {
                        const n = l.ngTemplateOutletContext;
                        return !!l.ngTemplateOutlet || n && this._hasContextShapeChanged(n)
                    }
                    _hasContextShapeChanged(l) {
                        const n = Object.keys(l.previousValue || {}),
                            e = Object.keys(l.currentValue || {});
                        if (n.length === e.length) {
                            for (let l of e)
                                if (-1 === n.indexOf(l)) return !0;
                            return !1
                        }
                        return !0
                    }
                    _updateExistingContext(l) {
                        for (let n of Object.keys(l)) this._viewRef.context[n] = this.ngTemplateOutletContext[n]
                    }
                }
                class $a {
                    constructor(l) {
                        this.locale = l
                    }
                    transform(l, n = "mediumDate", e, t) {
                        if (null == l || "" === l || l != l) return null;
                        try {
                            return aa(l, n, t || this.locale, e)
                        } catch (i) {
                            throw function (l, n) {
                                return Error(`InvalidPipeArgument: '${n}' for pipe '${bl(l)}'`)
                            }($a, i.message)
                        }
                    }
                }
                class La {
                    constructor(l) {
                        this.differs = l, this.keyValues = []
                    }
                    transform(l, n = Fa) {
                        if (!l || !(l instanceof Map) && "object" != typeof l) return null;
                        this.differ || (this.differ = this.differs.find(l).create());
                        const e = this.differ.diff(l);
                        return e && (this.keyValues = [], e.forEachItem(l => {
                            this.keyValues.push(function (l, n) {
                                return {
                                    key: l,
                                    value: n
                                }
                            }(l.key, l.currentValue))
                        }), this.keyValues.sort(n)), this.keyValues
                    }
                }

                function Fa(l, n) {
                    const e = l.key,
                        t = n.key;
                    if (e === t) return 0;
                    if (void 0 === e) return 1;
                    if (void 0 === t) return -1;
                    if (null === e) return 1;
                    if (null === t) return -1;
                    if ("string" == typeof e && "string" == typeof t) return e < t ? -1 : 1;
                    if ("number" == typeof e && "number" == typeof t) return e - t;
                    if ("boolean" == typeof e && "boolean" == typeof t) return e < t ? -1 : 1;
                    const i = String(e),
                        s = String(t);
                    return i == s ? 0 : i < s ? -1 : 1
                }
                class qa {}
                const Ua = new El("DocumentToken"),
                    Ha = "server";
                let Va = (() => {
                    class l {}
                    return l.ngInjectableDef = gl({
                        token: l,
                        providedIn: "root",
                        factory: () => new ja(ql(Ua), window, ql(tn))
                    }), l
                })();
                class ja {
                    constructor(l, n, e) {
                        this.document = l, this.window = n, this.errorHandler = e, this.offset = () => [0, 0]
                    }
                    setOffset(l) {
                        this.offset = Array.isArray(l) ? () => l : l
                    }
                    getScrollPosition() {
                        return this.supportScrollRestoration() ? [this.window.scrollX, this.window.scrollY] : [0, 0]
                    }
                    scrollToPosition(l) {
                        this.supportScrollRestoration() && this.window.scrollTo(l[0], l[1])
                    }
                    scrollToAnchor(l) {
                        if (this.supportScrollRestoration()) {
                            l = this.window.CSS && this.window.CSS.escape ? this.window.CSS.escape(l) : l.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g, "\\$1");
                            try {
                                const n = this.document.querySelector(`#${l}`);
                                if (n) return void this.scrollToElement(n);
                                const e = this.document.querySelector(`[name='${l}']`);
                                if (e) return void this.scrollToElement(e)
                            } catch (n) {
                                this.errorHandler.handleError(n)
                            }
                        }
                    }
                    setHistoryScrollRestoration(l) {
                        if (this.supportScrollRestoration()) {
                            const n = this.window.history;
                            n && n.scrollRestoration && (n.scrollRestoration = l)
                        }
                    }
                    scrollToElement(l) {
                        const n = l.getBoundingClientRect(),
                            e = n.left + this.window.pageXOffset,
                            t = n.top + this.window.pageYOffset,
                            i = this.offset();
                        this.window.scrollTo(e - i[0], t - i[1])
                    }
                    supportScrollRestoration() {
                        try {
                            return !!this.window && !!this.window.scrollTo
                        } catch (l) {
                            return !1
                        }
                    }
                }
                const Ga = new w(l => l.complete());

                function Wa(l) {
                    return l ? function (l) {
                        return new w(n => l.schedule(() => n.complete()))
                    }(l) : Ga
                }

                function Ka(l) {
                    const n = new w(n => {
                        n.next(l), n.complete()
                    });
                    return n._isScalar = !0, n.value = l, n
                }

                function Za(...l) {
                    let n = l[l.length - 1];
                    switch (A(n) ? l.pop() : n = void 0, l.length) {
                        case 0:
                            return Wa(n);
                        case 1:
                            return n ? j(l, n) : Ka(l[0]);
                        default:
                            return j(l, n)
                    }
                }
                class Qa extends T {
                    constructor(l) {
                        super(), this._value = l
                    }
                    get value() {
                        return this.getValue()
                    }
                    _subscribe(l) {
                        const n = super._subscribe(l);
                        return n && !n.closed && l.next(this._value), n
                    }
                    getValue() {
                        if (this.hasError) throw this.thrownError;
                        if (this.closed) throw new S;
                        return this._value
                    }
                    next(l) {
                        super.next(this._value = l)
                    }
                }

                function Ya() {
                    return Error.call(this), this.message = "no elements in sequence", this.name = "EmptyError", this
                }
                Ya.prototype = Object.create(Error.prototype);
                const Xa = Ya,
                    Ja = {};
                class lo {
                    constructor(l) {
                        this.resultSelector = l
                    }
                    call(l, n) {
                        return n.subscribe(new no(l, this.resultSelector))
                    }
                }
                class no extends q {
                    constructor(l, n) {
                        super(l), this.resultSelector = n, this.active = 0, this.values = [], this.observables = []
                    }
                    _next(l) {
                        this.values.push(Ja), this.observables.push(l)
                    }
                    _complete() {
                        const l = this.observables,
                            n = l.length;
                        if (0 === n) this.destination.complete();
                        else {
                            this.active = n, this.toRespond = n;
                            for (let e = 0; e < n; e++) {
                                const n = l[e];
                                this.add(F(this, n, n, e))
                            }
                        }
                    }
                    notifyComplete(l) {
                        0 == (this.active -= 1) && this.destination.complete()
                    }
                    notifyNext(l, n, e, t, i) {
                        const s = this.values,
                            u = this.toRespond ? s[e] === Ja ? --this.toRespond : this.toRespond : 0;
                        s[e] = n, 0 === u && (this.resultSelector ? this._tryResultSelector(s) : this.destination.next(s.slice()))
                    }
                    _tryResultSelector(l) {
                        let n;
                        try {
                            n = this.resultSelector.apply(this, l)
                        } catch (e) {
                            return void this.destination.error(e)
                        }
                        this.destination.next(n)
                    }
                }

                function eo(l) {
                    return new w(n => {
                        let e;
                        try {
                            e = l()
                        } catch (t) {
                            return void n.error(t)
                        }
                        return (e ? G(e) : Wa()).subscribe(n)
                    })
                }

                function to() {
                    return Y(1)
                }

                function io(l, n) {
                    return function (e) {
                        return e.lift(new so(l, n))
                    }
                }
                class so {
                    constructor(l, n) {
                        this.predicate = l, this.thisArg = n
                    }
                    call(l, n) {
                        return n.subscribe(new uo(l, this.predicate, this.thisArg))
                    }
                }
                class uo extends g {
                    constructor(l, n, e) {
                        super(l), this.predicate = n, this.thisArg = e, this.count = 0
                    }
                    _next(l) {
                        let n;
                        try {
                            n = this.predicate.call(this.thisArg, l, this.count++)
                        } catch (e) {
                            return void this.destination.error(e)
                        }
                        n && this.destination.next(l)
                    }
                }

                function ro() {
                    return Error.call(this), this.message = "argument out of range", this.name = "ArgumentOutOfRangeError", this
                }
                ro.prototype = Object.create(Error.prototype);
                const ao = ro;

                function oo(l) {
                    return function (n) {
                        return 0 === l ? Wa() : n.lift(new co(l))
                    }
                }
                class co {
                    constructor(l) {
                        if (this.total = l, this.total < 0) throw new ao
                    }
                    call(l, n) {
                        return n.subscribe(new ho(l, this.total))
                    }
                }
                class ho extends g {
                    constructor(l, n) {
                        super(l), this.total = n, this.ring = new Array, this.count = 0
                    }
                    _next(l) {
                        const n = this.ring,
                            e = this.total,
                            t = this.count++;
                        n.length < e ? n.push(l) : n[t % e] = l
                    }
                    _complete() {
                        const l = this.destination;
                        let n = this.count;
                        if (n > 0) {
                            const e = this.count >= this.total ? this.total : this.count,
                                t = this.ring;
                            for (let i = 0; i < e; i++) {
                                const i = n++ % e;
                                l.next(t[i])
                            }
                        }
                        l.complete()
                    }
                }

                function po(l, n, e) {
                    return function (t) {
                        return t.lift(new fo(l, n, e))
                    }
                }
                class fo {
                    constructor(l, n, e) {
                        this.nextOrObserver = l, this.error = n, this.complete = e
                    }
                    call(l, n) {
                        return n.subscribe(new go(l, this.nextOrObserver, this.error, this.complete))
                    }
                }
                class go extends g {
                    constructor(l, n, e, i) {
                        super(l), this._tapNext = v, this._tapError = v, this._tapComplete = v, this._tapError = e || v, this._tapComplete = i || v, t(n) ? (this._context = this, this._tapNext = n) : n && (this._context = n, this._tapNext = n.next || v, this._tapError = n.error || v, this._tapComplete = n.complete || v)
                    }
                    _next(l) {
                        try {
                            this._tapNext.call(this._context, l)
                        } catch (n) {
                            return void this.destination.error(n)
                        }
                        this.destination.next(l)
                    }
                    _error(l) {
                        try {
                            this._tapError.call(this._context, l)
                        } catch (l) {
                            return void this.destination.error(l)
                        }
                        this.destination.error(l)
                    }
                    _complete() {
                        try {
                            this._tapComplete.call(this._context)
                        } catch (l) {
                            return void this.destination.error(l)
                        }
                        return this.destination.complete()
                    }
                }
                const mo = (l = yo) => po({
                    hasValue: !1,
                    next() {
                        this.hasValue = !0
                    },
                    complete() {
                        if (!this.hasValue) throw l()
                    }
                });

                function yo() {
                    return new Xa
                }

                function vo(l = null) {
                    return n => n.lift(new bo(l))
                }
                class bo {
                    constructor(l) {
                        this.defaultValue = l
                    }
                    call(l, n) {
                        return n.subscribe(new _o(l, this.defaultValue))
                    }
                }
                class _o extends g {
                    constructor(l, n) {
                        super(l), this.defaultValue = n, this.isEmpty = !0
                    }
                    _next(l) {
                        this.isEmpty = !1, this.destination.next(l)
                    }
                    _complete() {
                        this.isEmpty && this.destination.next(this.defaultValue), this.destination.complete()
                    }
                }

                function wo(l, n) {
                    const e = arguments.length >= 2;
                    return t => t.pipe(l ? io((n, e) => l(n, e, t)) : Q, oo(1), e ? vo(n) : mo(() => new Xa))
                }

                function xo(l) {
                    return function (n) {
                        const e = new ko(l),
                            t = n.lift(e);
                        return e.caught = t
                    }
                }
                class ko {
                    constructor(l) {
                        this.selector = l
                    }
                    call(l, n) {
                        return n.subscribe(new So(l, this.selector, this.caught))
                    }
                }
                class So extends q {
                    constructor(l, n, e) {
                        super(l), this.selector = n, this.caught = e
                    }
                    error(l) {
                        if (!this.isStopped) {
                            let e;
                            try {
                                e = this.selector(l, this.caught)
                            } catch (n) {
                                return void super.error(n)
                            }
                            this._unsubscribeAndRecycle();
                            const t = new P(this, void 0, void 0);
                            this.add(t), F(this, e, void 0, void 0, t)
                        }
                    }
                }

                function Co(l) {
                    return n => 0 === l ? Wa() : n.lift(new Io(l))
                }
                class Io {
                    constructor(l) {
                        if (this.total = l, this.total < 0) throw new ao
                    }
                    call(l, n) {
                        return n.subscribe(new To(l, this.total))
                    }
                }
                class To extends g {
                    constructor(l, n) {
                        super(l), this.total = n, this.count = 0
                    }
                    _next(l) {
                        const n = this.total,
                            e = ++this.count;
                        e <= n && (this.destination.next(l), e === n && (this.destination.complete(), this.unsubscribe()))
                    }
                }

                function Eo(l, n) {
                    const e = arguments.length >= 2;
                    return t => t.pipe(l ? io((n, e) => l(n, e, t)) : Q, Co(1), e ? vo(n) : mo(() => new Xa))
                }
                class Ao {
                    constructor(l, n, e) {
                        this.predicate = l, this.thisArg = n, this.source = e
                    }
                    call(l, n) {
                        return n.subscribe(new Po(l, this.predicate, this.thisArg, this.source))
                    }
                }
                class Po extends g {
                    constructor(l, n, e, t) {
                        super(l), this.predicate = n, this.thisArg = e, this.source = t, this.index = 0, this.thisArg = e || this
                    }
                    notifyComplete(l) {
                        this.destination.next(l), this.destination.complete()
                    }
                    _next(l) {
                        let n = !1;
                        try {
                            n = this.predicate.call(this.thisArg, l, this.index++, this.source)
                        } catch (e) {
                            return void this.destination.error(e)
                        }
                        n || this.notifyComplete(!1)
                    }
                    _complete() {
                        this.notifyComplete(!0)
                    }
                }

                function Do(l, n) {
                    return "function" == typeof n ? e => e.pipe(Do((e, t) => G(l(e, t)).pipe(U((l, i) => n(e, l, t, i))))) : n => n.lift(new Mo(l))
                }
                class Mo {
                    constructor(l) {
                        this.project = l
                    }
                    call(l, n) {
                        return n.subscribe(new Oo(l, this.project))
                    }
                }
                class Oo extends q {
                    constructor(l, n) {
                        super(l), this.project = n, this.index = 0
                    }
                    _next(l) {
                        let n;
                        const e = this.index++;
                        try {
                            n = this.project(l, e)
                        } catch (t) {
                            return void this.destination.error(t)
                        }
                        this._innerSub(n, l, e)
                    }
                    _innerSub(l, n, e) {
                        const t = this.innerSubscription;
                        t && t.unsubscribe();
                        const i = new P(this, void 0, void 0);
                        this.destination.add(i), this.innerSubscription = F(this, l, n, e, i)
                    }
                    _complete() {
                        const {
                            innerSubscription: l
                        } = this;
                        l && !l.closed || super._complete(), this.unsubscribe()
                    }
                    _unsubscribe() {
                        this.innerSubscription = null
                    }
                    notifyComplete(l) {
                        this.destination.remove(l), this.innerSubscription = null, this.isStopped && super._complete()
                    }
                    notifyNext(l, n, e, t, i) {
                        this.destination.next(n)
                    }
                }

                function No(l, n) {
                    let e = !1;
                    return arguments.length >= 2 && (e = !0),
                        function (t) {
                            return t.lift(new Ro(l, n, e))
                        }
                }
                class Ro {
                    constructor(l, n, e = !1) {
                        this.accumulator = l, this.seed = n, this.hasSeed = e
                    }
                    call(l, n) {
                        return n.subscribe(new Bo(l, this.accumulator, this.seed, this.hasSeed))
                    }
                }
                class Bo extends g {
                    constructor(l, n, e, t) {
                        super(l), this.accumulator = n, this._seed = e, this.hasSeed = t, this.index = 0
                    }
                    get seed() {
                        return this._seed
                    }
                    set seed(l) {
                        this.hasSeed = !0, this._seed = l
                    }
                    _next(l) {
                        if (this.hasSeed) return this._tryNext(l);
                        this.seed = l, this.destination.next(l)
                    }
                    _tryNext(l) {
                        const n = this.index++;
                        let e;
                        try {
                            e = this.accumulator(this.seed, l, n)
                        } catch (t) {
                            this.destination.error(t)
                        }
                        this.seed = e, this.destination.next(e)
                    }
                }

                function zo(l, n) {
                    return W(l, n, 1)
                }
                class $o {
                    constructor(l) {
                        this.callback = l
                    }
                    call(l, n) {
                        return n.subscribe(new Lo(l, this.callback))
                    }
                }
                class Lo extends g {
                    constructor(l, n) {
                        super(l), this.add(new h(n))
                    }
                }
                let Fo = null;

                function qo() {
                    return Fo
                }
                class Uo {
                    constructor() {
                        this.resourceLoaderType = null
                    }
                    get attrToPropMap() {
                        return this._attrToPropMap
                    }
                    set attrToPropMap(l) {
                        this._attrToPropMap = l
                    }
                }
                class Ho extends Uo {
                    constructor() {
                        super(), this._animationPrefix = null, this._transitionEnd = null;
                        try {
                            const l = this.createElement("div", document);
                            if (null != this.getStyle(l, "animationName")) this._animationPrefix = "";
                            else {
                                const n = ["Webkit", "Moz", "O", "ms"];
                                for (let e = 0; e < n.length; e++)
                                    if (null != this.getStyle(l, n[e] + "AnimationName")) {
                                        this._animationPrefix = "-" + n[e].toLowerCase() + "-";
                                        break
                                    }
                            }
                            const n = {
                                WebkitTransition: "webkitTransitionEnd",
                                MozTransition: "transitionend",
                                OTransition: "oTransitionEnd otransitionend",
                                transition: "transitionend"
                            };
                            Object.keys(n).forEach(e => {
                                null != this.getStyle(l, e) && (this._transitionEnd = n[e])
                            })
                        } catch (l) {
                            this._animationPrefix = null, this._transitionEnd = null
                        }
                    }
                    getDistributedNodes(l) {
                        return l.getDistributedNodes()
                    }
                    resolveAndSetHref(l, n, e) {
                        l.href = null == e ? n : n + "/../" + e
                    }
                    supportsDOMEvents() {
                        return !0
                    }
                    supportsNativeShadowDOM() {
                        return "function" == typeof document.body.createShadowRoot
                    }
                    getAnimationPrefix() {
                        return this._animationPrefix ? this._animationPrefix : ""
                    }
                    getTransitionEnd() {
                        return this._transitionEnd ? this._transitionEnd : ""
                    }
                    supportsAnimation() {
                        return null != this._animationPrefix && null != this._transitionEnd
                    }
                }
                const Vo = {
                        class: "className",
                        innerHtml: "innerHTML",
                        readonly: "readOnly",
                        tabindex: "tabIndex"
                    },
                    jo = 3,
                    Go = {
                        "\b": "Backspace",
                        "\t": "Tab",
                        "\x7f": "Delete",
                        "\x1b": "Escape",
                        Del: "Delete",
                        Esc: "Escape",
                        Left: "ArrowLeft",
                        Right: "ArrowRight",
                        Up: "ArrowUp",
                        Down: "ArrowDown",
                        Menu: "ContextMenu",
                        Scroll: "ScrollLock",
                        Win: "OS"
                    },
                    Wo = {
                        A: "1",
                        B: "2",
                        C: "3",
                        D: "4",
                        E: "5",
                        F: "6",
                        G: "7",
                        H: "8",
                        I: "9",
                        J: "*",
                        K: "+",
                        M: "-",
                        N: ".",
                        O: "/",
                        "`": "0",
                        "\x90": "NumLock"
                    },
                    Ko = (() => {
                        if (Tl.Node) return Tl.Node.prototype.contains || function (l) {
                            return !!(16 & this.compareDocumentPosition(l))
                        }
                    })();
                class Zo extends Ho {
                    parse(l) {
                        throw new Error("parse not implemented")
                    }
                    static makeCurrent() {
                        var l;
                        l = new Zo, Fo || (Fo = l)
                    }
                    hasProperty(l, n) {
                        return n in l
                    }
                    setProperty(l, n, e) {
                        l[n] = e
                    }
                    getProperty(l, n) {
                        return l[n]
                    }
                    invoke(l, n, e) {
                        l[n](...e)
                    }
                    logError(l) {
                        window.console && (console.error ? console.error(l) : console.log(l))
                    }
                    log(l) {
                        window.console && window.console.log && window.console.log(l)
                    }
                    logGroup(l) {
                        window.console && window.console.group && window.console.group(l)
                    }
                    logGroupEnd() {
                        window.console && window.console.groupEnd && window.console.groupEnd()
                    }
                    get attrToPropMap() {
                        return Vo
                    }
                    contains(l, n) {
                        return Ko.call(l, n)
                    }
                    querySelector(l, n) {
                        return l.querySelector(n)
                    }
                    querySelectorAll(l, n) {
                        return l.querySelectorAll(n)
                    }
                    on(l, n, e) {
                        l.addEventListener(n, e, !1)
                    }
                    onAndCancel(l, n, e) {
                        return l.addEventListener(n, e, !1), () => {
                            l.removeEventListener(n, e, !1)
                        }
                    }
                    dispatchEvent(l, n) {
                        l.dispatchEvent(n)
                    }
                    createMouseEvent(l) {
                        const n = this.getDefaultDocument().createEvent("MouseEvent");
                        return n.initEvent(l, !0, !0), n
                    }
                    createEvent(l) {
                        const n = this.getDefaultDocument().createEvent("Event");
                        return n.initEvent(l, !0, !0), n
                    }
                    preventDefault(l) {
                        l.preventDefault(), l.returnValue = !1
                    }
                    isPrevented(l) {
                        return l.defaultPrevented || null != l.returnValue && !l.returnValue
                    }
                    getInnerHTML(l) {
                        return l.innerHTML
                    }
                    getTemplateContent(l) {
                        return "content" in l && this.isTemplateElement(l) ? l.content : null
                    }
                    getOuterHTML(l) {
                        return l.outerHTML
                    }
                    nodeName(l) {
                        return l.nodeName
                    }
                    nodeValue(l) {
                        return l.nodeValue
                    }
                    type(l) {
                        return l.type
                    }
                    content(l) {
                        return this.hasProperty(l, "content") ? l.content : l
                    }
                    firstChild(l) {
                        return l.firstChild
                    }
                    nextSibling(l) {
                        return l.nextSibling
                    }
                    parentElement(l) {
                        return l.parentNode
                    }
                    childNodes(l) {
                        return l.childNodes
                    }
                    childNodesAsList(l) {
                        const n = l.childNodes,
                            e = new Array(n.length);
                        for (let t = 0; t < n.length; t++) e[t] = n[t];
                        return e
                    }
                    clearNodes(l) {
                        for (; l.firstChild;) l.removeChild(l.firstChild)
                    }
                    appendChild(l, n) {
                        l.appendChild(n)
                    }
                    removeChild(l, n) {
                        l.removeChild(n)
                    }
                    replaceChild(l, n, e) {
                        l.replaceChild(n, e)
                    }
                    remove(l) {
                        return l.parentNode && l.parentNode.removeChild(l), l
                    }
                    insertBefore(l, n, e) {
                        l.insertBefore(e, n)
                    }
                    insertAllBefore(l, n, e) {
                        e.forEach(e => l.insertBefore(e, n))
                    }
                    insertAfter(l, n, e) {
                        l.insertBefore(e, n.nextSibling)
                    }
                    setInnerHTML(l, n) {
                        l.innerHTML = n
                    }
                    getText(l) {
                        return l.textContent
                    }
                    setText(l, n) {
                        l.textContent = n
                    }
                    getValue(l) {
                        return l.value
                    }
                    setValue(l, n) {
                        l.value = n
                    }
                    getChecked(l) {
                        return l.checked
                    }
                    setChecked(l, n) {
                        l.checked = n
                    }
                    createComment(l) {
                        return this.getDefaultDocument().createComment(l)
                    }
                    createTemplate(l) {
                        const n = this.getDefaultDocument().createElement("template");
                        return n.innerHTML = l, n
                    }
                    createElement(l, n) {
                        return (n = n || this.getDefaultDocument()).createElement(l)
                    }
                    createElementNS(l, n, e) {
                        return (e = e || this.getDefaultDocument()).createElementNS(l, n)
                    }
                    createTextNode(l, n) {
                        return (n = n || this.getDefaultDocument()).createTextNode(l)
                    }
                    createScriptTag(l, n, e) {
                        const t = (e = e || this.getDefaultDocument()).createElement("SCRIPT");
                        return t.setAttribute(l, n), t
                    }
                    createStyleElement(l, n) {
                        const e = (n = n || this.getDefaultDocument()).createElement("style");
                        return this.appendChild(e, this.createTextNode(l, n)), e
                    }
                    createShadowRoot(l) {
                        return l.createShadowRoot()
                    }
                    getShadowRoot(l) {
                        return l.shadowRoot
                    }
                    getHost(l) {
                        return l.host
                    }
                    clone(l) {
                        return l.cloneNode(!0)
                    }
                    getElementsByClassName(l, n) {
                        return l.getElementsByClassName(n)
                    }
                    getElementsByTagName(l, n) {
                        return l.getElementsByTagName(n)
                    }
                    classList(l) {
                        return Array.prototype.slice.call(l.classList, 0)
                    }
                    addClass(l, n) {
                        l.classList.add(n)
                    }
                    removeClass(l, n) {
                        l.classList.remove(n)
                    }
                    hasClass(l, n) {
                        return l.classList.contains(n)
                    }
                    setStyle(l, n, e) {
                        l.style[n] = e
                    }
                    removeStyle(l, n) {
                        l.style[n] = ""
                    }
                    getStyle(l, n) {
                        return l.style[n]
                    }
                    hasStyle(l, n, e) {
                        const t = this.getStyle(l, n) || "";
                        return e ? t == e : t.length > 0
                    }
                    tagName(l) {
                        return l.tagName
                    }
                    attributeMap(l) {
                        const n = new Map,
                            e = l.attributes;
                        for (let t = 0; t < e.length; t++) {
                            const l = e.item(t);
                            n.set(l.name, l.value)
                        }
                        return n
                    }
                    hasAttribute(l, n) {
                        return l.hasAttribute(n)
                    }
                    hasAttributeNS(l, n, e) {
                        return l.hasAttributeNS(n, e)
                    }
                    getAttribute(l, n) {
                        return l.getAttribute(n)
                    }
                    getAttributeNS(l, n, e) {
                        return l.getAttributeNS(n, e)
                    }
                    setAttribute(l, n, e) {
                        l.setAttribute(n, e)
                    }
                    setAttributeNS(l, n, e, t) {
                        l.setAttributeNS(n, e, t)
                    }
                    removeAttribute(l, n) {
                        l.removeAttribute(n)
                    }
                    removeAttributeNS(l, n, e) {
                        l.removeAttributeNS(n, e)
                    }
                    templateAwareRoot(l) {
                        return this.isTemplateElement(l) ? this.content(l) : l
                    }
                    createHtmlDocument() {
                        return document.implementation.createHTMLDocument("fakeTitle")
                    }
                    getDefaultDocument() {
                        return document
                    }
                    getBoundingClientRect(l) {
                        try {
                            return l.getBoundingClientRect()
                        } catch (n) {
                            return {
                                top: 0,
                                bottom: 0,
                                left: 0,
                                right: 0,
                                width: 0,
                                height: 0
                            }
                        }
                    }
                    getTitle(l) {
                        return l.title
                    }
                    setTitle(l, n) {
                        l.title = n || ""
                    }
                    elementMatches(l, n) {
                        return !!this.isElementNode(l) && (l.matches && l.matches(n) || l.msMatchesSelector && l.msMatchesSelector(n) || l.webkitMatchesSelector && l.webkitMatchesSelector(n))
                    }
                    isTemplateElement(l) {
                        return this.isElementNode(l) && "TEMPLATE" === l.nodeName
                    }
                    isTextNode(l) {
                        return l.nodeType === Node.TEXT_NODE
                    }
                    isCommentNode(l) {
                        return l.nodeType === Node.COMMENT_NODE
                    }
                    isElementNode(l) {
                        return l.nodeType === Node.ELEMENT_NODE
                    }
                    hasShadowRoot(l) {
                        return null != l.shadowRoot && l instanceof HTMLElement
                    }
                    isShadowRoot(l) {
                        return l instanceof DocumentFragment
                    }
                    importIntoDoc(l) {
                        return document.importNode(this.templateAwareRoot(l), !0)
                    }
                    adoptNode(l) {
                        return document.adoptNode(l)
                    }
                    getHref(l) {
                        return l.getAttribute("href")
                    }
                    getEventKey(l) {
                        let n = l.key;
                        if (null == n) {
                            if (null == (n = l.keyIdentifier)) return "Unidentified";
                            n.startsWith("U+") && (n = String.fromCharCode(parseInt(n.substring(2), 16)), l.location === jo && Wo.hasOwnProperty(n) && (n = Wo[n]))
                        }
                        return Go[n] || n
                    }
                    getGlobalEventTarget(l, n) {
                        return "window" === n ? window : "document" === n ? l : "body" === n ? l.body : null
                    }
                    getHistory() {
                        return window.history
                    }
                    getLocation() {
                        return window.location
                    }
                    getBaseHref(l) {
                        const n = Yo || (Yo = document.querySelector("base")) ? Yo.getAttribute("href") : null;
                        return null == n ? null : (e = n, Qo || (Qo = document.createElement("a")), Qo.setAttribute("href", e), "/" === Qo.pathname.charAt(0) ? Qo.pathname : "/" + Qo.pathname);
                        var e
                    }
                    resetBaseElement() {
                        Yo = null
                    }
                    getUserAgent() {
                        return window.navigator.userAgent
                    }
                    setData(l, n, e) {
                        this.setAttribute(l, "data-" + n, e)
                    }
                    getData(l, n) {
                        return this.getAttribute(l, "data-" + n)
                    }
                    getComputedStyle(l) {
                        return getComputedStyle(l)
                    }
                    supportsWebAnimation() {
                        return "function" == typeof Element.prototype.animate
                    }
                    performanceNow() {
                        return window.performance && window.performance.now ? window.performance.now() : (new Date).getTime()
                    }
                    supportsCookies() {
                        return !0
                    }
                    getCookie(l) {
                        return function (l, n) {
                            n = encodeURIComponent(n);
                            for (const e of l.split(";")) {
                                const l = e.indexOf("="),
                                    [t, i] = -1 == l ? [e, ""] : [e.slice(0, l), e.slice(l + 1)];
                                if (t.trim() === n) return decodeURIComponent(i)
                            }
                            return null
                        }(document.cookie, l)
                    }
                    setCookie(l, n) {
                        document.cookie = encodeURIComponent(l) + "=" + encodeURIComponent(n)
                    }
                }
                let Qo, Yo = null;

                function Xo() {
                    return !!window.history.pushState
                }
                const Jo = new El("TRANSITION_ID"),
                    lc = [{
                        provide: Vi,
                        useFactory: function (l, n, e) {
                            return () => {
                                e.get(ji).donePromise.then(() => {
                                    const e = qo();
                                    Array.prototype.slice.apply(e.querySelectorAll(n, "style[ng-transition]")).filter(n => e.getAttribute(n, "ng-transition") === l).forEach(l => e.remove(l))
                                })
                            }
                        },
                        deps: [Jo, Ua, Ln],
                        multi: !0
                    }];
                class nc {
                    static init() {
                        var l;
                        l = new nc, Es = l
                    }
                    addToWindow(l) {
                        Tl.getAngularTestability = (n, e = !0) => {
                            const t = l.findTestabilityInTree(n, e);
                            if (null == t) throw new Error("Could not find testability for element.");
                            return t
                        }, Tl.getAllAngularTestabilities = () => l.getAllTestabilities(), Tl.getAllAngularRootElements = () => l.getAllRootElements(), Tl.frameworkStabilizers || (Tl.frameworkStabilizers = []), Tl.frameworkStabilizers.push(l => {
                            const n = Tl.getAllAngularTestabilities();
                            let e = n.length,
                                t = !1;
                            const i = function (n) {
                                t = t || n, 0 == --e && l(t)
                            };
                            n.forEach((function (l) {
                                l.whenStable(i)
                            }))
                        })
                    }
                    findTestabilityInTree(l, n, e) {
                        if (null == n) return null;
                        const t = l.getTestability(n);
                        return null != t ? t : e ? qo().isShadowRoot(n) ? this.findTestabilityInTree(l, qo().getHost(n), !0) : this.findTestabilityInTree(l, qo().parentElement(n), !0) : null
                    }
                }

                function ec(l, n) {
                    "undefined" != typeof COMPILED && COMPILED || ((Tl.ng = Tl.ng || {})[l] = n)
                }
                const tc = (() => ({
                    ApplicationRef: zs,
                    NgZone: ys
                }))();

                function ic(l) {
                    return Qs(l)
                }
                const sc = new El("EventManagerPlugins");
                class uc {
                    constructor(l, n) {
                        this._zone = n, this._eventNameToPlugin = new Map, l.forEach(l => l.manager = this), this._plugins = l.slice().reverse()
                    }
                    addEventListener(l, n, e) {
                        return this._findPluginFor(n).addEventListener(l, n, e)
                    }
                    addGlobalEventListener(l, n, e) {
                        return this._findPluginFor(n).addGlobalEventListener(l, n, e)
                    }
                    getZone() {
                        return this._zone
                    }
                    _findPluginFor(l) {
                        const n = this._eventNameToPlugin.get(l);
                        if (n) return n;
                        const e = this._plugins;
                        for (let t = 0; t < e.length; t++) {
                            const n = e[t];
                            if (n.supports(l)) return this._eventNameToPlugin.set(l, n), n
                        }
                        throw new Error(`No event manager plugin found for event ${l}`)
                    }
                }
                class rc {
                    constructor(l) {
                        this._doc = l
                    }
                    addGlobalEventListener(l, n, e) {
                        const t = qo().getGlobalEventTarget(this._doc, l);
                        if (!t) throw new Error(`Unsupported event target ${t} for event ${n}`);
                        return this.addEventListener(t, n, e)
                    }
                }
                class ac {
                    constructor() {
                        this._stylesSet = new Set
                    }
                    addStyles(l) {
                        const n = new Set;
                        l.forEach(l => {
                            this._stylesSet.has(l) || (this._stylesSet.add(l), n.add(l))
                        }), this.onStylesAdded(n)
                    }
                    onStylesAdded(l) {}
                    getAllStyles() {
                        return Array.from(this._stylesSet)
                    }
                }
                class oc extends ac {
                    constructor(l) {
                        super(), this._doc = l, this._hostNodes = new Set, this._styleNodes = new Set, this._hostNodes.add(l.head)
                    }
                    _addStylesToHost(l, n) {
                        l.forEach(l => {
                            const e = this._doc.createElement("style");
                            e.textContent = l, this._styleNodes.add(n.appendChild(e))
                        })
                    }
                    addHost(l) {
                        this._addStylesToHost(this._stylesSet, l), this._hostNodes.add(l)
                    }
                    removeHost(l) {
                        this._hostNodes.delete(l)
                    }
                    onStylesAdded(l) {
                        this._hostNodes.forEach(n => this._addStylesToHost(l, n))
                    }
                    ngOnDestroy() {
                        this._styleNodes.forEach(l => qo().remove(l))
                    }
                }
                const cc = {
                        svg: "http://www.w3.org/2000/svg",
                        xhtml: "http://www.w3.org/1999/xhtml",
                        xlink: "http://www.w3.org/1999/xlink",
                        xml: "http://www.w3.org/XML/1998/namespace",
                        xmlns: "http://www.w3.org/2000/xmlns/"
                    },
                    dc = /%COMP%/g,
                    hc = "_nghost-%COMP%",
                    pc = "_ngcontent-%COMP%";

                function fc(l, n, e) {
                    for (let t = 0; t < n.length; t++) {
                        let i = n[t];
                        Array.isArray(i) ? fc(l, i, e) : (i = i.replace(dc, l), e.push(i))
                    }
                    return e
                }

                function gc(l) {
                    return n => {
                        !1 === l(n) && (n.preventDefault(), n.returnValue = !1)
                    }
                }
                class mc {
                    constructor(l, n, e) {
                        this.eventManager = l, this.sharedStylesHost = n, this.appId = e, this.rendererByCompId = new Map, this.defaultRenderer = new yc(l)
                    }
                    createRenderer(l, n) {
                        if (!l || !n) return this.defaultRenderer;
                        switch (n.encapsulation) {
                            case Zl.Emulated:
                                {
                                    let e = this.rendererByCompId.get(n.id);
                                    return e || (e = new _c(this.eventManager, this.sharedStylesHost, n, this.appId), this.rendererByCompId.set(n.id, e)),
                                    e.applyToHost(l),
                                    e
                                }
                            case Zl.Native:
                            case Zl.ShadowDom:
                                return new wc(this.eventManager, this.sharedStylesHost, l, n);
                            default:
                                if (!this.rendererByCompId.has(n.id)) {
                                    const l = fc(n.id, n.styles, []);
                                    this.sharedStylesHost.addStyles(l), this.rendererByCompId.set(n.id, this.defaultRenderer)
                                }
                                return this.defaultRenderer
                        }
                    }
                    begin() {}
                    end() {}
                }
                class yc {
                    constructor(l) {
                        this.eventManager = l, this.data = Object.create(null)
                    }
                    destroy() {}
                    createElement(l, n) {
                        return n ? document.createElementNS(cc[n] || n, l) : document.createElement(l)
                    }
                    createComment(l) {
                        return document.createComment(l)
                    }
                    createText(l) {
                        return document.createTextNode(l)
                    }
                    appendChild(l, n) {
                        l.appendChild(n)
                    }
                    insertBefore(l, n, e) {
                        l && l.insertBefore(n, e)
                    }
                    removeChild(l, n) {
                        l && l.removeChild(n)
                    }
                    selectRootElement(l, n) {
                        let e = "string" == typeof l ? document.querySelector(l) : l;
                        if (!e) throw new Error(`The selector "${l}" did not match any elements`);
                        return n || (e.textContent = ""), e
                    }
                    parentNode(l) {
                        return l.parentNode
                    }
                    nextSibling(l) {
                        return l.nextSibling
                    }
                    setAttribute(l, n, e, t) {
                        if (t) {
                            n = t + ":" + n;
                            const i = cc[t];
                            i ? l.setAttributeNS(i, n, e) : l.setAttribute(n, e)
                        } else l.setAttribute(n, e)
                    }
                    removeAttribute(l, n, e) {
                        if (e) {
                            const t = cc[e];
                            t ? l.removeAttributeNS(t, n) : l.removeAttribute(`${e}:${n}`)
                        } else l.removeAttribute(n)
                    }
                    addClass(l, n) {
                        l.classList.add(n)
                    }
                    removeClass(l, n) {
                        l.classList.remove(n)
                    }
                    setStyle(l, n, e, t) {
                        t & ve.DashCase ? l.style.setProperty(n, e, t & ve.Important ? "important" : "") : l.style[n] = e
                    }
                    removeStyle(l, n, e) {
                        e & ve.DashCase ? l.style.removeProperty(n) : l.style[n] = ""
                    }
                    setProperty(l, n, e) {
                        bc(n, "property"), l[n] = e
                    }
                    setValue(l, n) {
                        l.nodeValue = n
                    }
                    listen(l, n, e) {
                        return bc(n, "listener"), "string" == typeof l ? this.eventManager.addGlobalEventListener(l, n, gc(e)) : this.eventManager.addEventListener(l, n, gc(e))
                    }
                }
                const vc = (() => "@".charCodeAt(0))();

                function bc(l, n) {
                    if (l.charCodeAt(0) === vc) throw new Error(`Found the synthetic ${n} ${l}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)
                }
                class _c extends yc {
                    constructor(l, n, e, t) {
                        super(l), this.component = e;
                        const i = fc(t + "-" + e.id, e.styles, []);
                        n.addStyles(i), this.contentAttr = pc.replace(dc, t + "-" + e.id), this.hostAttr = hc.replace(dc, t + "-" + e.id)
                    }
                    applyToHost(l) {
                        super.setAttribute(l, this.hostAttr, "")
                    }
                    createElement(l, n) {
                        const e = super.createElement(l, n);
                        return super.setAttribute(e, this.contentAttr, ""), e
                    }
                }
                class wc extends yc {
                    constructor(l, n, e, t) {
                        super(l), this.sharedStylesHost = n, this.hostEl = e, this.component = t, this.shadowRoot = t.encapsulation === Zl.ShadowDom ? e.attachShadow({
                            mode: "open"
                        }) : e.createShadowRoot(), this.sharedStylesHost.addHost(this.shadowRoot);
                        const i = fc(t.id, t.styles, []);
                        for (let s = 0; s < i.length; s++) {
                            const l = document.createElement("style");
                            l.textContent = i[s], this.shadowRoot.appendChild(l)
                        }
                    }
                    nodeOrShadowRoot(l) {
                        return l === this.hostEl ? this.shadowRoot : l
                    }
                    destroy() {
                        this.sharedStylesHost.removeHost(this.shadowRoot)
                    }
                    appendChild(l, n) {
                        return super.appendChild(this.nodeOrShadowRoot(l), n)
                    }
                    insertBefore(l, n, e) {
                        return super.insertBefore(this.nodeOrShadowRoot(l), n, e)
                    }
                    removeChild(l, n) {
                        return super.removeChild(this.nodeOrShadowRoot(l), n)
                    }
                    parentNode(l) {
                        return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(l)))
                    }
                }
                const xc = (() => "undefined" != typeof Zone && Zone.__symbol__ || function (l) {
                        return "__zone_symbol__" + l
                    })(),
                    kc = xc("addEventListener"),
                    Sc = xc("removeEventListener"),
                    Cc = {},
                    Ic = "FALSE",
                    Tc = "ANGULAR",
                    Ec = "addEventListener",
                    Ac = "removeEventListener",
                    Pc = "__zone_symbol__propagationStopped",
                    Dc = "__zone_symbol__stopImmediatePropagation",
                    Mc = (() => {
                        const l = "undefined" != typeof Zone && Zone[xc("BLACK_LISTED_EVENTS")];
                        if (l) {
                            const n = {};
                            return l.forEach(l => {
                                n[l] = l
                            }), n
                        }
                    })(),
                    Oc = function (l) {
                        return !!Mc && Mc.hasOwnProperty(l)
                    },
                    Nc = function (l) {
                        const n = Cc[l.type];
                        if (!n) return;
                        const e = this[n];
                        if (!e) return;
                        const t = [l];
                        if (1 === e.length) {
                            const l = e[0];
                            return l.zone !== Zone.current ? l.zone.run(l.handler, this, t) : l.handler.apply(this, t)
                        } {
                            const n = e.slice();
                            for (let e = 0; e < n.length && !0 !== l[Pc]; e++) {
                                const l = n[e];
                                l.zone !== Zone.current ? l.zone.run(l.handler, this, t) : l.handler.apply(this, t)
                            }
                        }
                    };
                class Rc extends rc {
                    constructor(l, n, e) {
                        super(l), this.ngZone = n, e && function (l) {
                            return l === Ha
                        }(e) || this.patchEvent()
                    }
                    patchEvent() {
                        if ("undefined" == typeof Event || !Event || !Event.prototype) return;
                        if (Event.prototype[Dc]) return;
                        const l = Event.prototype[Dc] = Event.prototype.stopImmediatePropagation;
                        Event.prototype.stopImmediatePropagation = function () {
                            this && (this[Pc] = !0), l && l.apply(this, arguments)
                        }
                    }
                    supports(l) {
                        return !0
                    }
                    addEventListener(l, n, e) {
                        let t = e;
                        if (!l[kc] || ys.isInAngularZone() && !Oc(n)) l[Ec](n, t, !1);
                        else {
                            let e = Cc[n];
                            e || (e = Cc[n] = xc(Tc + n + Ic));
                            let i = l[e];
                            const s = i && i.length > 0;
                            i || (i = l[e] = []);
                            const u = Oc(n) ? Zone.root : Zone.current;
                            if (0 === i.length) i.push({
                                zone: u,
                                handler: t
                            });
                            else {
                                let l = !1;
                                for (let n = 0; n < i.length; n++)
                                    if (i[n].handler === t) {
                                        l = !0;
                                        break
                                    } l || i.push({
                                    zone: u,
                                    handler: t
                                })
                            }
                            s || l[kc](n, Nc, !1)
                        }
                        return () => this.removeEventListener(l, n, t)
                    }
                    removeEventListener(l, n, e) {
                        let t = l[Sc];
                        if (!t) return l[Ac].apply(l, [n, e, !1]);
                        let i = Cc[n],
                            s = i && l[i];
                        if (!s) return l[Ac].apply(l, [n, e, !1]);
                        let u = !1;
                        for (let r = 0; r < s.length; r++)
                            if (s[r].handler === e) {
                                u = !0, s.splice(r, 1);
                                break
                            } u ? 0 === s.length && t.apply(l, [n, Nc, !1]) : l[Ac].apply(l, [n, e, !1])
                    }
                }
                const Bc = {
                        pan: !0,
                        panstart: !0,
                        panmove: !0,
                        panend: !0,
                        pancancel: !0,
                        panleft: !0,
                        panright: !0,
                        panup: !0,
                        pandown: !0,
                        pinch: !0,
                        pinchstart: !0,
                        pinchmove: !0,
                        pinchend: !0,
                        pinchcancel: !0,
                        pinchin: !0,
                        pinchout: !0,
                        press: !0,
                        pressup: !0,
                        rotate: !0,
                        rotatestart: !0,
                        rotatemove: !0,
                        rotateend: !0,
                        rotatecancel: !0,
                        swipe: !0,
                        swipeleft: !0,
                        swiperight: !0,
                        swipeup: !0,
                        swipedown: !0,
                        tap: !0
                    },
                    zc = new El("HammerGestureConfig"),
                    $c = new El("HammerLoader");
                class Lc {
                    constructor() {
                        this.events = [], this.overrides = {}
                    }
                    buildHammer(l) {
                        const n = new Hammer(l, this.options);
                        n.get("pinch").set({
                            enable: !0
                        }), n.get("rotate").set({
                            enable: !0
                        });
                        for (const e in this.overrides) n.get(e).set(this.overrides[e]);
                        return n
                    }
                }
                class Fc extends rc {
                    constructor(l, n, e, t) {
                        super(l), this._config = n, this.console = e, this.loader = t
                    }
                    supports(l) {
                        return !(!Bc.hasOwnProperty(l.toLowerCase()) && !this.isCustomEvent(l) || !window.Hammer && !this.loader && (this.console.warn(`The "${l}" event cannot be bound because Hammer.JS is not ` + "loaded and no custom loader has been specified."), 1))
                    }
                    addEventListener(l, n, e) {
                        const t = this.manager.getZone();
                        if (n = n.toLowerCase(), !window.Hammer && this.loader) {
                            let t = !1,
                                i = () => {
                                    t = !0
                                };
                            return this.loader().then(() => {
                                if (!window.Hammer) return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."), void(i = () => {});
                                t || (i = this.addEventListener(l, n, e))
                            }).catch(() => {
                                this.console.warn(`The "${n}" event cannot be bound because the custom ` + "Hammer.JS loader failed."), i = () => {}
                            }), () => {
                                i()
                            }
                        }
                        return t.runOutsideAngular(() => {
                            const i = this._config.buildHammer(l),
                                s = function (l) {
                                    t.runGuarded((function () {
                                        e(l)
                                    }))
                                };
                            return i.on(n, s), () => {
                                i.off(n, s), "function" == typeof i.destroy && i.destroy()
                            }
                        })
                    }
                    isCustomEvent(l) {
                        return this._config.events.indexOf(l) > -1
                    }
                }
                const qc = ["alt", "control", "meta", "shift"],
                    Uc = {
                        alt: l => l.altKey,
                        control: l => l.ctrlKey,
                        meta: l => l.metaKey,
                        shift: l => l.shiftKey
                    };
                class Hc extends rc {
                    constructor(l) {
                        super(l)
                    }
                    supports(l) {
                        return null != Hc.parseEventName(l)
                    }
                    addEventListener(l, n, e) {
                        const t = Hc.parseEventName(n),
                            i = Hc.eventCallback(t.fullKey, e, this.manager.getZone());
                        return this.manager.getZone().runOutsideAngular(() => qo().onAndCancel(l, t.domEventName, i))
                    }
                    static parseEventName(l) {
                        const n = l.toLowerCase().split("."),
                            e = n.shift();
                        if (0 === n.length || "keydown" !== e && "keyup" !== e) return null;
                        const t = Hc._normalizeKey(n.pop());
                        let i = "";
                        if (qc.forEach(l => {
                                const e = n.indexOf(l);
                                e > -1 && (n.splice(e, 1), i += l + ".")
                            }), i += t, 0 != n.length || 0 === t.length) return null;
                        const s = {};
                        return s.domEventName = e, s.fullKey = i, s
                    }
                    static getEventFullKey(l) {
                        let n = "",
                            e = qo().getEventKey(l);
                        return " " === (e = e.toLowerCase()) ? e = "space" : "." === e && (e = "dot"), qc.forEach(t => {
                            t != e && (0, Uc[t])(l) && (n += t + ".")
                        }), n += e
                    }
                    static eventCallback(l, n, e) {
                        return t => {
                            Hc.getEventFullKey(t) === l && e.runGuarded(() => n(t))
                        }
                    }
                    static _normalizeKey(l) {
                        switch (l) {
                            case "esc":
                                return "escape";
                            default:
                                return l
                        }
                    }
                }
                class Vc {}
                class jc extends Vc {
                    constructor(l) {
                        super(), this._doc = l
                    }
                    sanitize(l, n) {
                        if (null == n) return null;
                        switch (l) {
                            case An.NONE:
                                return n;
                            case An.HTML:
                                return n instanceof Wc ? n.changingThisBreaksApplicationSecurity : (this.checkNotSafeValue(n, "HTML"), function (l, n) {
                                    let e = null;
                                    try {
                                        Tn = Tn || new an(l);
                                        let t = n ? String(n) : "";
                                        e = Tn.getInertBodyElement(t);
                                        let i = 5,
                                            s = t;
                                        do {
                                            if (0 === i) throw new Error("Failed to sanitize html because the input is unstable");
                                            i--, t = s, s = e.innerHTML, e = Tn.getInertBodyElement(t)
                                        } while (t !== s);
                                        const u = new kn,
                                            r = u.sanitizeChildren(En(e) || e);
                                        return rn() && u.sanitizedSomething && console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"), r
                                    } finally {
                                        if (e) {
                                            const l = En(e) || e;
                                            for (; l.firstChild;) l.removeChild(l.firstChild)
                                        }
                                    }
                                }(this._doc, String(n)));
                            case An.STYLE:
                                return n instanceof Kc ? n.changingThisBreaksApplicationSecurity : (this.checkNotSafeValue(n, "Style"), function (l) {
                                    if (!(l = String(l).trim())) return "";
                                    const n = l.match(Mn);
                                    return n && dn(n[1]) === n[1] || l.match(Dn) && function (l) {
                                        let n = !0,
                                            e = !0;
                                        for (let t = 0; t < l.length; t++) {
                                            const i = l.charAt(t);
                                            "'" === i && e ? n = !n : '"' === i && n && (e = !e)
                                        }
                                        return n && e
                                    }(l) ? l : (rn() && console.warn(`WARNING: sanitizing unsafe style value ${l} (see http://g.co/ng/security#xss).`), "unsafe")
                                }(n));
                            case An.SCRIPT:
                                if (n instanceof Zc) return n.changingThisBreaksApplicationSecurity;
                                throw this.checkNotSafeValue(n, "Script"), new Error("unsafe value used in a script context");
                            case An.URL:
                                return n instanceof Yc || n instanceof Qc ? n.changingThisBreaksApplicationSecurity : (this.checkNotSafeValue(n, "URL"), dn(String(n)));
                            case An.RESOURCE_URL:
                                if (n instanceof Yc) return n.changingThisBreaksApplicationSecurity;
                                throw this.checkNotSafeValue(n, "ResourceURL"), new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");
                            default:
                                throw new Error(`Unexpected SecurityContext ${l} (see http://g.co/ng/security#xss)`)
                        }
                    }
                    checkNotSafeValue(l, n) {
                        if (l instanceof Gc) throw new Error(`Required a safe ${n}, got a ${l.getTypeName()} ` + "(see http://g.co/ng/security#xss)")
                    }
                    bypassSecurityTrustHtml(l) {
                        return new Wc(l)
                    }
                    bypassSecurityTrustStyle(l) {
                        return new Kc(l)
                    }
                    bypassSecurityTrustScript(l) {
                        return new Zc(l)
                    }
                    bypassSecurityTrustUrl(l) {
                        return new Qc(l)
                    }
                    bypassSecurityTrustResourceUrl(l) {
                        return new Yc(l)
                    }
                }
                class Gc {
                    constructor(l) {
                        this.changingThisBreaksApplicationSecurity = l
                    }
                    toString() {
                        return `SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}` + " (see http://g.co/ng/security#xss)"
                    }
                }
                class Wc extends Gc {
                    getTypeName() {
                        return "HTML"
                    }
                }
                class Kc extends Gc {
                    getTypeName() {
                        return "Style"
                    }
                }
                class Zc extends Gc {
                    getTypeName() {
                        return "Script"
                    }
                }
                class Qc extends Gc {
                    getTypeName() {
                        return "URL"
                    }
                }
                class Yc extends Gc {
                    getTypeName() {
                        return "ResourceURL"
                    }
                }
                const Xc = Os(Xs, "browser", [{
                    provide: Qi,
                    useValue: "browser"
                }, {
                    provide: Zi,
                    useValue: function () {
                        Zo.makeCurrent(), nc.init()
                    },
                    multi: !0
                }, {
                    provide: Or,
                    useClass: class extends Or {
                        constructor(l) {
                            super(), this._doc = l, this._init()
                        }
                        _init() {
                            this.location = qo().getLocation(), this._history = qo().getHistory()
                        }
                        getBaseHrefFromDOM() {
                            return qo().getBaseHref(this._doc)
                        }
                        onPopState(l) {
                            qo().getGlobalEventTarget(this._doc, "window").addEventListener("popstate", l, !1)
                        }
                        onHashChange(l) {
                            qo().getGlobalEventTarget(this._doc, "window").addEventListener("hashchange", l, !1)
                        }
                        get href() {
                            return this.location.href
                        }
                        get protocol() {
                            return this.location.protocol
                        }
                        get hostname() {
                            return this.location.hostname
                        }
                        get port() {
                            return this.location.port
                        }
                        get pathname() {
                            return this.location.pathname
                        }
                        get search() {
                            return this.location.search
                        }
                        get hash() {
                            return this.location.hash
                        }
                        set pathname(l) {
                            this.location.pathname = l
                        }
                        pushState(l, n, e) {
                            Xo() ? this._history.pushState(l, n, e) : this.location.hash = e
                        }
                        replaceState(l, n, e) {
                            Xo() ? this._history.replaceState(l, n, e) : this.location.hash = e
                        }
                        forward() {
                            this._history.forward()
                        }
                        back() {
                            this._history.back()
                        }
                        getState() {
                            return this._history.state
                        }
                    },
                    deps: [Ua]
                }, {
                    provide: Ua,
                    useFactory: function () {
                        return document
                    },
                    deps: []
                }]);

                function Jc() {
                    return new tn
                }
                class ld {
                    constructor(l) {
                        if (l) throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")
                    }
                    static withServerTransition(l) {
                        return {
                            ngModule: ld,
                            providers: [{
                                provide: Gi,
                                useValue: l.appId
                            }, {
                                provide: Jo,
                                useExisting: Gi
                            }, lc]
                        }
                    }
                }
                "undefined" != typeof window && window;
                class nd {
                    constructor(l, n) {
                        this.id = l, this.url = n
                    }
                }
                class ed extends nd {
                    constructor(l, n, e = "imperative", t = null) {
                        super(l, n), this.navigationTrigger = e, this.restoredState = t
                    }
                    toString() {
                        return `NavigationStart(id: ${this.id}, url: '${this.url}')`
                    }
                }
                class td extends nd {
                    constructor(l, n, e) {
                        super(l, n), this.urlAfterRedirects = e
                    }
                    toString() {
                        return `NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`
                    }
                }
                class id extends nd {
                    constructor(l, n, e) {
                        super(l, n), this.reason = e
                    }
                    toString() {
                        return `NavigationCancel(id: ${this.id}, url: '${this.url}')`
                    }
                }
                class sd extends nd {
                    constructor(l, n, e) {
                        super(l, n), this.error = e
                    }
                    toString() {
                        return `NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`
                    }
                }
                class ud extends nd {
                    constructor(l, n, e, t) {
                        super(l, n), this.urlAfterRedirects = e, this.state = t
                    }
                    toString() {
                        return `RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`
                    }
                }
                class rd extends nd {
                    constructor(l, n, e, t) {
                        super(l, n), this.urlAfterRedirects = e, this.state = t
                    }
                    toString() {
                        return `GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`
                    }
                }
                class ad extends nd {
                    constructor(l, n, e, t, i) {
                        super(l, n), this.urlAfterRedirects = e, this.state = t, this.shouldActivate = i
                    }
                    toString() {
                        return `GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`
                    }
                }
                class od extends nd {
                    constructor(l, n, e, t) {
                        super(l, n), this.urlAfterRedirects = e, this.state = t
                    }
                    toString() {
                        return `ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`
                    }
                }
                class cd extends nd {
                    constructor(l, n, e, t) {
                        super(l, n), this.urlAfterRedirects = e, this.state = t
                    }
                    toString() {
                        return `ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`
                    }
                }
                class dd {
                    constructor(l) {
                        this.route = l
                    }
                    toString() {
                        return `RouteConfigLoadStart(path: ${this.route.path})`
                    }
                }
                class hd {
                    constructor(l) {
                        this.route = l
                    }
                    toString() {
                        return `RouteConfigLoadEnd(path: ${this.route.path})`
                    }
                }
                class pd {
                    constructor(l) {
                        this.snapshot = l
                    }
                    toString() {
                        return `ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`
                    }
                }
                class fd {
                    constructor(l) {
                        this.snapshot = l
                    }
                    toString() {
                        return `ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`
                    }
                }
                class gd {
                    constructor(l) {
                        this.snapshot = l
                    }
                    toString() {
                        return `ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`
                    }
                }
                class md {
                    constructor(l) {
                        this.snapshot = l
                    }
                    toString() {
                        return `ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`
                    }
                }
                class yd {
                    constructor(l, n, e) {
                        this.routerEvent = l, this.position = n, this.anchor = e
                    }
                    toString() {
                        return `Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`
                    }
                }
                class vd {}
                const bd = "primary";
                class _d {
                    constructor(l) {
                        this.params = l || {}
                    }
                    has(l) {
                        return this.params.hasOwnProperty(l)
                    }
                    get(l) {
                        if (this.has(l)) {
                            const n = this.params[l];
                            return Array.isArray(n) ? n[0] : n
                        }
                        return null
                    }
                    getAll(l) {
                        if (this.has(l)) {
                            const n = this.params[l];
                            return Array.isArray(n) ? n : [n]
                        }
                        return []
                    }
                    get keys() {
                        return Object.keys(this.params)
                    }
                }

                function wd(l) {
                    return new _d(l)
                }
                const xd = "ngNavigationCancelingError";

                function kd(l) {
                    const n = Error("NavigationCancelingError: " + l);
                    return n[xd] = !0, n
                }

                function Sd(l, n, e) {
                    const t = e.path.split("/");
                    if (t.length > l.length) return null;
                    if ("full" === e.pathMatch && (n.hasChildren() || t.length < l.length)) return null;
                    const i = {};
                    for (let s = 0; s < t.length; s++) {
                        const n = t[s],
                            e = l[s];
                        if (n.startsWith(":")) i[n.substring(1)] = e;
                        else if (n !== e.path) return null
                    }
                    return {
                        consumed: l.slice(0, t.length),
                        posParams: i
                    }
                }
                class Cd {
                    constructor(l, n) {
                        this.routes = l, this.module = n
                    }
                }

                function Id(l, n = "") {
                    for (let e = 0; e < l.length; e++) {
                        const t = l[e];
                        Td(t, Ed(n, t))
                    }
                }

                function Td(l, n) {
                    if (!l) throw new Error(`\n      Invalid configuration of route '${n}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);
                    if (Array.isArray(l)) throw new Error(`Invalid configuration of route '${n}': Array cannot be specified`);
                    if (!l.component && !l.children && !l.loadChildren && l.outlet && l.outlet !== bd) throw new Error(`Invalid configuration of route '${n}': a componentless route without children or loadChildren cannot have a named outlet set`);
                    if (l.redirectTo && l.children) throw new Error(`Invalid configuration of route '${n}': redirectTo and children cannot be used together`);
                    if (l.redirectTo && l.loadChildren) throw new Error(`Invalid configuration of route '${n}': redirectTo and loadChildren cannot be used together`);
                    if (l.children && l.loadChildren) throw new Error(`Invalid configuration of route '${n}': children and loadChildren cannot be used together`);
                    if (l.redirectTo && l.component) throw new Error(`Invalid configuration of route '${n}': redirectTo and component cannot be used together`);
                    if (l.path && l.matcher) throw new Error(`Invalid configuration of route '${n}': path and matcher cannot be used together`);
                    if (void 0 === l.redirectTo && !l.component && !l.children && !l.loadChildren) throw new Error(`Invalid configuration of route '${n}'. One of the following must be provided: component, redirectTo, children or loadChildren`);
                    if (void 0 === l.path && void 0 === l.matcher) throw new Error(`Invalid configuration of route '${n}': routes must have either a path or a matcher specified`);
                    if ("string" == typeof l.path && "/" === l.path.charAt(0)) throw new Error(`Invalid configuration of route '${n}': path cannot start with a slash`);
                    if ("" === l.path && void 0 !== l.redirectTo && void 0 === l.pathMatch) throw new Error(`Invalid configuration of route '{path: "${n}", redirectTo: "${l.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);
                    if (void 0 !== l.pathMatch && "full" !== l.pathMatch && "prefix" !== l.pathMatch) throw new Error(`Invalid configuration of route '${n}': pathMatch can only be set to 'prefix' or 'full'`);
                    l.children && Id(l.children, n)
                }

                function Ed(l, n) {
                    return n ? l || n.path ? l && !n.path ? `${l}/` : !l && n.path ? n.path : `${l}/${n.path}` : "" : l
                }

                function Ad(l) {
                    const n = l.children && l.children.map(Ad),
                        e = n ? Object.assign({}, l, {
                            children: n
                        }) : Object.assign({}, l);
                    return !e.component && (n || e.loadChildren) && e.outlet && e.outlet !== bd && (e.component = vd), e
                }

                function Pd(l, n) {
                    const e = Object.keys(l),
                        t = Object.keys(n);
                    if (!e || !t || e.length != t.length) return !1;
                    let i;
                    for (let s = 0; s < e.length; s++)
                        if (l[i = e[s]] !== n[i]) return !1;
                    return !0
                }

                function Dd(l) {
                    return Array.prototype.concat.apply([], l)
                }

                function Md(l) {
                    return l.length > 0 ? l[l.length - 1] : null
                }

                function Od(l, n) {
                    for (const e in l) l.hasOwnProperty(e) && n(l[e], e)
                }

                function Nd(l) {
                    return te(l) ? l : ee(l) ? G(Promise.resolve(l)) : Za(l)
                }

                function Rd(l, n, e) {
                    return e ? function (l, n) {
                        return Pd(l, n)
                    }(l.queryParams, n.queryParams) && function l(n, e) {
                        if (!Ld(n.segments, e.segments)) return !1;
                        if (n.numberOfChildren !== e.numberOfChildren) return !1;
                        for (const t in e.children) {
                            if (!n.children[t]) return !1;
                            if (!l(n.children[t], e.children[t])) return !1
                        }
                        return !0
                    }(l.root, n.root) : function (l, n) {
                        return Object.keys(n).length <= Object.keys(l).length && Object.keys(n).every(e => n[e] === l[e])
                    }(l.queryParams, n.queryParams) && function l(n, e) {
                        return function n(e, t, i) {
                            if (e.segments.length > i.length) return !!Ld(e.segments.slice(0, i.length), i) && !t.hasChildren();
                            if (e.segments.length === i.length) {
                                if (!Ld(e.segments, i)) return !1;
                                for (const n in t.children) {
                                    if (!e.children[n]) return !1;
                                    if (!l(e.children[n], t.children[n])) return !1
                                }
                                return !0
                            } {
                                const l = i.slice(0, e.segments.length),
                                    s = i.slice(e.segments.length);
                                return !!Ld(e.segments, l) && !!e.children[bd] && n(e.children[bd], t, s)
                            }
                        }(n, e, e.segments)
                    }(l.root, n.root)
                }
                class Bd {
                    constructor(l, n, e) {
                        this.root = l, this.queryParams = n, this.fragment = e
                    }
                    get queryParamMap() {
                        return this._queryParamMap || (this._queryParamMap = wd(this.queryParams)), this._queryParamMap
                    }
                    toString() {
                        return Hd.serialize(this)
                    }
                }
                class zd {
                    constructor(l, n) {
                        this.segments = l, this.children = n, this.parent = null, Od(n, (l, n) => l.parent = this)
                    }
                    hasChildren() {
                        return this.numberOfChildren > 0
                    }
                    get numberOfChildren() {
                        return Object.keys(this.children).length
                    }
                    toString() {
                        return Vd(this)
                    }
                }
                class $d {
                    constructor(l, n) {
                        this.path = l, this.parameters = n
                    }
                    get parameterMap() {
                        return this._parameterMap || (this._parameterMap = wd(this.parameters)), this._parameterMap
                    }
                    toString() {
                        return Qd(this)
                    }
                }

                function Ld(l, n) {
                    return l.length === n.length && l.every((l, e) => l.path === n[e].path)
                }

                function Fd(l, n) {
                    let e = [];
                    return Od(l.children, (l, t) => {
                        t === bd && (e = e.concat(n(l, t)))
                    }), Od(l.children, (l, t) => {
                        t !== bd && (e = e.concat(n(l, t)))
                    }), e
                }
                class qd {}
                class Ud {
                    parse(l) {
                        const n = new nh(l);
                        return new Bd(n.parseRootSegment(), n.parseQueryParams(), n.parseFragment())
                    }
                    serialize(l) {
                        var n;
                        return `${`/${function l(n,e){if(!n.hasChildren())return Vd(n);if(e){const e=n.children[bd]?l(n.children[bd],!1):"",t=[];return Od(n.children,(n,e)=>{e!==bd&&t.push(`${e}:${l(n,!1)}`)}),t.length>0?`${e}(${t.join("//")})`: e
                    } {
                        const e = Fd(n, (e, t) => t === bd ? [l(n.children[bd], !1)] : [`${t}:${l(e,!1)}`]);
                        return `${Vd(n)}/(${e.join("//")})`
                    }
                }(l.root, !0)
            }
            `}${function(l){const n=Object.keys(l).map(n=>{const e=l[n];return Array.isArray(e)?e.map(l=>`${Gd(n)}=${Gd(l)}`).join("&"):`${Gd(n)}=${Gd(e)}`});return n.length?` ? $ {
                n.join("&")
            }
            `:""}(l.queryParams)}${"string"==typeof l.fragment?`#${n=l.fragment,encodeURI(n)}`:""}`
        }
    }
    const Hd = new Ud;

    function Vd(l) {
        return l.segments.map(l => Qd(l)).join("/")
    }

    function jd(l) {
        return encodeURIComponent(l).replace(/%40/g, "@").replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",")
    }

    function Gd(l) {
        return jd(l).replace(/%3B/gi, ";")
    }

    function Wd(l) {
        return jd(l).replace(/\(/g, "%28").replace(/\)/g, "%29").replace(/%26/gi, "&")
    }

    function Kd(l) {
        return decodeURIComponent(l)
    }

    function Zd(l) {
        return Kd(l.replace(/\+/g, "%20"))
    }

    function Qd(l) {
        return `${Wd(l.path)}${n=l.parameters,Object.keys(n).map(l=>`;${Wd(l)}=${Wd(n[l])}`).join("")}`;
        var n
    }
    const Yd = /^[^\/()?;=#]+/;

    function Xd(l) {
        const n = l.match(Yd);
        return n ? n[0] : ""
    }
    const Jd = /^[^=?&#]+/, lh = /^[^?&#]+/; class nh {
        constructor(l) {
            this.url = l, this.remaining = l
        }
        parseRootSegment() {
            return this.consumeOptional("/"), "" === this.remaining || this.peekStartsWith("?") || this.peekStartsWith("#") ? new zd([], {}) : new zd([], this.parseChildren())
        }
        parseQueryParams() {
            const l = {};
            if (this.consumeOptional("?"))
                do {
                    this.parseQueryParam(l)
                } while (this.consumeOptional("&"));
            return l
        }
        parseFragment() {
            return this.consumeOptional("#") ? decodeURIComponent(this.remaining) : null
        }
        parseChildren() {
            if ("" === this.remaining) return {};
            this.consumeOptional("/");
            const l = [];
            for (this.peekStartsWith("(") || l.push(this.parseSegment()); this.peekStartsWith("/") && !this.peekStartsWith("//") && !this.peekStartsWith("/(");) this.capture("/"), l.push(this.parseSegment());
            let n = {};
            this.peekStartsWith("/(") && (this.capture("/"), n = this.parseParens(!0));
            let e = {};
            return this.peekStartsWith("(") && (e = this.parseParens(!1)), (l.length > 0 || Object.keys(n).length > 0) && (e[bd] = new zd(l, n)), e
        }
        parseSegment() {
            const l = Xd(this.remaining);
            if ("" === l && this.peekStartsWith(";")) throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);
            return this.capture(l), new $d(Kd(l), this.parseMatrixParams())
        }
        parseMatrixParams() {
            const l = {};
            for (; this.consumeOptional(";");) this.parseParam(l);
            return l
        }
        parseParam(l) {
            const n = Xd(this.remaining);
            if (!n) return;
            this.capture(n);
            let e = "";
            if (this.consumeOptional("=")) {
                const l = Xd(this.remaining);
                l && this.capture(e = l)
            }
            l[Kd(n)] = Kd(e)
        }
        parseQueryParam(l) {
            const n = function (l) {
                const n = l.match(Jd);
                return n ? n[0] : ""
            }(this.remaining);
            if (!n) return;
            this.capture(n);
            let e = "";
            if (this.consumeOptional("=")) {
                const l = function (l) {
                    const n = l.match(lh);
                    return n ? n[0] : ""
                }(this.remaining);
                l && this.capture(e = l)
            }
            const t = Zd(n),
                i = Zd(e);
            if (l.hasOwnProperty(t)) {
                let n = l[t];
                Array.isArray(n) || (l[t] = n = [n]), n.push(i)
            } else l[t] = i
        }
        parseParens(l) {
            const n = {};
            for (this.capture("("); !this.consumeOptional(")") && this.remaining.length > 0;) {
                const e = Xd(this.remaining),
                    t = this.remaining[e.length];
                if ("/" !== t && ")" !== t && ";" !== t) throw new Error(`Cannot parse url '${this.url}'`);
                let i = void 0;
                e.indexOf(":") > -1 ? (i = e.substr(0, e.indexOf(":")), this.capture(i), this.capture(":")) : l && (i = bd);
                const s = this.parseChildren();
                n[i] = 1 === Object.keys(s).length ? s[bd] : new zd([], s), this.consumeOptional("//")
            }
            return n
        }
        peekStartsWith(l) {
            return this.remaining.startsWith(l)
        }
        consumeOptional(l) {
            return !!this.peekStartsWith(l) && (this.remaining = this.remaining.substring(l.length), !0)
        }
        capture(l) {
            if (!this.consumeOptional(l)) throw new Error(`Expected "${l}".`)
        }
    }
    class eh {
        constructor(l) {
            this._root = l
        }
        get root() {
            return this._root.value
        }
        parent(l) {
            const n = this.pathFromRoot(l);
            return n.length > 1 ? n[n.length - 2] : null
        }
        children(l) {
            const n = th(l, this._root);
            return n ? n.children.map(l => l.value) : []
        }
        firstChild(l) {
            const n = th(l, this._root);
            return n && n.children.length > 0 ? n.children[0].value : null
        }
        siblings(l) {
            const n = ih(l, this._root);
            return n.length < 2 ? [] : n[n.length - 2].children.map(l => l.value).filter(n => n !== l)
        }
        pathFromRoot(l) {
            return ih(l, this._root).map(l => l.value)
        }
    }

    function th(l, n) {
        if (l === n.value) return n;
        for (const e of n.children) {
            const n = th(l, e);
            if (n) return n
        }
        return null
    }

    function ih(l, n) {
        if (l === n.value) return [n];
        for (const e of n.children) {
            const t = ih(l, e);
            if (t.length) return t.unshift(n), t
        }
        return []
    }
    class sh {
        constructor(l, n) {
            this.value = l, this.children = n
        }
        toString() {
            return `TreeNode(${this.value})`
        }
    }

    function uh(l) {
        const n = {};
        return l && l.children.forEach(l => n[l.value.outlet] = l), n
    }
    class rh extends eh {
        constructor(l, n) {
            super(l), this.snapshot = n, ph(this, l)
        }
        toString() {
            return this.snapshot.toString()
        }
    }

    function ah(l, n) {
        const e = function (l, n) {
                const e = new dh([], {}, {}, "", {}, bd, n, null, l.root, -1, {});
                return new hh("", new sh(e, []))
            }(l, n),
            t = new Qa([new $d("", {})]),
            i = new Qa({}),
            s = new Qa({}),
            u = new Qa({}),
            r = new Qa(""),
            a = new oh(t, i, u, r, s, bd, n, e.root);
        return a.snapshot = e.root, new rh(new sh(a, []), e)
    }
    class oh {
        constructor(l, n, e, t, i, s, u, r) {
            this.url = l, this.params = n, this.queryParams = e, this.fragment = t, this.data = i, this.outlet = s, this.component = u, this._futureSnapshot = r
        }
        get routeConfig() {
            return this._futureSnapshot.routeConfig
        }
        get root() {
            return this._routerState.root
        }
        get parent() {
            return this._routerState.parent(this)
        }
        get firstChild() {
            return this._routerState.firstChild(this)
        }
        get children() {
            return this._routerState.children(this)
        }
        get pathFromRoot() {
            return this._routerState.pathFromRoot(this)
        }
        get paramMap() {
            return this._paramMap || (this._paramMap = this.params.pipe(U(l => wd(l)))), this._paramMap
        }
        get queryParamMap() {
            return this._queryParamMap || (this._queryParamMap = this.queryParams.pipe(U(l => wd(l)))), this._queryParamMap
        }
        toString() {
            return this.snapshot ? this.snapshot.toString() : `Future(${this._futureSnapshot})`
        }
    }

    function ch(l, n = "emptyOnly") {
        const e = l.pathFromRoot;
        let t = 0;
        if ("always" !== n)
            for (t = e.length - 1; t >= 1;) {
                const l = e[t],
                    n = e[t - 1];
                if (l.routeConfig && "" === l.routeConfig.path) t--;
                else {
                    if (n.component) break;
                    t--
                }
            }
        return function (l) {
            return l.reduce((l, n) => ({
                params: Object.assign({}, l.params, n.params),
                data: Object.assign({}, l.data, n.data),
                resolve: Object.assign({}, l.resolve, n._resolvedData)
            }), {
                params: {},
                data: {},
                resolve: {}
            })
        }(e.slice(t))
    }
    class dh {
        constructor(l, n, e, t, i, s, u, r, a, o, c) {
            this.url = l, this.params = n, this.queryParams = e, this.fragment = t, this.data = i, this.outlet = s, this.component = u, this.routeConfig = r, this._urlSegment = a, this._lastPathIndex = o, this._resolve = c
        }
        get root() {
            return this._routerState.root
        }
        get parent() {
            return this._routerState.parent(this)
        }
        get firstChild() {
            return this._routerState.firstChild(this)
        }
        get children() {
            return this._routerState.children(this)
        }
        get pathFromRoot() {
            return this._routerState.pathFromRoot(this)
        }
        get paramMap() {
            return this._paramMap || (this._paramMap = wd(this.params)), this._paramMap
        }
        get queryParamMap() {
            return this._queryParamMap || (this._queryParamMap = wd(this.queryParams)), this._queryParamMap
        }
        toString() {
            return `Route(url:'${this.url.map(l=>l.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`
        }
    }
    class hh extends eh {
        constructor(l, n) {
            super(n), this.url = l, ph(this, n)
        }
        toString() {
            return fh(this._root)
        }
    }

    function ph(l, n) {
        n.value._routerState = l, n.children.forEach(n => ph(l, n))
    }

    function fh(l) {
        const n = l.children.length > 0 ? ` { ${l.children.map(fh).join(", ")} } ` : "";
        return `${l.value}${n}`
    }

    function gh(l) {
        if (l.snapshot) {
            const n = l.snapshot,
                e = l._futureSnapshot;
            l.snapshot = e, Pd(n.queryParams, e.queryParams) || l.queryParams.next(e.queryParams), n.fragment !== e.fragment && l.fragment.next(e.fragment), Pd(n.params, e.params) || l.params.next(e.params),
                function (l, n) {
                    if (l.length !== n.length) return !1;
                    for (let e = 0; e < l.length; ++e)
                        if (!Pd(l[e], n[e])) return !1;
                    return !0
                }(n.url, e.url) || l.url.next(e.url), Pd(n.data, e.data) || l.data.next(e.data)
        } else l.snapshot = l._futureSnapshot, l.data.next(l._futureSnapshot.data)
    }

    function mh(l, n) {
        var e, t;
        return Pd(l.params, n.params) && Ld(e = l.url, t = n.url) && e.every((l, n) => Pd(l.parameters, t[n].parameters)) && !(!l.parent != !n.parent) && (!l.parent || mh(l.parent, n.parent))
    }

    function yh(l) {
        return "object" == typeof l && null != l && !l.outlets && !l.segmentPath
    }

    function vh(l, n, e, t, i) {
        let s = {};
        return t && Od(t, (l, n) => {
            s[n] = Array.isArray(l) ? l.map(l => `${l}`) : `${l}`
        }), new Bd(e.root === l ? n : function l(n, e, t) {
            const i = {};
            return Od(n.children, (n, s) => {
                i[s] = n === e ? t : l(n, e, t)
            }), new zd(n.segments, i)
        }(e.root, l, n), s, i)
    }
    class bh {
        constructor(l, n, e) {
            if (this.isAbsolute = l, this.numberOfDoubleDots = n, this.commands = e, l && e.length > 0 && yh(e[0])) throw new Error("Root segment cannot have matrix parameters");
            const t = e.find(l => "object" == typeof l && null != l && l.outlets);
            if (t && t !== Md(e)) throw new Error("{outlets:{}} has to be the last command")
        }
        toRoot() {
            return this.isAbsolute && 1 === this.commands.length && "/" == this.commands[0]
        }
    }
    class _h {
        constructor(l, n, e) {
            this.segmentGroup = l, this.processChildren = n, this.index = e
        }
    }

    function wh(l) {
        return "object" == typeof l && null != l && l.outlets ? l.outlets[bd] : `${l}`
    }

    function xh(l, n, e) {
        if (l || (l = new zd([], {})), 0 === l.segments.length && l.hasChildren()) return kh(l, n, e);
        const t = function (l, n, e) {
                let t = 0,
                    i = n;
                const s = {
                    match: !1,
                    pathIndex: 0,
                    commandIndex: 0
                };
                for (; i < l.segments.length;) {
                    if (t >= e.length) return s;
                    const n = l.segments[i],
                        u = wh(e[t]),
                        r = t < e.length - 1 ? e[t + 1] : null;
                    if (i > 0 && void 0 === u) break;
                    if (u && r && "object" == typeof r && void 0 === r.outlets) {
                        if (!Th(u, r, n)) return s;
                        t += 2
                    } else {
                        if (!Th(u, {}, n)) return s;
                        t++
                    }
                    i++
                }
                return {
                    match: !0,
                    pathIndex: i,
                    commandIndex: t
                }
            }(l, n, e),
            i = e.slice(t.commandIndex);
        if (t.match && t.pathIndex < l.segments.length) {
            const n = new zd(l.segments.slice(0, t.pathIndex), {});
            return n.children[bd] = new zd(l.segments.slice(t.pathIndex), l.children), kh(n, 0, i)
        }
        return t.match && 0 === i.length ? new zd(l.segments, {}) : t.match && !l.hasChildren() ? Sh(l, n, e) : t.match ? kh(l, 0, i) : Sh(l, n, e)
    }

    function kh(l, n, e) {
        if (0 === e.length) return new zd(l.segments, {}); {
            const t = function (l) {
                    return "object" != typeof l[0] ? {
                        [bd]: l
                    } : void 0 === l[0].outlets ? {
                        [bd]: l
                    } : l[0].outlets
                }(e),
                i = {};
            return Od(t, (e, t) => {
                null !== e && (i[t] = xh(l.children[t], n, e))
            }), Od(l.children, (l, n) => {
                void 0 === t[n] && (i[n] = l)
            }), new zd(l.segments, i)
        }
    }

    function Sh(l, n, e) {
        const t = l.segments.slice(0, n);
        let i = 0;
        for (; i < e.length;) {
            if ("object" == typeof e[i] && void 0 !== e[i].outlets) {
                const l = Ch(e[i].outlets);
                return new zd(t, l)
            }
            if (0 === i && yh(e[0])) {
                t.push(new $d(l.segments[n].path, e[0])), i++;
                continue
            }
            const s = wh(e[i]),
                u = i < e.length - 1 ? e[i + 1] : null;
            s && u && yh(u) ? (t.push(new $d(s, Ih(u))), i += 2) : (t.push(new $d(s, {})), i++)
        }
        return new zd(t, {})
    }

    function Ch(l) {
        const n = {};
        return Od(l, (l, e) => {
            null !== l && (n[e] = Sh(new zd([], {}), 0, l))
        }), n
    }

    function Ih(l) {
        const n = {};
        return Od(l, (l, e) => n[e] = `${l}`), n
    }

    function Th(l, n, e) {
        return l == e.path && Pd(n, e.parameters)
    }
    const Eh = (l, n, e) => U(t => (new Ah(n, t.targetRouterState, t.currentRouterState, e).activate(l), t)); class Ah {
        constructor(l, n, e, t) {
            this.routeReuseStrategy = l, this.futureState = n, this.currState = e, this.forwardEvent = t
        }
        activate(l) {
            const n = this.futureState._root,
                e = this.currState ? this.currState._root : null;
            this.deactivateChildRoutes(n, e, l), gh(this.futureState.root), this.activateChildRoutes(n, e, l)
        }
        deactivateChildRoutes(l, n, e) {
            const t = uh(n);
            l.children.forEach(l => {
                const n = l.value.outlet;
                this.deactivateRoutes(l, t[n], e), delete t[n]
            }), Od(t, (l, n) => {
                this.deactivateRouteAndItsChildren(l, e)
            })
        }
        deactivateRoutes(l, n, e) {
            const t = l.value,
                i = n ? n.value : null;
            if (t === i)
                if (t.component) {
                    const i = e.getContext(t.outlet);
                    i && this.deactivateChildRoutes(l, n, i.children)
                } else this.deactivateChildRoutes(l, n, e);
            else i && this.deactivateRouteAndItsChildren(n, e)
        }
        deactivateRouteAndItsChildren(l, n) {
            this.routeReuseStrategy.shouldDetach(l.value.snapshot) ? this.detachAndStoreRouteSubtree(l, n) : this.deactivateRouteAndOutlet(l, n)
        }
        detachAndStoreRouteSubtree(l, n) {
            const e = n.getContext(l.value.outlet);
            if (e && e.outlet) {
                const n = e.outlet.detach(),
                    t = e.children.onOutletDeactivated();
                this.routeReuseStrategy.store(l.value.snapshot, {
                    componentRef: n,
                    route: l,
                    contexts: t
                })
            }
        }
        deactivateRouteAndOutlet(l, n) {
            const e = n.getContext(l.value.outlet);
            if (e) {
                const t = uh(l),
                    i = l.value.component ? e.children : n;
                Od(t, (l, n) => this.deactivateRouteAndItsChildren(l, i)), e.outlet && (e.outlet.deactivate(), e.children.onOutletDeactivated())
            }
        }
        activateChildRoutes(l, n, e) {
            const t = uh(n);
            l.children.forEach(l => {
                this.activateRoutes(l, t[l.value.outlet], e), this.forwardEvent(new md(l.value.snapshot))
            }), l.children.length && this.forwardEvent(new fd(l.value.snapshot))
        }
        activateRoutes(l, n, e) {
            const t = l.value,
                i = n ? n.value : null;
            if (gh(t), t === i)
                if (t.component) {
                    const i = e.getOrCreateContext(t.outlet);
                    this.activateChildRoutes(l, n, i.children)
                } else this.activateChildRoutes(l, n, e);
            else if (t.component) {
                const n = e.getOrCreateContext(t.outlet);
                if (this.routeReuseStrategy.shouldAttach(t.snapshot)) {
                    const l = this.routeReuseStrategy.retrieve(t.snapshot);
                    this.routeReuseStrategy.store(t.snapshot, null), n.children.onOutletReAttached(l.contexts), n.attachRef = l.componentRef, n.route = l.route.value, n.outlet && n.outlet.attach(l.componentRef, l.route.value), Ph(l.route)
                } else {
                    const e = function (l) {
                            for (let n = l.parent; n; n = n.parent) {
                                const l = n.routeConfig;
                                if (l && l._loadedConfig) return l._loadedConfig;
                                if (l && l.component) return null
                            }
                            return null
                        }(t.snapshot),
                        i = e ? e.module.componentFactoryResolver : null;
                    n.attachRef = null, n.route = t, n.resolver = i, n.outlet && n.outlet.activateWith(t, i), this.activateChildRoutes(l, null, n.children)
                }
            } else this.activateChildRoutes(l, null, e)
        }
    }

    function Ph(l) {
        gh(l.value), l.children.forEach(Ph)
    }

    function Dh(l) {
        return "function" == typeof l
    }

    function Mh(l) {
        return l instanceof Bd
    }
    class Oh {
        constructor(l) {
            this.segmentGroup = l || null
        }
    }
    class Nh {
        constructor(l) {
            this.urlTree = l
        }
    }

    function Rh(l) {
        return new w(n => n.error(new Oh(l)))
    }

    function Bh(l) {
        return new w(n => n.error(new Nh(l)))
    }

    function zh(l) {
        return new w(n => n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${l}'`)))
    }
    class $h {
        constructor(l, n, e, t, i) {
            this.configLoader = n, this.urlSerializer = e, this.urlTree = t, this.config = i, this.allowRedirects = !0, this.ngModule = l.get(jl)
        }
        apply() {
            return this.expandSegmentGroup(this.ngModule, this.config, this.urlTree.root, bd).pipe(U(l => this.createUrlTree(l, this.urlTree.queryParams, this.urlTree.fragment))).pipe(xo(l => {
                if (l instanceof Nh) return this.allowRedirects = !1, this.match(l.urlTree);
                if (l instanceof Oh) throw this.noMatchError(l);
                throw l
            }))
        }
        match(l) {
            return this.expandSegmentGroup(this.ngModule, this.config, l.root, bd).pipe(U(n => this.createUrlTree(n, l.queryParams, l.fragment))).pipe(xo(l => {
                if (l instanceof Oh) throw this.noMatchError(l);
                throw l
            }))
        }
        noMatchError(l) {
            return new Error(`Cannot match any routes. URL Segment: '${l.segmentGroup}'`)
        }
        createUrlTree(l, n, e) {
            const t = l.segments.length > 0 ? new zd([], {
                [bd]: l
            }) : l;
            return new Bd(t, n, e)
        }
        expandSegmentGroup(l, n, e, t) {
            return 0 === e.segments.length && e.hasChildren() ? this.expandChildren(l, n, e).pipe(U(l => new zd([], l))) : this.expandSegment(l, e, n, e.segments, t, !0)
        }
        expandChildren(l, n, e) {
            return function (l, n) {
                if (0 === Object.keys(l).length) return Za({});
                const e = [],
                    t = [],
                    i = {};
                return Od(l, (l, s) => {
                    const u = n(s, l).pipe(U(l => i[s] = l));
                    s === bd ? e.push(u) : t.push(u)
                }), Za.apply(null, e.concat(t)).pipe(to(), wo(), U(() => i))
            }(e.children, (e, t) => this.expandSegmentGroup(l, n, t, e))
        }
        expandSegment(l, n, e, t, i, s) {
            return Za(...e).pipe(U(u => this.expandSegmentAgainstRoute(l, n, e, u, t, i, s).pipe(xo(l => {
                if (l instanceof Oh) return Za(null);
                throw l
            }))), to(), Eo(l => !!l), xo((l, e) => {
                if (l instanceof Xa || "EmptyError" === l.name) {
                    if (this.noLeftoversInUrl(n, t, i)) return Za(new zd([], {}));
                    throw new Oh(n)
                }
                throw l
            }))
        }
        noLeftoversInUrl(l, n, e) {
            return 0 === n.length && !l.children[e]
        }
        expandSegmentAgainstRoute(l, n, e, t, i, s, u) {
            return Uh(t) !== s ? Rh(n) : void 0 === t.redirectTo ? this.matchSegmentAgainstRoute(l, n, t, i) : u && this.allowRedirects ? this.expandSegmentAgainstRouteUsingRedirect(l, n, e, t, i, s) : Rh(n)
        }
        expandSegmentAgainstRouteUsingRedirect(l, n, e, t, i, s) {
            return "**" === t.path ? this.expandWildCardWithParamsAgainstRouteUsingRedirect(l, e, t, s) : this.expandRegularSegmentAgainstRouteUsingRedirect(l, n, e, t, i, s)
        }
        expandWildCardWithParamsAgainstRouteUsingRedirect(l, n, e, t) {
            const i = this.applyRedirectCommands([], e.redirectTo, {});
            return e.redirectTo.startsWith("/") ? Bh(i) : this.lineralizeSegments(e, i).pipe(W(e => {
                const i = new zd(e, {});
                return this.expandSegment(l, i, n, e, t, !1)
            }))
        }
        expandRegularSegmentAgainstRouteUsingRedirect(l, n, e, t, i, s) {
            const {
                matched: u,
                consumedSegments: r,
                lastChild: a,
                positionalParamSegments: o
            } = Lh(n, t, i);
            if (!u) return Rh(n);
            const c = this.applyRedirectCommands(r, t.redirectTo, o);
            return t.redirectTo.startsWith("/") ? Bh(c) : this.lineralizeSegments(t, c).pipe(W(t => this.expandSegment(l, n, e, t.concat(i.slice(a)), s, !1)))
        }
        matchSegmentAgainstRoute(l, n, e, t) {
            if ("**" === e.path) return e.loadChildren ? this.configLoader.load(l.injector, e).pipe(U(l => (e._loadedConfig = l, new zd(t, {})))) : Za(new zd(t, {}));
            const {
                matched: i,
                consumedSegments: s,
                lastChild: u
            } = Lh(n, e, t);
            if (!i) return Rh(n);
            const r = t.slice(u);
            return this.getChildConfig(l, e, t).pipe(W(l => {
                const e = l.module,
                    t = l.routes,
                    {
                        segmentGroup: i,
                        slicedSegments: u
                    } = function (l, n, e, t) {
                        return e.length > 0 && function (l, n, e) {
                            return e.some(e => qh(l, n, e) && Uh(e) !== bd)
                        }(l, e, t) ? {
                            segmentGroup: Fh(new zd(n, function (l, n) {
                                const e = {};
                                e[bd] = n;
                                for (const t of l) "" === t.path && Uh(t) !== bd && (e[Uh(t)] = new zd([], {}));
                                return e
                            }(t, new zd(e, l.children)))),
                            slicedSegments: []
                        } : 0 === e.length && function (l, n, e) {
                            return e.some(e => qh(l, n, e))
                        }(l, e, t) ? {
                            segmentGroup: Fh(new zd(l.segments, function (l, n, e, t) {
                                const i = {};
                                for (const s of e) qh(l, n, s) && !t[Uh(s)] && (i[Uh(s)] = new zd([], {}));
                                return Object.assign({}, t, i)
                            }(l, e, t, l.children))),
                            slicedSegments: e
                        } : {
                            segmentGroup: l,
                            slicedSegments: e
                        }
                    }(n, s, r, t);
                return 0 === u.length && i.hasChildren() ? this.expandChildren(e, t, i).pipe(U(l => new zd(s, l))) : 0 === t.length && 0 === u.length ? Za(new zd(s, {})) : this.expandSegment(e, i, t, u, bd, !0).pipe(U(l => new zd(s.concat(l.segments), l.children)))
            }))
        }
        getChildConfig(l, n, e) {
            return n.children ? Za(new Cd(n.children, l)) : n.loadChildren ? void 0 !== n._loadedConfig ? Za(n._loadedConfig) : function (l, n, e) {
                const t = n.canLoad;
                return t && 0 !== t.length ? G(t).pipe(U(t => {
                    const i = l.get(t);
                    let s;
                    if (function (l) {
                            return l && Dh(l.canLoad)
                        }(i)) s = i.canLoad(n, e);
                    else {
                        if (!Dh(i)) throw new Error("Invalid CanLoad guard");
                        s = i(n, e)
                    }
                    return Nd(s)
                })).pipe(to(), (i = l => !0 === l, l => l.lift(new Ao(i, void 0, l)))) : Za(!0);
                var i
            }(l.injector, n, e).pipe(W(e => e ? this.configLoader.load(l.injector, n).pipe(U(l => (n._loadedConfig = l, l))) : function (l) {
                return new w(n => n.error(kd(`Cannot load children because the guard of the route "path: '${l.path}'" returned false`)))
            }(n))) : Za(new Cd([], l))
        }
        lineralizeSegments(l, n) {
            let e = [],
                t = n.root;
            for (;;) {
                if (e = e.concat(t.segments), 0 === t.numberOfChildren) return Za(e);
                if (t.numberOfChildren > 1 || !t.children[bd]) return zh(l.redirectTo);
                t = t.children[bd]
            }
        }
        applyRedirectCommands(l, n, e) {
            return this.applyRedirectCreatreUrlTree(n, this.urlSerializer.parse(n), l, e)
        }
        applyRedirectCreatreUrlTree(l, n, e, t) {
            const i = this.createSegmentGroup(l, n.root, e, t);
            return new Bd(i, this.createQueryParams(n.queryParams, this.urlTree.queryParams), n.fragment)
        }
        createQueryParams(l, n) {
            const e = {};
            return Od(l, (l, t) => {
                if ("string" == typeof l && l.startsWith(":")) {
                    const i = l.substring(1);
                    e[t] = n[i]
                } else e[t] = l
            }), e
        }
        createSegmentGroup(l, n, e, t) {
            const i = this.createSegments(l, n.segments, e, t);
            let s = {};
            return Od(n.children, (n, i) => {
                s[i] = this.createSegmentGroup(l, n, e, t)
            }), new zd(i, s)
        }
        createSegments(l, n, e, t) {
            return n.map(n => n.path.startsWith(":") ? this.findPosParam(l, n, t) : this.findOrReturn(n, e))
        }
        findPosParam(l, n, e) {
            const t = e[n.path.substring(1)];
            if (!t) throw new Error(`Cannot redirect to '${l}'. Cannot find '${n.path}'.`);
            return t
        }
        findOrReturn(l, n) {
            let e = 0;
            for (const t of n) {
                if (t.path === l.path) return n.splice(e), t;
                e++
            }
            return l
        }
    }

    function Lh(l, n, e) {
        if ("" === n.path) return "full" === n.pathMatch && (l.hasChildren() || e.length > 0) ? {
            matched: !1,
            consumedSegments: [],
            lastChild: 0,
            positionalParamSegments: {}
        } : {
            matched: !0,
            consumedSegments: [],
            lastChild: 0,
            positionalParamSegments: {}
        };
        const t = (n.matcher || Sd)(e, l, n);
        return t ? {
            matched: !0,
            consumedSegments: t.consumed,
            lastChild: t.consumed.length,
            positionalParamSegments: t.posParams
        } : {
            matched: !1,
            consumedSegments: [],
            lastChild: 0,
            positionalParamSegments: {}
        }
    }

    function Fh(l) {
        if (1 === l.numberOfChildren && l.children[bd]) {
            const n = l.children[bd];
            return new zd(l.segments.concat(n.segments), n.children)
        }
        return l
    }

    function qh(l, n, e) {
        return (!(l.hasChildren() || n.length > 0) || "full" !== e.pathMatch) && "" === e.path && void 0 !== e.redirectTo
    }

    function Uh(l) {
        return l.outlet || bd
    }
    class Hh {
        constructor(l) {
            this.path = l, this.route = this.path[this.path.length - 1]
        }
    }
    class Vh {
        constructor(l, n) {
            this.component = l, this.route = n
        }
    }

    function jh(l, n, e) {
        const t = l._root;
        return function l(n, e, t, i, s = {
            canDeactivateChecks: [],
            canActivateChecks: []
        }) {
            const u = uh(e);
            return n.children.forEach(n => {
                ! function (n, e, t, i, s = {
                    canDeactivateChecks: [],
                    canActivateChecks: []
                }) {
                    const u = n.value,
                        r = e ? e.value : null,
                        a = t ? t.getContext(n.value.outlet) : null;
                    if (r && u.routeConfig === r.routeConfig) {
                        const o = function (l, n, e) {
                            if ("function" == typeof e) return e(l, n);
                            switch (e) {
                                case "pathParamsChange":
                                    return !Ld(l.url, n.url);
                                case "pathParamsOrQueryParamsChange":
                                    return !Ld(l.url, n.url) || !Pd(l.queryParams, n.queryParams);
                                case "always":
                                    return !0;
                                case "paramsOrQueryParamsChange":
                                    return !mh(l, n) || !Pd(l.queryParams, n.queryParams);
                                case "paramsChange":
                                default:
                                    return !mh(l, n)
                            }
                        }(r, u, u.routeConfig.runGuardsAndResolvers);
                        o ? s.canActivateChecks.push(new Hh(i)) : (u.data = r.data, u._resolvedData = r._resolvedData), l(n, e, u.component ? a ? a.children : null : t, i, s), o && s.canDeactivateChecks.push(new Vh(a && a.outlet && a.outlet.component || null, r))
                    } else r && Wh(e, a, s), s.canActivateChecks.push(new Hh(i)), l(n, null, u.component ? a ? a.children : null : t, i, s)
                }(n, u[n.value.outlet], t, i.concat([n.value]), s), delete u[n.value.outlet]
            }), Od(u, (l, n) => Wh(l, t.getContext(n), s)), s
        }(t, n ? n._root : null, e, [t.value])
    }

    function Gh(l, n, e) {
        const t = function (l) {
            if (!l) return null;
            for (let n = l.parent; n; n = n.parent) {
                const l = n.routeConfig;
                if (l && l._loadedConfig) return l._loadedConfig
            }
            return null
        }(n);
        return (t ? t.module.injector : e).get(l)
    }

    function Wh(l, n, e) {
        const t = uh(l),
            i = l.value;
        Od(t, (l, t) => {
            Wh(l, i.component ? n ? n.children.getContext(t) : null : n, e)
        }), e.canDeactivateChecks.push(new Vh(i.component && n && n.outlet && n.outlet.isActivated ? n.outlet.component : null, i))
    }
    const Kh = Symbol("INITIAL_VALUE");

    function Zh() {
        return Do(l => (function (...l) {
            let n = null,
                e = null;
            return A(l[l.length - 1]) && (e = l.pop()), "function" == typeof l[l.length - 1] && (n = l.pop()), 1 === l.length && a(l[0]) && (l = l[0]), j(l, e).lift(new lo(n))
        })(...l.map(l => l.pipe(Co(1), function (...l) {
            return n => {
                let e = l[l.length - 1];
                A(e) ? l.pop() : e = null;
                const t = l.length;
                return function (...l) {
                    return to()(Za(...l))
                }(1 !== t || e ? t > 0 ? j(l, e) : Wa(e) : Ka(l[0]), n)
            }
        }(Kh)))).pipe(No((l, n) => {
            let e = !1;
            return n.reduce((l, t, i) => {
                if (l !== Kh) return l;
                if (t === Kh && (e = !0), !e) {
                    if (!1 === t) return t;
                    if (i === n.length - 1 || Mh(t)) return t
                }
                return l
            }, l)
        }, Kh), io(l => l !== Kh), U(l => Mh(l) ? l : !0 === l), Co(1)))
    }

    function Qh(l, n) {
        return null !== l && n && n(new gd(l)), Za(!0)
    }

    function Yh(l, n) {
        return null !== l && n && n(new pd(l)), Za(!0)
    }

    function Xh(l, n, e) {
        const t = n.routeConfig ? n.routeConfig.canActivate : null;
        return t && 0 !== t.length ? Za(t.map(t => eo(() => {
            const i = Gh(t, n, e);
            let s;
            if (function (l) {
                    return l && Dh(l.canActivate)
                }(i)) s = Nd(i.canActivate(n, l));
            else {
                if (!Dh(i)) throw new Error("Invalid CanActivate guard");
                s = Nd(i(n, l))
            }
            return s.pipe(Eo())
        }))).pipe(Zh()) : Za(!0)
    }

    function Jh(l, n, e) {
        const t = n[n.length - 1],
            i = n.slice(0, n.length - 1).reverse().map(l => (function (l) {
                const n = l.routeConfig ? l.routeConfig.canActivateChild : null;
                return n && 0 !== n.length ? {
                    node: l,
                    guards: n
                } : null
            })(l)).filter(l => null !== l).map(n => eo(() => Za(n.guards.map(i => {
                const s = Gh(i, n.node, e);
                let u;
                if (function (l) {
                        return l && Dh(l.canActivateChild)
                    }(s)) u = Nd(s.canActivateChild(t, l));
                else {
                    if (!Dh(s)) throw new Error("Invalid CanActivateChild guard");
                    u = Nd(s(t, l))
                }
                return u.pipe(Eo())
            })).pipe(Zh())));
        return Za(i).pipe(Zh())
    }
    class lp {}
    class np {
        constructor(l, n, e, t, i, s) {
            this.rootComponentType = l, this.config = n, this.urlTree = e, this.url = t, this.paramsInheritanceStrategy = i, this.relativeLinkResolution = s
        }
        recognize() {
            try {
                const l = ip(this.urlTree.root, [], [], this.config, this.relativeLinkResolution).segmentGroup,
                    n = this.processSegmentGroup(this.config, l, bd),
                    e = new dh([], Object.freeze({}), Object.freeze(Object.assign({}, this.urlTree.queryParams)), this.urlTree.fragment, {}, bd, this.rootComponentType, null, this.urlTree.root, -1, {}),
                    t = new sh(e, n),
                    i = new hh(this.url, t);
                return this.inheritParamsAndData(i._root), Za(i)
            } catch (l) {
                return new w(n => n.error(l))
            }
        }
        inheritParamsAndData(l) {
            const n = l.value,
                e = ch(n, this.paramsInheritanceStrategy);
            n.params = Object.freeze(e.params), n.data = Object.freeze(e.data), l.children.forEach(l => this.inheritParamsAndData(l))
        }
        processSegmentGroup(l, n, e) {
            return 0 === n.segments.length && n.hasChildren() ? this.processChildren(l, n) : this.processSegment(l, n, n.segments, e)
        }
        processChildren(l, n) {
            const e = Fd(n, (n, e) => this.processSegmentGroup(l, n, e));
            return function (l) {
                const n = {};
                l.forEach(l => {
                    const e = n[l.value.outlet];
                    if (e) {
                        const n = e.url.map(l => l.toString()).join("/"),
                            t = l.value.url.map(l => l.toString()).join("/");
                        throw new Error(`Two segments cannot have the same outlet name: '${n}' and '${t}'.`)
                    }
                    n[l.value.outlet] = l.value
                })
            }(e), e.sort((l, n) => l.value.outlet === bd ? -1 : n.value.outlet === bd ? 1 : l.value.outlet.localeCompare(n.value.outlet)), e
        }
        processSegment(l, n, e, t) {
            for (const s of l) try {
                return this.processSegmentAgainstRoute(s, n, e, t)
            } catch (i) {
                if (!(i instanceof lp)) throw i
            }
            if (this.noLeftoversInUrl(n, e, t)) return [];
            throw new lp
        }
        noLeftoversInUrl(l, n, e) {
            return 0 === n.length && !l.children[e]
        }
        processSegmentAgainstRoute(l, n, e, t) {
            if (l.redirectTo) throw new lp;
            if ((l.outlet || bd) !== t) throw new lp;
            let i, s = [],
                u = [];
            if ("**" === l.path) {
                const s = e.length > 0 ? Md(e).parameters : {};
                i = new dh(e, s, Object.freeze(Object.assign({}, this.urlTree.queryParams)), this.urlTree.fragment, rp(l), t, l.component, l, ep(n), tp(n) + e.length, ap(l))
            } else {
                const r = function (l, n, e) {
                    if ("" === n.path) {
                        if ("full" === n.pathMatch && (l.hasChildren() || e.length > 0)) throw new lp;
                        return {
                            consumedSegments: [],
                            lastChild: 0,
                            parameters: {}
                        }
                    }
                    const t = (n.matcher || Sd)(e, l, n);
                    if (!t) throw new lp;
                    const i = {};
                    Od(t.posParams, (l, n) => {
                        i[n] = l.path
                    });
                    const s = t.consumed.length > 0 ? Object.assign({}, i, t.consumed[t.consumed.length - 1].parameters) : i;
                    return {
                        consumedSegments: t.consumed,
                        lastChild: t.consumed.length,
                        parameters: s
                    }
                }(n, l, e);
                s = r.consumedSegments, u = e.slice(r.lastChild), i = new dh(s, r.parameters, Object.freeze(Object.assign({}, this.urlTree.queryParams)), this.urlTree.fragment, rp(l), t, l.component, l, ep(n), tp(n) + s.length, ap(l))
            }
            const r = function (l) {
                    return l.children ? l.children : l.loadChildren ? l._loadedConfig.routes : []
                }(l),
                {
                    segmentGroup: a,
                    slicedSegments: o
                } = ip(n, s, u, r, this.relativeLinkResolution);
            if (0 === o.length && a.hasChildren()) {
                const l = this.processChildren(r, a);
                return [new sh(i, l)]
            }
            if (0 === r.length && 0 === o.length) return [new sh(i, [])];
            const c = this.processSegment(r, a, o, bd);
            return [new sh(i, c)]
        }
    }

    function ep(l) {
        let n = l;
        for (; n._sourceSegment;) n = n._sourceSegment;
        return n
    }

    function tp(l) {
        let n = l,
            e = n._segmentIndexShift ? n._segmentIndexShift : 0;
        for (; n._sourceSegment;) e += (n = n._sourceSegment)._segmentIndexShift ? n._segmentIndexShift : 0;
        return e - 1
    }

    function ip(l, n, e, t, i) {
        if (e.length > 0 && function (l, n, e) {
                return e.some(e => sp(l, n, e) && up(e) !== bd)
            }(l, e, t)) {
            const i = new zd(n, function (l, n, e, t) {
                const i = {};
                i[bd] = t, t._sourceSegment = l, t._segmentIndexShift = n.length;
                for (const s of e)
                    if ("" === s.path && up(s) !== bd) {
                        const e = new zd([], {});
                        e._sourceSegment = l, e._segmentIndexShift = n.length, i[up(s)] = e
                    } return i
            }(l, n, t, new zd(e, l.children)));
            return i._sourceSegment = l, i._segmentIndexShift = n.length, {
                segmentGroup: i,
                slicedSegments: []
            }
        }
        if (0 === e.length && function (l, n, e) {
                return e.some(e => sp(l, n, e))
            }(l, e, t)) {
            const s = new zd(l.segments, function (l, n, e, t, i, s) {
                const u = {};
                for (const r of t)
                    if (sp(l, e, r) && !i[up(r)]) {
                        const e = new zd([], {});
                        e._sourceSegment = l, e._segmentIndexShift = "legacy" === s ? l.segments.length : n.length, u[up(r)] = e
                    } return Object.assign({}, i, u)
            }(l, n, e, t, l.children, i));
            return s._sourceSegment = l, s._segmentIndexShift = n.length, {
                segmentGroup: s,
                slicedSegments: e
            }
        }
        const s = new zd(l.segments, l.children);
        return s._sourceSegment = l, s._segmentIndexShift = n.length, {
            segmentGroup: s,
            slicedSegments: e
        }
    }

    function sp(l, n, e) {
        return (!(l.hasChildren() || n.length > 0) || "full" !== e.pathMatch) && "" === e.path && void 0 === e.redirectTo
    }

    function up(l) {
        return l.outlet || bd
    }

    function rp(l) {
        return l.data || {}
    }

    function ap(l) {
        return l.resolve || {}
    }

    function op(l, n, e, t) {
        const i = Gh(l, n, t);
        return Nd(i.resolve ? i.resolve(n, e) : i(n, e))
    }

    function cp(l) {
        return function (n) {
            return n.pipe(Do(n => {
                const e = l(n);
                return e ? G(e).pipe(U(() => n)) : G([n])
            }))
        }
    }
    class dp {}
    class hp {
        shouldDetach(l) {
            return !1
        }
        store(l, n) {}
        shouldAttach(l) {
            return !1
        }
        retrieve(l) {
            return null
        }
        shouldReuseRoute(l, n) {
            return l.routeConfig === n.routeConfig
        }
    }
    const pp = new El("ROUTES"); class fp {
        constructor(l, n, e, t) {
            this.loader = l, this.compiler = n, this.onLoadStartListener = e, this.onLoadEndListener = t
        }
        load(l, n) {
            return this.onLoadStartListener && this.onLoadStartListener(n), this.loadModuleFactory(n.loadChildren).pipe(U(e => {
                this.onLoadEndListener && this.onLoadEndListener(n);
                const t = e.create(l);
                return new Cd(Dd(t.injector.get(pp)).map(Ad), t)
            }))
        }
        loadModuleFactory(l) {
            return "string" == typeof l ? G(this.loader.load(l)) : Nd(l()).pipe(W(l => l instanceof Gl ? Za(l) : G(this.compiler.compileModuleAsync(l))))
        }
    }
    class gp {}
    class mp {
        shouldProcessUrl(l) {
            return !0
        }
        extract(l) {
            return l
        }
        merge(l, n) {
            return l
        }
    }

    function yp(l) {
        throw l
    }

    function vp(l, n, e) {
        return n.parse("/")
    }

    function bp(l, n) {
        return Za(null)
    }
    class _p {
        constructor(l, n, e, t, i, s, u, r) {
            this.rootComponentType = l, this.urlSerializer = n, this.rootContexts = e, this.location = t, this.config = r, this.lastSuccessfulNavigation = null, this.currentNavigation = null, this.navigationId = 0, this.isNgZoneEnabled = !1, this.events = new T, this.errorHandler = yp, this.malformedUriErrorHandler = vp, this.navigated = !1, this.lastSuccessfulId = -1, this.hooks = {
                beforePreactivation: bp,
                afterPreactivation: bp
            }, this.urlHandlingStrategy = new mp, this.routeReuseStrategy = new hp, this.onSameUrlNavigation = "ignore", this.paramsInheritanceStrategy = "emptyOnly", this.urlUpdateStrategy = "deferred", this.relativeLinkResolution = "legacy", this.ngModule = i.get(jl), this.console = i.get(Xi);
            const a = i.get(ys);
            this.isNgZoneEnabled = a instanceof ys, this.resetConfig(r), this.currentUrlTree = new Bd(new zd([], {}), {}, null), this.rawUrlTree = this.currentUrlTree, this.browserUrlTree = this.currentUrlTree, this.configLoader = new fp(s, u, l => this.triggerEvent(new dd(l)), l => this.triggerEvent(new hd(l))), this.routerState = ah(this.currentUrlTree, this.rootComponentType), this.transitions = new Qa({
                id: 0,
                currentUrlTree: this.currentUrlTree,
                currentRawUrl: this.currentUrlTree,
                extractedUrl: this.urlHandlingStrategy.extract(this.currentUrlTree),
                urlAfterRedirects: this.urlHandlingStrategy.extract(this.currentUrlTree),
                rawUrl: this.currentUrlTree,
                extras: {},
                resolve: null,
                reject: null,
                promise: Promise.resolve(!0),
                source: "imperative",
                restoredState: null,
                currentSnapshot: this.routerState.snapshot,
                targetSnapshot: null,
                currentRouterState: this.routerState,
                targetRouterState: null,
                guards: {
                    canActivateChecks: [],
                    canDeactivateChecks: []
                },
                guardsResult: null
            }), this.navigations = this.setupNavigations(this.transitions), this.processNavigations()
        }
        setupNavigations(l) {
            const n = this.events;
            return l.pipe(io(l => 0 !== l.id), U(l => Object.assign({}, l, {
                extractedUrl: this.urlHandlingStrategy.extract(l.rawUrl)
            })), Do(l => {
                let e = !1,
                    t = !1;
                return Za(l).pipe(po(l => {
                    this.currentNavigation = {
                        id: l.id,
                        initialUrl: l.currentRawUrl,
                        extractedUrl: l.extractedUrl,
                        trigger: l.source,
                        extras: l.extras,
                        previousNavigation: this.lastSuccessfulNavigation ? Object.assign({}, this.lastSuccessfulNavigation, {
                            previousNavigation: null
                        }) : null
                    }
                }), Do(l => {
                    const e = !this.navigated || l.extractedUrl.toString() !== this.browserUrlTree.toString();
                    if (("reload" === this.onSameUrlNavigation || e) && this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl)) return Za(l).pipe(Do(l => {
                        const e = this.transitions.getValue();
                        return n.next(new ed(l.id, this.serializeUrl(l.extractedUrl), l.source, l.restoredState)), e !== this.transitions.getValue() ? Ga : [l]
                    }), Do(l => Promise.resolve(l)), function (l, n, e, t) {
                        return function (i) {
                            return i.pipe(Do(i => (function (l, n, e, t, i) {
                                return new $h(l, n, e, t, i).apply()
                            })(l, n, e, i.extractedUrl, t).pipe(U(l => Object.assign({}, i, {
                                urlAfterRedirects: l
                            })))))
                        }
                    }(this.ngModule.injector, this.configLoader, this.urlSerializer, this.config), po(l => {
                        this.currentNavigation = Object.assign({}, this.currentNavigation, {
                            finalUrl: l.urlAfterRedirects
                        })
                    }), function (l, n, e, t, i) {
                        return function (s) {
                            return s.pipe(W(s => (function (l, n, e, t, i = "emptyOnly", s = "legacy") {
                                return new np(l, n, e, t, i, s).recognize()
                            })(l, n, s.urlAfterRedirects, e(s.urlAfterRedirects), t, i).pipe(U(l => Object.assign({}, s, {
                                targetSnapshot: l
                            })))))
                        }
                    }(this.rootComponentType, this.config, l => this.serializeUrl(l), this.paramsInheritanceStrategy, this.relativeLinkResolution), po(l => {
                        "eager" === this.urlUpdateStrategy && (l.extras.skipLocationChange || this.setBrowserUrl(l.urlAfterRedirects, !!l.extras.replaceUrl, l.id, l.extras.state), this.browserUrlTree = l.urlAfterRedirects)
                    }), po(l => {
                        const e = new ud(l.id, this.serializeUrl(l.extractedUrl), this.serializeUrl(l.urlAfterRedirects), l.targetSnapshot);
                        n.next(e)
                    }));
                    if (e && this.rawUrlTree && this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)) {
                        const {
                            id: e,
                            extractedUrl: t,
                            source: i,
                            restoredState: s,
                            extras: u
                        } = l, r = new ed(e, this.serializeUrl(t), i, s);
                        n.next(r);
                        const a = ah(t, this.rootComponentType).snapshot;
                        return Za(Object.assign({}, l, {
                            targetSnapshot: a,
                            urlAfterRedirects: t,
                            extras: Object.assign({}, u, {
                                skipLocationChange: !1,
                                replaceUrl: !1
                            })
                        }))
                    }
                    return this.rawUrlTree = l.rawUrl, this.browserUrlTree = l.urlAfterRedirects, l.resolve(null), Ga
                }), cp(l => {
                    const {
                        targetSnapshot: n,
                        id: e,
                        extractedUrl: t,
                        rawUrl: i,
                        extras: {
                            skipLocationChange: s,
                            replaceUrl: u
                        }
                    } = l;
                    return this.hooks.beforePreactivation(n, {
                        navigationId: e,
                        appliedUrlTree: t,
                        rawUrlTree: i,
                        skipLocationChange: !!s,
                        replaceUrl: !!u
                    })
                }), po(l => {
                    const n = new rd(l.id, this.serializeUrl(l.extractedUrl), this.serializeUrl(l.urlAfterRedirects), l.targetSnapshot);
                    this.triggerEvent(n)
                }), U(l => Object.assign({}, l, {
                    guards: jh(l.targetSnapshot, l.currentSnapshot, this.rootContexts)
                })), function (l, n) {
                    return function (e) {
                        return e.pipe(W(e => {
                            const {
                                targetSnapshot: t,
                                currentSnapshot: i,
                                guards: {
                                    canActivateChecks: s,
                                    canDeactivateChecks: u
                                }
                            } = e;
                            return 0 === u.length && 0 === s.length ? Za(Object.assign({}, e, {
                                guardsResult: !0
                            })) : function (l, n, e, t) {
                                return G(l).pipe(W(l => (function (l, n, e, t, i) {
                                    const s = n && n.routeConfig ? n.routeConfig.canDeactivate : null;
                                    return s && 0 !== s.length ? Za(s.map(s => {
                                        const u = Gh(s, n, i);
                                        let r;
                                        if (function (l) {
                                                return l && Dh(l.canDeactivate)
                                            }(u)) r = Nd(u.canDeactivate(l, n, e, t));
                                        else {
                                            if (!Dh(u)) throw new Error("Invalid CanDeactivate guard");
                                            r = Nd(u(l, n, e, t))
                                        }
                                        return r.pipe(Eo())
                                    })).pipe(Zh()) : Za(!0)
                                })(l.component, l.route, e, n, t)), Eo(l => !0 !== l, !0))
                            }(u, t, i, l).pipe(W(e => e && function (l) {
                                return "boolean" == typeof l
                            }(e) ? function (l, n, e, t) {
                                return G(n).pipe(zo(n => G([Yh(n.route.parent, t), Qh(n.route, t), Jh(l, n.path, e), Xh(l, n.route, e)]).pipe(to(), Eo(l => !0 !== l, !0))), Eo(l => !0 !== l, !0))
                            }(t, s, l, n) : Za(e)), U(l => Object.assign({}, e, {
                                guardsResult: l
                            })))
                        }))
                    }
                }(this.ngModule.injector, l => this.triggerEvent(l)), po(l => {
                    if (Mh(l.guardsResult)) {
                        const n = kd(`Redirecting to "${this.serializeUrl(l.guardsResult)}"`);
                        throw n.url = l.guardsResult, n
                    }
                }), po(l => {
                    const n = new ad(l.id, this.serializeUrl(l.extractedUrl), this.serializeUrl(l.urlAfterRedirects), l.targetSnapshot, !!l.guardsResult);
                    this.triggerEvent(n)
                }), io(l => {
                    if (!l.guardsResult) {
                        this.resetUrlToCurrentUrlTree();
                        const e = new id(l.id, this.serializeUrl(l.extractedUrl), "");
                        return n.next(e), l.resolve(!1), !1
                    }
                    return !0
                }), cp(l => {
                    if (l.guards.canActivateChecks.length) return Za(l).pipe(po(l => {
                        const n = new od(l.id, this.serializeUrl(l.extractedUrl), this.serializeUrl(l.urlAfterRedirects), l.targetSnapshot);
                        this.triggerEvent(n)
                    }), function (l, n) {
                        return function (e) {
                            return e.pipe(W(e => {
                                const {
                                    targetSnapshot: t,
                                    guards: {
                                        canActivateChecks: i
                                    }
                                } = e;
                                return i.length ? G(i).pipe(zo(e => (function (l, n, e, t) {
                                    return function (l, n, e, t) {
                                        const i = Object.keys(l);
                                        if (0 === i.length) return Za({});
                                        if (1 === i.length) {
                                            const s = i[0];
                                            return op(l[s], n, e, t).pipe(U(l => ({
                                                [s]: l
                                            })))
                                        }
                                        const s = {};
                                        return G(i).pipe(W(i => op(l[i], n, e, t).pipe(U(l => (s[i] = l, l))))).pipe(wo(), U(() => s))
                                    }(l._resolve, l, n, t).pipe(U(n => (l._resolvedData = n, l.data = Object.assign({}, l.data, ch(l, e).resolve), null)))
                                })(e.route, t, l, n)), function (l, n) {
                                    return arguments.length >= 2 ? function (e) {
                                        return b(No(l, n), oo(1), vo(n))(e)
                                    } : function (n) {
                                        return b(No((n, e, t) => l(n, e, t + 1)), oo(1))(n)
                                    }
                                }((l, n) => l), U(l => e)) : Za(e)
                            }))
                        }
                    }(this.paramsInheritanceStrategy, this.ngModule.injector), po(l => {
                        const n = new cd(l.id, this.serializeUrl(l.extractedUrl), this.serializeUrl(l.urlAfterRedirects), l.targetSnapshot);
                        this.triggerEvent(n)
                    }))
                }), cp(l => {
                    const {
                        targetSnapshot: n,
                        id: e,
                        extractedUrl: t,
                        rawUrl: i,
                        extras: {
                            skipLocationChange: s,
                            replaceUrl: u
                        }
                    } = l;
                    return this.hooks.afterPreactivation(n, {
                        navigationId: e,
                        appliedUrlTree: t,
                        rawUrlTree: i,
                        skipLocationChange: !!s,
                        replaceUrl: !!u
                    })
                }), U(l => {
                    const n = function (l, n, e) {
                        const t = function l(n, e, t) {
                            if (t && n.shouldReuseRoute(e.value, t.value.snapshot)) {
                                const i = t.value;
                                i._futureSnapshot = e.value;
                                const s = function (n, e, t) {
                                    return e.children.map(e => {
                                        for (const i of t.children)
                                            if (n.shouldReuseRoute(i.value.snapshot, e.value)) return l(n, e, i);
                                        return l(n, e)
                                    })
                                }(n, e, t);
                                return new sh(i, s)
                            } {
                                const t = n.retrieve(e.value);
                                if (t) {
                                    const l = t.route;
                                    return function l(n, e) {
                                        if (n.value.routeConfig !== e.value.routeConfig) throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");
                                        if (n.children.length !== e.children.length) throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");
                                        e.value._futureSnapshot = n.value;
                                        for (let t = 0; t < n.children.length; ++t) l(n.children[t], e.children[t])
                                    }(e, l), l
                                } {
                                    const t = new oh(new Qa((i = e.value).url), new Qa(i.params), new Qa(i.queryParams), new Qa(i.fragment), new Qa(i.data), i.outlet, i.component, i),
                                        s = e.children.map(e => l(n, e));
                                    return new sh(t, s)
                                }
                            }
                            var i
                        }(l, n._root, e ? e._root : void 0);
                        return new rh(t, n)
                    }(this.routeReuseStrategy, l.targetSnapshot, l.currentRouterState);
                    return Object.assign({}, l, {
                        targetRouterState: n
                    })
                }), po(l => {
                    this.currentUrlTree = l.urlAfterRedirects, this.rawUrlTree = this.urlHandlingStrategy.merge(this.currentUrlTree, l.rawUrl), this.routerState = l.targetRouterState, "deferred" === this.urlUpdateStrategy && (l.extras.skipLocationChange || this.setBrowserUrl(this.rawUrlTree, !!l.extras.replaceUrl, l.id, l.extras.state), this.browserUrlTree = l.urlAfterRedirects)
                }), Eh(this.rootContexts, this.routeReuseStrategy, l => this.triggerEvent(l)), po({
                    next() {
                        e = !0
                    },
                    complete() {
                        e = !0
                    }
                }), function (l) {
                    return n => n.lift(new $o(l))
                }(() => {
                    if (!e && !t) {
                        this.resetUrlToCurrentUrlTree();
                        const e = new id(l.id, this.serializeUrl(l.extractedUrl), `Navigation ID ${l.id} is not equal to the current navigation id ${this.navigationId}`);
                        n.next(e), l.resolve(!1)
                    }
                    this.currentNavigation = null
                }), xo(e => {
                    if (t = !0, function (l) {
                            return l && l[xd]
                        }(e)) {
                        const t = Mh(e.url);
                        t || (this.navigated = !0, this.resetStateAndUrl(l.currentRouterState, l.currentUrlTree, l.rawUrl));
                        const i = new id(l.id, this.serializeUrl(l.extractedUrl), e.message);
                        n.next(i), l.resolve(!1), t && this.navigateByUrl(e.url)
                    } else {
                        this.resetStateAndUrl(l.currentRouterState, l.currentUrlTree, l.rawUrl);
                        const t = new sd(l.id, this.serializeUrl(l.extractedUrl), e);
                        n.next(t);
                        try {
                            l.resolve(this.errorHandler(e))
                        } catch (i) {
                            l.reject(i)
                        }
                    }
                    return Ga
                }))
            }))
        }
        resetRootComponentType(l) {
            this.rootComponentType = l, this.routerState.root.component = this.rootComponentType
        }
        getTransition() {
            const l = this.transitions.value;
            return l.urlAfterRedirects = this.browserUrlTree, l
        }
        setTransition(l) {
            this.transitions.next(Object.assign({}, this.getTransition(), l))
        }
        initialNavigation() {
            this.setUpLocationChangeListener(), 0 === this.navigationId && this.navigateByUrl(this.location.path(!0), {
                replaceUrl: !0
            })
        }
        setUpLocationChangeListener() {
            this.locationSubscription || (this.locationSubscription = this.location.subscribe(l => {
                let n = this.parseUrl(l.url);
                const e = "popstate" === l.type ? "popstate" : "hashchange",
                    t = l.state && l.state.navigationId ? l.state : null;
                setTimeout(() => {
                    this.scheduleNavigation(n, e, t, {
                        replaceUrl: !0
                    })
                }, 0)
            }))
        }
        get url() {
            return this.serializeUrl(this.currentUrlTree)
        }
        getCurrentNavigation() {
            return this.currentNavigation
        }
        triggerEvent(l) {
            this.events.next(l)
        }
        resetConfig(l) {
            Id(l), this.config = l.map(Ad), this.navigated = !1, this.lastSuccessfulId = -1
        }
        ngOnDestroy() {
            this.dispose()
        }
        dispose() {
            this.locationSubscription && (this.locationSubscription.unsubscribe(), this.locationSubscription = null)
        }
        createUrlTree(l, n = {}) {
            const {
                relativeTo: e,
                queryParams: t,
                fragment: i,
                preserveQueryParams: s,
                queryParamsHandling: u,
                preserveFragment: r
            } = n;
            rn() && s && console && console.warn && console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");
            const a = e || this.routerState.root,
                o = r ? this.currentUrlTree.fragment : i;
            let c = null;
            if (u) switch (u) {
                case "merge":
                    c = Object.assign({}, this.currentUrlTree.queryParams, t);
                    break;
                case "preserve":
                    c = this.currentUrlTree.queryParams;
                    break;
                default:
                    c = t || null
            } else c = s ? this.currentUrlTree.queryParams : t || null;
            return null !== c && (c = this.removeEmptyProps(c)),
                function (l, n, e, t, i) {
                    if (0 === e.length) return vh(n.root, n.root, n, t, i);
                    const s = function (l) {
                        if ("string" == typeof l[0] && 1 === l.length && "/" === l[0]) return new bh(!0, 0, l);
                        let n = 0,
                            e = !1;
                        const t = l.reduce((l, t, i) => {
                            if ("object" == typeof t && null != t) {
                                if (t.outlets) {
                                    const n = {};
                                    return Od(t.outlets, (l, e) => {
                                        n[e] = "string" == typeof l ? l.split("/") : l
                                    }), [...l, {
                                        outlets: n
                                    }]
                                }
                                if (t.segmentPath) return [...l, t.segmentPath]
                            }
                            return "string" != typeof t ? [...l, t] : 0 === i ? (t.split("/").forEach((t, i) => {
                                0 == i && "." === t || (0 == i && "" === t ? e = !0 : ".." === t ? n++ : "" != t && l.push(t))
                            }), l) : [...l, t]
                        }, []);
                        return new bh(e, n, t)
                    }(e);
                    if (s.toRoot()) return vh(n.root, new zd([], {}), n, t, i);
                    const u = function (l, n, e) {
                            if (l.isAbsolute) return new _h(n.root, !0, 0);
                            if (-1 === e.snapshot._lastPathIndex) return new _h(e.snapshot._urlSegment, !0, 0);
                            const t = yh(l.commands[0]) ? 0 : 1;
                            return function (l, n, e) {
                                let t = l,
                                    i = n,
                                    s = e;
                                for (; s > i;) {
                                    if (s -= i, !(t = t.parent)) throw new Error("Invalid number of '../'");
                                    i = t.segments.length
                                }
                                return new _h(t, !1, i - s)
                            }(e.snapshot._urlSegment, e.snapshot._lastPathIndex + t, l.numberOfDoubleDots)
                        }(s, n, l),
                        r = u.processChildren ? kh(u.segmentGroup, u.index, s.commands) : xh(u.segmentGroup, u.index, s.commands);
                    return vh(u.segmentGroup, r, n, t, i)
                }(a, this.currentUrlTree, l, c, o)
        }
        navigateByUrl(l, n = {
            skipLocationChange: !1
        }) {
            rn() && this.isNgZoneEnabled && !ys.isInAngularZone() && this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");
            const e = Mh(l) ? l : this.parseUrl(l),
                t = this.urlHandlingStrategy.merge(e, this.rawUrlTree);
            return this.scheduleNavigation(t, "imperative", null, n)
        }
        navigate(l, n = {
            skipLocationChange: !1
        }) {
            return function (l) {
                for (let n = 0; n < l.length; n++) {
                    const e = l[n];
                    if (null == e) throw new Error(`The requested path contains ${e} segment at index ${n}`)
                }
            }(l), this.navigateByUrl(this.createUrlTree(l, n), n)
        }
        serializeUrl(l) {
            return this.urlSerializer.serialize(l)
        }
        parseUrl(l) {
            let n;
            try {
                n = this.urlSerializer.parse(l)
            } catch (e) {
                n = this.malformedUriErrorHandler(e, this.urlSerializer, l)
            }
            return n
        }
        isActive(l, n) {
            if (Mh(l)) return Rd(this.currentUrlTree, l, n);
            const e = this.parseUrl(l);
            return Rd(this.currentUrlTree, e, n)
        }
        removeEmptyProps(l) {
            return Object.keys(l).reduce((n, e) => {
                const t = l[e];
                return null != t && (n[e] = t), n
            }, {})
        }
        processNavigations() {
            this.navigations.subscribe(l => {
                this.navigated = !0, this.lastSuccessfulId = l.id, this.events.next(new td(l.id, this.serializeUrl(l.extractedUrl), this.serializeUrl(this.currentUrlTree))), this.lastSuccessfulNavigation = this.currentNavigation, this.currentNavigation = null, l.resolve(!0)
            }, l => {
                this.console.warn("Unhandled Navigation Error: ")
            })
        }
        scheduleNavigation(l, n, e, t) {
            const i = this.getTransition();
            if (i && "imperative" !== n && "imperative" === i.source && i.rawUrl.toString() === l.toString()) return Promise.resolve(!0);
            if (i && "hashchange" == n && "popstate" === i.source && i.rawUrl.toString() === l.toString()) return Promise.resolve(!0);
            if (i && "popstate" == n && "hashchange" === i.source && i.rawUrl.toString() === l.toString()) return Promise.resolve(!0);
            let s = null,
                u = null;
            const r = new Promise((l, n) => {
                    s = l, u = n
                }),
                a = ++this.navigationId;
            return this.setTransition({
                id: a,
                source: n,
                restoredState: e,
                currentUrlTree: this.currentUrlTree,
                currentRawUrl: this.rawUrlTree,
                rawUrl: l,
                extras: t,
                resolve: s,
                reject: u,
                promise: r,
                currentSnapshot: this.routerState.snapshot,
                currentRouterState: this.routerState
            }), r.catch(l => Promise.reject(l))
        }
        setBrowserUrl(l, n, e, t) {
            const i = this.urlSerializer.serialize(l);
            t = t || {}, this.location.isCurrentPathEqualTo(i) || n ? this.location.replaceState(i, "", Object.assign({}, t, {
                navigationId: e
            })) : this.location.go(i, "", Object.assign({}, t, {
                navigationId: e
            }))
        }
        resetStateAndUrl(l, n, e) {
            this.routerState = l, this.currentUrlTree = n, this.rawUrlTree = this.urlHandlingStrategy.merge(this.currentUrlTree, e), this.resetUrlToCurrentUrlTree()
        }
        resetUrlToCurrentUrlTree() {
            this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree), "", {
                navigationId: this.lastSuccessfulId
            })
        }
    }
    class wp {
        constructor(l, n, e, t, i) {
            this.router = l, this.route = n, this.commands = [], null == e && t.setAttribute(i.nativeElement, "tabindex", "0")
        }
        set routerLink(l) {
            this.commands = null != l ? Array.isArray(l) ? l : [l] : []
        }
        set preserveQueryParams(l) {
            rn() && console && console.warn && console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."), this.preserve = l
        }
        onClick() {
            const l = {
                skipLocationChange: kp(this.skipLocationChange),
                replaceUrl: kp(this.replaceUrl)
            };
            return this.router.navigateByUrl(this.urlTree, l), !0
        }
        get urlTree() {
            return this.router.createUrlTree(this.commands, {
                relativeTo: this.route,
                queryParams: this.queryParams,
                fragment: this.fragment,
                preserveQueryParams: kp(this.preserve),
                queryParamsHandling: this.queryParamsHandling,
                preserveFragment: kp(this.preserveFragment)
            })
        }
    }
    class xp {
        constructor(l, n, e) {
            this.router = l, this.route = n, this.locationStrategy = e, this.commands = [], this.subscription = l.events.subscribe(l => {
                l instanceof td && this.updateTargetUrlAndHref()
            })
        }
        set routerLink(l) {
            this.commands = null != l ? Array.isArray(l) ? l : [l] : []
        }
        set preserveQueryParams(l) {
            rn() && console && console.warn && console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."), this.preserve = l
        }
        ngOnChanges(l) {
            this.updateTargetUrlAndHref()
        }
        ngOnDestroy() {
            this.subscription.unsubscribe()
        }
        onClick(l, n, e, t) {
            if (0 !== l || n || e || t) return !0;
            if ("string" == typeof this.target && "_self" != this.target) return !0;
            const i = {
                skipLocationChange: kp(this.skipLocationChange),
                replaceUrl: kp(this.replaceUrl),
                state: this.state
            };
            return this.router.navigateByUrl(this.urlTree, i), !1
        }
        updateTargetUrlAndHref() {
            this.href = this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))
        }
        get urlTree() {
            return this.router.createUrlTree(this.commands, {
                relativeTo: this.route,
                queryParams: this.queryParams,
                fragment: this.fragment,
                preserveQueryParams: kp(this.preserve),
                queryParamsHandling: this.queryParamsHandling,
                preserveFragment: kp(this.preserveFragment)
            })
        }
    }

    function kp(l) {
        return "" === l || !!l
    }
    class Sp {
        constructor(l, n, e, t, i) {
            this.router = l, this.element = n, this.renderer = e, this.link = t, this.linkWithHref = i, this.classes = [], this.isActive = !1, this.routerLinkActiveOptions = {
                exact: !1
            }, this.subscription = l.events.subscribe(l => {
                l instanceof td && this.update()
            })
        }
        ngAfterContentInit() {
            this.links.changes.subscribe(l => this.update()), this.linksWithHrefs.changes.subscribe(l => this.update()), this.update()
        }
        set routerLinkActive(l) {
            const n = Array.isArray(l) ? l : l.split(" ");
            this.classes = n.filter(l => !!l)
        }
        ngOnChanges(l) {
            this.update()
        }
        ngOnDestroy() {
            this.subscription.unsubscribe()
        }
        update() {
            this.links && this.linksWithHrefs && this.router.navigated && Promise.resolve().then(() => {
                const l = this.hasActiveLinks();
                this.isActive !== l && (this.isActive = l, this.classes.forEach(n => {
                    l ? this.renderer.addClass(this.element.nativeElement, n) : this.renderer.removeClass(this.element.nativeElement, n)
                }))
            })
        }
        isLinkActive(l) {
            return n => l.isActive(n.urlTree, this.routerLinkActiveOptions.exact)
        }
        hasActiveLinks() {
            const l = this.isLinkActive(this.router);
            return this.link && l(this.link) || this.linkWithHref && l(this.linkWithHref) || this.links.some(l) || this.linksWithHrefs.some(l)
        }
    }
    class Cp {
        constructor() {
            this.outlet = null, this.route = null, this.resolver = null, this.children = new Ip, this.attachRef = null
        }
    }
    class Ip {
        constructor() {
            this.contexts = new Map
        }
        onChildOutletCreated(l, n) {
            const e = this.getOrCreateContext(l);
            e.outlet = n, this.contexts.set(l, e)
        }
        onChildOutletDestroyed(l) {
            const n = this.getContext(l);
            n && (n.outlet = null)
        }
        onOutletDeactivated() {
            const l = this.contexts;
            return this.contexts = new Map, l
        }
        onOutletReAttached(l) {
            this.contexts = l
        }
        getOrCreateContext(l) {
            let n = this.getContext(l);
            return n || (n = new Cp, this.contexts.set(l, n)), n
        }
        getContext(l) {
            return this.contexts.get(l) || null
        }
    }
    class Tp {
        constructor(l, n, e, t, i) {
            this.parentContexts = l, this.location = n, this.resolver = e, this.changeDetector = i, this.activated = null, this._activatedRoute = null, this.activateEvents = new qi, this.deactivateEvents = new qi, this.name = t || bd, l.onChildOutletCreated(this.name, this)
        }
        ngOnDestroy() {
            this.parentContexts.onChildOutletDestroyed(this.name)
        }
        ngOnInit() {
            if (!this.activated) {
                const l = this.parentContexts.getContext(this.name);
                l && l.route && (l.attachRef ? this.attach(l.attachRef, l.route) : this.activateWith(l.route, l.resolver || null))
            }
        }
        get isActivated() {
            return !!this.activated
        }
        get component() {
            if (!this.activated) throw new Error("Outlet is not activated");
            return this.activated.instance
        }
        get activatedRoute() {
            if (!this.activated) throw new Error("Outlet is not activated");
            return this._activatedRoute
        }
        get activatedRouteData() {
            return this._activatedRoute ? this._activatedRoute.snapshot.data : {}
        }
        detach() {
            if (!this.activated) throw new Error("Outlet is not activated");
            this.location.detach();
            const l = this.activated;
            return this.activated = null, this._activatedRoute = null, l
        }
        attach(l, n) {
            this.activated = l, this._activatedRoute = n, this.location.insert(l.hostView)
        }
        deactivate() {
            if (this.activated) {
                const l = this.component;
                this.activated.destroy(), this.activated = null, this._activatedRoute = null, this.deactivateEvents.emit(l)
            }
        }
        activateWith(l, n) {
            if (this.isActivated) throw new Error("Cannot activate an already activated outlet");
            this._activatedRoute = l;
            const e = (n = n || this.resolver).resolveComponentFactory(l._futureSnapshot.routeConfig.component),
                t = this.parentContexts.getOrCreateContext(this.name).children,
                i = new Ep(l, t, this.location.injector);
            this.activated = this.location.createComponent(e, this.location.length, i), this.changeDetector.markForCheck(), this.activateEvents.emit(this.activated.instance)
        }
    }
    class Ep {
        constructor(l, n, e) {
            this.route = l, this.childContexts = n, this.parent = e
        }
        get(l, n) {
            return l === oh ? this.route : l === Ip ? this.childContexts : this.parent.get(l, n)
        }
    }
    class Ap {}
    class Pp {
        preload(l, n) {
            return n().pipe(xo(() => Za(null)))
        }
    }
    class Dp {
        preload(l, n) {
            return Za(null)
        }
    }
    class Mp {
        constructor(l, n, e, t, i) {
            this.router = l, this.injector = t, this.preloadingStrategy = i, this.loader = new fp(n, e, n => l.triggerEvent(new dd(n)), n => l.triggerEvent(new hd(n)))
        }
        setUpPreloading() {
            this.subscription = this.router.events.pipe(io(l => l instanceof td), zo(() => this.preload())).subscribe(() => {})
        }
        preload() {
            const l = this.injector.get(jl);
            return this.processRoutes(l, this.router.config)
        }
        ngOnDestroy() {
            this.subscription.unsubscribe()
        }
        processRoutes(l, n) {
            const e = [];
            for (const t of n)
                if (t.loadChildren && !t.canLoad && t._loadedConfig) {
                    const l = t._loadedConfig;
                    e.push(this.processRoutes(l.module, l.routes))
                } else t.loadChildren && !t.canLoad ? e.push(this.preloadConfig(l, t)) : t.children && e.push(this.processRoutes(l, t.children));
            return G(e).pipe(Y(), U(l => void 0))
        }
        preloadConfig(l, n) {
            return this.preloadingStrategy.preload(n, () => this.loader.load(l.injector, n).pipe(W(l => (n._loadedConfig = l, this.processRoutes(l.module, l.routes)))))
        }
    }
    class Op {
        constructor(l, n, e = {}) {
            this.router = l, this.viewportScroller = n, this.options = e, this.lastId = 0, this.lastSource = "imperative", this.restoredId = 0, this.store = {}, e.scrollPositionRestoration = e.scrollPositionRestoration || "disabled", e.anchorScrolling = e.anchorScrolling || "disabled"
        }
        init() {
            "disabled" !== this.options.scrollPositionRestoration && this.viewportScroller.setHistoryScrollRestoration("manual"), this.routerEventsSubscription = this.createScrollEvents(), this.scrollEventsSubscription = this.consumeScrollEvents()
        }
        createScrollEvents() {
            return this.router.events.subscribe(l => {
                l instanceof ed ? (this.store[this.lastId] = this.viewportScroller.getScrollPosition(), this.lastSource = l.navigationTrigger, this.restoredId = l.restoredState ? l.restoredState.navigationId : 0) : l instanceof td && (this.lastId = l.id, this.scheduleScrollEvent(l, this.router.parseUrl(l.urlAfterRedirects).fragment))
            })
        }
        consumeScrollEvents() {
            return this.router.events.subscribe(l => {
                l instanceof yd && (l.position ? "top" === this.options.scrollPositionRestoration ? this.viewportScroller.scrollToPosition([0, 0]) : "enabled" === this.options.scrollPositionRestoration && this.viewportScroller.scrollToPosition(l.position) : l.anchor && "enabled" === this.options.anchorScrolling ? this.viewportScroller.scrollToAnchor(l.anchor) : "disabled" !== this.options.scrollPositionRestoration && this.viewportScroller.scrollToPosition([0, 0]))
            })
        }
        scheduleScrollEvent(l, n) {
            this.router.triggerEvent(new yd(l, "popstate" === this.lastSource ? this.store[this.restoredId] : null, n))
        }
        ngOnDestroy() {
            this.routerEventsSubscription && this.routerEventsSubscription.unsubscribe(), this.scrollEventsSubscription && this.scrollEventsSubscription.unsubscribe()
        }
    }
    const Np = new El("ROUTER_CONFIGURATION"), Rp = new El("ROUTER_FORROOT_GUARD"), Bp = [zr, {
        provide: qd,
        useClass: Ud
    }, {
        provide: _p,
        useFactory: Hp,
        deps: [zs, qd, Ip, zr, Ln, Ls, us, pp, Np, [gp, new cl], [dp, new cl]]
    }, Ip, {
        provide: oh,
        useFactory: Vp,
        deps: [_p]
    }, {
        provide: Ls,
        useClass: Vs
    }, Mp, Dp, Pp, {
        provide: Np,
        useValue: {
            enableTracing: !1
        }
    }];

    function zp() {
        return new Ms("Router", _p)
    }
    class $p {
        constructor(l, n) {}
        static forRoot(l, n) {
            return {
                ngModule: $p,
                providers: [Bp, Up(l), {
                    provide: Rp,
                    useFactory: qp,
                    deps: [[_p, new cl, new hl]]
                }, {
                    provide: Np,
                    useValue: n || {}
                }, {
                    provide: Rr,
                    useFactory: Fp,
                    deps: [Or, [new ol(Br), new cl], Np]
                }, {
                    provide: Op,
                    useFactory: Lp,
                    deps: [_p, Va, Np]
                }, {
                    provide: Ap,
                    useExisting: n && n.preloadingStrategy ? n.preloadingStrategy : Dp
                }, {
                    provide: Ms,
                    multi: !0,
                    useFactory: zp
                }, [jp, {
                    provide: Vi,
                    multi: !0,
                    useFactory: Gp,
                    deps: [jp]
                }, {
                    provide: Kp,
                    useFactory: Wp,
                    deps: [jp]
                }, {
                    provide: Yi,
                    multi: !0,
                    useExisting: Kp
                }]]
            }
        }
        static forChild(l) {
            return {
                ngModule: $p,
                providers: [Up(l)]
            }
        }
    }

    function Lp(l, n, e) {
        return e.scrollOffset && n.setOffset(e.scrollOffset), new Op(l, n, e)
    }

    function Fp(l, n, e = {}) {
        return e.useHash ? new Lr(l, n) : new Fr(l, n)
    }

    function qp(l) {
        if (l) throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");
        return "guarded"
    }

    function Up(l) {
        return [{
            provide: Kn,
            multi: !0,
            useValue: l
        }, {
            provide: pp,
            multi: !0,
            useValue: l
        }]
    }

    function Hp(l, n, e, t, i, s, u, r, a = {}, o, c) {
        const d = new _p(null, n, e, t, i, s, u, Dd(r));
        if (o && (d.urlHandlingStrategy = o), c && (d.routeReuseStrategy = c), a.errorHandler && (d.errorHandler = a.errorHandler), a.malformedUriErrorHandler && (d.malformedUriErrorHandler = a.malformedUriErrorHandler), a.enableTracing) {
            const l = qo();
            d.events.subscribe(n => {
                l.logGroup(`Router Event: ${n.constructor.name}`), l.log(n.toString()), l.log(n), l.logGroupEnd()
            })
        }
        return a.onSameUrlNavigation && (d.onSameUrlNavigation = a.onSameUrlNavigation), a.paramsInheritanceStrategy && (d.paramsInheritanceStrategy = a.paramsInheritanceStrategy), a.urlUpdateStrategy && (d.urlUpdateStrategy = a.urlUpdateStrategy), a.relativeLinkResolution && (d.relativeLinkResolution = a.relativeLinkResolution), d
    }

    function Vp(l) {
        return l.routerState.root
    }
    class jp {
        constructor(l) {
            this.injector = l, this.initNavigation = !1, this.resultOfPreactivationDone = new T
        }
        appInitializer() {
            return this.injector.get(Nr, Promise.resolve(null)).then(() => {
                let l = null;
                const n = new Promise(n => l = n),
                    e = this.injector.get(_p),
                    t = this.injector.get(Np);
                if (this.isLegacyDisabled(t) || this.isLegacyEnabled(t)) l(!0);
                else if ("disabled" === t.initialNavigation) e.setUpLocationChangeListener(), l(!0);
                else {
                    if ("enabled" !== t.initialNavigation) throw new Error(`Invalid initialNavigation options: '${t.initialNavigation}'`);
                    e.hooks.afterPreactivation = () => this.initNavigation ? Za(null) : (this.initNavigation = !0, l(!0), this.resultOfPreactivationDone), e.initialNavigation()
                }
                return n
            })
        }
        bootstrapListener(l) {
            const n = this.injector.get(Np),
                e = this.injector.get(Mp),
                t = this.injector.get(Op),
                i = this.injector.get(_p),
                s = this.injector.get(zs);
            l === s.components[0] && (this.isLegacyEnabled(n) ? i.initialNavigation() : this.isLegacyDisabled(n) && i.setUpLocationChangeListener(), e.setUpPreloading(), t.init(), i.resetRootComponentType(s.componentTypes[0]), this.resultOfPreactivationDone.next(null), this.resultOfPreactivationDone.complete())
        }
        isLegacyEnabled(l) {
            return "legacy_enabled" === l.initialNavigation || !0 === l.initialNavigation || void 0 === l.initialNavigation
        }
        isLegacyDisabled(l) {
            return "legacy_disabled" === l.initialNavigation || !1 === l.initialNavigation
        }
    }

    function Gp(l) {
        return l.appInitializer.bind(l)
    }

    function Wp(l) {
        return l.bootstrapListener.bind(l)
    }
    const Kp = new El("Router Initializer");
    var Zp = st({
        encapsulation: 2,
        styles: [],
        data: {}
    });

    function Qp(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 1, "router-outlet", [], null, null, null, null, null)), gi(1, 212992, null, 0, Tp, [Ip, Fe, ce, [8, null], Rn], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }

    function Yp(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "ng-component", [], null, null, null, Qp, Zp)), gi(1, 49152, null, 0, vd, [], null, null)], null, null)
    }
    var Xp = jt("ng-component", vd, Yp, {}, {}, []); class Jp extends q {
        constructor(l, n) {
            super(l), this.sources = n, this.completed = 0, this.haveValues = 0;
            const e = n.length;
            this.values = new Array(e);
            for (let t = 0; t < e; t++) {
                const l = F(this, n[t], null, t);
                l && this.add(l)
            }
        }
        notifyNext(l, n, e, t, i) {
            this.values[e] = n, i._hasValue || (i._hasValue = !0, this.haveValues++)
        }
        notifyComplete(l) {
            const {
                destination: n,
                haveValues: e,
                values: t
            } = this, i = t.length;
            l._hasValue ? (this.completed++, this.completed === i && (e === i && n.next(t), n.complete())) : n.complete()
        }
    }
    const lf = new El("NgValueAccessor"); class nf {
        constructor(l, n) {
            this._renderer = l, this._elementRef = n, this.onChange = l => {}, this.onTouched = () => {}
        }
        writeValue(l) {
            this._renderer.setProperty(this._elementRef.nativeElement, "checked", l)
        }
        registerOnChange(l) {
            this.onChange = l
        }
        registerOnTouched(l) {
            this.onTouched = l
        }
        setDisabledState(l) {
            this._renderer.setProperty(this._elementRef.nativeElement, "disabled", l)
        }
    }
    const ef = new El("CompositionEventMode"); class tf {
        constructor(l, n, e) {
            this._renderer = l, this._elementRef = n, this._compositionMode = e, this.onChange = l => {}, this.onTouched = () => {}, this._composing = !1, null == this._compositionMode && (this._compositionMode = ! function () {
                const l = qo() ? qo().getUserAgent() : "";
                return /android (\d+)/.test(l.toLowerCase())
            }())
        }
        writeValue(l) {
            this._renderer.setProperty(this._elementRef.nativeElement, "value", null == l ? "" : l)
        }
        registerOnChange(l) {
            this.onChange = l
        }
        registerOnTouched(l) {
            this.onTouched = l
        }
        setDisabledState(l) {
            this._renderer.setProperty(this._elementRef.nativeElement, "disabled", l)
        }
        _handleInput(l) {
            (!this._compositionMode || this._compositionMode && !this._composing) && this.onChange(l)
        }
        _compositionStart() {
            this._composing = !0
        }
        _compositionEnd(l) {
            this._composing = !1, this._compositionMode && this.onChange(l)
        }
    }
    class sf {
        get value() {
            return this.control ? this.control.value : null
        }
        get valid() {
            return this.control ? this.control.valid : null
        }
        get invalid() {
            return this.control ? this.control.invalid : null
        }
        get pending() {
            return this.control ? this.control.pending : null
        }
        get disabled() {
            return this.control ? this.control.disabled : null
        }
        get enabled() {
            return this.control ? this.control.enabled : null
        }
        get errors() {
            return this.control ? this.control.errors : null
        }
        get pristine() {
            return this.control ? this.control.pristine : null
        }
        get dirty() {
            return this.control ? this.control.dirty : null
        }
        get touched() {
            return this.control ? this.control.touched : null
        }
        get status() {
            return this.control ? this.control.status : null
        }
        get untouched() {
            return this.control ? this.control.untouched : null
        }
        get statusChanges() {
            return this.control ? this.control.statusChanges : null
        }
        get valueChanges() {
            return this.control ? this.control.valueChanges : null
        }
        get path() {
            return null
        }
        reset(l) {
            this.control && this.control.reset(l)
        }
        hasError(l, n) {
            return !!this.control && this.control.hasError(l, n)
        }
        getError(l, n) {
            return this.control ? this.control.getError(l, n) : null
        }
    }
    class uf extends sf {
        get formDirective() {
            return null
        }
        get path() {
            return null
        }
    }

    function rf() {
        throw new Error("unimplemented")
    }
    class af extends sf {
        constructor() {
            super(...arguments), this._parent = null, this.name = null, this.valueAccessor = null, this._rawValidators = [], this._rawAsyncValidators = []
        }
        get validator() {
            return rf()
        }
        get asyncValidator() {
            return rf()
        }
    }
    class of {
        constructor(l) {
            this._cd = l
        }
        get ngClassUntouched() {
            return !!this._cd.control && this._cd.control.untouched
        }
        get ngClassTouched() {
            return !!this._cd.control && this._cd.control.touched
        }
        get ngClassPristine() {
            return !!this._cd.control && this._cd.control.pristine
        }
        get ngClassDirty() {
            return !!this._cd.control && this._cd.control.dirty
        }
        get ngClassValid() {
            return !!this._cd.control && this._cd.control.valid
        }
        get ngClassInvalid() {
            return !!this._cd.control && this._cd.control.invalid
        }
        get ngClassPending() {
            return !!this._cd.control && this._cd.control.pending
        }
    }
    class cf extends of {
        constructor(l) {
            super(l)
        }
    }

    function df(l) {
        return null == l || 0 === l.length
    }
    const hf = new El("NgValidators"), pf = /^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/; class ff {
        static min(l) {
            return n => {
                if (df(n.value) || df(l)) return null;
                const e = parseFloat(n.value);
                return !isNaN(e) && e < l ? {
                    min: {
                        min: l,
                        actual: n.value
                    }
                } : null
            }
        }
        static max(l) {
            return n => {
                if (df(n.value) || df(l)) return null;
                const e = parseFloat(n.value);
                return !isNaN(e) && e > l ? {
                    max: {
                        max: l,
                        actual: n.value
                    }
                } : null
            }
        }
        static required(l) {
            return df(l.value) ? {
                required: !0
            } : null
        }
        static requiredTrue(l) {
            return !0 === l.value ? null : {
                required: !0
            }
        }
        static email(l) {
            return df(l.value) ? null : pf.test(l.value) ? null : {
                email: !0
            }
        }
        static minLength(l) {
            return n => {
                if (df(n.value)) return null;
                const e = n.value ? n.value.length : 0;
                return e < l ? {
                    minlength: {
                        requiredLength: l,
                        actualLength: e
                    }
                } : null
            }
        }
        static maxLength(l) {
            return n => {
                const e = n.value ? n.value.length : 0;
                return e > l ? {
                    maxlength: {
                        requiredLength: l,
                        actualLength: e
                    }
                } : null
            }
        }
        static pattern(l) {
            if (!l) return ff.nullValidator;
            let n, e;
            return "string" == typeof l ? (e = "", "^" !== l.charAt(0) && (e += "^"), e += l, "$" !== l.charAt(l.length - 1) && (e += "$"), n = new RegExp(e)) : (e = l.toString(), n = l), l => {
                if (df(l.value)) return null;
                const t = l.value;
                return n.test(t) ? null : {
                    pattern: {
                        requiredPattern: e,
                        actualValue: t
                    }
                }
            }
        }
        static nullValidator(l) {
            return null
        }
        static compose(l) {
            if (!l) return null;
            const n = l.filter(gf);
            return 0 == n.length ? null : function (l) {
                return yf(function (l, n) {
                    return n.map(n => n(l))
                }(l, n))
            }
        }
        static composeAsync(l) {
            if (!l) return null;
            const n = l.filter(gf);
            return 0 == n.length ? null : function (l) {
                return function l(...n) {
                    let e;
                    return "function" == typeof n[n.length - 1] && (e = n.pop()), 1 === n.length && a(n[0]) && (n = n[0]), 0 === n.length ? Ga : e ? l(n).pipe(U(l => e(...l))) : new w(l => new Jp(l, n))
                }(function (l, n) {
                    return n.map(n => n(l))
                }(l, n).map(mf)).pipe(U(yf))
            }
        }
    }

    function gf(l) {
        return null != l
    }

    function mf(l) {
        const n = ee(l) ? G(l) : l;
        if (!te(n)) throw new Error("Expected validator to return Promise or Observable.");
        return n
    }

    function yf(l) {
        const n = l.reduce((l, n) => null != n ? Object.assign({}, l, n) : l, {});
        return 0 === Object.keys(n).length ? null : n
    }

    function vf(l) {
        return l.validate ? n => l.validate(n) : l
    }

    function bf(l) {
        return l.validate ? n => l.validate(n) : l
    }
    class _f {
        constructor(l, n) {
            this._renderer = l, this._elementRef = n, this.onChange = l => {}, this.onTouched = () => {}
        }
        writeValue(l) {
            this._renderer.setProperty(this._elementRef.nativeElement, "value", null == l ? "" : l)
        }
        registerOnChange(l) {
            this.onChange = n => {
                l("" == n ? null : parseFloat(n))
            }
        }
        registerOnTouched(l) {
            this.onTouched = l
        }
        setDisabledState(l) {
            this._renderer.setProperty(this._elementRef.nativeElement, "disabled", l)
        }
    }
    class wf {
        constructor() {
            this._accessors = []
        }
        add(l, n) {
            this._accessors.push([l, n])
        }
        remove(l) {
            for (let n = this._accessors.length - 1; n >= 0; --n)
                if (this._accessors[n][1] === l) return void this._accessors.splice(n, 1)
        }
        select(l) {
            this._accessors.forEach(n => {
                this._isSameGroup(n, l) && n[1] !== l && n[1].fireUncheck(l.value)
            })
        }
        _isSameGroup(l, n) {
            return !!l[0].control && l[0]._parent === n._control._parent && l[1].name === n.name
        }
    }
    class xf {
        constructor(l, n, e, t) {
            this._renderer = l, this._elementRef = n, this._registry = e, this._injector = t, this.onChange = () => {}, this.onTouched = () => {}
        }
        ngOnInit() {
            this._control = this._injector.get(af), this._checkName(), this._registry.add(this._control, this)
        }
        ngOnDestroy() {
            this._registry.remove(this)
        }
        writeValue(l) {
            this._state = l === this.value, this._renderer.setProperty(this._elementRef.nativeElement, "checked", this._state)
        }
        registerOnChange(l) {
            this._fn = l, this.onChange = () => {
                l(this.value), this._registry.select(this)
            }
        }
        fireUncheck(l) {
            this.writeValue(l)
        }
        registerOnTouched(l) {
            this.onTouched = l
        }
        setDisabledState(l) {
            this._renderer.setProperty(this._elementRef.nativeElement, "disabled", l)
        }
        _checkName() {
            this.name && this.formControlName && this.name !== this.formControlName && this._throwNameError(), !this.name && this.formControlName && (this.name = this.formControlName)
        }
        _throwNameError() {
            throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')
        }
    }
    const kf = {
        formControlName: '\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',
        formGroupName: '\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',
        formArrayName: '\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',
        ngModelGroup: '\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',
        ngModelWithFormGroup: '\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '
    };

    function Sf(l, n) {
        return null == l ? `${n}` : (n && "object" == typeof n && (n = "Object"), `${l}: ${n}`.slice(0, 50))
    }
    class Cf {
        constructor(l, n) {
            this._renderer = l, this._elementRef = n, this._optionMap = new Map, this._idCounter = 0, this.onChange = l => {}, this.onTouched = () => {}, this._compareWith = Yn
        }
        set compareWith(l) {
            if ("function" != typeof l) throw new Error(`compareWith must be a function, but received ${JSON.stringify(l)}`);
            this._compareWith = l
        }
        writeValue(l) {
            this.value = l;
            const n = this._getOptionId(l);
            null == n && this._renderer.setProperty(this._elementRef.nativeElement, "selectedIndex", -1);
            const e = Sf(n, l);
            this._renderer.setProperty(this._elementRef.nativeElement, "value", e)
        }
        registerOnChange(l) {
            this.onChange = n => {
                this.value = this._getOptionValue(n), l(this.value)
            }
        }
        registerOnTouched(l) {
            this.onTouched = l
        }
        setDisabledState(l) {
            this._renderer.setProperty(this._elementRef.nativeElement, "disabled", l)
        }
        _registerOption() {
            return (this._idCounter++).toString()
        }
        _getOptionId(l) {
            for (const n of Array.from(this._optionMap.keys()))
                if (this._compareWith(this._optionMap.get(n), l)) return n;
            return null
        }
        _getOptionValue(l) {
            const n = function (l) {
                return l.split(":")[0]
            }(l);
            return this._optionMap.has(n) ? this._optionMap.get(n) : l
        }
    }
    class If {
        constructor(l, n, e) {
            this._element = l, this._renderer = n, this._select = e, this._select && (this.id = this._select._registerOption())
        }
        set ngValue(l) {
            null != this._select && (this._select._optionMap.set(this.id, l), this._setElementValue(Sf(this.id, l)), this._select.writeValue(this._select.value))
        }
        set value(l) {
            this._setElementValue(l), this._select && this._select.writeValue(this._select.value)
        }
        _setElementValue(l) {
            this._renderer.setProperty(this._element.nativeElement, "value", l)
        }
        ngOnDestroy() {
            this._select && (this._select._optionMap.delete(this.id), this._select.writeValue(this._select.value))
        }
    }

    function Tf(l, n) {
        return null == l ? `${n}` : ("string" == typeof n && (n = `'${n}'`), n && "object" == typeof n && (n = "Object"), `${l}: ${n}`.slice(0, 50))
    }
    class Ef {
        constructor(l, n, e) {
            this._element = l, this._renderer = n, this._select = e, this._select && (this.id = this._select._registerOption(this))
        }
        set ngValue(l) {
            null != this._select && (this._value = l, this._setElementValue(Tf(this.id, l)), this._select.writeValue(this._select.value))
        }
        set value(l) {
            this._select ? (this._value = l, this._setElementValue(Tf(this.id, l)), this._select.writeValue(this._select.value)) : this._setElementValue(l)
        }
        _setElementValue(l) {
            this._renderer.setProperty(this._element.nativeElement, "value", l)
        }
        _setSelected(l) {
            this._renderer.setProperty(this._element.nativeElement, "selected", l)
        }
        ngOnDestroy() {
            this._select && (this._select._optionMap.delete(this.id), this._select.writeValue(this._select.value))
        }
    }

    function Af(l, n) {
        return [...n.path, l]
    }

    function Pf(l, n) {
        l || Mf(n, "Cannot find control with"), n.valueAccessor || Mf(n, "No value accessor for form control with"), l.validator = ff.compose([l.validator, n.validator]), l.asyncValidator = ff.composeAsync([l.asyncValidator, n.asyncValidator]), n.valueAccessor.writeValue(l.value),
            function (l, n) {
                n.valueAccessor.registerOnChange(e => {
                    l._pendingValue = e, l._pendingChange = !0, l._pendingDirty = !0, "change" === l.updateOn && Df(l, n)
                })
            }(l, n),
            function (l, n) {
                l.registerOnChange((l, e) => {
                    n.valueAccessor.writeValue(l), e && n.viewToModelUpdate(l)
                })
            }(l, n),
            function (l, n) {
                n.valueAccessor.registerOnTouched(() => {
                    l._pendingTouched = !0, "blur" === l.updateOn && l._pendingChange && Df(l, n), "submit" !== l.updateOn && l.markAsTouched()
                })
            }(l, n), n.valueAccessor.setDisabledState && l.registerOnDisabledChange(l => {
                n.valueAccessor.setDisabledState(l)
            }), n._rawValidators.forEach(n => {
                n.registerOnValidatorChange && n.registerOnValidatorChange(() => l.updateValueAndValidity())
            }), n._rawAsyncValidators.forEach(n => {
                n.registerOnValidatorChange && n.registerOnValidatorChange(() => l.updateValueAndValidity())
            })
    }

    function Df(l, n) {
        l._pendingDirty && l.markAsDirty(), l.setValue(l._pendingValue, {
            emitModelToViewChange: !1
        }), n.viewToModelUpdate(l._pendingValue), l._pendingChange = !1
    }

    function Mf(l, n) {
        let e;
        throw e = l.path.length > 1 ? `path: '${l.path.join(" -> ")}'` : l.path[0] ? `name: '${l.path}'` : "unspecified name attribute", new Error(`${n} ${e}`)
    }

    function Of(l) {
        return null != l ? ff.compose(l.map(vf)) : null
    }

    function Nf(l) {
        return null != l ? ff.composeAsync(l.map(bf)) : null
    }
    const Rf = [nf, class {
        constructor(l, n) {
            this._renderer = l, this._elementRef = n, this.onChange = l => {}, this.onTouched = () => {}
        }
        writeValue(l) {
            this._renderer.setProperty(this._elementRef.nativeElement, "value", parseFloat(l))
        }
        registerOnChange(l) {
            this.onChange = n => {
                l("" == n ? null : parseFloat(n))
            }
        }
        registerOnTouched(l) {
            this.onTouched = l
        }
        setDisabledState(l) {
            this._renderer.setProperty(this._elementRef.nativeElement, "disabled", l)
        }
    }, _f, Cf, class {
        constructor(l, n) {
            this._renderer = l, this._elementRef = n, this._optionMap = new Map, this._idCounter = 0, this.onChange = l => {}, this.onTouched = () => {}, this._compareWith = Yn
        }
        set compareWith(l) {
            if ("function" != typeof l) throw new Error(`compareWith must be a function, but received ${JSON.stringify(l)}`);
            this._compareWith = l
        }
        writeValue(l) {
            let n;
            if (this.value = l, Array.isArray(l)) {
                const e = l.map(l => this._getOptionId(l));
                n = (l, n) => {
                    l._setSelected(e.indexOf(n.toString()) > -1)
                }
            } else n = (l, n) => {
                l._setSelected(!1)
            };
            this._optionMap.forEach(n)
        }
        registerOnChange(l) {
            this.onChange = n => {
                const e = [];
                if (n.hasOwnProperty("selectedOptions")) {
                    const l = n.selectedOptions;
                    for (let n = 0; n < l.length; n++) {
                        const t = l.item(n),
                            i = this._getOptionValue(t.value);
                        e.push(i)
                    }
                } else {
                    const l = n.options;
                    for (let n = 0; n < l.length; n++) {
                        const t = l.item(n);
                        if (t.selected) {
                            const l = this._getOptionValue(t.value);
                            e.push(l)
                        }
                    }
                }
                this.value = e, l(e)
            }
        }
        registerOnTouched(l) {
            this.onTouched = l
        }
        setDisabledState(l) {
            this._renderer.setProperty(this._elementRef.nativeElement, "disabled", l)
        }
        _registerOption(l) {
            const n = (this._idCounter++).toString();
            return this._optionMap.set(n, l), n
        }
        _getOptionId(l) {
            for (const n of Array.from(this._optionMap.keys()))
                if (this._compareWith(this._optionMap.get(n)._value, l)) return n;
            return null
        }
        _getOptionValue(l) {
            const n = function (l) {
                return l.split(":")[0]
            }(l);
            return this._optionMap.has(n) ? this._optionMap.get(n)._value : l
        }
    }, xf], Bf = "VALID", zf = "INVALID", $f = "PENDING", Lf = "DISABLED";

    function Ff(l) {
        const n = Uf(l) ? l.validators : l;
        return Array.isArray(n) ? Of(n) : n || null
    }

    function qf(l, n) {
        const e = Uf(n) ? n.asyncValidators : l;
        return Array.isArray(e) ? Nf(e) : e || null
    }

    function Uf(l) {
        return null != l && !Array.isArray(l) && "object" == typeof l
    }
    class Hf {
        constructor(l, n) {
            this.validator = l, this.asyncValidator = n, this._onCollectionChange = () => {}, this.pristine = !0, this.touched = !1, this._onDisabledChange = []
        }
        get parent() {
            return this._parent
        }
        get valid() {
            return this.status === Bf
        }
        get invalid() {
            return this.status === zf
        }
        get pending() {
            return this.status == $f
        }
        get disabled() {
            return this.status === Lf
        }
        get enabled() {
            return this.status !== Lf
        }
        get dirty() {
            return !this.pristine
        }
        get untouched() {
            return !this.touched
        }
        get updateOn() {
            return this._updateOn ? this._updateOn : this.parent ? this.parent.updateOn : "change"
        }
        setValidators(l) {
            this.validator = Ff(l)
        }
        setAsyncValidators(l) {
            this.asyncValidator = qf(l)
        }
        clearValidators() {
            this.validator = null
        }
        clearAsyncValidators() {
            this.asyncValidator = null
        }
        markAsTouched(l = {}) {
            this.touched = !0, this._parent && !l.onlySelf && this._parent.markAsTouched(l)
        }
        markAllAsTouched() {
            this.markAsTouched({
                onlySelf: !0
            }), this._forEachChild(l => l.markAllAsTouched())
        }
        markAsUntouched(l = {}) {
            this.touched = !1, this._pendingTouched = !1, this._forEachChild(l => {
                l.markAsUntouched({
                    onlySelf: !0
                })
            }), this._parent && !l.onlySelf && this._parent._updateTouched(l)
        }
        markAsDirty(l = {}) {
            this.pristine = !1, this._parent && !l.onlySelf && this._parent.markAsDirty(l)
        }
        markAsPristine(l = {}) {
            this.pristine = !0, this._pendingDirty = !1, this._forEachChild(l => {
                l.markAsPristine({
                    onlySelf: !0
                })
            }), this._parent && !l.onlySelf && this._parent._updatePristine(l)
        }
        markAsPending(l = {}) {
            this.status = $f, !1 !== l.emitEvent && this.statusChanges.emit(this.status), this._parent && !l.onlySelf && this._parent.markAsPending(l)
        }
        disable(l = {}) {
            const n = this._parentMarkedDirty(l.onlySelf);
            this.status = Lf, this.errors = null, this._forEachChild(n => {
                n.disable(Object.assign({}, l, {
                    onlySelf: !0
                }))
            }), this._updateValue(), !1 !== l.emitEvent && (this.valueChanges.emit(this.value), this.statusChanges.emit(this.status)), this._updateAncestors(Object.assign({}, l, {
                skipPristineCheck: n
            })), this._onDisabledChange.forEach(l => l(!0))
        }
        enable(l = {}) {
            const n = this._parentMarkedDirty(l.onlySelf);
            this.status = Bf, this._forEachChild(n => {
                n.enable(Object.assign({}, l, {
                    onlySelf: !0
                }))
            }), this.updateValueAndValidity({
                onlySelf: !0,
                emitEvent: l.emitEvent
            }), this._updateAncestors(Object.assign({}, l, {
                skipPristineCheck: n
            })), this._onDisabledChange.forEach(l => l(!1))
        }
        _updateAncestors(l) {
            this._parent && !l.onlySelf && (this._parent.updateValueAndValidity(l), l.skipPristineCheck || this._parent._updatePristine(), this._parent._updateTouched())
        }
        setParent(l) {
            this._parent = l
        }
        updateValueAndValidity(l = {}) {
            this._setInitialStatus(), this._updateValue(), this.enabled && (this._cancelExistingSubscription(), this.errors = this._runValidator(), this.status = this._calculateStatus(), this.status !== Bf && this.status !== $f || this._runAsyncValidator(l.emitEvent)), !1 !== l.emitEvent && (this.valueChanges.emit(this.value), this.statusChanges.emit(this.status)), this._parent && !l.onlySelf && this._parent.updateValueAndValidity(l)
        }
        _updateTreeValidity(l = {
            emitEvent: !0
        }) {
            this._forEachChild(n => n._updateTreeValidity(l)), this.updateValueAndValidity({
                onlySelf: !0,
                emitEvent: l.emitEvent
            })
        }
        _setInitialStatus() {
            this.status = this._allControlsDisabled() ? Lf : Bf
        }
        _runValidator() {
            return this.validator ? this.validator(this) : null
        }
        _runAsyncValidator(l) {
            if (this.asyncValidator) {
                this.status = $f;
                const n = mf(this.asyncValidator(this));
                this._asyncValidationSubscription = n.subscribe(n => this.setErrors(n, {
                    emitEvent: l
                }))
            }
        }
        _cancelExistingSubscription() {
            this._asyncValidationSubscription && this._asyncValidationSubscription.unsubscribe()
        }
        setErrors(l, n = {}) {
            this.errors = l, this._updateControlsErrors(!1 !== n.emitEvent)
        }
        get(l) {
            return function (l, n, e) {
                return null == n ? null : (n instanceof Array || (n = n.split(".")), n instanceof Array && 0 === n.length ? null : n.reduce((l, n) => l instanceof jf ? l.controls.hasOwnProperty(n) ? l.controls[n] : null : l instanceof Gf && l.at(n) || null, l))
            }(this, l)
        }
        getError(l, n) {
            const e = n ? this.get(n) : this;
            return e && e.errors ? e.errors[l] : null
        }
        hasError(l, n) {
            return !!this.getError(l, n)
        }
        get root() {
            let l = this;
            for (; l._parent;) l = l._parent;
            return l
        }
        _updateControlsErrors(l) {
            this.status = this._calculateStatus(), l && this.statusChanges.emit(this.status), this._parent && this._parent._updateControlsErrors(l)
        }
        _initObservables() {
            this.valueChanges = new qi, this.statusChanges = new qi
        }
        _calculateStatus() {
            return this._allControlsDisabled() ? Lf : this.errors ? zf : this._anyControlsHaveStatus($f) ? $f : this._anyControlsHaveStatus(zf) ? zf : Bf
        }
        _anyControlsHaveStatus(l) {
            return this._anyControls(n => n.status === l)
        }
        _anyControlsDirty() {
            return this._anyControls(l => l.dirty)
        }
        _anyControlsTouched() {
            return this._anyControls(l => l.touched)
        }
        _updatePristine(l = {}) {
            this.pristine = !this._anyControlsDirty(), this._parent && !l.onlySelf && this._parent._updatePristine(l)
        }
        _updateTouched(l = {}) {
            this.touched = this._anyControlsTouched(), this._parent && !l.onlySelf && this._parent._updateTouched(l)
        }
        _isBoxedValue(l) {
            return "object" == typeof l && null !== l && 2 === Object.keys(l).length && "value" in l && "disabled" in l
        }
        _registerOnCollectionChange(l) {
            this._onCollectionChange = l
        }
        _setUpdateStrategy(l) {
            Uf(l) && null != l.updateOn && (this._updateOn = l.updateOn)
        }
        _parentMarkedDirty(l) {
            return !l && this._parent && this._parent.dirty && !this._parent._anyControlsDirty()
        }
    }
    class Vf extends Hf {
        constructor(l = null, n, e) {
            super(Ff(n), qf(e, n)), this._onChange = [], this._applyFormState(l), this._setUpdateStrategy(n), this.updateValueAndValidity({
                onlySelf: !0,
                emitEvent: !1
            }), this._initObservables()
        }
        setValue(l, n = {}) {
            this.value = this._pendingValue = l, this._onChange.length && !1 !== n.emitModelToViewChange && this._onChange.forEach(l => l(this.value, !1 !== n.emitViewToModelChange)), this.updateValueAndValidity(n)
        }
        patchValue(l, n = {}) {
            this.setValue(l, n)
        }
        reset(l = null, n = {}) {
            this._applyFormState(l), this.markAsPristine(n), this.markAsUntouched(n), this.setValue(this.value, n), this._pendingChange = !1
        }
        _updateValue() {}
        _anyControls(l) {
            return !1
        }
        _allControlsDisabled() {
            return this.disabled
        }
        registerOnChange(l) {
            this._onChange.push(l)
        }
        _clearChangeFns() {
            this._onChange = [], this._onDisabledChange = [], this._onCollectionChange = () => {}
        }
        registerOnDisabledChange(l) {
            this._onDisabledChange.push(l)
        }
        _forEachChild(l) {}
        _syncPendingControls() {
            return !("submit" !== this.updateOn || (this._pendingDirty && this.markAsDirty(), this._pendingTouched && this.markAsTouched(), !this._pendingChange) || (this.setValue(this._pendingValue, {
                onlySelf: !0,
                emitModelToViewChange: !1
            }), 0))
        }
        _applyFormState(l) {
            this._isBoxedValue(l) ? (this.value = this._pendingValue = l.value, l.disabled ? this.disable({
                onlySelf: !0,
                emitEvent: !1
            }) : this.enable({
                onlySelf: !0,
                emitEvent: !1
            })) : this.value = this._pendingValue = l
        }
    }
    class jf extends Hf {
        constructor(l, n, e) {
            super(Ff(n), qf(e, n)), this.controls = l, this._initObservables(), this._setUpdateStrategy(n), this._setUpControls(), this.updateValueAndValidity({
                onlySelf: !0,
                emitEvent: !1
            })
        }
        registerControl(l, n) {
            return this.controls[l] ? this.controls[l] : (this.controls[l] = n, n.setParent(this), n._registerOnCollectionChange(this._onCollectionChange), n)
        }
        addControl(l, n) {
            this.registerControl(l, n), this.updateValueAndValidity(), this._onCollectionChange()
        }
        removeControl(l) {
            this.controls[l] && this.controls[l]._registerOnCollectionChange(() => {}), delete this.controls[l], this.updateValueAndValidity(), this._onCollectionChange()
        }
        setControl(l, n) {
            this.controls[l] && this.controls[l]._registerOnCollectionChange(() => {}), delete this.controls[l], n && this.registerControl(l, n), this.updateValueAndValidity(), this._onCollectionChange()
        }
        contains(l) {
            return this.controls.hasOwnProperty(l) && this.controls[l].enabled
        }
        setValue(l, n = {}) {
            this._checkAllValuesPresent(l), Object.keys(l).forEach(e => {
                this._throwIfControlMissing(e), this.controls[e].setValue(l[e], {
                    onlySelf: !0,
                    emitEvent: n.emitEvent
                })
            }), this.updateValueAndValidity(n)
        }
        patchValue(l, n = {}) {
            Object.keys(l).forEach(e => {
                this.controls[e] && this.controls[e].patchValue(l[e], {
                    onlySelf: !0,
                    emitEvent: n.emitEvent
                })
            }), this.updateValueAndValidity(n)
        }
        reset(l = {}, n = {}) {
            this._forEachChild((e, t) => {
                e.reset(l[t], {
                    onlySelf: !0,
                    emitEvent: n.emitEvent
                })
            }), this._updatePristine(n), this._updateTouched(n), this.updateValueAndValidity(n)
        }
        getRawValue() {
            return this._reduceChildren({}, (l, n, e) => (l[e] = n instanceof Vf ? n.value : n.getRawValue(), l))
        }
        _syncPendingControls() {
            let l = this._reduceChildren(!1, (l, n) => !!n._syncPendingControls() || l);
            return l && this.updateValueAndValidity({
                onlySelf: !0
            }), l
        }
        _throwIfControlMissing(l) {
            if (!Object.keys(this.controls).length) throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");
            if (!this.controls[l]) throw new Error(`Cannot find form control with name: ${l}.`)
        }
        _forEachChild(l) {
            Object.keys(this.controls).forEach(n => l(this.controls[n], n))
        }
        _setUpControls() {
            this._forEachChild(l => {
                l.setParent(this), l._registerOnCollectionChange(this._onCollectionChange)
            })
        }
        _updateValue() {
            this.value = this._reduceValue()
        }
        _anyControls(l) {
            let n = !1;
            return this._forEachChild((e, t) => {
                n = n || this.contains(t) && l(e)
            }), n
        }
        _reduceValue() {
            return this._reduceChildren({}, (l, n, e) => ((n.enabled || this.disabled) && (l[e] = n.value), l))
        }
        _reduceChildren(l, n) {
            let e = l;
            return this._forEachChild((l, t) => {
                e = n(e, l, t)
            }), e
        }
        _allControlsDisabled() {
            for (const l of Object.keys(this.controls))
                if (this.controls[l].enabled) return !1;
            return Object.keys(this.controls).length > 0 || this.disabled
        }
        _checkAllValuesPresent(l) {
            this._forEachChild((n, e) => {
                if (void 0 === l[e]) throw new Error(`Must supply a value for form control with name: '${e}'.`)
            })
        }
    }
    class Gf extends Hf {
        constructor(l, n, e) {
            super(Ff(n), qf(e, n)), this.controls = l, this._initObservables(), this._setUpdateStrategy(n), this._setUpControls(), this.updateValueAndValidity({
                onlySelf: !0,
                emitEvent: !1
            })
        }
        at(l) {
            return this.controls[l]
        }
        push(l) {
            this.controls.push(l), this._registerControl(l), this.updateValueAndValidity(), this._onCollectionChange()
        }
        insert(l, n) {
            this.controls.splice(l, 0, n), this._registerControl(n), this.updateValueAndValidity()
        }
        removeAt(l) {
            this.controls[l] && this.controls[l]._registerOnCollectionChange(() => {}), this.controls.splice(l, 1), this.updateValueAndValidity()
        }
        setControl(l, n) {
            this.controls[l] && this.controls[l]._registerOnCollectionChange(() => {}), this.controls.splice(l, 1), n && (this.controls.splice(l, 0, n), this._registerControl(n)), this.updateValueAndValidity(), this._onCollectionChange()
        }
        get length() {
            return this.controls.length
        }
        setValue(l, n = {}) {
            this._checkAllValuesPresent(l), l.forEach((l, e) => {
                this._throwIfControlMissing(e), this.at(e).setValue(l, {
                    onlySelf: !0,
                    emitEvent: n.emitEvent
                })
            }), this.updateValueAndValidity(n)
        }
        patchValue(l, n = {}) {
            l.forEach((l, e) => {
                this.at(e) && this.at(e).patchValue(l, {
                    onlySelf: !0,
                    emitEvent: n.emitEvent
                })
            }), this.updateValueAndValidity(n)
        }
        reset(l = [], n = {}) {
            this._forEachChild((e, t) => {
                e.reset(l[t], {
                    onlySelf: !0,
                    emitEvent: n.emitEvent
                })
            }), this._updatePristine(n), this._updateTouched(n), this.updateValueAndValidity(n)
        }
        getRawValue() {
            return this.controls.map(l => l instanceof Vf ? l.value : l.getRawValue())
        }
        clear() {
            this.controls.length < 1 || (this._forEachChild(l => l._registerOnCollectionChange(() => {})), this.controls.splice(0), this.updateValueAndValidity())
        }
        _syncPendingControls() {
            let l = this.controls.reduce((l, n) => !!n._syncPendingControls() || l, !1);
            return l && this.updateValueAndValidity({
                onlySelf: !0
            }), l
        }
        _throwIfControlMissing(l) {
            if (!this.controls.length) throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");
            if (!this.at(l)) throw new Error(`Cannot find form control at index ${l}`)
        }
        _forEachChild(l) {
            this.controls.forEach((n, e) => {
                l(n, e)
            })
        }
        _updateValue() {
            this.value = this.controls.filter(l => l.enabled || this.disabled).map(l => l.value)
        }
        _anyControls(l) {
            return this.controls.some(n => n.enabled && l(n))
        }
        _setUpControls() {
            this._forEachChild(l => this._registerControl(l))
        }
        _checkAllValuesPresent(l) {
            this._forEachChild((n, e) => {
                if (void 0 === l[e]) throw new Error(`Must supply a value for form control at index: ${e}.`)
            })
        }
        _allControlsDisabled() {
            for (const l of this.controls)
                if (l.enabled) return !1;
            return this.controls.length > 0 || this.disabled
        }
        _registerControl(l) {
            l.setParent(this), l._registerOnCollectionChange(this._onCollectionChange)
        }
    }
    const Wf = (() => Promise.resolve(null))(); class Kf extends uf {
        constructor(l, n) {
            super(), this.submitted = !1, this._directives = [], this.ngSubmit = new qi, this.form = new jf({}, Of(l), Nf(n))
        }
        ngAfterViewInit() {
            this._setUpdateStrategy()
        }
        get formDirective() {
            return this
        }
        get control() {
            return this.form
        }
        get path() {
            return []
        }
        get controls() {
            return this.form.controls
        }
        addControl(l) {
            Wf.then(() => {
                const n = this._findContainer(l.path);
                l.control = n.registerControl(l.name, l.control), Pf(l.control, l), l.control.updateValueAndValidity({
                    emitEvent: !1
                }), this._directives.push(l)
            })
        }
        getControl(l) {
            return this.form.get(l.path)
        }
        removeControl(l) {
            Wf.then(() => {
                const n = this._findContainer(l.path);
                n && n.removeControl(l.name),
                    function (l, n) {
                        const e = l.indexOf(n);
                        e > -1 && l.splice(e, 1)
                    }(this._directives, l)
            })
        }
        addFormGroup(l) {
            Wf.then(() => {
                const n = this._findContainer(l.path),
                    e = new jf({});
                (function (l, n) {
                    null == l && Mf(n, "Cannot find control with"), l.validator = ff.compose([l.validator, n.validator]), l.asyncValidator = ff.composeAsync([l.asyncValidator, n.asyncValidator])
                })(e, l), n.registerControl(l.name, e), e.updateValueAndValidity({
                    emitEvent: !1
                })
            })
        }
        removeFormGroup(l) {
            Wf.then(() => {
                const n = this._findContainer(l.path);
                n && n.removeControl(l.name)
            })
        }
        getFormGroup(l) {
            return this.form.get(l.path)
        }
        updateModel(l, n) {
            Wf.then(() => {
                this.form.get(l.path).setValue(n)
            })
        }
        setValue(l) {
            this.control.setValue(l)
        }
        onSubmit(l) {
            return this.submitted = !0, n = this._directives, this.form._syncPendingControls(), n.forEach(l => {
                const n = l.control;
                "submit" === n.updateOn && n._pendingChange && (l.viewToModelUpdate(n._pendingValue), n._pendingChange = !1)
            }), this.ngSubmit.emit(l), !1;
            var n
        }
        onReset() {
            this.resetForm()
        }
        resetForm(l) {
            this.form.reset(l), this.submitted = !1
        }
        _setUpdateStrategy() {
            this.options && null != this.options.updateOn && (this.form._updateOn = this.options.updateOn)
        }
        _findContainer(l) {
            return l.pop(), l.length ? this.form.get(l) : this.form
        }
    }
    class Zf {
        static modelParentException() {
            throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${kf.formControlName}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      ${kf.ngModelWithFormGroup}`)
        }
        static formGroupNameException() {
            throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${kf.formGroupName}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${kf.ngModelGroup}`)
        }
        static missingNameException() {
            throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')
        }
        static modelGroupParentException() {
            throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${kf.formGroupName}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${kf.ngModelGroup}`)
        }
        static ngFormWarning() {
            console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")
        }
    }
    const Qf = new El("NgFormSelectorWarning"); class Yf extends uf {
        ngOnInit() {
            this._checkParentType(), this.formDirective.addFormGroup(this)
        }
        ngOnDestroy() {
            this.formDirective && this.formDirective.removeFormGroup(this)
        }
        get control() {
            return this.formDirective.getFormGroup(this)
        }
        get path() {
            return Af(this.name, this._parent)
        }
        get formDirective() {
            return this._parent ? this._parent.formDirective : null
        }
        get validator() {
            return Of(this._validators)
        }
        get asyncValidator() {
            return Nf(this._asyncValidators)
        }
        _checkParentType() {}
    }
    class Xf extends Yf {
        constructor(l, n, e) {
            super(), this._parent = l, this._validators = n, this._asyncValidators = e
        }
        _checkParentType() {
            this._parent instanceof Xf || this._parent instanceof Kf || Zf.modelGroupParentException()
        }
    }
    const Jf = (() => Promise.resolve(null))(); class lg extends af {
        constructor(l, n, e, t) {
            super(), this.control = new Vf, this._registered = !1, this.update = new qi, this._parent = l, this._rawValidators = n || [], this._rawAsyncValidators = e || [], this.valueAccessor = function (l, n) {
                if (!n) return null;
                Array.isArray(n) || Mf(l, "Value accessor was not provided as an array for form control with");
                let e = void 0,
                    t = void 0,
                    i = void 0;
                return n.forEach(n => {
                    n.constructor === tf ? e = n : function (l) {
                        return Rf.some(n => l.constructor === n)
                    }(n) ? (t && Mf(l, "More than one built-in value accessor matches form control with"), t = n) : (i && Mf(l, "More than one custom value accessor matches form control with"), i = n)
                }), i || t || e || (Mf(l, "No valid value accessor for form control with"), null)
            }(this, t)
        }
        ngOnChanges(l) {
            this._checkForErrors(), this._registered || this._setUpControl(), "isDisabled" in l && this._updateDisabled(l),
                function (l, n) {
                    if (!l.hasOwnProperty("model")) return !1;
                    const e = l.model;
                    return !!e.isFirstChange() || !Yn(n, e.currentValue)
                }(l, this.viewModel) && (this._updateValue(this.model), this.viewModel = this.model)
        }
        ngOnDestroy() {
            this.formDirective && this.formDirective.removeControl(this)
        }
        get path() {
            return this._parent ? Af(this.name, this._parent) : [this.name]
        }
        get formDirective() {
            return this._parent ? this._parent.formDirective : null
        }
        get validator() {
            return Of(this._rawValidators)
        }
        get asyncValidator() {
            return Nf(this._rawAsyncValidators)
        }
        viewToModelUpdate(l) {
            this.viewModel = l, this.update.emit(l)
        }
        _setUpControl() {
            this._setUpdateStrategy(), this._isStandalone() ? this._setUpStandalone() : this.formDirective.addControl(this), this._registered = !0
        }
        _setUpdateStrategy() {
            this.options && null != this.options.updateOn && (this.control._updateOn = this.options.updateOn)
        }
        _isStandalone() {
            return !this._parent || !(!this.options || !this.options.standalone)
        }
        _setUpStandalone() {
            Pf(this.control, this), this.control.updateValueAndValidity({
                emitEvent: !1
            })
        }
        _checkForErrors() {
            this._isStandalone() || this._checkParentType(), this._checkName()
        }
        _checkParentType() {
            !(this._parent instanceof Xf) && this._parent instanceof Yf ? Zf.formGroupNameException() : this._parent instanceof Xf || this._parent instanceof Kf || Zf.modelParentException()
        }
        _checkName() {
            this.options && this.options.name && (this.name = this.options.name), this._isStandalone() || this.name || Zf.missingNameException()
        }
        _updateValue(l) {
            Jf.then(() => {
                this.control.setValue(l, {
                    emitViewToModelChange: !1
                })
            })
        }
        _updateDisabled(l) {
            const n = l.isDisabled.currentValue,
                e = "" === n || n && "false" !== n;
            Jf.then(() => {
                e && !this.control.disabled ? this.control.disable() : !e && this.control.disabled && this.control.enable()
            })
        }
    }
    class ng {
        get required() {
            return this._required
        }
        set required(l) {
            this._required = null != l && !1 !== l && "false" !== `${l}`, this._onChange && this._onChange()
        }
        validate(l) {
            return this.required ? ff.required(l) : null
        }
        registerOnValidatorChange(l) {
            this._onChange = l
        }
    }
    class eg {}
    class tg {
        static withConfig(l) {
            return {
                ngModule: tg,
                providers: [{
                    provide: Qf,
                    useValue: l.warnOnDeprecatedNgFormSelector
                }]
            }
        }
    }
    class ig extends La {
        constructor() {
            super(...arguments), this.keepOrder = (l, n) => 0
        }
        transform(l) {
            return super.transform(l, this.keepOrder)
        }
    }
    class sg {
        constructor(l) {
            this.elementRef = l
        }
        onMouseEnter() {
            this.hoverClass && this.elementRef.nativeElement.classList.add(...this.hoverClass.split(" "))
        }
        onMouseLeave() {
            this.hoverClass && this.elementRef.nativeElement.classList.remove(...this.hoverClass.split(" "))
        }
    }
    const ug = {
        deity: "fas fa-ankh text-danger text-300 cursor-pointer",
        daily: "fas fa-gift text-warning text-300 cursor-pointer",
        arrow_left: "fas fa-chevron-left",
        arrow_right: "fas fa-chevron-right",
        arrow_down: "fas fa-angle-double-down",
        arrow_up: "fas fa-angle-up",
        chevron_up: "fas fa-chevron-up",
        arrow_angle_left: "fas fa-angle-left",
        arrow_angle_right: "fas fa-angle-right",
        arrow_angle_left_double: "fas fa-angle-double-left",
        arrow_angle_right_double: "fas fa-angle-double-right",
        expand: "fas fa-expand-arrows-alt",
        exit: "fas fa-sign-out-alt",
        play: "fas fa-play",
        pause: "fas fa-pause",
        spells: "fas fa-magic",
        copy: "fas fa-copy",
        download: "fas fa-download",
        save: "fas fa-save",
        edit: "fas fa-edit",
        ok: "fas fa-check",
        cancel: "fas fa-times",
        player: "fas fa-flag",
        capital: "fas fa-star",
        city: "fas fa-university",
        empire: "fas fa-crown",
        pop: "fas fa-users",
        troops: "fas fa-user-shield",
        recruitment: "fas fa-user-shield",
        auto: "fas fa-sync",
        connected: "fas fa-recycle",
        food: "fas fa-drumstick-bite",
        prod: "fas fa-tools",
        wonder: "fas fa-university",
        science: "fas fa-flask",
        diplomacy: "fas fa-handshake",
        gold: "fas fa-coins",
        time: "fas fa-hourglass-half",
        culture: "fas fa-theater-masks",
        influence: "fas fa-broadcast-tower",
        faith: "fas fa-pray",
        trade: "fas fa-trailer",
        colony: "fas fa-globe-americas",
        favor: "fas fa-ankh",
        health: "fas fa-heartbeat",
        happiness: "fas fa-smile",
        capacity: "fas fa-box",
        details: "fas fa-eye",
        attack: "fas fa-bolt",
        defense: "fas fa-chess-rook",
        success: "fas fa-check-circle",
        defeat: "fas fa-times",
        ranged: "fas fa-bullseye",
        siege: "fas fa-holly-berry",
        speed: "fas fa-angle-double-right",
        unlock: "fas fa-unlock",
        act_view: "fas fa-eye",
        act_move: "fas fa-user-shield",
        act_scout: "fas fa-binoculars",
        act_attack: "fas fa-bolt",
        act_spy: "fas fa-mask",
        act_trade: "fas fa-trailer",
        act_transfer: "fas fa-coins",
        act_colony: "fas fa-globe-americas",
        act_worker: "fas fa-hammer",
        plus: "fas fa-plus",
        minus: "fas fa-minus",
        center: "fas fa-crosshairs",
        opt_buy: "fas fa-coins",
        opt_minus: "fas fa-minus bg-danger rounded-circle text-light p-2 text-80 cursor-pointer",
        question: "fas fa-question",
        exclamation: "fas fa-exclamation-circle text-warning mr-1",
        warning: "fas fa-exclamation-triangle text-danger mr-1",
        info: "fas fa-info-circle text-primary mr-1",
        forbidden: "fas fa-ban text-danger mr-1",
        world: "fas fa-globe-asia",
        report: "fas fa-file-alt",
        simulator: "fas fa-calculator",
        notification: "fas fa-bell",
        power: "fas fa-magic",
        help: "fas fa-question",
        option: "fas fa-sliders-h",
        support: "fas fa-info",
        plague: "fas fa-skull",
        sleep: "fas fa-bed",
        balanced: "fas fa-balance-scale",
        tech: "fas fa-cogs",
        progress: "fas fa-cog",
        prestige: "fas fa-lightbulb",
        relics: "fas fa-monument"
    }; class rg {
        constructor(l, n, e, t, i, s) {
            this.conf = l, this.data = n, this.router = e, this.saveService = t, this.kongService = i, this.dataService = s, this.icons = ug, this.load = !1, this.loadText = !1, this.loadTextContent = "", this.new = !1, this.step2 = !1, this.name = "", this.difficulty = 2, this.saves = []
        }
        ngOnInit() {
            this.init()
        }
        init() {
            this.saves = [];
            try {
                Object.keys(localStorage).forEach(l => {
                    l.startsWith(this.conf.save.prefix) && this.saves.push(this.saveService.extractSave(l.substr(this.conf.save.prefix.length)))
                })
            } catch (l) {
                this.data.noautosave = !0
            }
            this.saves.sort((l, n) => l.date < n.date ? 1 : l.date > n.date ? -1 : 0)
        }
        warning() {
            return this.saves.map(l => l.name).includes(this.name)
        }
        initNew() {
            this.name = this.kongService.getUsername(), this.new = !0, this.step2 = !1
        }
        newGame() {
            this.name && (this.data.newGame(this.name, this.difficulty, this.civid), this.dataService.initGame(), this.dataService.initCivs(this.civid), this.router.navigate(["/game"]))
        }
        continue () {
            this.loadSave(this.saves[0])
        }
        loadSave(l) {
            this.saveService.load(l.data), this.router.navigate(["/game"])
        }
        delete(l) {
            this.saveService.delete(l.name), this.init()
        }
        loadFromText() {
            try {
                this.saveService.load(this.loadTextContent), this.router.navigate(["/game"])
            } catch (l) {
                this.error = "This game could not be loaded.", console.error(l)
            }
        }
    }
    const ag = {
        idle: {
            id: "idle",
            name: () => "Idle",
            food: (l, n) => 1 + l.idlersBonus(n.ownerid),
            culture: (l, n = 0) => Math.floor(5 * l.idlersBonus(n)) / 10,
            happiness: (l, n = 0) => l.idlersBonus(n) / 100
        },
        farmers: {
            id: "farmers",
            name: l => l.hasScience("agriculture") ? "Farmers" : "Hunters-Gatherers",
            food: (l, n) => 1.5 + (l.hasScience("dog_domestication", l.player(n.ownerid)) ? .5 : 0) + (l.hasScience("agriculture", l.player(n.ownerid)) ? 1 : 0) + (l.hasScience("crop_rotation", l.player(n.ownerid)) ? 1 : 0) + (l.hasScience("fertilizer", l.player(n.ownerid)) ? 2 : 0) + l.improvements(n, 1) + 2 * l.improvements(n, 2)
        },
        builders: {
            id: "builders",
            name: () => "Builders",
            prod: (l, n) => 1 + (l.hasScience("navigation", l.player(n.ownerid)) ? .5 : 0) + (l.hasWonder(n.ownerid, "temple_artemis") ? 1 : 0) + l.improvements(n, 3) + 2 * l.improvements(n, 4)
        },
        merchants: {
            id: "merchants",
            name: () => "Merchants",
            gold: (l, n) => 1 + (l.hasScience("wheel", l.player(n.ownerid)) ? 1 : 0) + l.improvements(n, 7)
        },
        scientists: {
            id: "scientists",
            name: l => l.hasScience("engineering") ? "Scientists" : "Scholars",
            science: (l, n) => 1 + (l.hasScience("engineering", l.player(n.ownerid)) ? 1 : 0) + (l.hasPolicyGroup("rationalism", n.ownerid) ? 1 : 0) + l.improvements(n, 8),
            health: (l, n) => l.hasPolicy("who", n) ? .08 : 0
        },
        artists: {
            id: "artists",
            name: () => "Artists",
            culture: (l, n = 0) => 1 + (l.hasScience("drama", l.player(n)) ? .5 : 0),
            happiness: l => .08
        },
        priests: {
            id: "priests",
            name: () => "Priests",
            faith: (l, n = 0) => 1 + (l.hasScience("theology", l.player(n)) ? .5 : 0)
        }
    }, og = {
        lo: {
            id: "lo",
            oid: "longhouse",
            label: () => "Longhouse",
            description: () => '15% <span class="text-food"><i class="' + ug.food + '"></i></span> kept after growth',
            category: "administration",
            require: {
                science: "tanning",
                buildings: []
            },
            free: !0
        },
        town_hall: {
            id: "town_hall",
            label: () => "Town Hall",
            description: () => '25% <span class="text-food"><i class="' + ug.food + '"></i></span> kept after growth<br/>Require to recruit <span class="text-troop">Governors</span>',
            category: "administration",
            require: {
                science: "state",
                buildings: ["lo", "granary", "monument"]
            }
        },
        police: {
            id: "police",
            label: () => "Police Station",
            description: () => "Reduce revolt risk by 50%",
            category: "administration",
            require: {
                science: "gunpowder",
                buildings: ["town_hall", "library", "furnace", "hospital"]
            }
        },
        palace: {
            id: "palace",
            label: () => "Palace",
            description: () => 'Only available in Capital City<br/><span class="text-food"><i class="' + ug.food + '"></i> +2</span><br/><span class="text-culture"><i class="' + ug.culture + '"></i> +2</span><br/><span class="text-prod"><i class="' + ug.prod + '"></i> +2</span><br/><span class="text-gold"><i class="' + ug.gold + '"></i> +2</span><br/><span class="text-science"><i class="' + ug.science + '"></i> +2</span>',
            desc: () => '<span class="text-food"><i class="' + ug.food + '"></i> +2</span> | <span class="text-culture"><i class="' + ug.culture + '"></i> +2</span> | <span class="text-prod"><i class="' + ug.prod + '"></i> +2</span> | <span class="text-gold"><i class="' + ug.gold + '"></i> +2</span> | <span class="text-science"><i class="' + ug.science + '"></i> +2</span>',
            category: "administration",
            require: {
                science: "masonry",
                buildings: ["town_hall", "walls", "gardens", "stables", "treasury"]
            }
        },
        tribunal: {
            id: "tribunal",
            label: () => "Tribunal",
            description: () => "Reduce discontent due to distance from capital by 50%",
            category: "administration",
            require: {
                science: "code_of_laws",
                buildings: ["town_hall"]
            }
        },
        courthouse: {
            id: "courthouse",
            label: () => "Courthouse",
            description: () => "Reduce discontent due to distance from capital by 50%",
            category: "administration",
            require: {
                science: "architecture",
                buildings: ["town_hall", "tribunal"]
            }
        },
        monument: {
            id: "monument",
            label: () => "Monument",
            description: () => '<span class="text-culture"><i class="' + ug.culture + '"></i> +1</span><br/><span class="text-culture"><i class="' + ug.culture + '"></i> +2 / trade route</span>',
            desc: () => '<span class="text-culture"><i class="' + ug.culture + '"></i> +1</span> | <span class="text-culture"><i class="' + ug.trade + '"></i> <i class="' + ug.culture + '"></i> +2</span>',
            category: "culture",
            require: {
                science: "art",
                buildings: ["lo"]
            }
        },
        amphitheatre: {
            id: "amphitheatre",
            label: () => "Amphitheatre",
            description: () => '<span class="text-culture"><i class="' + ug.culture + '"></i> +2</span><br/><span class="text-culture"><i class="' + ug.culture + '"></i> +5 / trade route</span>',
            desc: () => '<span class="text-culture"><i class="' + ug.culture + '"></i> +2</span> | <span class="text-culture"><i class="' + ug.trade + '"></i> <i class="' + ug.culture + '"></i> +5</span>',
            category: "culture",
            require: {
                science: "wheel",
                buildings: ["town_hall"]
            }
        },
        opera: {
            id: "opera",
            label: () => "Opera",
            description: () => '<span class="text-culture"><i class="' + ug.culture + '"></i> +5</span><br/><span class="text-culture"><i class="' + ug.culture + '"></i> +10 / trade route</span>',
            desc: () => '<span class="text-culture"><i class="' + ug.culture + '"></i> +5</span> | <span class="text-culture"><i class="' + ug.trade + '"></i> <i class="' + ug.culture + '"></i> +10</span>',
            category: "culture",
            require: {
                science: "acoustics",
                buildings: ["amphitheatre", "town_hall"]
            }
        },
        museum: {
            id: "museum",
            label: () => "Museum",
            description: () => '<span class="text-culture"><i class="' + ug.culture + '"></i> +10</span><br/><span class="text-relics"><i class="' + ug.relics + '"></i> Relics</span> gain +50%',
            desc: () => '<span class="text-culture"><i class="' + ug.culture + '"></i> +10</span> | <span class="text-relics"><i class="' + ug.relics + '"></i> +50%</span>',
            category: "culture",
            require: {
                science: "archeology",
                buildings: ["amphitheatre", "town_hall"]
            },
            industrial: !0
        },
        walls: {
            id: "walls",
            label: () => "Walls",
            description: () => '<div><i class="' + ug.defense + '"></i> +50%</div>',
            desc: () => '<span><i class="' + ug.defense + '"></i> +50%</span>',
            category: "defense",
            require: {
                science: "masonry",
                buildings: ["lo"]
            }
        },
        castle: {
            id: "castle",
            label: l => "french" == l.civ_id ? "Chateau" : "Castle",
            description: (l, n) => '<div><i class="' + ug.defense + '"></i> +50%</div>' + ("french" == n.player(l).civ_id ? '<div class="text-gold"><i class="' + ug.gold + '"></i> +10</div><div class="text-culture"><i class="' + ug.culture + '"></i> +10</div>' : ""),
            desc: (l, n) => '<span><i class="' + ug.defense + '"></i> +50%</span>' + ("french" == n.player(l).civ_id ? ' | <span class="text-gold"><i class="' + ug.gold + '"></i> +10</span> | <span class="text-culture"><i class="' + ug.culture + '"></i> +10</span>' : ""),
            category: "defense",
            require: {
                science: "advanced_fortification",
                buildings: ["town_hall", "walls"]
            }
        },
        fortress: {
            id: "fortress",
            label: () => "Fortress",
            description: () => '<div><i class="' + ug.defense + '"></i> +50%</div>',
            desc: () => '<span><i class="' + ug.defense + '"></i> +50%</span>',
            category: "defense",
            require: {
                science: "siege",
                buildings: ["town_hall", "castle"]
            }
        },
        embassy: {
            id: "embassy",
            label: () => "Embassy",
            description: () => '<div class="text-diplomacy"><i class="' + ug.diplomacy + '"></i> +1 / trade route</div>',
            desc: () => '<span class="text-diplomacy"><i class="' + ug.diplomacy + '"></i> +1</span>',
            category: "diplomacy",
            require: {
                science: "diplomacy",
                buildings: ["town_hall"]
            }
        },
        consulate: {
            id: "consulate",
            label: () => "Consulate",
            description: () => '<div class="text-diplomacy"><i class="' + ug.diplomacy + '"></i> +1 / trade route</div>',
            desc: () => '<span class="text-diplomacy"><i class="' + ug.diplomacy + '"></i> +1</span>',
            category: "diplomacy",
            require: {
                science: "republic",
                buildings: ["town_hall", "embassy"]
            }
        },
        shrine: {
            id: "shrine",
            label: () => "Shrine",
            description: (l, n) => '<div>Wonders <i class="' + ug.prod + ' text-prod"></i> cost -5%</div>' + (n ? '<div class="text-faith"><i class="' + ug.faith + '"></i> +' + (n.hasPolicyGroup("piety") ? 3 : 1) + "</div>" + (n.hasPolicy("secularism") ? '<div class="text-happiness"><i class="' + ug.happiness + '"></i> +5%</div>' : "") : '<div class="text-faith"><i class="' + ug.faith + '"></i> +1</div>'),
            desc: (l, n) => '<span class="text-faith"><i class="' + ug.faith + '"></i> +' + (n.hasPolicyGroup("piety") ? 3 : 1) + "</span>" + (n.hasPolicy("secularism") ? ' | <span class="text-happiness"><i class="' + ug.happiness + '"></i> +5%</span>' : ""),
            category: "faith",
            require: {
                science: "spirituality",
                buildings: ["lo"]
            }
        },
        temple: {
            id: "temple",
            label: () => "Temple",
            description: (l, n) => '<div class="text-faith"><i class="' + ug.faith + '"></i> +5</div>' + (n && n.hasPolicy("organized_religion") ? '<div class="text-health"><i class="' + ug.health + '"></i> +5%</div>' : ""),
            desc: (l, n) => '<span class="text-faith"><i class="' + ug.faith + '"></i> +5</span>' + (n.hasPolicy("organized_religion") ? ' | <span class="text-health"><i class="' + ug.health + '"></i> +5%</span>' : ""),
            category: "faith",
            require: {
                science: "religion",
                buildings: ["town_hall", "shrine"]
            }
        },
        monastery: {
            id: "monastery",
            label: () => "Monastery",
            description: (l, n) => '<div class="text-faith"><i class="' + ug.faith + '"></i> +15</div>' + (n && n.hasPolicy("theocracy") ? '<div class="text-happiness"><i class="' + ug.happiness + '"></i> +5%</div>' : "") + (n && n.hasPolicy("reformation") ? '<div class="text-science"><i class="' + ug.science + '"></i> +10%</div><div class="text-faith"><i class="' + ug.faith + '"></i> +10%</div>' : ""),
            desc: (l, n) => '<span class="text-faith"><i class="' + ug.faith + '"></i> +15</span>' + (n.hasPolicy("theocracy") ? ' | <span class="text-happiness"><i class="' + ug.happiness + '"></i> +5%</span>' : "") + (n.hasPolicy("reformation") ? ' | <span class="text-science"><i class="' + ug.science + '"></i> +10%</span> | <span class="text-faith"><i class="' + ug.faith + '"></i> +10%</span>' : ""),
            category: "faith",
            require: {
                science: "theology",
                buildings: ["town_hall", "temple"]
            }
        },
        granary: {
            id: "granary",
            label: l => "incans" == l.civ_id ? "Terrace" : "Granary",
            description: (l, n) => '<div class="text-food"><i class="' + ug.food + '"></i> +' + n.buildingBonus("granary", l) + "</div>",
            desc: (l, n) => '<span class="text-food"><i class="' + ug.food + '"></i> +' + n.buildingBonus("granary", l) + "</span>",
            bonus: l => "incans" == l.civ_id ? 5 : 2,
            category: "food",
            require: {
                science: "agriculture",
                buildings: ["lo"]
            }
        },
        port: {
            id: "port",
            label: () => "Harbor",
            description: () => '<div class="text-food"><i class="' + ug.food + '"></i> +5</div>',
            desc: () => '<span class="text-food"><i class="' + ug.food + '"></i> +5</span>',
            category: "food",
            require: {
                science: "navigation",
                buildings: ["lo"]
            },
            coastal: !0
        },
        mill: {
            id: "mill",
            label: () => "Mill",
            description: () => '<div class="text-food"><i class="' + ug.food + '"></i> +10</div>',
            desc: () => '<span class="text-food"><i class="' + ug.food + '"></i> +10</span>',
            category: "food",
            require: {
                science: "milling",
                buildings: ["town_hall", "granary"]
            }
        },
        cop: {
            id: "cop",
            oid: "copper_mine",
            label: () => "Copper Mine",
            description: () => '<div class="text-gold"><i class="' + ug.gold + '"></i> +5</div>',
            desc: () => '<span class="text-gold"><i class="' + ug.gold + '"></i> +5</span>',
            category: "gold",
            require: {
                science: "bronze_working",
                buildings: ["lo"]
            }
        },
        go: {
            id: "go",
            oid: "gold_mine",
            label: () => "Gold Mine",
            description: () => '<div class="text-gold"><i class="' + ug.gold + '"></i> +15</div>',
            desc: () => '<span class="text-gold"><i class="' + ug.gold + '"></i> +15</span>',
            category: "gold",
            require: {
                science: "iron_working",
                buildings: ["town_hall", "cop"]
            }
        },
        coa: {
            id: "coa",
            oid: "coal_mine",
            label: () => "Coal Mine",
            description: () => '<div class="text-gold"><i class="' + ug.gold + '"></i> +25</div>',
            desc: () => '<span class="text-gold"><i class="' + ug.gold + '"></i> +25</span>',
            category: "gold",
            require: {
                science: "steam",
                buildings: ["police", "go"]
            },
            industrial: !0
        },
        market: {
            id: "market",
            label: () => "Market",
            description: () => '<div class="text-gold"><i class="' + ug.gold + '"></i> +2 / trade route</div>',
            desc: () => '<span class="text-gold"><i class="' + ug.trade + '"></i><i class="' + ug.gold + '"></i> +2</span>',
            category: "gold_trade",
            require: {
                science: "mathematics",
                buildings: ["town_hall"]
            }
        },
        bank: {
            id: "bank",
            label: l => "ottomans" == l.civ_id ? "Bazaar" : "Bank",
            description: (l, n) => '<div class="text-gold"><i class="' + ug.gold + '"></i> +' + n.buildingBonus("bank", l) + " / trade route</div>",
            desc: (l, n) => '<span class="text-gold"><i class="' + ug.trade + '"></i><i class="' + ug.gold + '"></i> +' + n.buildingBonus("bank", l) + "</span>",
            bonus: l => l && "ottomans" == l.civ_id ? 10 : 5,
            category: "gold_trade",
            require: {
                science: "currency",
                buildings: ["town_hall", "market"]
            }
        },
        stock: {
            id: "stock",
            label: () => "Stock Exchange",
            description: () => '<div class="text-gold"><i class="' + ug.gold + '"></i> +10 / trade route</div>',
            desc: () => '<span class="text-gold"><i class="' + ug.trade + '"></i><i class="' + ug.gold + '"></i> +10</span>',
            category: "gold_trade",
            require: {
                science: "economics",
                buildings: ["town_hall", "bank"]
            }
        },
        chest: {
            id: "chest",
            label: () => "Chest",
            description: () => 'Increase <span class="text-gold"><i class="' + ug.gold + '"></i></span> limit to 1 000',
            category: "gold_limit",
            require: {
                science: "mining",
                buildings: ["lo"]
            }
        },
        treasury: {
            id: "treasury",
            label: () => "Treasury",
            description: () => 'Increase <span class="text-gold"><i class="' + ug.gold + '"></i></span> limit to 1M',
            category: "gold_limit",
            require: {
                science: "writing",
                buildings: ["lo", "chest"]
            }
        },
        mint: {
            id: "mint",
            label: () => "Mint",
            description: () => 'Increase <span class="text-gold"><i class="' + ug.gold + '"></i></span> limit to 100M',
            category: "gold_limit",
            require: {
                science: "currency",
                buildings: ["town_hall", "treasury"]
            }
        },
        reserve: {
            id: "reserve",
            label: () => "Gold Reserve",
            description: () => 'Increase <span class="text-gold"><i class="' + ug.gold + '"></i></span> limit to 10B',
            category: "gold_limit",
            require: {
                science: "corporation",
                buildings: ["police", "mint"]
            },
            industrial: !0
        },
        gardens: {
            id: "gardens",
            label: l => "indonesians" == l.civ_id ? "Candi" : "Gardens",
            description: (l, n) => '<div class="text-happiness"><i class="' + ug.happiness + '"></i> +' + 100 * n.buildingBonus("gardens", l) + "%</div>",
            desc: (l, n) => '<span class="text-happiness"><i class="' + ug.happiness + '"></i> +' + 100 * n.buildingBonus("gardens", l) + "%</span>",
            bonus: l => l && "indonesians" == l.civ_id ? .1 : .05,
            category: "happiness",
            require: {
                science: "crop_rotation",
                buildings: ["lo"]
            }
        },
        theatre: {
            id: "theatre",
            label: () => "Theatre",
            description: () => '<div class="text-happiness"><i class="' + ug.happiness + '"></i> +10%</div>',
            desc: () => '<span class="text-happiness"><i class="' + ug.happiness + '"></i> +10%</span>',
            category: "happiness",
            require: {
                science: "drama",
                buildings: ["town_hall", "gardens"]
            }
        },
        circus: {
            id: "circus",
            label: () => "Circus",
            description: () => '<div class="text-happiness"><i class="' + ug.happiness + '"></i> +15%</div>',
            desc: () => '<span class="text-happiness"><i class="' + ug.happiness + '"></i> +15%</span>',
            category: "happiness",
            require: {
                science: "music_theory",
                buildings: ["town_hall", "theatre"]
            }
        },
        zoo: {
            id: "zoo",
            label: l => "brazilians" == l.civ_id ? "Carnival" : "Zoo",
            description: (l, n) => '<div class="text-happiness"><i class="' + ug.happiness + '"></i> +15%</div>' + ("brazilians" == n.player(l).civ_id ? '<div class="text-culture"><i class="' + ug.culture + '"></i> +10</div>' : ""),
            desc: (l, n) => '<span class="text-happiness"><i class="' + ug.happiness + '"></i> +15%</span>' + ("brazilians" == n.player(l).civ_id ? ' | <span class="text-culture"><i class="' + ug.culture + '"></i> +10</span>' : ""),
            category: "happiness",
            require: {
                science: "rigging",
                buildings: ["town_hall", "circus"]
            }
        },
        well: {
            id: "well",
            label: () => "Well",
            description: () => '<div class="text-health"><i class="' + ug.health + '"></i> +5%</div>',
            desc: () => '<span class="text-health"><i class="' + ug.health + '"></i> +5%</span>',
            category: "health",
            require: {
                science: "masonry",
                buildings: ["lo"]
            }
        },
        aqueduct: {
            id: "aqueduct",
            label: () => "Aqueduct",
            description: () => '<div class="text-health"><i class="' + ug.health + '"></i> +10%</div><div>Increase Plague Doctors efficiency</div>',
            desc: () => '<span class="text-health"><i class="' + ug.health + '"></i> +10%</span>',
            category: "health",
            require: {
                science: "construction",
                buildings: ["town_hall", "well"]
            }
        },
        hospital: {
            id: "hospital",
            label: () => "Hospital",
            description: (l, n) => '<div class="text-health"><i class="' + ug.health + '"></i> +' + (n && n.hasPolicy("procedures") ? "20" : "15") + "%</div><div>Increase Plague Doctors efficiency</div>",
            desc: (l, n) => '<span class="text-health"><i class="' + ug.health + '"></i> +' + (n && n.hasPolicy("procedures") ? "20" : "15") + "%</span>",
            category: "health",
            require: {
                science: "anatomy",
                buildings: ["town_hall", "aqueduct"]
            }
        },
        dispensary: {
            id: "dispensary",
            label: () => "Dispensary",
            description: () => '<div class="text-health"><i class="' + ug.health + '"></i> +20%</div>',
            desc: () => '<span class="text-health"><i class="' + ug.health + '"></i> +20%</span>',
            category: "health",
            require: {
                science: "biology",
                buildings: ["police", "hospital"]
            },
            industrial: !0
        },
        quarantine: {
            id: "quarantine",
            label: () => "Quarantine Station",
            description: () => '<div class="text-health"><i class="' + ug.health + '"></i> +10%</div><div>Prevents Plague propagation</div>',
            desc: () => '<span class="text-health"><i class="' + ug.health + '"></i> +10%</span>',
            category: "health",
            require: {
                science: "sanitation",
                buildings: ["police", "hospital"]
            },
            industrial: !0
        },
        armory: {
            id: "armory",
            label: () => "Armory",
            description: () => "Reduce troop maintenance in this city by half",
            category: "military",
            require: {
                science: "steel",
                buildings: ["town_hall", "barracks"]
            }
        },
        barracks: {
            id: "barracks",
            label: () => "Barracks",
            description: (l, n) => "Allow recruitment of melee & ranged units" + (n && n.hasPolicy("despotism") ? '<div class="text-happiness"><i class="' + ug.happiness + '"></i> +5%</div>' : ""),
            desc: (l, n) => n.hasPolicy("despotism") ? '<span class="text-happiness"><i class="' + ug.happiness + '"></i> +5%</span>' : "",
            category: "military",
            require: {
                science: "tools",
                buildings: ["lo"]
            }
        },
        stables: {
            id: "stables",
            label: () => "Stables",
            description: () => "Allow recruitment of mounted units",
            category: "military",
            require: {
                science: "horseriding",
                buildings: ["lo"]
            }
        },
        sif: {
            id: "sif",
            oid: "siege_factory",
            label: () => "Siege Factory",
            description: () => "Allow recruitment of siege units",
            category: "military",
            require: {
                science: "mathematics",
                buildings: ["town_hall"]
            }
        },
        seaport: {
            id: "seaport",
            label: () => "Seaport",
            description: () => "Allow recruitment of naval units",
            category: "military",
            require: {
                science: "astronomy",
                buildings: ["town_hall"]
            },
            coastal: !0
        },
        trc: {
            id: "trc",
            oid: "training_center",
            label: () => "Training Center",
            description: () => "Increase recruitment speed by 25%",
            category: "military",
            require: {
                science: "armies",
                buildings: ["lo"]
            }
        },
        mia: {
            id: "mia",
            oid: "military_academy",
            label: () => "Military Academy",
            description: () => "Increase recruitment speed by 25%",
            category: "military",
            require: {
                science: "chivalry",
                buildings: ["town_hall", "trc"]
            }
        },
        arsenal: {
            id: "arsenal",
            label: () => "Arsenal",
            description: () => "Increase recruitment speed by 25%",
            category: "military",
            require: {
                science: "production",
                buildings: ["town_hall", "mia"]
            }
        },
        workshop: {
            id: "workshop",
            label: l => l && "egyptians" == l.civ_id ? "Granite quarry" : "Workshop",
            description: (l, n) => '<div class="text-prod"><i class="' + ug.prod + '"></i> +' + n.buildingBonus("workshop", l) + "</div>",
            desc: (l, n) => '<span class="text-prod"><i class="' + ug.prod + '"></i> +' + n.buildingBonus("workshop", l) + "</span>",
            bonus: l => l && "egyptians" == l.civ_id ? 10 : 5,
            category: "production",
            require: {
                science: "bronze_working",
                buildings: ["town_hall"]
            }
        },
        furnace: {
            id: "furnace",
            label: () => "Furnace",
            description: () => '<div class="text-prod"><i class="' + ug.prod + '"></i> +15</div>',
            desc: () => '<span class="text-prod"><i class="' + ug.prod + '"></i> +15</span>',
            category: "production",
            require: {
                science: "iron_working",
                buildings: ["town_hall", "workshop"]
            }
        },
        ironworks: {
            id: "ironworks",
            label: l => l && "germans" == l.civ_id ? "Hanse" : "Ironworks",
            description: (l, n) => '<div class="text-prod"><i class="' + ug.prod + '"></i> +' + n.buildingBonus("ironworks", l) + "</div>",
            desc: (l, n) => '<span class="text-prod"><i class="' + ug.prod + '"></i> +' + n.buildingBonus("ironworks", l) + "</span>",
            bonus: l => l && "germans" == l.civ_id ? 40 : 25,
            category: "production",
            require: {
                science: "metallurgy",
                buildings: ["town_hall", "furnace"]
            }
        },
        factory: {
            id: "factory",
            label: () => "Factory",
            description: () => '<div class="text-prod"><i class="' + ug.prod + '"></i> +50</div>',
            desc: () => '<span class="text-prod"><i class="' + ug.prod + '"></i> +50</span>',
            category: "production",
            require: {
                science: "industrialization",
                buildings: ["police", "ironworks"]
            },
            industrial: !0
        },
        hydro: {
            id: "hydro",
            label: () => "Hydro Plant",
            description: () => '<div class="text-prod"><i class="' + ug.prod + '"></i> +50</div>',
            desc: () => '<span class="text-prod"><i class="' + ug.prod + '"></i> +50</span>',
            category: "production",
            require: {
                science: "electricity",
                buildings: ["police", "factory"]
            },
            industrial: !0
        },
        progress: {
            id: "progress",
            label: () => "Progress",
            description: () => 'Can be built repeatedly.<br/>Produce <span class="text-progress"><i class="' + ug.progress + '"></i> Progress</span>',
            desc: () => '<span class="text-progress"><i class="' + ug.progress + '"></i> +1</span>',
            category: "production",
            require: {
                science: "industrialization",
                buildings: ["police"]
            },
            free: !0
        },
        library: {
            id: "library",
            label: l => l && "chinese" == l.civ_id ? "Paper Maker" : "Library",
            description: (l, n) => '<div class="text-science"><i class="' + ug.science + '"></i> +' + n.buildingBonus("library", l) + "</div>" + (n && n.hasPolicy("philosophy") ? '<div class="text-culture"><i class="' + ug.culture + '"></i> +5%</div>' : ""),
            desc: (l, n) => '<span class="text-science"><i class="' + ug.science + '"></i> +' + n.buildingBonus("library", l) + "</span>" + (n.hasPolicy("philosophy") ? ' | <span class="text-culture"><i class="' + ug.culture + '"></i> +5%</div>' : ""),
            bonus: (l, n) => {
                let e = 5;
                return n.hasWonder(l.id, "great_library") && (e += 5), l && "chinese" == l.civ_id && (e += 5), e
            },
            category: "science",
            require: {
                science: "literature",
                buildings: ["town_hall"]
            }
        },
        uni: {
            id: "uni",
            oid: "university",
            label: () => "University",
            description: (l, n) => '<div class="text-science"><i class="' + ug.science + '"></i> +15</div>' + (n && n.hasPolicy("scientific_state") ? '<div class="text-science"><i class="' + ug.science + '"></i> +10%</div><div class="text-faith"><i class="' + ug.faith + '"></i> +10%</div>' : ""),
            desc: (l, n) => '<span class="text-science"><i class="' + ug.science + '"></i> +15</span>' + (n.hasPolicy("scientific_state") ? '| <span class="text-science"><i class="' + ug.science + '"></i> +10%</span> | <span class="text-faith"><i class="' + ug.faith + '"></i> +10%</span>' : ""),
            category: "science",
            require: {
                science: "education",
                buildings: ["town_hall", "library"]
            }
        },
        school: {
            id: "school",
            label: () => "Public School",
            description: () => '<div class="text-science"><i class="' + ug.science + '"></i> +25</div>',
            desc: () => '<span class="text-science"><i class="' + ug.science + '"></i> +25</span>',
            category: "science",
            require: {
                science: "scientific",
                buildings: ["police", "uni"]
            },
            industrial: !0
        },
        pyramid: {
            id: "pyramid",
            label: () => "Pyramids",
            description: () => '<div>Free Granary in each of your cities</div><div class="text-culture"><i class="' + ug.culture + '"></i>+5</div><div class="text-faith"><i class="' + ug.faith + '"></i>+2 for each wonder in this city</div>',
            desc: (l, n, e) => '<span class="text-culture"><i class="' + ug.culture + '"></i> +5</span> | <span class="text-faith"><i class="' + ug.faith + '"></i> +' + 2 * n.wondersNbInCity(e) + "</span>",
            add_all: "granary",
            category: "_wonder",
            wonder: !0,
            require: {
                science: "herding",
                buildings: ["lo"]
            }
        },
        colossus: {
            id: "colossus",
            label: () => "Colossus",
            description: () => '<div class="text-gold"><i class="' + ug.gold + '"></i> +10</div><div class="text-trade"><i class="' + ug.trade + '"></i> +1</div>',
            desc: () => '<span class="text-gold"><i class="' + ug.gold + '"></i> +10</span> | <span class="text-trade"><i class="' + ug.trade + '"></i> +1</span>',
            category: "_wonder",
            wonder: !0,
            require: {
                science: "bronze_working",
                buildings: ["lo"]
            }
        },
        hanging_gardens: {
            id: "hanging_gardens",
            label: () => "Hanging Gardens",
            description: () => '<div class="text-food"><i class="' + ug.food + '"></i> +10</div><div class="text-happiness"><i class="' + ug.happiness + '"></i> +10%</div><div>Free Garden in the city in which it was built</div>',
            desc: () => '<span class="text-food"><i class="' + ug.food + '"></i> +10</span> | <span class="text-happiness"><i class="' + ug.happiness + '"></i> +1</span>',
            add_city: "gardens",
            category: "_wonder",
            wonder: !0,
            require: {
                science: "bronze_working",
                buildings: ["lo"]
            }
        },
        apadana: {
            id: "apadana",
            label: () => "Apadana",
            description: () => "<div>Improvement building speed +25%</div>",
            category: "_wonder",
            wonder: !0,
            require: {
                science: "masonry",
                buildings: ["town_hall"]
            }
        },
        ziggurat: {
            id: "ziggurat",
            label: () => "Great Ziggurat",
            description: () => "<div>Slavers chances of success +100%</div><div>Free Temple in the city in which it was built</div>",
            add_city: "temple",
            category: "_wonder",
            wonder: !0,
            require: {
                science: "calendar",
                buildings: ["town_hall"]
            }
        },
        great_library: {
            id: "great_library",
            label: () => "Great Library",
            description: () => '<div class="text-science"><i class="' + ug.science + '"></i> +5 / library</div><div>Free Library in the city in which it was built</div>',
            add_city: "library",
            category: "_wonder",
            wonder: !0,
            require: {
                science: "literature",
                buildings: ["town_hall"]
            }
        },
        mausoleum: {
            id: "mausoleum",
            label: () => "Mausoleum of Halicarnassus",
            description: () => '<div>Reduce <i class="' + ug.spells + '"></i> spells cooldown by 15%</div><div class="text-culture"><i class="' + ug.culture + '"></i>+5</div>',
            desc: () => '<span class="text-culture"><i class="' + ug.culture + '"></i> +5</span>',
            category: "_wonder",
            wonder: !0,
            require: {
                science: "religion",
                buildings: ["town_hall"]
            }
        },
        statue_zeus: {
            id: "statue_zeus",
            label: () => "Statue of Zeus",
            description: () => "<div>+15% attack</div><div>+15% recruitment speed</div>",
            category: "_wonder",
            wonder: !0,
            require: {
                science: "archery",
                buildings: ["lo"]
            }
        },
        temple_artemis: {
            id: "temple_artemis",
            label: () => "Temple of Artemis",
            description: () => '<div>+50% defense in the city in which it was built</div><div class="text-prod"><i class="' + ug.prod + '"></i>+1 / builder</div>',
            category: "_wonder",
            wonder: !0,
            require: {
                science: "archery",
                buildings: ["lo"]
            }
        },
        pantheon: {
            id: "pantheon",
            label: () => "Pantheon",
            description: () => "Reduce discontent due to distance from capital by 50% (in all empire)",
            category: "_wonder",
            wonder: !0,
            require: {
                science: "construction",
                buildings: ["town_hall"]
            }
        },
        great_wall: {
            id: "great_wall",
            label: () => "Great Wall",
            description: () => '<div><i class="' + ug.defense + '"></i> +50% (in all empire)</div>',
            desc: () => '<span><i class="' + ug.defense + '"></i> +50%</span>',
            category: "_wonder",
            wonder: !0,
            require: {
                science: "construction",
                buildings: ["town_hall"]
            }
        },
        forbidden: {
            id: "forbidden",
            label: () => "Forbidden City",
            description: () => '<div><span class="text-influence"><i class="' + ug.influence + '"></i> +25%</span> to all civilizations</div><div class="text-culture"><i class="' + ug.culture + '"></i>+5</div>',
            desc: () => '<span class="text-culture"><i class="' + ug.culture + '"></i> +5</span>',
            category: "_wonder",
            wonder: !0,
            require: {
                science: "printing",
                buildings: ["town_hall"]
            }
        },
        sistine: {
            id: "sistine",
            label: () => "Sistine Chapel",
            description: () => '<div>Free Opera in each of your cities</div><div class="text-culture"><i class="' + ug.culture + '"></i>+15</div>',
            desc: () => '<span class="text-culture"><i class="' + ug.culture + '"></i> +15</span>',
            category: "_wonder",
            wonder: !0,
            add_all: "opera",
            require: {
                science: "acoustics",
                buildings: ["town_hall"]
            }
        },
        versailles: {
            id: "versailles",
            label: () => "Versailles",
            description: () => '<div class="text-happiness"><i class="' + ug.happiness + '"></i>+10% to all cities</div><div class="text-culture"><i class="' + ug.culture + '"></i>+15</div>',
            desc: () => '<span class="text-happiness"><i class="' + ug.happiness + '"></i> +10%</span> | <span class="text-culture"><i class="' + ug.culture + '"></i> +15</span>',
            category: "_wonder",
            wonder: !0,
            require: {
                science: "acoustics",
                buildings: ["town_hall"]
            }
        },
        taj: {
            id: "taj",
            label: () => "Taj Mahal",
            description: () => '<div>Reduce <i class="' + ug.spells + '"></i> spells cooldown by 15%</div><div class="text-culture"><i class="' + ug.culture + '"></i>+10</div>',
            desc: () => '<span class="text-culture"><i class="' + ug.culture + '"></i> +10</span>',
            category: "_wonder",
            wonder: !0,
            require: {
                science: "architecture",
                buildings: ["town_hall"]
            }
        },
        pisa: {
            id: "pisa",
            label: () => "Leaning Tower of Pisa",
            description: () => '<div class="text-culture"><i class="' + ug.culture + '"></i> +10 / all trade routes</div>',
            desc: () => '<span class="text-culture"><i class="' + ug.trade + '"></i> <i class="' + ug.culture + '"></i> +10</span>',
            category: "_wonder",
            wonder: !0,
            require: {
                science: "architecture",
                buildings: ["town_hall"]
            }
        },
        bigben: {
            id: "bigben",
            label: () => "Big Ben",
            description: () => '<div class="text-gold"><i class="' + ug.gold + '"></i> +5% / colony</div><div class="text-happiness"><i class="' + ug.happiness + '"></i> +3% / colony</div>',
            category: "_wonder",
            wonder: !0,
            require: {
                science: "economics",
                buildings: ["town_hall"]
            }
        },
        casa: {
            id: "casa",
            label: () => "Casa Da India",
            description: () => '<div>Caravel cost -50% & recruit time -50% in every city</div><div class="text-gold"><i class="' + ug.gold + '"></i> +2% / colony</div><div class="text-happiness"><i class="' + ug.happiness + '"></i> +2% / colony</div>',
            category: "_wonder",
            wonder: !0,
            require: {
                science: "astronomy",
                buildings: ["town_hall"]
            }
        },
        panama: {
            id: "panama",
            label: () => "Panama Canal",
            description: () => '<div class="text-trade">+2 <i class="' + ug.trade + '"></i> trade routes</div>Remove <span class="text-trade"><i class="' + ug.trade + '"></i> trade routes</span> max dist.',
            category: "_wonder",
            wonder: !0,
            require: {
                science: "steam",
                buildings: ["police"]
            },
            industrial: !0
        },
        oxford: {
            id: "oxford",
            label: () => "Oxford University",
            description: () => '<span class="text-science"><i class="' + ug.science + '"></i> +50%</span> in the city in which it was built',
            category: "_wonder",
            wonder: !0,
            require: {
                science: "scientific",
                buildings: ["police"]
            },
            industrial: !0
        },
        ruhr: {
            id: "ruhr",
            label: () => "Ruhr Valley",
            description: () => '<span class="text-prod"><i class="' + ug.prod + '"></i> +25%</span> when producing <span class="text-prod">Progress</span>',
            category: "_wonder",
            wonder: !0,
            require: {
                science: "industrialization",
                buildings: ["police"]
            },
            industrial: !0
        },
        eiffel: {
            id: "eiffel",
            label: () => "Eiffel Tower",
            description: () => '<span class="text-progress"><i class="' + ug.progress + '"></i> +10 / min</span>',
            category: "_wonder",
            wonder: !0,
            require: {
                science: "railroad",
                buildings: ["police"]
            },
            industrial: !0
        },
        brandenburg: {
            id: "brandenburg",
            label: () => "Brandenburg Gate",
            description: () => "<div>+15% attack</div><div>+15% recruitment speed</div>",
            category: "_wonder",
            wonder: !0,
            require: {
                science: "military",
                buildings: ["police"]
            },
            industrial: !0
        },
        hermitage: {
            id: "hermitage",
            label: () => "Hermitage",
            description: () => '<span class="text-culture"><i class="' + ug.culture + '"></i> +5</span> / <span class="text-relics"><i class="' + ug.relics + '"></i></span>',
            category: "_wonder",
            wonder: !0,
            require: {
                science: "archeology",
                buildings: ["police"]
            },
            industrial: !0
        }
    }, cg = {
        prehistory: {
            id: "prehistory",
            name: "Prehistoric Era",
            rank_start: 0,
            rank_end: 3
        },
        ancient: {
            id: "ancient",
            name: "Ancient Era",
            rank_start: 4,
            rank_end: 6
        },
        classical: {
            id: "classical",
            name: "Classical Era",
            rank_start: 7,
            rank_end: 9
        },
        medieval: {
            id: "medieval",
            name: "Medieval Era",
            rank_start: 10,
            rank_end: 12
        },
        renaissance: {
            id: "renaissance",
            name: "Renaissance Era",
            rank_start: 13,
            rank_end: 15
        },
        industrial: {
            id: "industrial",
            name: "Industrial Era",
            rank_start: 16,
            rank_end: 18
        },
        future: {
            id: "future",
            name: "Future Era",
            rank_start: 19,
            rank_end: 19
        }
    }, dg = {
        language: {
            id: "language",
            label: "Language",
            description: '<span class="text-science">+0.1 <i class="' + ug.science + '"></i> / citizen</span>',
            require: [],
            rank: 1
        },
        dog_domestication: {
            id: "dog_domestication",
            label: "Dog domestication",
            description: '<span class="text-food">+0.5 <i class="' + ug.food + '"></i> / hunter-gatherer</span>',
            require: [],
            rank: 1
        },
        tanning: {
            id: "tanning",
            label: "Tanning",
            description: 'Unlock <span class="text-pop">Builders</span><br/>Unlock <span class="text-prod">Longhouse</span>',
            require: [],
            rank: 1
        },
        pottery: {
            id: "pottery",
            label: "Pottery",
            description: '<span class="text-health">+5% <i class="' + ug.health + '"></i></span>',
            require: [],
            rank: 1
        },
        trade: {
            id: "trade",
            label: "Trade",
            description: 'Unlock <span class="text-pop">Merchants</span>',
            require: ["language", "dog_domestication"],
            rank: 2
        },
        spirituality: {
            id: "spirituality",
            label: "Spirituality",
            description: 'Unlock <span class="text-prod">Shrine</span><br/>Unlock <span class="text-special">Daily Bonus</span>',
            require: ["language", "tanning"],
            rank: 2
        },
        mining: {
            id: "mining",
            label: "Mining",
            description: 'Unlock <span class="text-prod">Chest</span>',
            require: ["pottery", "tanning"],
            rank: 2
        },
        tools: {
            id: "tools",
            label: "Tools",
            description: 'Unlock <span class="text-prod">Barracks</span><br/>Unlock <span class="text-troop">Warrior</span><br/>',
            require: ["pottery", "tanning"],
            rank: 2
        },
        art: {
            id: "art",
            label: "Art",
            description: 'Unlock <span class="text-pop">Artists</span><br/>Unlock <span class="text-prod">Monument</span><br/>Unlock <span class="text-special">Social Policies</span><br/>Unlock <span class="text-culture">Traditionalism</span><br/>Unlock <span class="text-culture">Imperialism</span>',
            require: ["trade", "spirituality"],
            rank: 3
        },
        exploration: {
            id: "exploration",
            label: "Exploration",
            description: 'Unlock <span class="text-troop">Scout</span><br/>Unlock <span class="text-special">World Map</span>',
            require: ["trade", "tools"],
            rank: 3
        },
        agriculture: {
            id: "agriculture",
            label: "Agriculture",
            description: 'Unlock <span class="text-pop">Farmers</span> <span class="text-food">+1 <i class="' + ug.food + '"></i><br/>Unlock <span class="text-prod">Granary</span>',
            require: ["tools", "mining"],
            rank: 3
        },
        archery: {
            id: "archery",
            label: "Archery",
            description: 'Unlock <span class="text-troop">Archer</span><br/>Unlock <span class="text-special">Statue of Zeus</span><br/>Unlock <span class="text-special">Temple of Artemis</span><br/>Unlock <span class="text-special">Troop queues</span>',
            require: ["tools"],
            rank: 3
        },
        writing: {
            id: "writing",
            label: "Writing",
            description: 'Unlock <span class="text-special">Building & troops purchase</span><br/>Unlock <span class="text-pop">Scholars</span><br/>Unlock <span class="text-prod">Treasury</span><br/>Unlock <span class="text-culture">Rationalism</span><br/>Unlock <span class="text-culture">Platonic Academy</span>',
            require: ["art", "exploration"],
            rank: 4
        },
        state: {
            id: "state",
            label: "State",
            description: 'Unlock <span class="text-special">Empire</span><br/>Unlock <span class="text-prod">Town Hall</span><br/>Unlock <span class="text-troop">Governor</span><br/>Unlock <span class="text-culture">Collective Rule</span><br/>Unlock <span class="text-culture">Militarism</span>',
            require: ["exploration", "agriculture"],
            rank: 4
        },
        herding: {
            id: "herding",
            label: "Herding",
            description: 'Unlock <span class="text-culture">Ancients\' Wisdom</span><br/>Unlock <span class="text-culture">Piety</span><br/>Unlock <span class="text-special">Pyramids</span>',
            require: ["agriculture"],
            rank: 4
        },
        navigation: {
            id: "navigation",
            label: "Navigation",
            description: 'Unlock <span class="text-special">Diplomacy</span><br/>Unlock <span class="text-special">Trade</span><br/>Unlock <span class="text-troop">Caravan</span><br/><span class="text-prod">+0.5 <i class="' + ug.prod + '"></i> / builder</span><br/>Unlock <span class="text-prod">Harbor</span><br/>Unlock <span class="text-culture">Pacifism</span>',
            require: ["exploration", "archery"],
            rank: 4
        },
        armies: {
            id: "armies",
            label: "Armies",
            description: 'Unlock <span class="text-prod">Training Center</span><br/>Unlock <span class="text-culture">Aristocracy</span><br/>Unlock <span class="text-culture">Meritocracy</span><br/>Unlock <span class="text-culture">Code of Honor</span>',
            require: ["state", "writing"],
            rank: 5
        },
        horseriding: {
            id: "horseriding",
            label: "Horseriding",
            description: 'Unlock <span class="text-prod">Stables</span><br/>Unlock <span class="text-troop">Horseman</span><br/>Unlock <span class="text-culture">Wonder Builder</span>',
            require: ["herding"],
            rank: 5
        },
        bronze_working: {
            id: "bronze_working",
            label: "Bronze Working",
            description: 'Unlock <span class="text-prod">Copper Mine</span><br/>Unlock <span class="text-special">Colossus</span><br/>Unlock <span class="text-special">Hanging Gardens</span><br/>Unlock <span class="text-prod">Workshop</span><br/>Unlock <span class="text-troop">Lancier</span><br/>Unlock <span class="text-troop">Worker</span><br/>Unlock <span class="text-improvement">Mine</span><br/>Unlock <span class="text-troop">Slaver</span>',
            require: ["navigation", "state"],
            rank: 5
        },
        crop_rotation: {
            id: "crop_rotation",
            label: "Crop Rotation",
            description: '<span class="text-food">+1 <i class="' + ug.food + '"></i> / farmer</span><br/>Unlock <span class="text-prod">Gardens</span><br/>Unlock <span class="text-improvement">Farm</span>',
            require: ["herding"],
            rank: 5
        },
        wheel: {
            id: "wheel",
            label: "Wheel",
            description: '<span class="text-gold">+1 <i class="' + ug.gold + '"></i> / merchant</span><br/><span class="text-trade">+1 <i class="' + ug.trade + '"></i> trade route</span><br/>Increase <span class="text-trade"><i class="' + ug.trade + '"></i> trade routes</span> max dist.<br/>Unlock <span class="text-prod">Amphitheatre</span><br/>Unlock <span class="text-improvement">Road</span>',
            require: ["horseriding", "armies"],
            rank: 6
        },
        masonry: {
            id: "masonry",
            label: "Masonry",
            description: 'Unlock <span class="text-prod">Palace</span><br/>Unlock <span class="text-prod">Walls</span><br/>Unlock <span class="text-prod">Well</span><br/>Unlock <span class="text-special">Apadana</span>',
            require: ["bronze_working"],
            rank: 6
        },
        code_of_laws: {
            id: "code_of_laws",
            label: "Justice",
            description: 'Unlock <span class="text-prod">Tribunal</span><br/>Unlock <span class="text-culture">Administration</span><br/>Unlock <span class="text-culture">Religious Laws</span><br/>Unlock <span class="text-culture">Code of Laws</span><br/>Unlock <span class="text-culture">Despotism</span><br/>Unlock <span class="text-culture">Organized Slavery</span>',
            require: ["bronze_working"],
            rank: 6
        },
        calendar: {
            id: "calendar",
            label: "Calendar",
            description: 'Unlock <span class="text-troop">Plague Doctors</span><br/>Unlock <span class="text-special">Great Ziggurat</span><br/>Unlock <span class="text-culture">City-State</span>',
            require: ["crop_rotation", "bronze_working"],
            rank: 6
        },
        literature: {
            id: "literature",
            label: "Literature",
            description: 'Unlock <span class="text-prod">Library</span><br/>Unlock <span class="text-special">Great Library</span><br/>Unlock <span class="text-culture">Philosophy</span><br/>Unlock <span class="text-culture">Oligarchy</span>',
            require: ["wheel"],
            rank: 7
        },
        mathematics: {
            id: "mathematics",
            label: "Mathematics",
            description: 'Unlock <span class="text-troop">Catapult</span><br/>Unlock <span class="text-prod">Market</span><br/>Unlock <span class="text-prod">Siege Factory</span><br/>Unlock <span class="text-improvement">Trading Post</span>',
            require: ["masonry", "calendar"],
            rank: 7
        },
        diplomacy: {
            id: "diplomacy",
            label: "Diplomacy",
            description: 'Unlock <span class="text-special">Global diplomacy</span><br/>Unlock <span class="text-special">Alliances</span><br/><span class="text-trade">+1 <i class="' + ug.trade + '"></i> trade route</span><br/>Unlock <span class="text-prod">Embassy</span><br/>Unlock <span class="text-culture">Patronage</span><br/>Unlock <span class="text-culture">Patriotism</span>',
            require: ["code_of_laws"],
            rank: 7
        },
        religion: {
            id: "religion",
            label: "Religion",
            description: 'Unlock <span class="text-special">Deity</span><br/>Unlock <span class="text-special">Spells</span><br/>Unlock <span class="text-pop">Priests</span><br/>Unlock <span class="text-prod">Temple</span><br/>Unlock <span class="text-special">Mausoleum of Halicarnassus</span><br/>Unlock <span class="text-culture">Organized Religion</span>',
            require: ["code_of_laws", "calendar"],
            rank: 7
        },
        tactics: {
            id: "tactics",
            label: "Tactics",
            description: 'Unlock <span class="text-special">Battle Simulator</span><br/>Unlock <span class="text-culture">Discipline</span>',
            require: ["mathematics"],
            rank: 8
        },
        iron_working: {
            id: "iron_working",
            label: "Iron Working",
            description: 'Unlock <span class="text-prod">Gold Mine</span><br/>Unlock <span class="text-prod">Furnace</span><br/>Unlock <span class="text-troop">Swordsman</span><br/>Unlock <span class="text-improvement">Forest Camp</span>',
            require: ["mathematics"],
            rank: 8
        },
        monarchy: {
            id: "monarchy",
            label: "Monarchy",
            description: 'Unlock <span class="text-troop">Spy</span><br/>Unlock <span class="text-culture">Landed Elites</span>',
            require: ["religion", "diplomacy"],
            rank: 8
        },
        drama: {
            id: "drama",
            label: "Drama",
            description: '<span class="text-culture">+0.5 <i class="' + ug.culture + '"></i> / artist</span><br/>Unlock <span class="text-prod">Theatre</span><br/>Unlock <span class="text-culture">Philantropy</span>',
            require: ["literature", "religion"],
            rank: 8
        },
        optics: {
            id: "optics",
            label: "Optics",
            description: 'Unlock <span class="text-troop">Longbowman</span><br/><span class="text-trade">+1 <i class="' + ug.trade + '"></i> trade route</span><br/>Increase <span class="text-trade"><i class="' + ug.trade + '"></i> trade routes</span> max dist.',
            require: ["tactics"],
            rank: 9
        },
        construction: {
            id: "construction",
            label: "Construction",
            description: 'Unlock <span class="text-special">Pantheon</span><br/>Unlock <span class="text-special">Great Wall</span><br/>Unlock <span class="text-prod">Aqueduct</span>',
            require: ["tactics", "iron_working"],
            rank: 9
        },
        milling: {
            id: "milling",
            label: "Milling",
            description: 'Unlock <span class="text-prod">Mill</span><br/>Unlock <span class="text-culture">Conservatism</span>',
            require: ["iron_working"],
            rank: 9
        },
        republic: {
            id: "republic",
            label: "Republic",
            description: 'Unlock <span class="text-prod">Consulate</span><br/>Unlock <span class="text-culture">State Religion</span><br/>Unlock <span class="text-culture">Cultural Diplomacy</span>',
            require: ["monarchy", "drama"],
            rank: 9
        },
        theology: {
            id: "theology",
            label: "Theology",
            description: '<span class="text-faith">+0.5 <i class="' + ug.faith + '"></i> / priest</span><br/>Unlock <span class="text-special">Reincarnation</span><br/>Unlock <span class="text-prod">Monastery</span><br/>Unlock <span class="text-culture">Secularism</span><br/>Unlock <span class="text-culture">Theocracy</span><br/>Unlock <span class="text-culture">Crusades</span>',
            require: ["republic", "optics"],
            rank: 10
        },
        civil_service: {
            id: "civil_service",
            label: "Civil Service",
            description: 'Unlock <span class="text-troop">Pikeman</span><br/>Unlock <span class="text-culture">Isolationism</span>',
            require: ["construction"],
            rank: 10
        },
        feudalism: {
            id: "feudalism",
            label: "Feudalism",
            description: 'Unlock <span class="text-culture">Sovereignty</span><br/>Unlock <span class="text-culture">Military Tradition</span>',
            require: ["construction", "milling"],
            rank: 10
        },
        currency: {
            id: "currency",
            label: "Currency",
            description: 'Unlock <span class="text-prod">Bank</span><br/>Unlock <span class="text-prod">Mint</span><br/>Unlock <span class="text-culture">Merchant Confederacy</span>',
            require: ["republic", "milling"],
            rank: 10
        },
        music_theory: {
            id: "music_theory",
            label: "Music Theory",
            description: 'Unlock <span class="text-prod">Circus</span><br/>Unlock <span class="text-culture">Proselytism</span>',
            require: ["theology"],
            rank: 11
        },
        engineering: {
            id: "engineering",
            label: "Engineering",
            description: 'Unlock <span class="text-pop">Scientists</span> <span class="text-science">+1 <i class="' + ug.science + '"></i><br/><span class="text-trade">+1 <i class="' + ug.trade + '"></i> trade route</span><br/>Increase <span class="text-trade"><i class="' + ug.trade + '"></i> trade routes</span> max dist.',
            require: ["civil_service"],
            rank: 11
        },
        chivalry: {
            id: "chivalry",
            label: "Chivalry",
            description: 'Unlock <span class="text-troop">Knight</span><br/>Unlock <span class="text-prod">Military Academy</span><br/>Unlock <span class="text-culture">Holy Wars</span><br/>Unlock <span class="text-culture">Professional Army</span>',
            require: ["feudalism", "civil_service"],
            rank: 11
        },
        anatomy: {
            id: "anatomy",
            label: "Anatomy",
            description: 'Unlock <span class="text-prod">Hospital</span>',
            require: ["currency", "theology"],
            rank: 11
        },
        advanced_fortification: {
            id: "advanced_fortification",
            label: "Adv. Fortification",
            description: 'Unlock <span class="text-prod">Castle</span><br/>Unlock <span class="text-culture">Square of Miracles</span>',
            require: ["engineering"],
            rank: 12
        },
        physics: {
            id: "physics",
            label: "Physics",
            description: 'Unlock <span class="text-troop">Trebuchet</span><br/>Increase <span class="text-trade"><i class="' + ug.trade + '"></i> trade routes</span> max dist.',
            require: ["engineering"],
            rank: 12
        },
        steel: {
            id: "steel",
            label: "Steel",
            description: 'Unlock <span class="text-prod">Armory</span><br/>Unlock <span class="text-troop">Longswordsman</span>',
            require: ["chivalry"],
            rank: 12
        },
        education: {
            id: "education",
            label: "Education",
            description: 'Unlock <span class="text-prod">University</span><br/>Unlock <span class="text-troop">Explorer</span><br/>Unlock <span class="text-culture">Reformation</span><br/>Unlock <span class="text-culture">Scientific State</span><br/>Unlock <span class="text-culture">Scholasticism</span>',
            require: ["music_theory", "anatomy"],
            rank: 12
        },
        gunpowder: {
            id: "gunpowder",
            label: "Gunpowder",
            description: 'Unlock <span class="text-prod">Police Station</span><br/>Unlock <span class="text-troop">Musketman</span><br/>Unlock <span class="text-culture">Police State</span>',
            require: ["advanced_fortification", "education", "steel"],
            rank: 13
        },
        astronomy: {
            id: "astronomy",
            label: "Astronomy",
            description: 'Unlock <span class="text-special">Colonization</span><br/>Unlock <span class="text-special">Casa da India</span><br/>Unlock <span class="text-prod">Seaport</span><br/>Unlock <span class="text-troop">Caravel</span><br/>Unlock <span class="text-culture">Colonialism</span><br/>Unlock <span class="text-culture">Colonial Conquest</span>',
            require: ["education", "physics"],
            rank: 13
        },
        printing: {
            id: "printing",
            label: "Printing Press",
            description: 'Unlock <span class="text-special">Cultural promotion</span><br/>Unlock <span class="text-special">Forbidden City</span><br/>Unlock <span class="text-culture">Holy Place</span><br/>Unlock <span class="text-culture">Cultural Promotion</span>',
            require: ["education", "steel"],
            rank: 13
        },
        acoustics: {
            id: "acoustics",
            label: "Acoustics",
            description: 'Unlock <span class="text-prod">Opera</span><br/>Unlock <span class="text-special">Sistine Chapel</span><br/>Unlock <span class="text-special">Palace of Versailles</span>',
            require: ["education", "physics"],
            rank: 13
        },
        chemistry: {
            id: "chemistry",
            label: "Chemistry",
            description: 'Unlock <span class="text-troop">Cannon</span><br/>Unlock <span class="text-culture">Red Cross</span>',
            require: ["astronomy", "gunpowder"],
            rank: 14
        },
        metallurgy: {
            id: "metallurgy",
            label: "Metallurgy",
            description: 'Unlock <span class="text-prod">Ironworks</span>',
            require: ["printing", "gunpowder"],
            rank: 14
        },
        architecture: {
            id: "architecture",
            label: "Architecture",
            description: 'Unlock <span class="text-prod">Courthouse</span><br/>Unlock <span class="text-special">Taj Mahal</span><br/>Unlock <span class="text-special">Tower of Pisa</span>',
            require: ["printing", "acoustics"],
            rank: 14
        },
        economics: {
            id: "economics",
            label: "Economics",
            description: 'Unlock <span class="text-prod">Stock Exchange</span><br/>Unlock <span class="text-special">Big Ben</span><br/>Unlock <span class="text-culture">Collaboration</span><br/>Unlock <span class="text-culture">Geographical Society</span>',
            require: ["printing"],
            rank: 14
        },
        fertilizer: {
            id: "fertilizer",
            label: "Fertilizer",
            description: '<span class="text-food">+2 <i class="' + ug.food + '"></i> / farmer</span><br/>Unlock <span class="text-culture">Medical Procedures</span>',
            require: ["economics", "chemistry"],
            rank: 15
        },
        rigging: {
            id: "rigging",
            label: "Square Rigging",
            description: '<span class="text-gold">+3% <i class="' + ug.gold + '"></i> / colony</span><br/>Unlock <span class="text-prod">Zoo</span><br/>Increase <span class="text-trade"><i class="' + ug.trade + '"></i> trade routes</span> max dist.<br/>Unlock <span class="text-culture">Conscription</span>',
            require: ["architecture", "metallurgy"],
            rank: 15
        },
        siege: {
            id: "siege",
            label: "Siege Tactics",
            description: 'Unlock <span class="text-prod">Fortress</span>',
            require: ["architecture", "metallurgy"],
            rank: 15
        },
        production: {
            id: "production",
            label: "Mass Production",
            description: 'Unlock <span class="text-prod">Arsenal</span><br/>Unlock <span class="text-culture">Monopoly</span>',
            require: ["economics", "metallurgy"],
            rank: 15
        },
        scientific: {
            id: "scientific",
            label: "Scientific Theory",
            description: 'Unlock <span class="text-prod">Public School</span><br/>Unlock <span class="text-special">Oxford University</span><br/>Unlock <span class="text-culture">World Congress</span>',
            require: ["rigging", "fertilizer"],
            rank: 16
        },
        industrialization: {
            id: "industrialization",
            label: "Industrialization",
            description: 'Unlock <span class="text-prod">Factory</span><br/>Unlock <span class="text-prod">Progress</span><br/>Unlock <span class="text-special">Ruhr Valley</span><br/>Unlock <span class="text-troop">Engineer</span>',
            require: ["rigging", "production"],
            rank: 16
        },
        military: {
            id: "military",
            label: "Military Science",
            description: 'Unlock <span class="text-troop">Cavalry</span><br/>Unlock <span class="text-special">Brandenburg Gate</span>',
            require: ["siege", "production"],
            rank: 16
        },
        archeology: {
            id: "archeology",
            label: "Archeology",
            description: 'Unlock <span class="text-special">Ruins</span> (Tech +100 req.)<br/>Unlock <span class="text-troop">Archeologist</span> (Tech +100 req.)<br/>Unlock <span class="text-prod">Museum</span><br/>Unlock <span class="text-special">Hermitage</span>',
            require: ["production"],
            rank: 16
        },
        steam: {
            id: "steam",
            label: "Steam Power",
            description: 'Unlock <span class="text-prod">Coal Mine</span><br/>Unlock <span class="text-special">Panama Canal</span>',
            require: ["industrialization", "scientific"],
            rank: 17
        },
        corporation: {
            id: "corporation",
            label: "Corporation",
            description: 'Unlock <span class="text-prod">Gold Reserve</span><br/><span class="text-trade">+1 <i class="' + ug.trade + '"></i> trade route</span><br/>Unlock <span class="text-culture">Liberalism</span><br/>Allow buying <span class="text-prod">Progress</span> with <i class="text-gold ' + ug.gold + '"></i>',
            require: ["scientific", "military"],
            rank: 17
        },
        rifling: {
            id: "rifling",
            label: "Rifling",
            description: 'Unlock <span class="text-troop">Rifleman</span>',
            require: ["industrialization", "military"],
            rank: 17
        },
        biology: {
            id: "biology",
            label: "Biology",
            description: 'Unlock <span class="text-prod">Dispensary</span><br/>Unlock <span class="text-culture">National Institute of Health</span>',
            require: ["scientific", "archeology"],
            rank: 17
        },
        electricity: {
            id: "electricity",
            label: "Electricity",
            description: 'Unlock <span class="text-improvement">Industrial Park</span><br/>Unlock <span class="text-prod">Hydro Plant</span>',
            require: ["steam"],
            rank: 18
        },
        railroad: {
            id: "railroad",
            label: "Railroad",
            description: 'Unlock <span class="text-improvement">Railroad</span><br/>Unlock <span class="text-special">Eiffel Tower</span>',
            require: ["steam", "corporation"],
            rank: 18
        },
        dynamite: {
            id: "dynamite",
            label: "Dynamite",
            description: 'Unlock <span class="text-troop">Artillery</span><br/>Unlock <span class="text-culture">Civilizing Mission</span>',
            require: ["steam", "rifling"],
            rank: 18
        },
        sanitation: {
            id: "sanitation",
            label: "Sanitation",
            description: 'Unlock <span class="text-improvement">Mechanized Farm</span><br/>Unlock <span class="text-prod">Quarantine Station</span><br/>Unlock <span class="text-culture">World Health Organization</span>',
            require: ["biology"],
            rank: 18
        },
        future: {
            id: "future",
            label: "Future Tech.",
            description: 'Can be researched repeatedly.<br/>Produce <span class="text-progress"><i class="' + ug.progress + '"></i> +10</span>',
            require: ["electricity", "railroad", "dynamite", "sanitation"],
            rank: 19
        }
    }, hg = {
        groups: {
            traditionalism: {
                id: "traditionalism",
                name: "Traditionalism",
                description: '<span class="text-culture"><i class="' + ug.culture + '"></i> +15%</span> in the Capital<br/><i class="' + ug.forbidden + '"></i><b>Exclude <span class="text-culture">Imperialism</span><b>',
                require: "art",
                lockedBy: "imperialism"
            },
            imperialism: {
                id: "imperialism",
                name: "Imperialism",
                description: '<span class="text-culture"><i class="' + ug.culture + '"></i> +5% </span>/ city<br/><i class="' + ug.forbidden + '"></i><b>Exclude <span class="text-culture">Traditionalism</span><b>',
                require: "art",
                lockedBy: "traditionalism"
            },
            piety: {
                id: "piety",
                name: "Piety",
                description: '<span class="text-faith"><i class="' + ug.faith + '"></i> +2 </span>/ shrine<br/><i class="' + ug.forbidden + '"></i><b>Exclude <span class="text-culture">Rationalism</span><b>',
                require: "herding",
                lockedBy: "rationalism"
            },
            rationalism: {
                id: "rationalism",
                name: "Rationalism",
                description: '<span class="text-science"><i class="' + ug.science + '"></i> +1 </span>/ scientist<br/><i class="' + ug.forbidden + '"></i><b>Exclude <span class="text-culture">Piety</span><b>',
                require: "writing",
                lockedBy: "piety"
            },
            pacifism: {
                id: "pacifism",
                name: "Pacifism",
                description: '<span class="text-trade"><i class="' + ug.trade + '"></i> +2 </span> trade routes<br/><i class="' + ug.forbidden + '"></i><b>Exclude <span class="text-culture">Militarism</span><b>',
                require: "navigation",
                lockedBy: "militarism"
            },
            militarism: {
                id: "militarism",
                name: "Militarism",
                description: 'Military buildings cost <span class="text-gold"><i class="' + ug.gold + '"></i> -25%</span> <span class="text-prod"><i class="' + ug.prod + '"></i> -25%</span><br/><i class="' + ug.forbidden + '"></i><b>Exclude <span class="text-culture">Pacifism</span><b>',
                require: "state",
                lockedBy: "pacifism"
            }
        },
        policies: {
            wisdom_ancients: {
                id: "wisdom_ancients",
                name: "Wisdom of the Ancients",
                description: '<span class="text-science"><i class="' + ug.science + '"></i> +25%</span> in the Capital',
                require: {
                    science: "herding",
                    policy: ""
                },
                groups: ["traditionalism"]
            },
            aristocracy: {
                id: "aristocracy",
                name: "Aristocracy",
                description: '<span class="text-gold"><i class="' + ug.gold + '"></i> +25%</span> in the Capital',
                require: {
                    science: "armies",
                    policy: "wisdom_ancients"
                },
                groups: ["traditionalism"]
            },
            city_state: {
                id: "city_state",
                name: "City-state",
                description: '<i class="' + ug.defense + '"></i> +20% in the Capital',
                require: {
                    science: "calendar",
                    policy: "aristocracy"
                },
                groups: ["traditionalism"]
            },
            oligarchy: {
                id: "oligarchy",
                name: "Oligarchy",
                description: "Reduce troop maintenance in the Capital by half",
                require: {
                    science: "literature",
                    policy: "city_state"
                },
                groups: ["traditionalism"]
            },
            landed_elite: {
                id: "landed_elite",
                name: "Landed Elite",
                description: '<span class="text-faith"><i class="' + ug.faith + '"></i> +50%</span> in the Capital',
                require: {
                    science: "monarchy",
                    policy: "oligarchy"
                },
                groups: ["traditionalism"]
            },
            conservatism: {
                id: "conservatism",
                name: "Conservatism",
                description: '<span class="text-influence"><i class="' + ug.influence + '"></i> -25%</span> form other civilizations',
                require: {
                    science: "milling",
                    policy: "landed_elite"
                },
                groups: ["traditionalism"]
            },
            isolationism: {
                id: "isolationism",
                name: "Isolationism",
                description: '<span class="text-health"><i class="' + ug.health + '"></i> +15%</span> in the Capital',
                require: {
                    science: "civil_service",
                    policy: "conservatism"
                },
                groups: ["traditionalism"]
            },
            collective_rules: {
                id: "collective_rules",
                name: "Collective Rules",
                description: 'Governor cost <span class="text-gold"><i class="' + ug.gold + '"></i> -25%</span>',
                require: {
                    science: "state",
                    policy: ""
                },
                groups: ["imperialism"]
            },
            meritocracy: {
                id: "meritocracy",
                name: "Meritocracy",
                description: '<span class="text-gold"><i class="' + ug.gold + '"></i> +5%</span> in every city',
                require: {
                    science: "armies",
                    policy: "collective_rules"
                },
                groups: ["imperialism"]
            },
            administration: {
                id: "administration",
                name: "Administration",
                description: '<span class="text-prod"><i class="' + ug.prod + '"></i> +5%</span> in every city',
                require: {
                    science: "code_of_laws",
                    policy: "meritocracy"
                },
                groups: ["imperialism"]
            },
            patriotism: {
                id: "patriotism",
                name: "Patriotism",
                description: '<span class="text-happiness"><i class="' + ug.happiness + '"></i> +5%</span> in every city',
                require: {
                    science: "diplomacy",
                    policy: "administration"
                },
                groups: ["imperialism"]
            },
            colonialism: {
                id: "colonialism",
                name: "State Religion",
                description: '<span class="text-faith"><i class="' + ug.faith + '"></i> +15%</span> in every city',
                require: {
                    science: "republic",
                    policy: "patriotism"
                },
                groups: ["imperialism"]
            },
            colonialism1: {
                id: "colonialism1",
                name: "Colonialism",
                description: "Caravel cost -50% & recruit time -50%",
                require: {
                    science: "astronomy",
                    policy: "colonialism"
                },
                groups: ["imperialism"]
            },
            geographical: {
                id: "geographical",
                name: "Geographical Society",
                description: '+ 2% <i class="text-science ' + ug.science + '"></i> / <span class="text-colony"><i class="' + ug.colony + '"></i> Colony</span>',
                require: {
                    science: "economics",
                    policy: "colonialism1"
                },
                groups: ["imperialism"]
            },
            religious_laws: {
                id: "religious_laws",
                name: "Religious Laws",
                description: '<span class="text-faith"><i class="' + ug.faith + '"></i> +2</span> / trade route',
                require: {
                    science: "code_of_laws",
                    policy: ""
                },
                groups: ["piety"]
            },
            organized_religion: {
                id: "organized_religion",
                name: "Organized Religion",
                description: '<span class="text-health"><i class="' + ug.health + '"></i> +5%</span> / Temple',
                require: {
                    science: "religion",
                    policy: "religious_laws"
                },
                groups: ["piety"]
            },
            theocracy: {
                id: "theocracy",
                name: "Theocracy",
                description: '<span class="text-happiness"><i class="' + ug.happiness + '"></i> +5%</span> / Monastery',
                require: {
                    science: "theology",
                    policy: "organized_religion"
                },
                groups: ["piety"]
            },
            holy_wars: {
                id: "holy_wars",
                name: "Holy Wars",
                description: 'Knights cost <span class="text-gold"><i class="' + ug.gold + '"></i> -25%</span>',
                require: {
                    science: "chivalry",
                    policy: "theocracy"
                },
                groups: ["piety"]
            },
            reformation: {
                id: "reformation",
                name: "Reformation",
                description: '<span class="text-science"><i class="' + ug.science + '"></i> +10%</span> <span class="text-faith"><i class="' + ug.faith + '"></i> +10%</span> / Monastery',
                require: {
                    science: "education",
                    policy: "holy_wars"
                },
                groups: ["piety"]
            },
            holy_place: {
                id: "holy_place",
                name: "Holy Place",
                description: '<span class="text-influence"><i class="' + ug.influence + '"></i> +25%</span> towards civilization with same religion',
                require: {
                    science: "printing",
                    policy: "reformation"
                },
                groups: ["piety"]
            },
            red_cross: {
                id: "red_cross",
                name: "Red Cross",
                description: "Reduce risks of loosing citizens, troops and trade routes from disease & plague by 50%",
                require: {
                    science: "chemistry",
                    policy: "holy_place"
                },
                groups: ["piety"]
            },
            code_of_laws: {
                id: "code_of_laws",
                name: "Code of Laws",
                description: '<span class="text-science"><i class="' + ug.science + '"></i> +0.1</span> / citizen',
                require: {
                    science: "code_of_laws",
                    policy: ""
                },
                groups: ["rationalism"]
            },
            philosophy: {
                id: "philosophy",
                name: "Philosophy",
                description: '<span class="text-culture"><i class="' + ug.culture + '"></i> +5%</span> / library',
                require: {
                    science: "literature",
                    policy: "code_of_laws"
                },
                groups: ["rationalism"]
            },
            secularism: {
                id: "secularism",
                name: "Secularism",
                description: '<span class="text-happiness"><i class="' + ug.happiness + '"></i> +5%</span> / shrine',
                require: {
                    science: "theology",
                    policy: "philosophy"
                },
                groups: ["rationalism"]
            },
            sovereignty: {
                id: "sovereignty",
                name: "Sovereignty",
                description: '<span class="text-science"><i class="' + ug.science + '"></i> +2</span> / trade route',
                require: {
                    science: "feudalism",
                    policy: "secularism"
                },
                groups: ["rationalism"]
            },
            scientific_state: {
                id: "scientific_state",
                name: "Scientific State",
                description: '<span class="text-science"><i class="' + ug.science + '"></i> +10%</span> <span class="text-faith"><i class="' + ug.faith + '"></i> +10%</span> / University',
                require: {
                    science: "education",
                    policy: "sovereignty"
                },
                groups: ["rationalism"]
            },
            cultural_promotion: {
                id: "cultural_promotion",
                name: "Cultural Promotion",
                description: '<span class="text-influence"><i class="' + ug.influence + '"></i> +10%</span> / trade route',
                require: {
                    science: "printing",
                    policy: "scientific_state"
                },
                groups: ["rationalism"]
            },
            procedures: {
                id: "procedures",
                name: "Medical Procedures",
                description: '<span class="text-health"><i class="' + ug.health + '"></i> +5%</span> / hospital',
                require: {
                    science: "fertilizer",
                    policy: "cultural_promotion"
                },
                groups: ["rationalism"]
            },
            patronage: {
                id: "patronage",
                name: "Patronage",
                description: 'Starting relation <span class="text-diplomacy"><i class="' + ug.diplomacy + '"></i> +10</span>',
                require: {
                    science: "diplomacy",
                    policy: ""
                },
                groups: ["pacifism"]
            },
            philantropy: {
                id: "philantropy",
                name: "Philantropy",
                description: '<span class="text-diplomacy"><i class="' + ug.diplomacy + '"></i> +1</span> / trade route<br/>Caravans & Caravels cost <span class="text-gold"><i class="' + ug.gold + '"></i> -25%</span>',
                require: {
                    science: "drama",
                    policy: "patronage"
                },
                groups: ["pacifism"]
            },
            cultural_diplomacy: {
                id: "cultural_diplomacy",
                name: "Cultural Diplomacy",
                description: '<span class="text-culture"><i class="' + ug.culture + '"></i> +15%</span> / trade route',
                require: {
                    science: "republic",
                    policy: "philantropy"
                },
                groups: ["pacifism"]
            },
            merchant_confederacy: {
                id: "merchant_confederacy",
                name: "Merchant Confederacy",
                description: '<span class="text-gold"><i class="' + ug.gold + '"></i> +15%</span> / trade route',
                require: {
                    science: "currency",
                    policy: "cultural_diplomacy"
                },
                groups: ["pacifism"]
            },
            scholasticism: {
                id: "scholasticism",
                name: "Scholasticism",
                description: '<span class="text-faith"><i class="' + ug.faith + '"></i> +5</span> / trade route<br/><span class="text-trade"><i class="' + ug.trade + '"></i> +2 </span> trade routes',
                require: {
                    science: "education",
                    policy: "merchant_confederacy"
                },
                groups: ["pacifism"]
            },
            collaboration: {
                id: "collaboration",
                name: "Collaboration",
                description: '<span class="text-influence"><i class="' + ug.influence + '"></i> +5%</span> towards civilization at peace<br/><span class="text-influence"><i class="' + ug.influence + '"></i> +10%</span> towards allied civilization<br/>',
                require: {
                    science: "economics",
                    policy: "scholasticism"
                },
                groups: ["pacifism"]
            },
            monopoly: {
                id: "monopoly",
                name: "Monopoly",
                description: '<span class="text-food"><i class="' + ug.food + '"></i> +10%</span> and <span class="text-happiness"><i class="' + ug.happiness + '"></i> +5%</span> in cities with trade routes.',
                require: {
                    science: "production",
                    policy: "collaboration"
                },
                groups: ["pacifism"]
            },
            code_of_honor: {
                id: "code_of_honor",
                name: "Code of Honor",
                description: '<i class="' + ug.attack + '"></i> +15% attack & defense against barbarians',
                require: {
                    science: "armies",
                    policy: ""
                },
                groups: ["militarism"]
            },
            despotism: {
                id: "despotism",
                name: "Despotism",
                description: '<span class="text-happiness"><i class="' + ug.happiness + '"></i> +5%</span> / barracks',
                require: {
                    science: "code_of_laws",
                    policy: "code_of_honor"
                },
                groups: ["militarism"]
            },
            discipline: {
                id: "discipline",
                name: "Discipline",
                description: '<i class="' + ug.siege + '"></i> +25% chance to break walls & castle with siege units',
                require: {
                    science: "tactics",
                    policy: "despotism"
                },
                groups: ["militarism"]
            },
            military_tradition: {
                id: "military_tradition",
                name: "Military Tradition",
                description: 'Military units cost <span class="text-gold"><i class="' + ug.gold + '"></i> -25%</span>',
                require: {
                    science: "feudalism",
                    policy: "discipline"
                },
                groups: ["militarism"]
            },
            professional_army: {
                id: "professional_army",
                name: "Professional Army",
                description: "Reduce troop maintenance by half",
                require: {
                    science: "chivalry",
                    policy: "military_tradition"
                },
                groups: ["militarism"]
            },
            colonial_conquest: {
                id: "colonial_conquest",
                name: "Colonial Conquest",
                description: '<span class="text-gold"><i class="' + ug.gold + '"></i> +5% / colony</span> ',
                require: {
                    science: "astronomy",
                    policy: "professional_army"
                },
                groups: ["militarism"]
            },
            conscription: {
                id: "conscription",
                name: "Conscription",
                description: "Chances to receive troops from your colonies",
                require: {
                    science: "rigging",
                    policy: "colonial_conquest"
                },
                groups: ["militarism"]
            },
            wonder_builder: {
                id: "wonder_builder",
                name: "Wonder builder",
                description: 'Worker can be converted into <span class="text-prod"><i class="' + ug.prod + '"></i> 600 (increase with scientific adv.)</span>',
                require: {
                    science: "horseriding",
                    policy: ""
                },
                groups: ["traditionalism", "piety"]
            },
            who: {
                id: "who",
                name: "World Health Organization",
                description: '<span class="text-health"><i class="' + ug.health + '"></i> +8%</span> / <span class="text-pop">Scientist</span>',
                require: {
                    science: "sanitation",
                    policy: ""
                },
                groups: ["traditionalism", "rationalism"]
            },
            academy: {
                id: "academy",
                name: "Platonic Academy",
                description: '+1 <span class="text-trade"><i class="' + ug.trade + '"></i></span><br/><span class="text-science"><i class="' + ug.science + '"></i> +5</span> / <span class="text-trade"><i class="' + ug.trade + '"></i></span>',
                require: {
                    science: "writing",
                    policy: ""
                },
                groups: ["traditionalism", "pacifism"]
            },
            slavery: {
                id: "slavery",
                name: "Organized Slavery",
                description: "50% chances to get a 2nd worker when slaver attack is succesful (only if enemy city has enough population)",
                require: {
                    science: "code_of_laws",
                    policy: ""
                },
                groups: ["traditionalism", "militarism"]
            },
            proselytism: {
                id: "proselytism",
                name: "Proselytism",
                description: '<span class="text-faith"><i class="' + ug.faith + '"></i> +1%</span> / nb of cities',
                require: {
                    science: "music_theory",
                    policy: ""
                },
                groups: ["imperialism", "piety"]
            },
            nih: {
                id: "nih",
                name: "National Institute of Health",
                description: '<span class="text-health"><i class="' + ug.health + '"></i> +5%</span> (globally)',
                require: {
                    science: "biology",
                    policy: ""
                },
                groups: ["imperialism", "rationalism"]
            },
            congress: {
                id: "congress",
                name: "World Congress",
                description: '<span class="text-influence"><i class="' + ug.influence + '"></i> +25%</span>',
                require: {
                    science: "scientific",
                    policy: ""
                },
                groups: ["imperialism", "pacifism"]
            },
            police_state: {
                id: "police_state",
                name: "Police State",
                description: '<span class="text-happiness"><i class="' + ug.happiness + '"></i> +10%</span> / Courthouse',
                require: {
                    science: "gunpowder",
                    policy: ""
                },
                groups: ["imperialism", "militarism"]
            },
            miracles: {
                id: "miracles",
                name: "Square of Miracles",
                description: '<span class="text-magic"><i class="' + ug.spells + '"></i>Spells</span> cooldown reduced by 20%',
                require: {
                    science: "advanced_fortification",
                    policy: ""
                },
                groups: ["piety", "pacifism"]
            },
            crusades: {
                id: "crusades",
                name: "Crusades",
                description: '<span class="text-faith"><i class="' + ug.faith + '"></i></span> +10 / enemy killed (attacking only)',
                require: {
                    science: "theology",
                    policy: ""
                },
                groups: ["piety", "militarism"]
            },
            liberalism: {
                id: "liberalism",
                name: "Liberalism",
                description: '<span class="text-prod"><i class="' + ug.prod + '"></i> +25%</span> when building <span class="text-prod">Progress</span>',
                require: {
                    science: "corporation",
                    policy: ""
                },
                groups: ["rationalism", "pacifism"]
            },
            civilizing: {
                id: "civilizing",
                name: "Civilizing Mission",
                description: '<span class="text-progress"><i class="' + ug.progress + '"></i> +50</span> on city conquest',
                require: {
                    science: "dynamite",
                    policy: ""
                },
                groups: ["rationalism", "militarism"]
            }
        }
    }, pg = {
        warrior: {
            id: "warrior",
            name: l => "aztecs" == l.civ_id ? "Eagle Warrior" : "Warrior",
            description: "",
            gold: (l, n) => 20 * (l && l.hasPolicy("military_tradition", n) ? .75 : 1),
            time: () => 20,
            attack: l => "aztecs" == l.civ_id ? 6 : 2,
            ranged: () => !1,
            siege: !1,
            defense: () => 1,
            speed: () => 1,
            capacity: 20,
            require: {
                science: "tools",
                building: "barracks"
            },
            obsolete: "iron_working",
            upgradable: "swordsman",
            special: !1,
            conscript: !0
        },
        swordsman: {
            id: "swordsman",
            name: l => "romans" == l.civ_id ? "Legion" : "Swordsman",
            description: "",
            gold: (l, n) => 200 * (l && l.hasPolicy("military_tradition", n) ? .75 : 1),
            time: () => 100,
            attack: l => "romans" == l.civ_id ? 25 : 15,
            ranged: () => !1,
            siege: !1,
            defense: l => "romans" == l.civ_id ? 20 : 10,
            speed: () => 1,
            capacity: 40,
            require: {
                science: "iron_working",
                building: "barracks"
            },
            obsolete: "steel",
            upgradable: "longswordsman",
            special: !1,
            conscript: !0
        },
        longswordsman: {
            id: "longswordsman",
            name: l => "japanese" == l.civ_id ? "Samurai" : "vikings" == l.civ_id ? "Berserker" : "Longswordsman",
            description: "",
            gold: (l, n) => 2e3 * (l && l.hasPolicy("military_tradition", n) ? .75 : 1),
            time: () => 500,
            attack: l => "japanese" == l.civ_id ? 45 : "vikings" == l.civ_id ? 50 : 35,
            ranged: () => !1,
            siege: !1,
            defense: l => "japanese" == l.civ_id ? 40 : 30,
            speed: l => "vikings" == l.civ_id ? 2 : 1,
            capacity: 50,
            require: {
                science: "steel",
                building: "barracks"
            },
            obsolete: "rifling",
            special: !1,
            conscript: !0
        },
        horseman: {
            id: "horseman",
            name: l => "indians" == l.civ_id ? "War elephant" : "Horseman",
            description: "",
            gold: (l, n) => 30 * (l && l.hasPolicy("military_tradition", n) ? .75 : 1),
            time: () => 40,
            attack: () => 3,
            ranged: l => "indians" == l.civ_id,
            siege: !1,
            defense: () => 1,
            speed: () => 3,
            capacity: 80,
            require: {
                science: "horseriding",
                building: "stables"
            },
            obsolete: "chivalry",
            upgradable: "knight",
            special: !1,
            conscript: !0
        },
        knight: {
            id: "knight",
            name: l => "mongols" == l.civ_id ? "Keshik" : "Knight",
            description: "",
            gold: (l, n) => 300 * (l && l.hasPolicy("holy_wars", n) ? .75 : 1) * (l && l.hasPolicy("military_tradition", n) ? .75 : 1),
            time: () => 200,
            attack: () => 30,
            ranged: l => "mongols" == l.civ_id,
            siege: !1,
            defense: () => 10,
            speed: () => 2,
            capacity: 200,
            require: {
                science: "chivalry",
                building: "stables"
            },
            obsolete: "production",
            upgradable: "cavalry",
            special: !1,
            conscript: !0
        },
        cavalry: {
            id: "cavalry",
            name: l => "russians" == l.civ_id ? "Cossack" : "spanish" == l.civ_id ? "Conquistador" : "Cavalry",
            description: "",
            gold: (l, n) => ("russians" == l.player(n).civ_id ? 2e3 : 3e3) * (l && l.hasPolicy("military_tradition", n) ? .75 : 1),
            time: () => 600,
            attack: l => "russians" == l.civ_id ? 80 : 60,
            ranged: l => "spanish" == l.civ_id,
            siege: !1,
            defense: () => 20,
            speed: () => 3,
            capacity: 400,
            require: {
                science: "military",
                building: "stables"
            },
            special: !1,
            conscript: !0
        },
        archer: {
            id: "archer",
            name: () => "Archer",
            description: "Ranged units attack before all other troops",
            gold: (l, n) => 30 * (l && l.hasPolicy("military_tradition", n) ? .75 : 1),
            time: () => 40,
            attack: () => 2,
            ranged: () => !0,
            siege: !1,
            defense: () => 2,
            speed: () => 1,
            capacity: 10,
            require: {
                science: "archery",
                building: "barracks"
            },
            obsolete: "optics",
            upgradable: "longbowman",
            special: !1,
            conscript: !0
        },
        longbowman: {
            id: "longbowman",
            name: () => "Longbowman",
            description: "Ranged units attack before all other troops",
            gold: (l, n) => 300 * (l && l.hasPolicy("military_tradition", n) ? .75 : 1),
            time: () => 200,
            attack: () => 10,
            ranged: () => !0,
            siege: !1,
            defense: () => 8,
            speed: () => 1,
            capacity: 20,
            require: {
                science: "optics",
                building: "barracks"
            },
            obsolete: "gunpowder",
            upgradable: "musketman",
            special: !1,
            conscript: !0
        },
        musketman: {
            id: "musketman",
            name: l => "americans" == l.civ_id ? "Minuteman" : "Musketman",
            description: "",
            gold: (l, n) => ("americans" == l.player(n).civ_id ? 2e3 : 3e3) * (l && l.hasPolicy("military_tradition", n) ? .75 : 1),
            time: () => 600,
            attack: l => "americans" == l.civ_id ? 40 : 30,
            ranged: () => !0,
            siege: !1,
            defense: () => 30,
            speed: () => 1,
            capacity: 30,
            require: {
                science: "gunpowder",
                building: "barracks"
            },
            special: !1,
            conscript: !0
        },
        rifleman: {
            id: "rifleman",
            name: l => "english" == l.civ_id ? "Red Coat" : "Rifleman",
            description: "",
            gold: (l, n) => 2e4 * (l && l.hasPolicy("military_tradition", n) ? .75 : 1),
            time: () => 1e3,
            attack: l => "english" == l.civ_id ? 80 : 60,
            ranged: () => !0,
            siege: !1,
            defense: () => 50,
            speed: () => 1,
            capacity: 50,
            require: {
                science: "rifling",
                building: "barracks"
            },
            special: !1,
            conscript: !0
        },
        lancier: {
            id: "lancier",
            name: l => "greeks" == l.civ_id ? "Hoplite" : "persians" == l.civ_id ? "Immortal" : "Lancier",
            description: "Melee unit specialized in defense",
            gold: (l, n) => ("persians" == l.player(n).civ_id ? 20 : 30) * (l && l.hasPolicy("military_tradition", n) ? .75 : 1),
            time: () => 40,
            attack: l => "greeks" == l.civ_id ? 7 : "persians" == l.civ_id ? 5 : 1,
            ranged: () => !1,
            siege: !1,
            defense: () => 4,
            speed: () => 1,
            capacity: 10,
            require: {
                science: "bronze_working",
                building: "barracks"
            },
            obsolete: "civil_service",
            upgradable: "pikeman",
            special: !1,
            conscript: !0
        },
        pikeman: {
            id: "pikeman",
            name: l => "zulus" == l.civ_id ? "Impi" : "Pikeman",
            description: "",
            gold: (l, n) => 300 * (l && l.hasPolicy("military_tradition", n) ? .75 : 1),
            time: () => 200,
            attack: l => "zulus" == l.civ_id ? 21 : 1,
            ranged: () => !1,
            siege: !1,
            defense: () => 30,
            speed: () => 1,
            capacity: 20,
            require: {
                science: "civil_service",
                building: "barracks"
            },
            special: !1,
            conscript: !0
        },
        catapult: {
            id: "catapult",
            name: l => "assyrians" == l.civ_id ? "Siege Tower" : "Catapult",
            description: "",
            gold: (l, n) => 60 * (l && l.hasPolicy("military_tradition", n) ? .75 : 1),
            time: () => 80,
            attack: l => "assyrians" == l.civ_id ? 8 : 4,
            ranged: () => !1,
            siege: !0,
            defense: () => 0,
            speed: () => .5,
            capacity: 0,
            require: {
                science: "mathematics",
                building: "sif"
            },
            obsolete: "physics",
            upgradable: "trebuchet",
            special: !1
        },
        trebuchet: {
            id: "trebuchet",
            name: () => "Trebuchet",
            description: "",
            gold: (l, n) => 600 * (l && l.hasPolicy("military_tradition", n) ? .75 : 1),
            time: () => 400,
            attack: () => 40,
            ranged: () => !1,
            siege: !0,
            defense: () => 0,
            speed: () => .5,
            capacity: 0,
            require: {
                science: "physics",
                building: "sif"
            },
            obsolete: "chemistry",
            upgradable: "cannon",
            special: !1
        },
        cannon: {
            id: "cannon",
            name: () => "Cannon",
            description: "",
            gold: (l, n) => 6e3 * (l && l.hasPolicy("military_tradition", n) ? .75 : 1),
            time: () => 800,
            attack: () => 60,
            ranged: () => !1,
            siege: !0,
            defense: () => 0,
            speed: () => .5,
            capacity: 0,
            require: {
                science: "chemistry",
                building: "sif"
            },
            special: !1
        },
        artillery: {
            id: "artillery",
            name: () => "Artillery",
            description: "",
            gold: (l, n) => 15e3 * (l && l.hasPolicy("military_tradition", n) ? .75 : 1),
            time: () => 1200,
            attack: () => 90,
            ranged: () => !1,
            siege: !0,
            defense: () => 0,
            speed: () => 1,
            capacity: 0,
            require: {
                science: "dynamite",
                building: "sif"
            },
            special: !1
        },
        governor: {
            id: "governor",
            name: () => "Governor",
            description: "Governors are used to capture enemy cities",
            gold: (l, n = 0) => l ? l.govCost(n) : 0,
            time: () => 1e3,
            attack: () => 0,
            ranged: () => !1,
            siege: !1,
            defense: () => 0,
            speed: () => 1,
            capacity: 0,
            require: {
                science: "state",
                building: "town_hall"
            },
            special: !1,
            noautorecruit: !0
        },
        scout: {
            id: "scout",
            name: () => "Scout",
            description: "Scouts are used to explore the world",
            gold: () => 40,
            time: () => 40,
            attack: () => 0,
            ranged: () => !1,
            siege: !1,
            defense: () => 0,
            speed: () => 1,
            capacity: 0,
            require: {
                science: "exploration",
                building: "lo"
            },
            obsolete: "education",
            upgradable: "explorer",
            special: !0
        },
        explorer: {
            id: "explorer",
            name: () => "Explorer",
            description: "Explorer are like scouts, but faster and more resistant",
            gold: () => 1e3,
            time: () => 100,
            attack: () => 0,
            ranged: () => !1,
            siege: !1,
            defense: () => 0,
            speed: () => 2,
            capacity: 0,
            require: {
                science: "education",
                building: "town_hall"
            },
            special: !0
        },
        worker: {
            id: "worker",
            name: () => "Worker",
            description: 'Workers can build improvements. Each worker can build a limited amount of improvements. Cost <span class="text-pop"><i class="' + ug.pop + '"></i>1</span>',
            gold: () => 100,
            time: () => 50,
            citizen: 1,
            attack: () => 0,
            ranged: () => !1,
            siege: !1,
            defense: () => 0,
            speed: () => 1,
            capacity: 0,
            require: {
                science: "bronze_working",
                building: "lo"
            },
            special: !0,
            obsolete: "industrialization",
            upgradable: "engineer"
        },
        engineer: {
            id: "engineer",
            name: () => "Engineer",
            description: 'Engineers can build advanced improvements. Cost <span class="text-pop"><i class="' + ug.pop + '"></i>1</span>',
            gold: () => 5e3,
            time: () => 600,
            citizen: 1,
            attack: () => 0,
            ranged: () => !1,
            siege: !1,
            defense: () => 0,
            speed: () => 2,
            capacity: 0,
            require: {
                science: "industrialization",
                building: "town_hall"
            },
            special: !0
        },
        slaver: {
            id: "slaver",
            name: () => "Slaver",
            description: "Slaver can capture slave workers when they are part of a succesful attack.",
            gold: () => 500,
            time: () => 100,
            attack: () => 0,
            ranged: () => !1,
            siege: !1,
            defense: () => 0,
            speed: () => 1,
            capacity: 0,
            require: {
                science: "bronze_working",
                building: "lo"
            },
            special: !1
        },
        archeologist: {
            id: "archeologist",
            name: () => "Archeologist",
            description: 'Archeologists can retrieve <i class="' + ug.relics + ' text-relics"></i> relics from ruins',
            gold: () => 1e4,
            time: () => 900,
            attack: () => 0,
            ranged: () => !1,
            siege: !1,
            defense: () => 0,
            speed: () => 1,
            capacity: 0,
            require: {
                science: "archeology",
                building: "town_hall",
                tech: 100
            },
            special: !0
        },
        spy: {
            id: "spy",
            name: () => "Spy",
            description: "Spies are used to see the details of a city. They can also steal science. Use more spies for better chances of success",
            gold: () => 600,
            time: () => 100,
            attack: () => 0,
            ranged: () => !1,
            siege: !1,
            defense: () => 0,
            speed: () => 1,
            capacity: 0,
            require: {
                science: "monarchy",
                building: "town_hall"
            },
            special: !0
        },
        caravan: {
            id: "caravan",
            name: () => "Caravan",
            description: "Caravans are used to create trade routes",
            gold: (l, n) => 400 * (l && l.hasPolicy("philantropy", n) ? .75 : 1),
            time: () => 300,
            attack: () => 0,
            ranged: () => !1,
            siege: !1,
            defense: () => 0,
            speed: () => 1,
            capacity: 0,
            require: {
                science: "navigation",
                building: "lo"
            },
            special: !0,
            noautorecruit: !0
        },
        caravel: {
            id: "caravel",
            name: l => "portuguese" == l.civ_id ? "Nau" : "Caravel",
            description: "Caravels are used to create colonies",
            gold: (l, n) => (0 == n ? 3e6 : 15e5) * ("portuguese" == l.player(n).civ_id ? .75 : 1) * (l && l.hasPolicy("philantropy", n) ? .75 : 1) * (l && l.hasPolicy("colonialism1", n) ? .5 : 1) * (l && l.hasWonder(n, "casa") ? .5 : 1),
            time: (l, n) => 1500 * (l && l.hasPolicy("colonialism1", n) ? .5 : 1) * (l && l.hasWonder(n, "casa") ? .5 : 1),
            attack: () => 0,
            ranged: () => !1,
            siege: !1,
            defense: () => 0,
            speed: () => 1,
            capacity: 0,
            require: {
                science: "astronomy",
                building: "seaport"
            },
            special: !0,
            noautorecruit: !0
        },
        plague_doctor: {
            id: "plague_doctor",
            name: () => "Plague Doctor",
            description: "Plague Doctors are used to cure the plague and clear the city faster",
            gold: () => 500,
            time: () => 100,
            attack: () => 0,
            ranged: () => !1,
            siege: !1,
            defense: () => 0,
            speed: () => 1,
            capacity: 0,
            require: {
                science: "calendar",
                building: "lo"
            },
            special: !0,
            noautorecruit: !1
        }
    }, fg = {
        deity_selection: {
            name: "Deity",
            link: "/game/deity",
            check: l => l.hasScience("religion"),
            persistent: !1
        },
        spells: {
            name: "Spells",
            link: "/game/help#spells",
            check: (l, n) => l.hasScience("religion") && "" != n.players[0].deity,
            persistent: !1
        },
        daily_bonus: {
            name: "Daily Bonus",
            link: "/game/daily",
            check: l => l.hasScience("spirituality"),
            persistent: !0
        },
        reincarnation: {
            name: "Reincarnation",
            link: "/game/help#reincarnation",
            check: (l, n) => l.hasScience("theology") && "" != n.players[0].deity,
            persistent: !1
        },
        trade: {
            name: "Trade",
            link: "/game/help#trade",
            check: l => l.hasScience("navigation"),
            persistent: !1
        },
        colonization: {
            name: "Colonization",
            link: "/game/help#colonization",
            check: l => l.hasScience("astronomy"),
            persistent: !1
        },
        promotion: {
            name: "Cultural promotion",
            link: "/game/help#influence",
            check: l => l.hasScience("printing"),
            persistent: !1
        },
        alliance: {
            name: "Alliance",
            link: "/game/help#diplomacy",
            check: l => l.hasScience("diplomacy"),
            persistent: !1
        },
        diplo_global: {
            name: "Global diplomacy",
            link: "/game/diplomacy#tab_global",
            check: l => l.hasScience("diplomacy"),
            persistent: !1
        },
        spy: {
            name: "Spying",
            link: "/game/help#spy",
            check: l => l.hasScience("monarchy"),
            persistent: !1
        },
        queue_science: {
            name: "Science queue",
            link: "/game/science",
            check: (l, n) => n.rebirths > 0,
            persistent: !0
        },
        empire_orders: {
            name: "Empire Orders",
            link: "/game/empire#tab_orders",
            check: l => l.player().cities.length > 2,
            persistent: !1
        },
        citizen_builders: {
            name: "Builder",
            link: "/game/help#citizens",
            check: l => l.hasScience("tanning"),
            persistent: !1
        },
        citizen_merchants: {
            name: "Merchant",
            link: "/game/help#citizens",
            check: l => l.hasScience("trade"),
            persistent: !1
        },
        citizen_scientists: {
            name: "Scientist",
            link: "/game/help#citizens",
            check: l => l.hasScience("writing"),
            persistent: !1
        },
        citizen_artists: {
            name: "Artist",
            link: "/game/help#citizens",
            check: l => l.hasScience("art"),
            persistent: !1
        },
        citizen_priests: {
            name: "Priest",
            link: "/game/help#citizens",
            check: l => l.hasScience("religion"),
            persistent: !1
        },
        troops: {
            name: "Troops",
            link: "/game/help#war",
            check: l => l.hasScience("tools"),
            persistent: !1
        },
        buildings: {
            name: "Buildings",
            link: "/game/help#buildings",
            check: l => l.hasScience("tanning"),
            persistent: !1
        },
        queue_buildings: {
            name: "Building queues",
            link: "/game/help#buildings",
            check: l => l.player().cities.length > 1,
            persistent: !0
        },
        auto_building: {
            name: "Automatic building",
            link: "/game/help#buildings",
            check: (l, n) => n.rebirths > 1,
            persistent: !0
        },
        queue_troops: {
            name: "Troop queues",
            link: "/game/help#war",
            check: l => l.hasScience("archery"),
            persistent: !0
        },
        recruit_x10: {
            name: "Recruitment x10 & Auto",
            link: "/game/help#war",
            check: l => l.player().cities.length > 1,
            persistent: !0
        },
        recruit_x100: {
            name: "Recruitment x100",
            link: "/game/help#war",
            check: (l, n) => n.rebirths && n.rebirths > 0,
            persistent: !0
        },
        prod_purchase: {
            name: "Building & troops purchase",
            link: "/game/city",
            check: l => l.hasScience("writing"),
            persistent: !1
        },
        menu_empire: {
            name: "Empire panel",
            link: "/game/empire",
            check: l => l.hasScience("state"),
            persistent: !1
        },
        menu_world: {
            name: "World panel",
            link: "/game/world",
            check: l => l.hasScience("exploration"),
            persistent: !1
        },
        menu_policies: {
            name: "Social Policies",
            link: "/game/policies",
            check: l => l.hasScience("art"),
            persistent: !1
        },
        menu_powers: {
            name: "Powers",
            link: "/game/powers",
            check: (l, n) => l.isUnlocked("reincarnation") || n.rebirths > 0,
            persistent: !0
        },
        menu_diplomacy: {
            name: "Diplomacy",
            link: "/game/diplomacy",
            check: l => l.hasScience("navigation"),
            persistent: !1
        },
        menu_simulator: {
            name: "Battle Simulator",
            link: "/game/simulator",
            check: l => l.hasScience("tactics"),
            persistent: !1
        },
        orientation: {
            name: "Technology",
            link: "/game/empire#tab_orientation",
            check: l => l.hasScienceRank(16),
            persistent: !1
        },
        era_ancient: {
            name: "Ancient Era",
            link: "/game/science",
            check: l => l.hasScienceRank(3),
            persistent: !0
        },
        era_classical: {
            name: "Classical Era",
            link: "/game/science",
            check: l => l.hasScienceRank(6),
            persistent: !0
        },
        era_medieval: {
            name: "Medieval Era",
            link: "/game/science",
            check: l => l.hasScienceRank(9),
            persistent: !0
        },
        era_renaissance: {
            name: "Renaissance Era",
            link: "/game/science",
            check: l => l.hasScienceRank(12),
            persistent: !0
        },
        era_industrial: {
            name: "Industrial Era",
            link: "/game/science",
            check: l => l.hasScienceRank(15),
            persistent: !0
        },
        era_future: {
            name: "Future Era",
            link: "/game/science",
            check: l => l.hasScienceRank(18),
            persistent: !0
        },
        spell_newfire: {
            name: "Spell: New Fire",
            link: "/game/help#spells",
            check: l => "coatlicue" == l.player().deity && l.pop() >= 30,
            persistent: !0
        },
        spell_sacrifice: {
            name: "Spell: Sacrifice",
            link: "/game/help#spells",
            check: (l, n) => "coatlicue" == l.player().deity && n.charging.newfire && n.charging.newfire >= 50,
            persistent: !0
        },
        spell_tradenode: {
            name: "Spell: Trade Node",
            link: "/game/help#spells",
            check: (l, n) => "horus" == l.player().deity && l.goldTotal() >= 3e6,
            persistent: !0
        },
        spell_seshat: {
            name: "Spell: Sechat's Wisdom",
            link: "/game/help#spells",
            check: (l, n) => "horus" == l.player().deity && l.tradeRouteNb() >= 15,
            persistent: !0
        },
        spell_berserker: {
            name: "Spell: Berserker",
            link: "/game/help#spells",
            check: (l, n) => "odin" == l.player().deity && l.totalTroopNb() >= 500,
            persistent: !0
        },
        spell_appropriation: {
            name: "Spell: Appropriation",
            link: "/game/help#spells",
            check: (l, n) => "odin" == l.player().deity && n.burnNb >= 5,
            persistent: !0
        },
        spell_enlightment: {
            name: "Spell: Enlightment",
            link: "/game/help#spells",
            check: l => "shiva" == l.player().deity && l.pop(l.capital()) >= 8,
            persistent: !0
        },
        spell_maha: {
            name: "Spell: Maha Shivaratri",
            link: "/game/help#spells",
            check: l => "shiva" == l.player().deity && l.wondersNb() >= 10,
            persistent: !0
        },
        spell_dionysia: {
            name: "Spell: Dionysia",
            link: "/game/help#spells",
            check: l => "dionysus" == l.player().deity && l.player().culture >= 1e5,
            persistent: !0
        },
        spell_bacchanalia: {
            name: "Spell: Bacchanalia",
            link: "/game/help#spells",
            check: l => "dionysus" == l.player().deity && l.colonyNb() >= 15,
            persistent: !0
        },
        spell_punisher: {
            name: "Spell: The Punisher",
            link: "/game/help#spells",
            check: (l, n) => "batara" == l.player().deity && n.plagueNb >= 1,
            persistent: !0
        },
        spell_devourer: {
            name: "Spell: Devourer of the Sun",
            link: "/game/help#spells",
            check: (l, n) => "batara" == l.player().deity && n.plagueMaxCities >= 20,
            persistent: !0
        },
        autocast: {
            name: "Autocast Spell",
            link: "/game/help#spells",
            check: l => l.player().orientation <= -100,
            persistent: !1
        },
        improvements: {
            name: "Tile Improvements",
            link: "/game/help#improvements",
            check: l => l.hasScience("bronze_working"),
            persistent: !1
        },
        improvements2: {
            name: "Advanced Tile Improvements",
            link: "/game/help#improvements",
            check: l => l.hasScience("industrialization") && l.player().orientation >= 50,
            persistent: !1
        },
        timetravel: {
            name: "Time Travel",
            link: "/game/help#technology",
            check: l => l.player().orientation > 0,
            persistent: !1
        },
        indusbuildings: {
            name: "Industrial Buildings",
            link: "/game/help#technology",
            check: l => l.player().orientation >= 25,
            persistent: !1
        },
        indusimpr: {
            name: "Industrial Improvements",
            link: "/game/help#technology",
            check: l => l.player().orientation >= 50,
            persistent: !1
        },
        induswonders: {
            name: "Industrial Wonders",
            link: "/game/help#technology",
            check: l => l.player().orientation >= 75,
            persistent: !1
        },
        archeology: {
            name: "Archeology",
            link: "/game/help#archeology",
            check: l => l.hasScience("archeology", l.player()) && l.player().orientation >= 100,
            persistent: !1
        }
    }, gg = {
        0: {
            name: "Peaceful",
            description: "- Barbarians attacks disabled<br/>- AI attacks disabled<br/>- Big penalties for barbarians<br/>- No bonuses for AI<br/>- No plague<br/>- Faith production -25%",
            ai_bonus: 1,
            ai_golden_bonus: 1.2,
            ai_recruit_bonus: .8,
            barbarian_battle_mult: .5,
            barbarian_science_mult: .1,
            barbarian_gold_prod_mult: .3,
            faith_mult: .75
        },
        1: {
            name: "Relax",
            description: "- Barbarians attacks disabled<br />- AI attacks enabled but rare<br/>- Big penalties for barbarians<br/>- Small bonuses for AI",
            ai_bonus: 1.1,
            ai_golden_bonus: 1.3,
            ai_recruit_bonus: 1,
            barbarian_battle_mult: .7,
            barbarian_science_mult: .2,
            barbarian_gold_prod_mult: .4,
            faith_mult: 1
        },
        2: {
            name: "Normal",
            description: "- Barbarians attacks enabled<br />- AI attacks enabled<br/>- Moderate penalties for barbarians<br/>- Moderate bonuses for AI<br/>- Faith production +25%",
            ai_bonus: 1.3,
            ai_golden_bonus: 1.6,
            ai_recruit_bonus: 1.2,
            barbarian_battle_mult: .8,
            barbarian_science_mult: .3,
            barbarian_gold_prod_mult: .5,
            faith_mult: 1.25
        },
        3: {
            name: "Hardcore",
            description: "- Barbarians attacks more frequent<br />- AI attacks more frequent<br/>- No penalties for Barbarians (except science)<br/>- Big bonuses for AI<br/>- Faith production +50%",
            ai_bonus: 1.6,
            ai_golden_bonus: 2,
            ai_recruit_bonus: 1.5,
            barbarian_battle_mult: 1,
            barbarian_science_mult: .5,
            barbarian_gold_prod_mult: 1,
            faith_mult: 1.5
        }
    }; class mg {
        static capitalizeFirstLetter(l) {
            return l.charAt(0).toUpperCase() + l.slice(1)
        }
        static formatTime(l) {
            if (l == 1 / 0) return "Infinity";
            let n = Math.floor(l / 86400);
            l -= 86400 * n;
            let e = Math.floor(l / 3600);
            l -= 3600 * e;
            let t = Math.floor(l / 60),
                i = Math.floor(l) % 60;
            return (n > 0 ? n + "d" : "") + (e > 0 ? this.str(e) + "h" : "") + (0 == n && (t > 0 || e > 0) ? this.str(t) + "m" : "") + (0 == n && 0 == e ? this.str(i) + "s" : "")
        }
        static str(l) {
            return (l >= 10 ? "" : "0") + l
        }
        static format(l, n = "") {
            let e = this.getConfig(n);
            e.percent && (l *= 100);
            let t = "";
            l >= 1e12 ? (t = "T", e.decimals = (l /= 1e12) < 10 ? 2 : l < 100 ? 1 : 0) : l >= 1e9 ? (t = "B", e.decimals = (l /= 1e9) < 10 ? 2 : l < 100 ? 1 : 0) : l >= 1e6 ? (t = "M", e.decimals = (l /= 1e6) < 10 ? 2 : l < 100 ? 1 : 0) : l >= 1e3 ? (t = "k", e.decimals = (l /= 1e3) < 10 ? 2 : l < 100 ? 1 : 0) : l >= 100 ? e.decimals = 0 : l >= 10 && 2 == e.decimals && (e.decimals = 1);
            let i = Math.pow(10, e.decimals);
            l = Math.floor(l * i) / i;
            let s = Number(l).toFixed(e.decimals);
            if (s = (e.withPlus && l >= 0 ? "+" : "") + s + t, e.percent && (s += " %"), e.coloration) {
                let n = "";
                l > 0 ? n = "text-success" : l < 0 && (n = "text-danger"), s = '<span class="' + n + '">' + s + "</span>"
            }
            return s
        }
        static getConfig(l) {
            if ("" == l) return {
                withPlus: !1,
                decimals: 0,
                coloration: !1,
                percent: !1
            };
            let n = l.startsWith("+"),
                e = l.endsWith("c"),
                t = l.replace(/[\+c]/g, "");
            if (!t.startsWith(".")) throw "invalid format: " + l + '. Config should be "+.2%c"';
            let i = t.endsWith("%");
            return {
                withPlus: n,
                decimals: +(t = (t = t.replace(/[%]/g, "")).replace(/[\.]/g, "")),
                coloration: e,
                percent: i
            }
        }
    }
    class yg {
        static get(l, n) {
            return void 0 === n && (n = l, l = 0), Math.floor(Math.random() * (1 + n - l)) + l
        }
        static roll(l) {
            return Math.random() < l
        }
        static fromArray(l) {
            return l[yg.get(0, l.length - 1)]
        }
        static randomVilBonus() {
            return yg.fromArray(["", "", "", "food", "prod", "science", "gold", "culture", "faith", "recruitment"])
        }
    }
    const vg = {
        coatlicue: {
            id: "coatlicue",
            name: "Coatlicue",
            description: "Coatlicue is a powerful goddess of the Aztec mythology. The creator and destroyer of world, the mother of gods and mortals, she is said to have given birth to the Moon and the stars.<br/>This deity will help <b>your civilization grow</b>",
            color: "#229954",
            icon: "fas fa-seedling"
        },
        horus: {
            id: "horus",
            name: "Horus",
            description: 'Horus is "The One Far Above", protector of the Pharaoh. Originally the Sky God, he is also known as War God, Hunters God, God of Kingship and others.<br/>This deity will help <b>your civilization prosper</b>',
            color: "#F1C40F",
            icon: "fas fa-ankh"
        },
        odin: {
            id: "odin",
            name: "Odin",
            description: "Odin is a supreme God of Death, healing, knowledge and poetry.<br/>This deity will help you <b>crush your enemies</b>",
            color: "#3498DB",
            icon: "fas fa-bolt"
        },
        shiva: {
            id: "shiva",
            name: "Shiva",
            description: "Shiva is the form of Brahma, the creator of world and the infinite. The God of Yogis, destroyer of world, he holds the word \u2018destruction\u2019 in a positive sense, as destruction of ego, attachments and old habits.<br/>This deity will help <b>your civilization progress</b>",
            color: "#E74C3C",
            icon: "fas fa-balance-scale-right"
        },
        dionysus: {
            id: "dionysus",
            name: "Dionysus",
            description: "Dyonisus is the god of wine, winemaking, grape cultivation, fertility, ritual madness, theater, and religious ecstasy.<br/>This deity will help <b>your civilization happiness & culture</b>",
            color: "#8E44AD",
            icon: "fas fa-glass-cheers"
        },
        batara: {
            id: "batara",
            name: "Batara Kala",
            description: "Batara Kala is the god of the underworld, the creator of light and the earth and the god of time and destruction, who devours unlucky people.<br/>This deity will help <b>your opponents fall</b><br/>This deity is <b>NOT RECOMMENDED</b> on your first run.",
            color: "#85929E",
            icon: "fas fa-skull-crossbones"
        }
    }, bg = {
        abundance: {
            id: "abundance",
            name: "Abundance",
            icon: ug.food,
            description: l => '<i class="text-food ' + ug.food + '"></i> production increased by <span class="text-primary">' + Math.round(100 * l.abundanceBonus()) + "%</span> for 5min (based on Feathered Serpent level)",
            help: '<i class="text-food ' + ug.food + '"></i> production increased for 5min (based on Feathered Serpent level)',
            time: 300,
            cooldown: 480,
            deity: "coatlicue",
            level: 1
        },
        newfire: {
            id: "newfire",
            name: "New Fire",
            icon: ug.happiness,
            description: l => '<i class="text-happiness ' + ug.happiness + '"></i> happiness increased (incremental)<br/>Current level: <span class="text-primary">' + Math.round(100 * l.newfireBonus()) + "%</span>",
            help: '<i class="text-happiness ' + ug.happiness + '"></i> happiness increased (incremental)',
            lock: "spell_newfire",
            lockDesc: l => "Total population " + l.pop() + " / 30",
            charging: !0,
            cooldown: 240,
            deity: "coatlicue",
            level: 2
        },
        sacrifice: {
            id: "sacrifice",
            name: "Human Sacrifice",
            icon: ug.science,
            description: l => '<span class="text-primary">+ ' + mg.format(Math.round(l.sacrificeBonus())) + '</span> <i class="text-science ' + ug.science + '"></i> (based on food production & global happiness)',
            help: '<i class="text-science ' + ug.science + '"></i> boost (based on food production & global happiness)',
            run: l => {
                let n = l.player();
                if (!n.science_queue.length) return !1;
                let e = l.sacrificeBonus();
                return n.sciences[n.science_queue[0]].progress || (n.sciences[n.science_queue[0]].progress = 0), n.sciences[n.science_queue[0]].progress += e, n.sciences[n.science_queue[0]].progress >= l.scienceCost(l.conf.sciences[n.science_queue[0]]) && (l.discoverScience(n.id), l.data.autopause.science && (l.data.pause = !0)), !0
            },
            lock: "spell_sacrifice",
            lockDesc: l => "New Fire charge " + (l.data.charging.newfire || 0) + " / 50",
            cooldown: 600,
            deity: "coatlicue",
            level: 3
        },
        negociation: {
            id: "negociation",
            name: "Negociation",
            icon: ug.gold,
            description: l => '<span class="text-trade"><i class="' + ug.trade + '"></i> Trade routes</span> produce <span class="text-primary">' + Math.round(100 * l.negociationBonus()) + '%</span> more <i class="text-gold ' + ug.gold + '"></i> for 5 min (based on Eye of Horus level)',
            help: '<span class="text-trade"><i class="' + ug.trade + '"></i> Trade routes</span> produce more <i class="text-gold ' + ug.gold + '"></i> for 5 min (based on Eye of Horus level)',
            time: 300,
            cooldown: 480,
            deity: "horus",
            level: 1
        },
        tradenode: {
            id: "tradenode",
            name: "Trade node",
            icon: ug.trade,
            description: l => '<span class="text-trade"><i class="' + ug.trade + '"></i> Trade routes</span> max number increased (incremental)<br/>Current level: <span class="text-primary">' + Math.floor(l.tradeNodeBonus()) + "</span> (not rounded: " + Math.floor(10 * l.tradeNodeBonus()) / 10 + ")",
            help: '<span class="text-trade"><i class="' + ug.trade + '"></i> Trade routes</span> max number increased (incremental)',
            lock: "spell_tradenode",
            lockDesc: l => "Total gold " + mg.format(l.goldTotal()) + " / 3M",
            charging: !0,
            cooldown: 300,
            deity: "horus",
            level: 2
        },
        seshat: {
            id: "seshat",
            name: "Sechat's wisdom",
            icon: ug.science,
            description: l => '<i class="text-gold ' + ug.gold + '"></i> value of <span class="text-trade"><i class="' + ug.trade + '"></i> Trade routes</span> is added to <i class="text-science ' + ug.science + '"></i> value of trade route for 2 min',
            help: '<i class="text-gold ' + ug.gold + '"></i> value of <span class="text-trade"><i class="' + ug.trade + '"></i> Trade routes</span> is added to <i class="text-science ' + ug.science + '"></i> value of trade route for 2 min',
            lock: "spell_seshat",
            lockDesc: l => "Trade routes " + l.tradeRouteNb() + " / 15",
            time: 120,
            cooldown: 480,
            deity: "horus",
            level: 3
        },
        warpath: {
            id: "warpath",
            name: "War path",
            icon: ug.recruitment,
            description: l => '<i class="' + ug.attack + '"></i> Recruitment speed increased and troop maintenance reduced(incremental)<br/>Current value:  <span class="text-primary">' + Math.floor(100 * l.warpathBonus()) + '%</span> (speed) | <span class="text-primary">-' + Math.floor(100 * l.warpathMaintenanceBonus()) + "%</span> (maintenance)",
            help: '<i class="' + ug.attack + '"></i> Recruitment speed increased (incremental)<br/>',
            charging: !0,
            cooldown: 300,
            deity: "odin",
            level: 1
        },
        berserker: {
            id: "berserker",
            name: "Berserker",
            icon: ug.attack,
            description: l => '<i class="' + ug.attack + '"></i> Attack increased by <span class="text-primary">' + Math.round(100 * l.berserkerAttackBonus()) + '%</span><br/><i class="' + ug.speed + '"></i> Speed increased by <span class="text-primary">' + Math.round(100 * l.berserkerSpeedBonus()) + '%</span><br/>Troop <i class="' + ug.capacity + '"></i> capacity x10<br/>for 2min (only for attacks, based on Valhalla level)',
            help: '<i class="' + ug.attack + '"></i> Attack increased and <i class="' + ug.speed + '"></i> Speed increased for 2min (only for attacks, based on Valhalla level)',
            lock: "spell_berserker",
            lockDesc: l => "Total troops " + mg.format(l.totalTroopNb()) + " / 500",
            time: 120,
            cooldown: 300,
            deity: "odin",
            level: 2
        },
        appropriation: {
            id: "appropriation",
            name: "Appropriation",
            icon: ug.science,
            description: l => '<span class="text-primary">+ ' + Math.round(l.appropriationBonus()) + '</span> <i class="text-science ' + ug.science + '"></i> and <i class="text-faith ' + ug.faith + '"></i> for each unit killed for 1 min (based on total army power)',
            help: '<i class="text-science ' + ug.science + '"></i> for each unit killed for 1 min (based on total army power)',
            lock: "spell_appropriation",
            lockDesc: l => "City burnt down " + l.data.burnNb + " / 5",
            time: 60,
            cooldown: 480,
            deity: "odin",
            level: 3
        },
        timeshift: {
            id: "timeshift",
            name: "Timeshift",
            icon: ug.time,
            description: l => 'Advance in time for <span class="text-primary">+ ' + mg.formatTime(l.timeshiftBonus()) + "</span> (based on Third Eye level)",
            help: "Advance in time (based on Third Eye level)",
            run: (l, n) => (n.run(0, l.timeshiftBonus(), !0), !0),
            cooldown: 300,
            deity: "shiva",
            level: 1
        },
        enlightment: {
            id: "enlightment",
            name: "Enlightment",
            icon: ug.science,
            description: l => '<i class="text-science ' + ug.science + '"></i> production increased (incremental)<br/>Current value: <span class="text-primary">+' + Math.floor(100 * l.enlightmentBonus()) + "%</span>",
            help: '<i class="text-science ' + ug.science + '"></i> production increased (incremental)',
            lock: "spell_enlightment",
            lockDesc: l => "Capital population " + l.pop(l.capital()) + " / 8",
            charging: !0,
            cooldown: 300,
            deity: "shiva",
            level: 2
        },
        maha: {
            id: "maha",
            name: "Maha Shivaratri",
            icon: ug.faith,
            description: l => '<span class="text-primary">+ ' + mg.format(Math.round(l.mahaBonus())) + '</span> <i class="text-faith ' + ug.faith + '"></i> (based on science and global food production)',
            help: '<i class="text-faith ' + ug.faith + '"></i> boost (based on science and global food production)',
            run: l => (l.player().faith += l.mahaBonus(), !0),
            lock: "spell_maha",
            lockDesc: l => "Nb of wonders " + l.wondersNb() + " / 10",
            cooldown: 600,
            deity: "shiva",
            level: 3
        },
        idlers: {
            id: "idlers",
            name: "God of idlers",
            icon: ug.sleep,
            description: l => 'Idle citizens produce <i class="text-food ' + ug.food + '"></i>, <i class="text-culture ' + ug.culture + '"></i> and <i class="text-happiness ' + ug.happiness + '"></i> (incremental)<br/>Current value: <span class="text-primary">+' + mg.format(l.idlersBonus(), ".1") + " | +" + mg.format(l.idlersBonus() / 2, ".1") + " | +" + mg.format(l.idlersBonus()) + "%</span>",
            help: 'Idle citizens produce <i class="text-food ' + ug.food + '"></i>, <i class="text-culture ' + ug.culture + '"></i> and <i class="text-happiness ' + ug.happiness + '"></i> (incremental)',
            charging: !0,
            cooldown: 300,
            deity: "dionysus",
            level: 1
        },
        dionysia: {
            id: "dionysia",
            name: "Dionysia",
            icon: ug.culture,
            description: l => '<i class="text-culture ' + ug.culture + '"></i> production increased by <span class="text-primary">' + Math.round(100 * l.dionysiaBonus()) + "%</span> for 2min (based on happiness and Orphic Mysteries level)",
            help: '<i class="text-culture ' + ug.culture + '"></i> production increased for 2min (based on happiness and Orphic Mysteries level)',
            time: 120,
            cooldown: 300,
            lock: "spell_dionysia",
            lockDesc: l => "Culture " + mg.format(l.player().culture) + " / 100k",
            deity: "dionysus",
            level: 2
        },
        bacchanalia: {
            id: "bacchanalia",
            name: "Bacchanalia",
            icon: ug.faith,
            description: l => '<i class="text-science ' + ug.science + '"></i> & <i class="text-faith ' + ug.faith + '"></i> production increased by <span class="text-primary">' + Math.round(100 * l.bacchanaliaBonus()) + "%</span> for 1min (based on happiness, culture production and nb of colonies)",
            help: '<i class="text-science ' + ug.science + '"></i> & <i class="text-faith ' + ug.faith + '"></i> production increased for 1min (based on happiness, culture production and nb of colonies)',
            time: 60,
            cooldown: 600,
            lock: "spell_bacchanalia",
            lockDesc: l => "Colonies " + l.colonyNb() + " / 15",
            deity: "dionysus",
            level: 3
        },
        underworld: {
            id: "underworld",
            name: "Ruler of the Underworld",
            icon: ug.health,
            description: l => 'Reduce risks of losing citizens, troops and trade routes from disease & plague (incremental)<br/>Current value: <span class="text-primary">-' + mg.format(100 * l.underworldBonus(), ".1") + "%</span>",
            help: "Reduce risks of dying from disease (incremental)",
            charging: !0,
            cooldown: 300,
            deity: "batara",
            level: 1
        },
        punisher: {
            id: "punisher",
            name: "The Punisher",
            icon: ug.faith,
            description: l => '<i class="text-science ' + ug.science + '"></i> & <i class="text-faith ' + ug.faith + '"></i> production increased for each city suffering from the plague. Increase plague propagation risk. (incremental)<br/>Current value: <span class="text-primary">+' + mg.format(100 * l.punisherBonus(), ".1") + "% / city with plague</span>",
            help: '<i class="text-science ' + ug.science + '"></i> & <i class="text-faith ' + ug.faith + '"></i> production increased for each city suffering from the plague (incremental)',
            charging: !0,
            lock: "spell_punisher",
            lockDesc: l => "Survived a plague " + l.data.plagueNb + " / 1",
            cooldown: 420,
            deity: "batara",
            level: 2
        },
        devourer: {
            id: "devourer",
            name: "Devourer of the Sun",
            icon: ug.plague,
            description: l => 'Start a <i class="' + ug.plague + '"></i> plague in a random location',
            help: 'Start a <i class="' + ug.plague + '"></i> plague in a random location',
            run: l => {
                let n = yg.fromArray(l.allCities());
                return l.initPlague(n), !0
            },
            lock: "spell_devourer",
            lockDesc: l => "Most spread plague " + l.data.plagueMaxCities + " / 20",
            cooldown: 600,
            deity: "batara",
            level: 3
        }
    }, _g = {
        clairvoyance: {
            id: "clairvoyance",
            name: "Clairvoyance",
            description: l => '<span class="text-science"><i class="' + ug.science + '"></i></span> production increased.<br/>' + (l ? (l.players[0].powers.clairvoyance ? 'Current: <span class="text-primary">+ ' + 10 * l.players[0].powers.clairvoyance + " %</span><br/>" : "") + 'Next level: <span class="text-primary">+ ' + 10 * ((l.players[0].powers.clairvoyance || 0) + 1) + " %</span>" : ""),
            cost: {
                "": 1
            }
        },
        stone: {
            id: "stone",
            name: "Stone Skin",
            description: l => '<span class="text-defense"><i class="' + ug.defense + '"></i> Defense</span> increased.<br/>' + (l ? (l.players[0].powers.stone ? 'Current: <span class="text-primary">+ ' + 5 * l.players[0].powers.stone + " %</span><br/>" : "") + 'Next level: <span class="text-primary">+ ' + 5 * ((l.players[0].powers.stone || 0) + 1) + " %</span>" : ""),
            cost: {
                "": 1
            }
        },
        serpent: {
            id: "serpent",
            name: "Feathered Serpent",
            description: l => 'City <span class="text-food"><i class="' + ug.food + '"></i></span> production increased for each building owned.<br/>' + (l ? (l.players[0].powers.serpent ? 'Current: <span class="text-primary">+ ' + l.players[0].powers.serpent + " %</span> / building<br/>" : "") + 'Next level: <span class="text-primary">+ ' + ((l.players[0].powers.serpent || 0) + 1) + " %</span> / building" : ""),
            cost: {
                coatlicue: 1
            }
        },
        eye: {
            id: "eye",
            name: "Eye of Horus",
            description: l => '<span class="text-trade"><i class="' + ug.trade + '"></i>Trade routes</span> increase <i class="text-happiness ' + ug.happiness + '"></i>.<br/>' + (l ? (l.players[0].powers.eye ? 'Current: <span class="text-primary">+ ' + mg.format(.5 * l.players[0].powers.eye, ".2") + "</span> / trade route<br/>" : "") + 'Next level: <span class="text-primary">+ ' + mg.format(.5 * ((l.players[0].powers.eye || 0) + 1), ".2") + "</span>  / trade route" : ""),
            cost: {
                horus: 1
            }
        },
        valhalla: {
            id: "valhalla",
            name: "Valhalla",
            description: l => "Happiness increased from garrisoned units.<br/>" + (l ? (l.players[0].powers.valhalla ? 'Current: <span class="text-primary">+ ' + mg.format(.025 * l.players[0].powers.valhalla, ".2") + " %</span> / unit<br/>" : "") + 'Next level: <span class="text-primary">+ ' + mg.format(.025 * ((l.players[0].powers.valhalla || 0) + 1), ".2") + " %</span> / unit" : ""),
            cost: {
                odin: 1
            }
        },
        thirdeye: {
            id: "thirdeye",
            name: "Third Eye",
            description: l => '<span class="text-food"><i class="' + ug.food + '"></i></span> and <span class="text-prod"><i class="' + ug.prod + '"></i></span> production increased in the capital.<br/>' + (l ? (l.players[0].powers.thirdeye ? 'Current: <span class="text-primary">+ ' + 10 * l.players[0].powers.thirdeye + " %</span><br/>" : "") + 'Next level: <span class="text-primary">+ ' + 10 * ((l.players[0].powers.thirdeye || 0) + 1) + " %</span>" : ""),
            cost: {
                shiva: 1
            }
        },
        sequencer: {
            id: "sequencer",
            name: "Sequencer",
            description: (l, n) => 'Incremental <span class="text-spells"><i class="' + ug.spells + '"></i> spells</span> cooldown reduced.<br/>' + (n ? (l.players[0].powers.sequencer ? 'Current: <span class="text-primary">- ' + mg.format(100 * n.sequencerBonus(0), ".1") + " %</span><br/>" : "") + 'Next level: <span class="text-primary">- ' + mg.format(100 * n.sequencerBonus(0, 1), ".1") + " %</span>" : ""),
            cost: {
                "": 1,
                batara: 1
            }
        },
        orphic: {
            id: "orphic",
            name: "Orphic Mysteries",
            description: l => 'All citizens produce <span class="text-faith"><i class="' + ug.faith + '"></i></span>.<br/>' + (l ? (l.players[0].powers.orphic ? 'Current: <span class="text-primary">+ ' + mg.format(.2 * l.players[0].powers.orphic, ".1") + " / citizen</span><br/>" : "") + 'Next level: <span class="text-primary">+ ' + mg.format(.2 * ((l.players[0].powers.orphic || 0) + 1), ".1") + " / citizen</span>" : ""),
            cost: {
                "": 1,
                dionysus: 1
            }
        },
        haste: {
            id: "haste",
            name: "Haste",
            description: l => 'Increase troop <i class="' + ug.speed + '"></i> speed.<br/>' + (l ? (l.players[0].powers.haste ? 'Current: <span class="text-primary">+ ' + 5 * l.players[0].powers.haste + " %<br/>" : "") + 'Next level: <span class="text-primary">+ ' + 5 * ((l.players[0].powers.haste || 0) + 1) + " %</span>" : ""),
            cost: {
                odin: 1,
                batara: 1
            }
        },
        eternity: {
            id: "eternity",
            name: "Gateway to Eternity",
            description: l => '<span class="text-prod"><i class="' + ug.prod + '"></i></span> production increased for each <span class="text-trade"><i class="' + ug.trade + '"></i>Trade routes</span>.<br/>' + (l ? (l.players[0].powers.eternity ? 'Current: <span class="text-primary">+ ' + 5 * l.players[0].powers.eternity + " %</span> / trade route<br/>" : "") + 'Next level: <span class="text-primary">+ ' + 5 * ((l.players[0].powers.eternity || 0) + 1) + " %</span> / trade route" : ""),
            cost: {
                coatlicue: 1,
                horus: 1
            }
        },
        ouroboros: {
            id: "ouroboros",
            name: "Ouroboros",
            description: l => '<span class="text-culture"><i class="' + ug.culture + '"></i></span> production increased for each tech discovered.<br/>' + (l ? (l.players[0].powers.ouroboros ? 'Current: <span class="text-primary">+ ' + 2 * l.players[0].powers.ouroboros + " %</span> / tech discovered<br/>" : "") + 'Next level: <span class="text-primary">+ ' + 2 * ((l.players[0].powers.ouroboros || 0) + 1) + " %</span> / tech discovered" : ""),
            cost: {
                dionysus: 1,
                shiva: 1
            }
        },
        bliss: {
            id: "bliss",
            name: "Bliss",
            description: l => '<span class="text-happiness"><i class="' + ug.happiness + '"></i></span> increased.<br/>' + (l ? (l.players[0].powers.bliss ? 'Current: <span class="text-primary">+ ' + 5 * l.players[0].powers.bliss + " %</span><br/>" : "") + 'Next level: <span class="text-primary">+ ' + 5 * ((l.players[0].powers.bliss || 0) + 1) + " %</span>" : ""),
            cost: {
                "": 1,
                odin: 1,
                shiva: 1,
                coatlicue: 1,
                horus: 1,
                dionysus: 1,
                batara: 1
            }
        }
    }, wg = {
        balanced: {
            name: "Balanced",
            sort: (l, n) => {
                let e = Object.assign({}, l),
                    t = n.player(e.ownerid),
                    i = e.autoassign_options.nogrowth,
                    s = e.autoassign_options.priority || "";
                n.data.emp_autoassign && 0 == t.id && (s = n.data.emp_priority);
                let u = e.autoassign_options.strong;
                n.data.emp_autoassign && 0 == t.id && (u = n.data.emp_strong);
                let r = n.pop(e),
                    a = r;
                Object.keys(e.citizens).forEach(l => e.citizens[l] = 0);
                let o = "artists";
                ag.idle.happiness(n, t.id) >= ag.artists.happiness(n, t.id) && (o = "idle");
                let c = "farmers";
                ag.idle.food(n, e) >= ag.farmers.food(n, e) && (c = "idle");
                let d = "artists";
                if (ag.idle.culture(n, t.id) >= ag.artists.culture(n, t.id) && (d = "idle"), n.hasScience("art", t)) {
                    for (e.citizens.priests = r; n.happiness(e, !0) < .2 && a;) e.citizens[o]++, a--, e.citizens.priests--;
                    e.citizens.priests = 0
                }
                if (n.hasPolicy("who", t.id)) {
                    for (e.citizens.priests = r; n.health(e) < .2 && a;) e.citizens.scientists++, a--, e.citizens.priests--;
                    e.citizens.priests = 0
                }
                for (e.citizens.priests = r - e.citizens.artists; n.foodDiff(e) < 0 && a;) e.citizens[c]++, a--, e.citizens.priests--;
                if (e.citizens.priests = 0, n.hasScience("trade", t))
                    for (; n.goldDiff(e) < 0 && a;) e.citizens.merchants++, a--;
                if (u && s) {
                    let l = s;
                    "farmers" == l && (l = c), "artists" == l && (l = d), e.citizens[l] += a, a = 0
                } else
                    for (; a;) {
                        let l = a;
                        "farmers" != s || i || (e.citizens[c]++, a--), "builders" == s && a && n.hasScience("tanning", t) && e.building_queue.length && (e.citizens.builders++, a--), "scientists" == s && a && n.hasScience("writing", t) && t.science_queue.length && (e.citizens.scientists++, a--), "merchants" == s && a && n.hasScience("trade", t) && e.gold < n.maxGold(e) && (e.citizens.merchants++, a--), "artists" == s && a && n.hasScience("art", t) && (e.citizens[d]++, a--), "priests" == s && a && n.hasScience("religion", t) && t.orientation <= 0 && (e.citizens.priests++, a--), a && n.hasScience("tanning", t) && e.building_queue.length && (e.citizens.builders++, a--), a && n.hasScience("writing", t) && t.science_queue.length && (e.citizens.scientists++, a--), a && n.hasScience("trade", t) && e.gold < n.maxGold(e) && (e.citizens.merchants++, a--), a && n.hasScience("art", t) && (e.citizens[d]++, a--), 0 == e.ownerid && a && n.hasScience("religion", t) && t.orientation <= 0 && (e.citizens.priests++, a--), a && !i && (e.citizens[c]++, a--), l == a && (e.citizens.idle += a, a = 0)
                    }
                for (let h in e.citizens) l.citizens[h] = e.citizens[h]
            }
        }
    }, xg = {
        americans: {
            id: "americans",
            name: "Americans",
            name2: "American",
            color: "#ffffff",
            color2: "#182a64",
            vil_names: ["Washington", "New York", "Boston", "Philadelphia", "Atlanta", "Chicago", "Seattle", "San Francisco", "Los Angeles", "Houston", "Portland", "St. Louis", "Miami", "Buffalo", "Detroit", "New Orleans", "Baltimore", "Denver", "Cincinnati", "Dallas", "Memphis", "Cleveland", "Kansas City", "San Diego", "Richmond", "Las Vegas", "Phoenix", "Albuquerque", "Minneapolis", "Pittsburgh", "Oakland", "Tampa Bay", "Orlando", "Tacoma", "Santa Fe", "Olympia", "Hunt Valley", "Springfield", "Palo Alto", "Centralia", "Spokane", "Jacksonville", "Savannah", "Charleston", "San Antonio", "Omaha", "Birmingham", "Honolulu", "Anchorage", "Sacramento", "Salt Lake City", "Reno", "Boise", "Milwaukee", "Santa Cruz", "Monterey", "Santa Monica", "Little Rock", "Columbus", "Lebam"],
            starting_relations: 60,
            relation_decrease: .3,
            war_fatigue_ratio: 2e8,
            agressivity: 14,
            mult: {
                food: 1.3,
                gold: 1.5,
                science: 1.5,
                recruitment: 1.2,
                prod: 1.1,
                attack: 1.2,
                defense: 1.1,
                culture: 1.4
            },
            burn_chances: 0,
            golden: "industrial",
            respawn: !0,
            description: 'Special unit: <span class="text-special">Minuteman</span>. The Minuteman is a cheaper musketman with +10 attack.'
        },
        arabians: {
            id: "arabians",
            name: "Arabians",
            name2: "Arabian",
            color: "#b4e826",
            color2: "#2d552e",
            vil_names: ["Mecca", "Medina", "Damascus", "Baghdad", "Najran", "Kufah", "Basra", "Khurasan", "Anjar", "Fustat", "Aden", "Yamama", "Muscat", "Mansura", "Bukhara", "Fez", "Shiraz", "Merw", "Balkh", "Mosul", "Aydab", "Bayt Ras", "Suhar", "Taif", "Hama", "Tabuk", "Sana'a", "Shihr", "Tripoli", "Tunis", "Kairouan", "Algiers", "Oran", "Tangier", "Casablanca", "Marrakech"],
            starting_relations: 50,
            relation_decrease: .2,
            war_fatigue_ratio: 3e8,
            agressivity: 13,
            mult: {
                food: 1,
                gold: 1.3,
                science: 1,
                recruitment: 1.1,
                prod: 1.1,
                attack: 1,
                defense: 1.2,
                culture: 1.2
            },
            burn_chances: .02,
            golden: "renaissance",
            description: 'Special ability: <span class="text-trade">+2 <i class="' + ug.trade + '"></i></span>.'
        },
        assyrians: {
            id: "assyrians",
            name: "Assyrians",
            name2: "Assyrian",
            color: "#ffae0f",
            color2: "#fffff6",
            vil_names: ["Assur", "Nineveh", "Nimrud", "Kar-Tukulti-Ninurta", "Dur-Sharrukin", "Halab", "Carchemish", "Kanesh", "Harran", "Imgur-Enlil", "Shubat-Enlil", "Qatna", "Sareisa", "Sam al", "Qarqar", "Til Barsip", "Sultantepe", "Erbil", "Hamath", "Guzana", "Turuspa", "Nasibina", "Arpad", "Kelashin", "Tadmor", "Urartu", "Sabata", "Hit"],
            starting_relations: 49,
            relation_decrease: .5,
            war_fatigue_ratio: 4e8,
            agressivity: 14,
            mult: {
                food: 1,
                gold: 1,
                science: 1.1,
                recruitment: 1,
                prod: 1,
                attack: 1,
                defense: 1.4,
                culture: 1
            },
            burn_chances: .01,
            golden: "ancient",
            description: 'Special unit: <span class="text-special">Siege Tower</span>. The Siege Tower is a catapult with +4 attack'
        },
        australians: {
            id: "australians",
            name: "Australians",
            name2: "Australian",
            color: "#f8d902",
            color2: "#156c31",
            vil_names: ["Sydney", "Launceston", "Ballaarat", "Perth", "Brisbane", "Toowoomba", "Melbourne", "Townsville", "Geelong", "Adelaide", "Hobart", "Bendigo", "Broken Hill", "Cairns", "Newcastle", "Maitland", "Rockhampton", "Wagga Wagga", "Wollongong", "Albury", "Alice Springs", "Bathurst", "Queanbeyan", "Bundaberg", "Coffs Harbor", "Darwin", "Fremantle", "Gladstone", "Goulburn", "Hervey Bay", "Kalgoorlie", "Lismore", "Lithgow", "Maryborough", "Orange", "Port Macquarie", "Port Pirie", "Boomahnoomoonah", "Tweed Heads"],
            starting_relations: 50,
            relation_decrease: .2,
            war_fatigue_ratio: 5e7,
            agressivity: 12,
            mult: {
                food: 1.5,
                gold: 1.3,
                science: 1.3,
                recruitment: 1.1,
                prod: 1.3,
                attack: 1.1,
                defense: 1.4,
                culture: 1.3
            },
            burn_chances: .1,
            golden: "industrial",
            respawn: !0,
            description: "Special ability: Can build farms on Desert tiles."
        },
        aztecs: {
            id: "aztecs",
            name: "Aztecs",
            name2: "Aztec",
            color: "#E74C3C",
            color2: "#74F4F2",
            vil_names: ["Tenochtitlan", "Teotihuacan", "Tlatelolco", "Texcoco", "Tlaxcala", "Calixtlahuaca", "Xochicalco", "Tlacopan", "Atzcapotzalco", "Tzintzuntzan", "Malinalco", "Tula", "Tamuin", "Teayo", "Cempoala", "Chalco", "Tlalmanalco", "Ixtapaluca", "Huexotla", "Tepexpan", "Tepetlaoxtoc", "Chiconautla", "Zitlaltepec", "Coyotepec", "Tequixquiac", "Jilotzingo", "Tlapanaloya", "Tultitan", "Ecatepec", "Coatepec", "Chalchiuites", "Chiauhita", "Chapultepec", "Itzapalapa", "Ayotzinco", "Iztapam"],
            starting_relations: 60,
            relation_decrease: 1,
            war_fatigue_ratio: 5e8,
            agressivity: 15,
            mult: {
                food: 1,
                gold: 1,
                science: 1,
                recruitment: 1.2,
                prod: 1,
                attack: 1,
                defense: 1,
                culture: 1.1
            },
            burn_chances: .05,
            golden: "classical",
            description: 'Special unit: <span class="text-special">Eagle Warrior</span>. The Eagle Warrior is a warrior with +4 attack. Acts as a Slaver.'
        },
        brazilians: {
            id: "brazilians",
            name: "Brazilians",
            name2: "Brazilian",
            color: "#2a552d",
            color2: "#70d307",
            vil_names: ["Rio de Janeiro", "S\xe3o Paulo", "Salvador", "Bras\xedlia", "Fortaleza", "Belo Horizonte", "Manaus", "Curitiba", "Recife", "Porto Alegre", "Bel\xe9m", "Goi\xe2nia", "Guarulhos", "Campinas", "S\xe3o Luis", "Macei\xf3", "Duque de Caxias", "Natal", "Campo Grande", "Teresina", "Florian\xf3polis", "Nova Igua\xe7u", "Sao Bernardo do Campo", "Jo\xe3o Pessoa", "Osasco", "Jaboat\xe3o dos Guararapes", "S\xe3o Jos\xe9 dos Campos", "Contagem", "Uberl\xe2ndia", "Aracaju", "Cuiab\xe1", "Feira de Santana", "Juiz de Fora", "Joinville", "Macap\xe1", "Jundia\xed"],
            starting_relations: 50,
            relation_decrease: .2,
            war_fatigue_ratio: 5e7,
            agressivity: 13,
            mult: {
                food: 1.5,
                gold: 1.1,
                science: 1.2,
                recruitment: 1.1,
                prod: 1.3,
                attack: 1.1,
                defense: 1.3,
                culture: 1.5
            },
            burn_chances: 0,
            golden: "industrial",
            respawn: !0,
            description: 'Special building: <span class="text-special">Carnival</span>. The Carnival is a zoo with +10 <i class="' + ug.culture + ' text-culture"></i>'
        },
        chinese: {
            id: "chinese",
            name: "Chinese",
            name2: "Chinese",
            color: "#ffffff",
            color2: "#008546",
            vil_names: ["Beijing", "Shanghai", "Guangzhou", "Nanjing", "Xian", "Chengdu", "Hangzhou", "Tianjin", "Macau", "Shandong", "Kaifeng", "Ningbo", "Baoding", "Yangzhou", "Harbin", "Chongqing", "Luoyang", "Kunming", "Taipei", "Shenyang", "Taiyuan", "Tainan", "Dalian", "Lijiang", "Wuxi", "Suzhou", "Maoming", "Shaoguan", "Yangjiang", "Heyuan", "Liaoning", "Hubei", "Gansu", "Huangshi", "Yichang", "Yingtan", "Xinyu", "Xinzheng", "Handan", "Dunhuang", "Gaoyu", "Nantong", "Weifang", "Xikang"],
            starting_relations: 70,
            relation_decrease: .3,
            war_fatigue_ratio: 2e8,
            agressivity: 14,
            mult: {
                food: 1.1,
                gold: 1.1,
                science: 1.4,
                recruitment: 1,
                prod: 1.2,
                attack: 1,
                defense: 1.2,
                culture: 1.1
            },
            burn_chances: 0,
            golden: "medieval",
            description: 'Special building: <span class="text-special">Paper Maker</span>. The Paper Maker is a library with +5 <i class="' + ug.science + ' text-science"></i> '
        },
        egyptians: {
            id: "egyptians",
            name: "Egyptians",
            name2: "Egyptian",
            color: "#680cda",
            color2: "#f8ef11",
            vil_names: ["Thebes", "Memphis", "Heliopolis", "Elephantine", "Alexandria", "Pi-Ramesses", "Giza", "Byblos", "Akhetaten", "Hieraconpolis", "Abydos", "Asyut", "Avaris", "Lisht", "Buto", "Edfu", "Pithom", "Busiris", "Kahun", "Athribis", "Mendes", "Elashmunein", "Tanis", "Bubastis", "Oryx", "Sebennytus", "Akhmin", "Karnak", "Luxor", "El Kab", "Armant", "Balat", "Ellahun", "Kom Medinet Ghurab", "Hawara", "Dashur", "Raqote", "Damanhur", "Merimde", "Abusir", "Herakleopolis", "Akoris", "Benihasan", "Tasa", "Badari", "Hermopolis", "Amrah", "Negade", "Koptos", "Hermonthis", "Ombos", "Aniba", "Soleb", "Semna", "Amara"],
            starting_relations: 60,
            relation_decrease: .1,
            war_fatigue_ratio: 2e8,
            agressivity: 13,
            mult: {
                food: 1.1,
                gold: 1,
                science: 1.3,
                recruitment: 1,
                prod: 1.3,
                attack: 1,
                defense: 1.2,
                culture: 1.2
            },
            burn_chances: 0,
            golden: "ancient",
            description: 'Special building: <span class="text-special">Granite quarry</span>. The Granite quarry is a workshop with +5 <i class="' + ug.prod + ' text-prod"></i> '
        },
        english: {
            id: "english",
            name: "English",
            name2: "English",
            color: "#fffdfe",
            color2: "#5b0300",
            vil_names: ["London", "York", "Nottingham", "Hastings", "Canterbury", "Coventry", "Warwick", "Newcastle", "Oxford", "Liverpool", "Dover", "Brighton", "Norwich", "Leeds", "Reading", "Birmingham", "Richmond", "Exeter", "Cambridge", "Gloucester", "Manchester", "Bristol", "Leicester", "Carlisle", "Ipswich", "Portsmouth", "Berwick", "Bath", "Mumbles", "Southampton", "Sheffield", "Salisbury", "Colchester", "Plymouth", "Lancaster", "Blackpool", "Winchester", "Hull"],
            starting_relations: 50,
            relation_decrease: .4,
            war_fatigue_ratio: 6e8,
            agressivity: 14,
            mult: {
                food: 1.2,
                gold: 1.2,
                science: 1.3,
                recruitment: 1.1,
                prod: 1.2,
                attack: 1,
                defense: 1,
                culture: 1.1
            },
            burn_chances: .01,
            golden: "industrial",
            description: 'Special unit: <span class="text-special">Red coat</span>. The Red coat is a rifleman with +20 attack'
        },
        french: {
            id: "french",
            name: "French",
            name2: "French",
            color: "#f6f5c3",
            color2: "#4090ff",
            vil_names: ["Paris", "Orleans", "Lyon", "Troyes", "Tours", "Marseille", "Chartres", "Avignon", "Rouen", "Grenoble", "Dijon", "Amiens", "Cherbourg", "Poitiers", "Toulouse", "Bayonne", "Strasbourg", "Brest", "Bordeaux", "Rennes", "Nice", "Saint Etienne", "Nantes", "Reims", "Le Mans", "Montpellier", "Limoges", "Nancy", "Lille", "Caen", "Toulon", "N\xeemes", "Le Havre", "Lourdes", "Carcassone", "Cannes", "Aix-En-Provence", "La Rochelle", "Bourges", "Calais"],
            starting_relations: 50,
            relation_decrease: .3,
            war_fatigue_ratio: 2e8,
            agressivity: 13,
            mult: {
                food: 1.3,
                gold: 1.1,
                science: 1.3,
                recruitment: 1.1,
                prod: 1.2,
                attack: 1,
                defense: 1,
                culture: 1.3
            },
            burn_chances: .01,
            golden: "renaissance",
            description: 'Special building: <span class="text-special">Chateau</span>. The Chateau is an castle with +10 <i class="' + ug.gold + ' text-gold"></i> and +10 <i class="' + ug.culture + ' text-culture"></i>'
        },
        germans: {
            id: "germans",
            name: "Germans",
            name2: "German",
            color: "#3c4237",
            color2: "#99979f",
            vil_names: ["Berlin", "Hamburg", "Munich", "Cologne", "Frankfurt", "Essen", "Dortmund", "Stuttgart", "D\xfcsseldorf", "Bremen", "Hannover", "Duisburg", "Leipzig", "Dresden", "Bonn", "Bochum", "Bielefeld", "Karlsruhe", "Gelsenkirchen", "Wiesbaden", "M\xfcnster", "Rostock", "Chemnitz", "Braunschweig", "Halle", "M\xf6nchengladbach", "Kiel", "Wuppertal", "Freiburg", "Hagen", "Erfurt", "Kaiserslautern", "Kassel", "Oberhausen", "Hamm", "Saarbr\xfccken", "Krefeld", "Pirmasens", "Potsdam", "Solingen", "Osnabr\xfcck", "Ludwigshafen", "Leverkusen", "Oldenburg", "Neuss", "M\xfclheim", "Darmstadt", "Herne", "W\xfcrzburg", "Recklinghausen", "G\xf6ttingen", "Wolfsburg", "Koblenz", "Hildesheim", "Erlangen"],
            starting_relations: 50,
            relation_decrease: .7,
            war_fatigue_ratio: 6e8,
            agressivity: 15,
            mult: {
                food: 1.1,
                gold: 1.2,
                science: 1.4,
                recruitment: 1.2,
                prod: 1.3,
                attack: 1.3,
                defense: 1.1,
                culture: 1
            },
            burn_chances: .02,
            golden: "industrial",
            description: 'Special building: <span class="text-special">Hanse</span>. The Hanse is an ironworks with +15 <i class="' + ug.prod + ' text-prod"></i> '
        },
        greeks: {
            id: "greeks",
            name: "Greeks",
            name2: "Greek",
            color: "#418efd",
            color2: "#fffeff",
            vil_names: ["Athens", "Sparta", "Corinth", "Argos", "Knossos", "Mycenae", "Pharsalos", "Ephesus", "Halicarnassus", "Rhodes", "Eretria", "Pergamon", "Miletos", "Megara", "Phocaea", "Sicyon", "Tiryns", "Samos", "Mytilene", "Chios", "Paros", "Tegea", "Elis", "Syracuse", "Herakleia", "Gortyn", "Chalkis", "Pylos", "Pella", "Naxos", "Sicyon", "Smyrna", "Larissa", "Apollonia", "Messene", "Orchomenos", "Ambracia", "Kos", "Knidos", "Amphipolis", "Patras", "Lamia", "Nafplion", "Apolyton"],
            starting_relations: 75,
            relation_decrease: .2,
            war_fatigue_ratio: 2e7,
            agressivity: 13,
            mult: {
                food: 1,
                gold: 1,
                science: 1.2,
                recruitment: 1,
                prod: 1.1,
                attack: 1.1,
                defense: 1.1,
                culture: 1.2
            },
            burn_chances: 0,
            golden: "ancient",
            description: 'Special unit: <span class="text-special">Hoplite</span>. The Hoplite is a lancier with +6 attack'
        },
        incans: {
            id: "incans",
            name: "Incans",
            name2: "Incan",
            color: "#1f7d50",
            color2: "#ffa116",
            vil_names: ["Cusco", "Tiwanaku", "Machu", "Ollantaytambo", "Corihuayrachina", "Huamanga", "Vilcas", "Vilcabamba", "Vitcos", "Andahuaylas", "Ica", "Arequipa", "Nasca", "Atico", "Juli", "Chuito", "Chuquiapo", "Huanuco Pampa", "Tamboccocha", "Huaras", "Riobamba", "Caxamalca", "Sausa", "Tambo Colorado", "Huaca", "Tumbes", "Chan Chan", "Sipan", "Pachacamac", "Llactapata", "Pisac", "Kuelap", "Pajaten", "Chucuito"],
            starting_relations: 75,
            relation_decrease: .2,
            war_fatigue_ratio: 2e7,
            agressivity: 13,
            mult: {
                food: 1.1,
                gold: 1.1,
                science: 1,
                recruitment: 1,
                prod: 1,
                attack: 1,
                defense: 1.1,
                culture: 1
            },
            burn_chances: 0,
            golden: "classical",
            description: 'Special building: <span class="text-special">Terrace</span>. The Terrace is a granary with +3 <i class="' + ug.food + ' text-food"></i>'
        },
        indians: {
            id: "indians",
            name: "Indians",
            name2: "Indian",
            color: "#ffb34b",
            color2: "#0d6707",
            vil_names: ["Delhi", "Mumbai", "Vijayanagara", "Pataliputra", "Varanasi", "Agra", "Calcutta", "Lahore", "Bangalore", "Hyderabad", "Madurai", "Ahmedabad", "Kolhapur", "Prayaga", "Ayodhya", "Indraprastha", "Mathura", "Ujjain", "Gulbarga", "Jaunpur", "Rajagriha", "Sravasti", "Tiruchirapalli", "Thanjavur", "Bodhgaya", "Kushinagar", "Amaravati", "Gaur", "Gwalior", "Jaipur", "Karachi"],
            starting_relations: 75,
            relation_decrease: .1,
            war_fatigue_ratio: 1e7,
            agressivity: 12,
            mult: {
                food: 1.2,
                gold: 1,
                science: 1.2,
                recruitment: 1,
                prod: 1,
                attack: 1,
                defense: 1.1,
                culture: 1.1
            },
            burn_chances: 0,
            golden: "classical",
            description: 'Special unit: <span class="text-special">War elephant</span>. The War elephant is a horseman that act as a ranged unit.'
        },
        indonesians: {
            id: "indonesians",
            name: "Indonesians",
            name2: "Indonesian",
            color: "#b64436",
            color2: "#86d9e0",
            vil_names: ["Jakarta", "Surabaya", "Medan", "Makassar", "Batam", "Denpasar", "Samarinda", "Mataram", "Ambon", "Bandung", "Kupang", "Depok", "Palembang", "Trowulan", "Semarang", "Jayapura", "Tangerang", "Bogor", "Pekanbaru", "Bandar Lampung", "Malang", "Padang", "Ternate", "Banjarmasin", "Pontianak", "Cimahi", "Balikpapan", "Jambi", "Komodo", "Solo", "Biak", "Djawa", "Kudus", "Lombok", "Samosir", "Sragen", "Garut", "Gresik", "Nias", "Madiun", "Yogyakarta", "Bima", "Sorong"],
            starting_relations: 50,
            relation_decrease: .3,
            war_fatigue_ratio: 2e8,
            agressivity: 13,
            mult: {
                food: 1.3,
                gold: 1.1,
                science: 1,
                recruitment: 1.1,
                prod: 1,
                attack: 1.1,
                defense: 1.2,
                culture: 1.1
            },
            burn_chances: .02,
            golden: "medieval",
            description: 'Special building: <span class="text-special">Candi</span>. The Candi is a garden with +5% <i class="' + ug.happiness + ' text-happiness"></i>'
        },
        japanese: {
            id: "japanese",
            name: "Japanese",
            name2: "Japanese",
            color: "#b80000",
            color2: "#e0e0e0",
            vil_names: ["Kyoto", "Osaka", "Tokyo", "Satsuma", "Kagoshima", "Nara", "Nagoya", "Izumo", "Nagasaki", "Yokohama", "Shimonoseki", "Matsuyama", "Sapporo", "Hakodate", "Ise", "Toyama", "Fukushima", "Suo", "Bizen", "Echizen", "Izumi", "Omi", "Echigo", "Kozuke", "Sado", "Kobe", "Nagano", "Hiroshima", "Takayama", "Akita", "Fukuoka", "Aomori", "Kamakura", "Kochi", "Naha"],
            starting_relations: 50,
            relation_decrease: .3,
            war_fatigue_ratio: 6e8,
            agressivity: 14,
            mult: {
                food: 1,
                gold: 1.1,
                science: 1.3,
                recruitment: 1,
                prod: 1,
                attack: 1.1,
                defense: 1.4,
                culture: 1.1
            },
            burn_chances: 0,
            golden: "renaissance",
            description: 'Special unit: <span class="text-special">Samurai</span>. The Samurai is a longswordsman with +10 attack and +10 defense.'
        },
        mongols: {
            id: "mongols",
            name: "Mongols",
            name2: "Mongol",
            color: "#fd9514",
            color2: "#3f0008",
            vil_names: ["Karakorum", "Beshbalik", "Turfan", "Hsia", "Old Sarai", "New Sarai", "Tabriz", "Tiflis", "Otrar", "Sanchu", "Kazan", "Almarikh", "Ulaanbaatar", "Hovd", "Darhan", "Dalandzadgad", "Mandalgovi", "Choybalsan", "Erdenet", "Tsetserleg", "Baruun-Urt", "Ereen", "Batshireet", "Choyr", "Ulaangom", "Tosontsengel", "Atlay", "Uliastay", "Bayanhongor", "Har-Ayrag", "Nalayh", "Tes"],
            starting_relations: 40,
            relation_decrease: .9,
            war_fatigue_ratio: 6e8,
            agressivity: 15,
            mult: {
                food: 1.1,
                gold: 1,
                science: 1,
                recruitment: 1.2,
                prod: 1,
                attack: 1.2,
                defense: 1,
                culture: 1
            },
            burn_chances: .2,
            golden: "medieval",
            description: 'Special unit: <span class="text-special">Keshik</span>. The Keshik is a knight that acts as a ranged unit.'
        },
        ottomans: {
            id: "ottomans",
            name: "Ottomans",
            name2: "Ottoman",
            color: "#30773d",
            color2: "#f2f7af",
            vil_names: ["Istanbul", "Edirne", "Ankara", "Bursa", "Konya", "Samsun", "Gaziantep", "Diyarbakir", "Izmir", "Kayseri", "Malatya", "Marsin", "Antalya", "Zonguldak", "Denizli", "Ordu", "Mugla", "Eski\u015fehir", "Inebolu", "Sinop", "Adana", "Tarsus", "Artuin", "Bodrum", "Ere\u011fli", "Silifke", "Sivas", "Amasya", "Marmaris", "Trabzon", "Erzurum", "Urfa", "Izmit", "Afyonkarhisar", "Bitlis", "Yalova"],
            starting_relations: 50,
            relation_decrease: .3,
            war_fatigue_ratio: 3e8,
            agressivity: 14,
            mult: {
                food: 1.1,
                gold: 1.2,
                science: 1,
                recruitment: 1.1,
                prod: 1,
                attack: 1.1,
                defense: 1.1,
                culture: 1.2
            },
            burn_chances: .02,
            golden: "medieval",
            description: 'Special building: <span class="text-special">Bazaar</span>. The Bazaar is a bank with +5 <i class="' + ug.gold + ' text-gold"></i> / trade route'
        },
        persians: {
            id: "persians",
            name: "Persians",
            name2: "Persian",
            color: "#f4e73a",
            color2: "#ae0601",
            vil_names: ["Persepolis", "Pasargadae", "Susa", "Ecbatana", "Tarsus", "Gordium", "Bactra", "Sardis", "Ergili", "Dariushkabir", "Ghulaman", "Zohak", "Istakhr", "Jinjan", "Borazjan", "Herat", "Dakyanus", "Bampur", "Turengtepe", "Rey", "Shiraz", "Tushpa", "Hasanlu", "Gabae", "Merv", "Behistun", "Kandahar", "Altintepe", "Bunyan", "Charsadda", "Uratyube", "Dura Europos", "Aleppo", "Qatna", "Kabul", "Capisa", "Kyreskhata", "Marakanda", "Peshawar", "Van", "Pteira", "Arshada", "Artakaona", "Aspabota", "Autiyara", "Bagastana", "Baxtri", "Darmasa", "Daphnai", "Drapsaka", "Eion", "Gandutava", "Gaugamela", "Harmozeia", "Ekatompylos", "Izata", "Kampada", "Kapisa", "Karmana", "Kounaxa", "Kuganaka", "Nautaka", "Paishiyauvada", "Patigrbana", "Phrada"],
            starting_relations: 49,
            relation_decrease: .5,
            war_fatigue_ratio: 4e8,
            agressivity: 14,
            mult: {
                food: 1,
                gold: 1.1,
                science: 1.2,
                recruitment: 1,
                prod: 1,
                attack: 1,
                defense: 1.1,
                culture: 1.1
            },
            burn_chances: .01,
            golden: "ancient",
            description: 'Special unit: <span class="text-special">Immortal</span>. The Immortal is a cheaper lancier with +4 attack.'
        },
        portuguese: {
            id: "portuguese",
            name: "Portuguese",
            name2: "Portuguese",
            color: "#202e96",
            color2: "#ffffff",
            vil_names: ["Lisbon", "Porto", "Braga", "Coimbra", "Funchal", "Leiria", "Goa", "Vila Nova de Gaia", "Aveiro", "Luanda", "Evora", "Faro", "Castelo Branco", "Bissau", "Guarda", "Viseu", "Praia", "Braganza", "Beja", "Tomar", "Maputo", "Tavira", "Figueira da Foz", "Viana do Castelo", "S\xe3o Tom\xe9 and Pr\xedncipe", "Silves", "Sintra", "Dili", "Lamego", "Ponta Delgada"],
            starting_relations: 50,
            relation_decrease: .3,
            war_fatigue_ratio: 3e8,
            agressivity: 12,
            mult: {
                food: 1.2,
                gold: 1.2,
                science: 1.2,
                recruitment: 1.1,
                prod: 1,
                attack: 1,
                defense: 1.1,
                culture: 1.1
            },
            burn_chances: 0,
            golden: "renaissance",
            description: 'Special unit: <span class="text-special">Nau</span>. The Nau is a cheaper caravel that is available with Education.'
        },
        romans: {
            id: "romans",
            name: "Romans",
            name2: "Roman",
            color: "#f2cc00",
            color2: "#3b0064",
            vil_names: ["Rome", "Antium", "Cumae", "Neapolis", "Ravenna", "Arretium", "Mediolanum", "Arpinum", "Circei", "Setia", "Satricum", "Ardea", "Ostia", "Velitrae", "Viroconium", "Tarentum", "Brundisium", "Caesaraugusta", "Caesarea", "Palmyra", "Signia", "Aquileia", "Clusium", "Sutrium", "Cremona", "Placentia", "Hispalis", "Artaxata", "Aurelianorum", "Nicopolis", "Londinium", "Eburacum", "Gordion", "Agrippina", "Lugdunum", "Verona", "Corfinium", "Treveri", "Sirmium", "Augustadorum", "Bagacum", "Lauriacum", "Teurnia", "Curia", "Fregellae", "Alba Fucens", "Sora", "Interrama", "Suessa", "Saticula", "Luceria", "Arminium", "Senagallica", "Castrum Novum", "Hadria", "Padua"],
            starting_relations: 70,
            relation_decrease: .5,
            war_fatigue_ratio: 2e8,
            agressivity: 14,
            mult: {
                food: 1.1,
                gold: 1.1,
                science: 1.2,
                recruitment: 1.1,
                prod: 1.1,
                attack: 1.1,
                defense: 1.1,
                culture: 1
            },
            burn_chances: 0,
            golden: "classical",
            description: 'Special unit: <span class="text-special">Legion</span>. The Legion is a swordsman with +10 attack and +10 defense.'
        },
        russians: {
            id: "russians",
            name: "Russians",
            name2: "Russian",
            color: "#0d0d0d",
            color2: "#eeb200",
            vil_names: ["Moscow", "St. Petersburg", "Novgorod", "Rostov", "Yaroslavl", "Yekaterinburg", "Yakutsk", "Vladivostok", "Smolensk", "Orenburg", "Krasnoyarsk", "Khabarovsk", "Bryansk", "Tver", "Novosibirsk", "Magadan", "Murmansk", "Irkutsk", "Chita", "Samara", "Arkhangelsk", "Chelyabinsk", "Tobolsk", "Vologda", "Omsk", "Astrakhan", "Kursk", "Saratov", "Tula", "Vladimir", "Perm", "Voronezh", "Pskov", "Starayarussa", "Kostroma", "Nizhniy Novgorod", "Suzdal", "Magnitogorsk"],
            starting_relations: 40,
            relation_decrease: .4,
            war_fatigue_ratio: 6e8,
            agressivity: 14,
            mult: {
                food: 1.3,
                gold: 1,
                science: 1.2,
                recruitment: 1.2,
                prod: 1.2,
                attack: 1,
                defense: 1.3,
                culture: 1.1
            },
            burn_chances: .05,
            golden: "industrial",
            description: 'Special unit: <span class="text-special">Cossack</span>. The Cossack is a cheaper cavalry with +20 attack.'
        },
        spanish: {
            id: "spanish",
            name: "Spanish",
            name2: "Spanish",
            color: "#fcd2d0",
            color2: "#3f1412",
            vil_names: ["Madrid", "Barcelona", "Seville", "Cordoba", "Toledo", "Santiago", "Salamanca", "Murcia", "Valencia", "Zaragoza", "Pamplona", "Vitoria", "Santander", "Oviedo", "Jaen", "Logro\xf1o", "Valladolid", "Palma", "Teruel", "Almeria", "Leon", "Zamora", "Mida", "Lugo", "Alicante", "C\xe1diz", "Elche", "Alcorcon", "Burgos", "Vigo", "Badajoz", "La Coru\xf1a", "Guadalquivir", "Bilbao", "San Sebastian", "Granada", "M\xe9rida", "Huelva", "Ibiza", "Las Palmas", "Tenerife"],
            starting_relations: 50,
            relation_decrease: .4,
            war_fatigue_ratio: 2e8,
            agressivity: 14,
            mult: {
                food: 1.1,
                gold: 1.2,
                science: 1.2,
                recruitment: 1.2,
                prod: 1.1,
                attack: 1,
                defense: 1,
                culture: 1.2
            },
            burn_chances: .05,
            golden: "renaissance",
            description: 'Special unit: <span class="text-special">Conquistador</span>. The Conquistador is a cavalry that act as a ranged unit.'
        },
        vikings: {
            id: "vikings",
            name: "Vikings",
            name2: "Viking",
            color: "#fe8113",
            color2: "#790002",
            vil_names: ["Nidaros", "Uppsala", "Haithabu", "Birka", "Bjorgvin", "Jelling", "Roskilde", "Tonsberg", "Sigtuna", "Lodose", "Odense", "Oslo", "Ribe", "Lindholm", "Vasteras", "Aarhus", "Lund", "Kaupang", "Reykjavik", "Thingvellir", "Jorvik", "Lincoln", "Deoraby", "Stamford", "Dyflin", "Vadrejford", "Limerick", "Rowane", "Konugard", "Holmgard", "Aldeigjuborg", "Kirkjuvagr", "Tynwald", "Leirvik", "Tinganes", "Kirkjubour", "Brattahlid", "Vinland", "Thunderfall"],
            starting_relations: 52,
            relation_decrease: .9,
            war_fatigue_ratio: 6e8,
            agressivity: 15,
            mult: {
                food: 1,
                gold: 1.1,
                science: 1,
                recruitment: 1.1,
                prod: 1,
                attack: 1.2,
                defense: 1,
                culture: 1
            },
            burn_chances: .2,
            golden: "medieval",
            description: 'Special unit: <span class="text-special">Berserker</span>. The Berserker is a longswordsman with +15 attack and +1 speed.'
        },
        zulus: {
            id: "zulus",
            name: "Zulus",
            name2: "Zulu",
            color: "#feeedf",
            color2: "#6f331a",
            vil_names: ["Ulundi", "Umgungundlovu", "Nobamba", "Bulawayo", "KwaDukuza", "Nongoma", "oNdini", "Nodwengu", "Ndonakusuka", "Babanango", "Khangela", "KwaHlomendlini", "Hlobane", "eThekwini", "Mlambongwenya", "Eziqwaqweni", "eMangweni", "Isiphezi", "Masotsheni", "Mtunzini", "Nyakamubi", "Dumazulu", "Hlatikulu", "Mthonjaneni", "Empangeni", "Pongola", "Tugela", "Kwamashu", "Ingwavuma", "Hluhluwe", "Matubatuba", "Mhlahlandlela", "Mthatha", "Maseru", "Lobamba", "Qunu"],
            starting_relations: 52,
            relation_decrease: 1,
            war_fatigue_ratio: 6e8,
            agressivity: 15,
            mult: {
                food: 1,
                gold: 1,
                science: .9,
                recruitment: 1.2,
                prod: 1,
                attack: 1,
                defense: 1,
                culture: 1
            },
            burn_chances: .1,
            golden: "classical",
            description: 'Special unit: <span class="text-special">Impi</span>. The Impi is a cheaper pikeman with +20 attack.'
        }
    }, kg = {
        science1: {
            name: "Science 1",
            desc: '<span class="text-science"><i class="' + ug.science + '"></i> +20%</span>',
            cost: 100
        },
        health1: {
            name: "Health 1",
            desc: '<span class="text-health"><i class="' + ug.health + '"></i> +10%</span>',
            cost: 200
        },
        happiness1: {
            name: "Happiness 1",
            desc: '<span class="text-happiness"><i class="' + ug.happiness + '"></i> +10%</span>',
            cost: 500
        },
        gold1: {
            name: "Gold 1",
            desc: '<span class="text-gold"><i class="' + ug.gold + '"></i> +20%</span>',
            cost: 1e3
        },
        speed1: {
            name: "Speed 1",
            desc: '<i class="' + ug.speed + '"></i>Speed +10%',
            cost: 2e3
        },
        trade1: {
            name: "Trade 1",
            desc: '<span class="text-trade"><i class="' + ug.trade + '"></i> +1</span>',
            cost: 5e3
        },
        tech1: {
            name: "Tech 1",
            desc: "Starts with Language & Dog Domestication",
            cost: 5e3
        },
        science2: {
            name: "Science 2",
            desc: '<span class="text-science"><i class="' + ug.science + '"></i> +20%</span>',
            cost: 1e4
        },
        health2: {
            name: "Health 2",
            desc: '<span class="text-health"><i class="' + ug.health + '"></i> +10%</span>',
            cost: 2e4
        },
        happiness2: {
            name: "Happiness 2",
            desc: '<span class="text-happiness"><i class="' + ug.happiness + '"></i> +10%</span>',
            cost: 5e4
        },
        gold2: {
            name: "Gold 2",
            desc: '<span class="text-gold"><i class="' + ug.gold + '"></i> +20%</span>',
            cost: 1e5
        },
        speed2: {
            name: "Speed 2",
            desc: '<i class="' + ug.speed + '"></i>Speed +10%',
            cost: 2e5
        },
        trade2: {
            name: "Trade 2",
            desc: '<span class="text-trade"><i class="' + ug.trade + '"></i> +1</span>',
            cost: 5e5
        },
        tech2: {
            name: "Tech 2",
            desc: "Starts with Tanning & Pottery",
            cost: 5e5
        }
    }, Sg = [{
        name: "Drylands",
        terrains: [6, 3, 3, 4]
    }, {
        name: "Grasslands",
        terrains: [3, 1, 1, 1, 4, 5]
    }, {
        name: "Forests",
        terrains: [1, 2, 5, 5, 5]
    }, {
        name: "Hills",
        terrains: [1, 5, 2, 2, 2]
    }], Cg = {
        0: {
            id: 0,
            name: "Water",
            color: "#2c4f4a"
        },
        1: {
            id: 1,
            name: "Grassland",
            color: "#6a7535"
        },
        2: {
            id: 2,
            name: "Grassland Hills",
            color: "#6a7535"
        },
        3: {
            id: 3,
            name: "Plains",
            color: "#bda956"
        },
        4: {
            id: 4,
            name: "Plains Hills",
            color: "#bda956"
        },
        5: {
            id: 5,
            name: "Forest",
            color: "#394518"
        },
        6: {
            id: 6,
            name: "Desert",
            color: "#aa9368"
        }
    }, Ig = {
        1: {
            id: 1,
            name: "Farm",
            description: '<span class="text-food"><i class="' + ug.food + '"></i> +1</span> / farmer',
            description2: "Can only be built on Grasslands & Plains (no hills)",
            terrains: [1, 3],
            require: "crop_rotation",
            time: 60,
            cost: 200,
            level: 1
        },
        2: {
            id: 2,
            name: "Mechanized Farm",
            description: '<span class="text-food"><i class="' + ug.food + '"></i> +2</span> / farmer',
            description2: "Can only be built on Grasslands & Plains (no hills)",
            terrains: [1, 3],
            require: "sanitation",
            time: 300,
            cost: 2e5,
            level: 2
        },
        3: {
            id: 3,
            name: "Mine",
            description: '<span class="text-prod"><i class="' + ug.prod + '"></i> +1</span> / builder',
            description2: "Can only be built on Hills",
            terrains: [2, 4],
            require: "bronze_working",
            time: 90,
            cost: 300,
            level: 1
        },
        4: {
            id: 4,
            name: "Industrial Park",
            description: '<span class="text-prod"><i class="' + ug.prod + '"></i> +2</span> / builder',
            description2: "Can only be built on Hills",
            terrains: [2, 4],
            require: "electricity",
            time: 600,
            cost: 3e5,
            level: 2
        },
        5: {
            id: 5,
            name: "Road",
            description: "Increase movements speed & trade route value when 2 cities are connected.<br/>Increase gold if city is connected to the capital.",
            terrains: [],
            require: "wheel",
            time: 60,
            cost: 50,
            road: !0,
            level: 1
        },
        6: {
            id: 6,
            name: "Railroad",
            description: "Increase movements speed & trade route value when 2 cities are connected.<br/>Increase production if city is connected to the capital.",
            terrains: [],
            require: "railroad",
            time: 180,
            cost: 1e5,
            road: !0,
            level: 2
        },
        7: {
            id: 7,
            name: "Trading Post",
            description: '<span class="text-gold"><i class="' + ug.gold + '"></i> +1</span> / merchant',
            description2: "Cannot be built on desert",
            terrains: [1, 2, 3, 4, 5],
            require: "mathematics",
            time: 150,
            cost: 1e4,
            level: 1
        },
        8: {
            id: 8,
            name: "Forest Camp",
            description: '<span class="text-science"><i class="' + ug.science + '"></i> +1</span> / scholar',
            description2: "Can only be built on Forests",
            terrains: [5],
            require: "iron_working",
            time: 180,
            cost: 2e4,
            level: 1
        }
    }; class Tg {
        constructor() {
            this.version = 43, this.aes_key = "wA7Xb*6JZ7$R2p9bP_Nq", this.ut = 100, this.mut = 6e4, this.ait = 5e3, this.max_dt = 43200, this.max_influence_dt = 900, this.max_plague_dt = 300, this.max_influence = 2, this.autosave_delay = 9500, this.toast_delay = 15e3, this.citizens = ag, this.buildings = og, this.sciences = dg, this.barbarian_happiness = .7, this.barbarian_burn_chances = .2, this.terrains = Cg, this.biomes = Sg, this.improvements = Ig, this.upgrades = kg, this.eras = cg, this.policies = hg, this.troops = pg, this.locks = fg, this.difficulties = gg, this.deities = vg, this.powers = _g, this.spells = bg, this.autoassign = wg, this.civilizations = xg, this.trade_route_ratio = .5, this.trade_diplomacy_ratio = .5, this.truce_length = 1800, this.war_min_length = 1800, this.alliance_min_length = 1800, this.promotion_cooldown = 900, this.capital_cooldown = 3600, this.closest_relation_decrease = 1, this.deity_relation_change = 1, this.alliance_w_enemy_relation_change = -1, this.war_w_friend_relation_change = -1, this.alliance_w_friend_relation_change = 1, this.war_w_enemy_relation_change = 1, this.troop_speed_ratio = .05, this.gold_transfer_speed = 1, this.init = {
                map_size: 30,
                barbarians: {
                    nb: 120
                }
            }, this.base_defense = 1, this.pop_defense = .05, this.save = {
                prefix: "cv2sv_"
            }, this.troop_maintenance = .15, this.revoltImmunityDuration = 3e5, this.colony_nb = 20, this.colony_base_gold = .03, this.colony_base_gold_trade = .05, this.colony_base_happiness = .03, this.rightful_owner_timer = 1800, this.rightful_owner_influence_mult = 1.5, this.barbarians_color = "#f9efef", this.barbarians_color2 = "#181c10", this.road_speed_mult = 2, this.rail_speed_mult = 4, this.road_gold_mult = 1.25, this.road_trade_mult = 1.25, this.rail_prod_mult = 1.25, this.rail_trade_mult = 1.5, this.biome_size = 5, this.ruins = 100
        }
    }
    class Eg {
        constructor(l, n) {
            this.cities = [], this.science_queue = [], this.civ_cities = 1, this.id = l++, this.name = n, this.civ_id = "", this.culture = 0, this.faith = 0, this.progress = 0, this.sciences = {}, this.policies = {
                groups: [],
                policies: []
            }, this.orientation = -75, this.powers = {}, this.deity = "", this.appreciation = {}, this.influence = {}, this.promotion_cooldown = {}, this.discovered = []
        }
    }
    class Ag {
        constructor(l, n, e, t, i, s, u = !1) {
            this.buildings = {}, this.building_queue = [], this.troops = {}, this.troops_progress = {}, this.troop_queue = [], this.id = l, this.capital = u, this.name = n, this.x = e, this.y = t, this.food = 0, this.gold = 0, this.bonus = "", this.ownerid = i, this.rightful_ownerid = i, this.citizens = {
                idle: 1,
                farmers: 0,
                builders: 0,
                merchants: 0,
                scientists: 0,
                artists: 0,
                priests: 0
            }, this.autoassign = s, this.autoassign_options = {}, 0 != i && s && (this.autoassign_options.priority = yg.fromArray(["farmers", "builders", "scientists", "merchants", "artists"]))
        }
    }
    class Pg {
        constructor(l) {
            this.conf = l, this.environment = Pr, this.name = "unnamed", this.spellshidden = !1, this.lefthidden = !1
        }
        newGame(l, n, e) {
            this.name = l, this.difficulty = n, this.init(), this.players[0].civ_id = e, this.players[0].cities[0].name = this.conf.civilizations[e].vil_names[0]
        }
        init(l = !1) {
            l ? (this.tmp_powers = {}, this.players.forEach(l => this.tmp_powers[l.id] = Object.assign({}, l.powers))) : (this.autopause = {
                save: !1,
                incoming: !1,
                science: !1,
                building: !1,
                citizen: !1,
                city_captured: !1,
                city_lost: !1,
                city_joined: !1,
                plague: !1
            }, this.notif_pop = !0, this.notif_building = !0, this.max_rpt = 50, this.max_notif = 100, this.nostats = !1, this.darktheme = !1, this.pause = !1, this.version = this.conf.version, this.tuto_done = !1, this.death_modal = 0, this.persistent_locks = [], this.rebirths = 0, this.prestige = 0, this.favors = {}, this.upgrades = [], this.culture_reset = 0, this.lastdaily = 0, this.saveddaily = 0, this.savetime = Date.now(), this.lt = Date.now()), this.connections = {}, this.respawn = [], this.deities = {}, this.emp_autoassign = !1, this.emp_priority = "", this.emp_strong = !1, this.colonies = [], this.cooldowns = {}, this.charging = {}, this.spelltime = {}, this.autocast = void 0, this.plagueNb = 0, this.plagueMaxCities = 0, this.burnNb = 0, this.world_pos = {
                x: 0,
                y: 0
            }, this.dailys = [], this.lastids = {
                city: 1,
                player: 0,
                report: 1
            }, this.locks = [], this.relations = [], this.workers = [], this.archeologists = [], this.scouts = [], this.spies = [], this.attacks = [], this.goldtransfers = [], this.trades = [], this.reports = [], this.notifications = [];
            let n = new Eg(this.lastids.player++, this.name);
            this.players = [n];
            let e = new Ag(this.lastids.city++, this.name + " Village", 0, 0, 0, !1, !0);
            n.cities = [e]
        }
        load(l) {
            for (var n in l) this[n] = l[n];
            this.spelltime = {}, this.connections = {}
        }
    }
    var Dg = e("NFKh"), Mg = e("16wW"); class Og {
        constructor(l, n, e, t, i, s, u) {
            this.name = l, this.date = n, this.era = e, this.deity = t, this.rebirths = i, this.civ = s, this.data = u
        }
    }
    class Ng {
        static constraint(l, n, e) {
            return n || (e = 0, n = 1), l = Math.min(n, l), null != e && (l = Math.max(e, l)), l
        }
    }
    let Rg = (() => {
        class l {
            constructor(l, n) {
                this.conf = l, this.data = n, this.toasts = []
            }
            success(l, n = "", e = "") {
                this.show(l, "bg-success text-light", n, e)
            }
            info(l, n = "", e = "") {
                this.show(l, "bg-info text-light", n, e)
            }
            danger(l, n = "", e = "") {
                this.show(l, "bg-danger text-light", n, e)
            }
            black(l, n = "", e = "") {
                this.show(l, "bg-dark text-light border border-light", n, e)
            }
            warning(l, n = "", e = "") {
                this.show(l, "bg-warning text-light", n, e)
            }
            show(l, n = "", e = "", t = "") {
                let i = {
                    text: l,
                    delay: this.conf.toast_delay,
                    classname: n + (t ? " cursor-pointer" : ""),
                    link: t,
                    icon: e,
                    date: new Date
                };
                this.data.notifications.push(i), this.toasts.unshift(i)
            }
            remove(l) {
                this.toasts = this.toasts.filter(n => n !== l)
            }
        }
        return l.ngInjectableDef = gl({
            factory: function () {
                return new l(ql(Tg), ql(Pg))
            },
            token: l,
            providedIn: "root"
        }), l
    })(), Bg = (() => {
        class l {
            constructor() {
                this.username = "", window.kongregateAPI && window.kongregateAPI.loadAPI(this.apiLoaded.bind(this))
            }
            apiLoaded() {
                this.kong = window.kongregateAPI.getAPI(), this.updateFields(), this.kong.services.addEventListener("login", (function () {
                    this.updateFields()
                }))
            }
            updateFields() {
                this.username = this.kong.services.getUsername(), console.log("User is : " + this.username), "Guest" == this.username && (this.username = "")
            }
            getUsername() {
                return this.username
            }
            buy(l, n) {
                if (this.kong) return this.kong.mtx.purchaseItems(["gift-" + l], n);
                n(!0)
            }
            submmitStat(l, n) {
                this.kong && this.kong.stats.submit(l, n)
            }
        }
        return l.ngInjectableDef = gl({
            factory: function () {
                return new l
            },
            token: l,
            providedIn: "root"
        }), l
    })(), zg = (() => {
        class l {
            constructor(l, n, e, t, i) {
                this.router = l, this.data = n, this.conf = e, this.toastService = t, this.kongService = i, this.icons = ug
            }
            isDailyAllowed() {
                return this.isUnlocked("daily_bonus") ? this.data.saveddaily > 0 ? 1 : Date.now() - this.data.lastdaily >= 828e5 ? 2 : 0 : 0
            }
            isDeitySelectionAllowed() {
                return this.isUnlocked("deity_selection") && !this.player().deity
            }
            player(l = 0) {
                return this.data.players.find(n => n.id == l)
            }
            pop(l = null) {
                return l ? Object.values(l.citizens).reduce((l, n) => l + n) : this.player().cities.map(l => this.pop(l)).reduce((l, n) => l + n)
            }
            isUnlocked(l) {
                return this.data.locks.includes(l) || this.data.persistent_locks.includes(l)
            }
            hasUpgrade(l) {
                return this.data.upgrades.includes(l)
            }
            checkLocks() {
                Object.keys(this.conf.locks).forEach(l => {
                    !this.isUnlocked(l) && this.conf.locks[l].check(this, this.data) && (this.conf.locks[l].persistent ? this.data.persistent_locks.push(l) : this.data.locks.push(l), this.toastService.success("A new feature has been unlocked: " + this.conf.locks[l].name, ug.unlock, this.conf.locks[l].link))
                })
            }
            cultureDiff(l = null, n = null, e = !1) {
                return n || (n = this.player()), l && l.cultureDiff && !e ? l.cultureDiff : l ? (this.cultureProduction(l) * (1 + (this.hasPolicy("philosophy", l.ownerid) && this.hasBuilding(l, "library") ? .05 : 0)) * (1 + (l.capital && this.hasPolicyGroup("traditionalism", l.ownerid) ? .15 : 0)) * (1 + (this.hasPolicyGroup("imperialism", l.ownerid) ? .05 : 0)) * (1 + this.happinessEffect(l)) * (1 + ("culture" == l.bonus ? .2 : 0)) * (1 + this.ouroborosBonus(l.ownerid)) * this.getPlayerRatio(l.ownerid, "culture") + this.tradeRouteGains(l).culture) * (1 + (this.data.spelltime.dionysia ? this.dionysiaBonus(l.ownerid) : 0)) : n.cities.map(l => this.cultureDiff(l)).reduce((l, n) => l + n, 0)
            }
            cultureProduction(l) {
                return l.citizens.artists * this.conf.citizens.artists.culture(this, l.ownerid) + l.citizens.idle * this.conf.citizens.idle.culture(this, l.ownerid) + (this.hasBuilding(l, "monument") ? 1 : 0) + (this.hasBuilding(l, "amphitheatre") ? 2 : 0) + (this.hasBuilding(l, "opera") ? 5 : 0) + (this.hasBuilding(l, "museum") ? 10 : 0) + (this.hasBuilding(l, "palace") ? 2 : 0) + (this.hasBuilding(l, "pyramid") ? 5 : 0) + (this.hasBuilding(l, "mausoleum") ? 5 : 0) + (this.hasBuilding(l, "forbidden") ? 5 : 0) + (this.hasBuilding(l, "sistine") ? 15 : 0) + (this.hasBuilding(l, "versailles") ? 15 : 0) + (this.hasWonder(l.ownerid, "hermitage") ? 5 * (0 | l.relics) : 0) + (this.hasBuilding(l, "castle") && "french" == this.player(l.ownerid).civ_id ? 10 : 0) + (this.hasBuilding(l, "zoo") && "brazilians" == this.player(l.ownerid).civ_id ? 10 : 0)
            }
            cultureCost(l = this.data.players[0]) {
                return Math.floor((25 + Math.pow(6 * (l.policies.policies.length + l.policies.groups.length), 2.8)) * (.3 + .7 * l.cities.length))
            }
            faithDiff(l = null, n = null) {
                return l ? (this.faithProduction(l) * (1 + (l.capital && this.hasPolicy("landed_elite", l.ownerid) ? .5 : 0)) * (1 + (this.hasPolicy("colonialism", l.ownerid) ? .15 : 0)) * (1 + (this.hasPolicy("reformation", l.ownerid) && this.hasBuilding(l, "monastery") ? .1 : 0)) * (1 + (this.hasPolicy("scientific_state", l.ownerid) && this.hasBuilding(l, "uni") ? .1 : 0)) * (1 + (this.hasPolicy("proselytism", l.ownerid) ? this.player(l.ownerid).cities.length / 100 : 0)) * (1 + (this.data.spelltime.bacchanalia ? this.bacchanaliaBonus(l.ownerid) : 0)) * (1 + this.punisherBonus(l.ownerid) * this.plagueNb()) * (1 + this.happinessEffect(l)) * (1 + ("faith" == l.bonus ? .2 : 0)) + this.tradeRouteGains(l).faith) * this.difficulty().faith_mult : (n || (n = this.player()), n.cities.map(l => this.faithDiff(l)).reduce((l, n) => l + n))
            }
            faithProduction(l) {
                return l.citizens.priests * this.conf.citizens.priests.faith(this, l.ownerid) + this.pop(l) * this.orphicBonus(l.ownerid) + (this.hasBuilding(l, "shrine") ? 1 : 0) + (this.hasBuilding(l, "temple") ? 5 : 0) + (this.hasBuilding(l, "monastery") ? 15 : 0) + (this.hasBuilding(l, "pyramid") ? 2 * this.wondersNbInCity(l) : 0) + (this.hasPolicyGroup("piety", l.ownerid) && this.hasBuilding(l, "shrine") ? 2 : 0)
            }
            goldDiff(l = null) {
                return l ? this.goldProduction(l) * (1 + (l.capital && this.hasPolicy("aristocracy", l.ownerid) ? .25 : 0)) * (1 + (this.hasPolicy("meritocracy", l.ownerid) ? .05 : 0)) * (1 + this.happinessEffect(l)) * (1 + this.colonyTotalGoldBonus(l.ownerid)) * (1 + ("gold" == l.bonus ? .2 : 0)) * this.getPlayerRatio(l.ownerid, "gold") * (this.cityConnectedToCapital(l) ? this.conf.road_gold_mult : 1) * this.upgradeGoldMult(l.ownerid) + this.tradeRouteGains(l).gold - this.maintenanceCost(l) : this.player().cities.map(l => this.goldDiff(l)).reduce((l, n) => l + n)
            }
            goldTotal(l = 0) {
                return this.player(l).cities.length ? this.player(l).cities.map(l => l.gold).reduce((l, n) => l + n) : 0
            }
            maintenanceCost(l) {
                return this.troopNb(l) * this.maintenanceUnitaryCost(l)
            }
            maintenanceUnitaryCost(l) {
                return this.conf.troop_maintenance * (this.hasBuilding(l, "armory") ? .5 : 1) * (l.capital && this.hasPolicy("oligarchy", l.ownerid) ? .5 : 1) * (this.hasPolicy("professional_army", l.ownerid) ? .5 : 1) * (1 - this.warpathMaintenanceBonus(l.ownerid))
            }
            goldProduction(l) {
                return l.citizens.merchants * this.conf.citizens.merchants.gold(this, l) + (this.hasBuilding(l, "cop") ? 5 : 0) + (this.hasBuilding(l, "go") ? 15 : 0) + (this.hasBuilding(l, "coa") ? 25 : 0) + (this.hasBuilding(l, "palace") ? 2 : 0) + (this.hasBuilding(l, "colossus") ? 10 : 0) + (this.hasBuilding(l, "castle") && "french" == this.player(l.ownerid).civ_id ? 10 : 0)
            }
            totalTroopNb(l = 0) {
                return this.player(l).cities.map(l => this.troopNb(l, !0)).reduce((l, n) => l + n)
            }
            troopNb(l, n = !0) {
                return Object.values(l.troops).reduce((l, n) => l + n, 0) + (n ? this.data.attacks.filter(n => n.from.x == l.x && n.from.y == l.y).reduce((l, n) => l + Object.values(n.troops).reduce((l, n) => l + n, 0), 0) : 0)
            }
            troopNbById(l, n, e = !0, t = !0) {
                return this.player(l).cities.reduce((l, e) => l + (e.troops[n] || 0), 0) + (t ? this.troopNbInQueuesById(l, n) : 0) + (e ? this.data.attacks.filter(n => n.ownerid == l).reduce((l, e) => l + Object.keys(e.troops).reduce((l, t) => l + (t == n ? e.troops[t] : 0), 0), 0) : 0)
            }
            troopNbInQueuesById(l, n) {
                return this.player(l).cities.reduce((l, e) => l + e.troop_queue.filter(l => l.id == n).reduce((l, n) => l + n.nb, 0), 0)
            }
            maxGold(l) {
                return this.hasBuilding(l, "reserve") ? 1e10 : this.hasBuilding(l, "mint") ? 1e8 : this.hasBuilding(l, "treasury") ? 1e6 : this.hasBuilding(l, "chest") ? 1e3 : 100
            }
            scienceDiff(l = null, n = null) {
                return l ? this.scienceProduction(l) * (1 + (l.capital && this.hasPolicy("wisdom_ancients", l.ownerid) ? .25 : 0)) * (1 + (this.hasPolicy("reformation", l.ownerid) && this.hasBuilding(l, "monastery") ? .1 : 0)) * (1 + (this.hasPolicy("scientific_state", l.ownerid) && this.hasBuilding(l, "uni") ? .1 : 0)) * (1 + this.happinessEffect(l)) * (1 + ("science" == l.bonus ? .2 : 0)) * (1 + this.clairvoyanceBonus(l.ownerid)) * (1 + this.enlightmentBonus(l.ownerid)) * (1 + (this.data.spelltime.bacchanalia ? this.bacchanaliaBonus(l.ownerid) : 0)) * (1 + this.punisherBonus(l.ownerid) * this.plagueNb()) * (1 + this.colonyTotalScienceBonus(l.ownerid)) * (1 + (this.hasBuilding(l, "oxford") ? .5 : 0)) * this.getPlayerRatio(l.ownerid, "science") * this.upgradeScienceMult(l.ownerid) + this.tradeRouteGains(l).science : (n || (n = this.player()), n.cities.map(l => this.scienceDiff(l)).reduce((l, n) => l + n))
            }
            scienceProduction(l) {
                return l.citizens.scientists * this.conf.citizens.scientists.science(this, l) + this.pop(l) * this.sciencePerPop(l.ownerid) + (this.hasBuilding(l, "palace") ? 2 : 0) + (this.hasBuilding(l, "library") ? this.buildingBonus("library", l.ownerid) : 0) + (this.hasBuilding(l, "uni") ? 15 : 0) + (this.hasBuilding(l, "school") ? 25 : 0)
            }
            sciencePerPop(l = 0) {
                return .1 + (this.hasScience("language", this.player(l)) ? .1 : 0) + (this.hasPolicy("code_of_laws", l) ? .1 : 0)
            }
            sciencePercent() {
                return this.player().science_queue.length ? Math.floor(100 * this.player().sciences[this.player().science_queue[0]].progress / this.scienceCost(this.conf.sciences[this.player().science_queue[0]])) : 0
            }
            scienceTime(l) {
                return l || this.player().science_queue.length ? l ? this.scienceCost(this.conf.sciences[l]) / this.scienceDiff() : (this.scienceCost(this.conf.sciences[this.player().science_queue[0]]) - this.player().sciences[this.player().science_queue[0]].progress) / this.scienceDiff() : 0
            }
            discoverScience(l = 0) {
                let n = this.player(l),
                    e = n.sciences[n.science_queue[0]].progress - this.scienceCost(this.conf.sciences[n.science_queue[0]], l);
                for (; e > 0 && n.science_queue.length;) {
                    if ("future" == n.science_queue[0] ? (n.sciences[n.science_queue[0]].progress = 0, n.progress += 10, this.changeOrientationFortech(n, 10), e = 0) : n.sciences[n.science_queue[0]].done = !0, 0 == n.id) {
                        if (this.toastService.success("A new discovery : " + this.conf.sciences[n.science_queue[0]].label, ug.science, "/game/science"), this.updateStats(), this.checkLocks(), "astronomy" == n.science_queue[0]) {
                            let l = this.data.players.filter(l => this.hasScience("astronomy", l)).length;
                            this.data.players.forEach(n => {
                                l < 2 && this.isScienceAvailable("astronomy", n) && (n.sciences.astronomy = {
                                    progress: 0,
                                    done: !0
                                }, l++)
                            })
                        }
                        this.currentScienceRank() >= 7 && !this.data.last_plague && (this.data.last_plague = .01)
                    } else n.id > 1 && ("religion" != n.science_queue[0] || n.deity || (n.deity = yg.fromArray(Object.keys(this.conf.deities)), this.data.deities[n.id] = n.deity));
                    "exploration" == n.science_queue[0] && (this.completeCheckNewCiv(l), n.cities.forEach(l => {
                        this.viewRange(l.x, l.y, 1).forEach(l => {
                            this.setTile(n, l[0], l[1])
                        })
                    })), "future" != n.science_queue[0] && (n.science_queue.shift(), n.science_queue.length && (n.sciences[n.science_queue[0]] || (n.sciences[n.science_queue[0]] = {
                        progress: 0,
                        done: !1
                    }), n.sciences[n.science_queue[0]].progress = e, e -= this.scienceCost(this.conf.sciences[n.science_queue[0]], l)))
                }
            }
            hasPolicyGroup(l, n = 0) {
                return -1 != this.player(n).policies.groups.indexOf(l)
            }
            hasPolicy(l, n = 0) {
                return -1 != this.player(n).policies.policies.indexOf(l)
            }
            hasScience(l, n = null) {
                return n || (n = this.player()), !(!n.sciences[l] || !n.sciences[l].done)
            }
            hasScienceRank(l) {
                return null != Object.keys(this.player().sciences).find(n => this.conf.sciences[n].rank >= l && this.player().sciences[n].done)
            }
            currentScienceRank(l = 0) {
                return Object.keys(this.player(l).sciences).filter(n => this.player(l).sciences[n].done).map(l => this.conf.sciences[l].rank).reduce((l, n) => Math.max(l, n), 0)
            }
            era(l = 0, n = -1) {
                return -1 == n && (n = this.currentScienceRank(l)), Object.values(this.conf.eras).find(l => l.rank_start <= n && l.rank_end >= n).id
            }
            isScienceAvailable(l, n = null) {
                return n || (n = this.player()), -1 == this.conf.sciences[l].require.map(l => this.hasScience(l, n)).indexOf(!1)
            }
            foodDiff(l, n = null) {
                return l ? this.foodProduction(l) * (1 + this.happinessEffect(l)) * (1 + ("food" == l.bonus ? .2 : 0)) * (1 + this.serpentBonus(l)) * (1 + (this.data.spelltime.abundance ? this.abundanceBonus(l.ownerid) : 0)) * (1 + this.thirdeyeBonus(l)) * (1 + (this.hasPolicy("monopoly", l.ownerid) && this.tradeRoutes(l).out.length ? .1 : 0)) * (1 + this.prestigeBonus(l.ownerid)) * this.getPlayerRatio(l.ownerid, "food") - this.pop(l) : (n || (n = this.player()), n.cities.map(l => this.foodDiff(l)).reduce((l, n) => l + n))
            }
            foodProduction(l) {
                return 1 + (l.citizens.idle * this.conf.citizens.idle.food(this, l) + l.citizens.farmers * this.conf.citizens.farmers.food(this, l) + (this.hasBuilding(l, "palace") ? 2 : 0) + (this.hasBuilding(l, "granary") ? this.buildingBonus("granary", l.ownerid) : 0) + (this.hasBuilding(l, "port") ? 5 : 0) + (this.hasBuilding(l, "mill") ? 10 : 0) + (this.hasBuilding(l, "hanging_gardens") ? 10 : 0))
            }
            foodRequired(l) {
                return 52 + 6 * Math.pow(2, this.pop(l) + 2)
            }
            citizenTime(l) {
                return (this.foodRequired(l) - l.food) / this.foodDiff(l)
            }
            prodDiff(l) {
                return this.prodProduction(l) * (1 + (this.hasPolicy("administration", l.ownerid) ? .05 : 0)) * (1 + this.happinessEffect(l)) * (1 + ("prod" == l.bonus ? .2 : 0)) * (1 + this.eternityBonus(l.ownerid)) * (1 + this.thirdeyeBonus(l)) * (1 + this.prestigeBonus(l.ownerid)) * (1 + (this.hasWonder(l.ownerid, "ruhr") && l.building_queue.length && "progress" == l.building_queue[0] ? .25 : 0)) * (1 + (this.hasPolicy("liberalism", l.ownerid) && l.building_queue.length && "progress" == l.building_queue[0] ? .25 : 0)) * this.getPlayerRatio(l.ownerid, "prod") * (2 == this.cityConnectedToCapital(l) ? this.conf.rail_prod_mult : 1)
            }
            prodProduction(l) {
                return l.citizens.builders * this.conf.citizens.builders.prod(this, l) + (this.hasBuilding(l, "workshop") ? this.buildingBonus("workshop", l.ownerid) : 0) + (this.hasBuilding(l, "furnace") ? 15 : 0) + (this.hasBuilding(l, "ironworks") ? this.buildingBonus("ironworks", l.ownerid) : 0) + (this.hasBuilding(l, "factory") ? 50 : 0) + (this.hasBuilding(l, "hydro") ? 50 : 0) + (this.hasBuilding(l, "palace") ? 2 : 0)
            }
            buildingBonus(l, n) {
                return this.conf.buildings[l].bonus(this.player(n), this)
            }
            health(l) {
                return l ? Ng.constraint(1 - .05 * this.pop(l) + l.citizens.scientists * this.conf.citizens.scientists.health(this, l.ownerid) - (l.plague && l.plague > 0 ? .3 : 0) + (this.hasScience("pottery") ? .05 : 0) + (this.hasBuilding(l, "well") ? .05 : 0) + (this.hasBuilding(l, "aqueduct") ? .1 : 0) + (this.hasBuilding(l, "hospital") ? this.hasPolicy("procedures", l.ownerid) ? .2 : .15 : 0) + (this.hasBuilding(l, "dispensary") ? .2 : 0) + (this.hasBuilding(l, "quarantine") ? .1 : 0) + (this.hasPolicy("organized_religion", l.ownerid) && this.hasBuilding(l, "temple") ? .05 : 0) + (this.hasPolicy("isolationism", l.ownerid) && l.capital ? .15 : 0) + (this.hasPolicy("nih", l.ownerid) ? .05 : 0) + this.upgradeHealth(l.ownerid)) : this.player().cities.map(l => this.health(l)).reduce((l, n) => l + n) / this.player().cities.length
            }
            healthKillChance(l) {
                return Ng.constraint((1 - this.underworldBonus(l.ownerid)) * (1 - (this.hasPolicy("red_cross", l.ownerid) ? .5 : 0)) * (Math.exp(30 * (1 - this.health(l))) - 1) / 1e14)
            }
            revoltRisks(l) {
                let n = this.happiness(l);
                if (n >= (0 == l.ownerid ? .2 : .25)) return null;
                if (l.ownerchange && Date.now() - l.ownerchange < this.conf.revoltImmunityDuration) return null;
                let e = Ng.constraint((Math.exp(30 * (1 - n)) - 1) / 4e14);
                this.hasBuilding(l, "police") && (e *= .5);
                let t = this.mostInfluencialPlayer(l);
                return yg.roll(e * (1 + 10 * t.influence)) ? t.player : null
            }
            happiness(l, n = !1) {
                if (l && 1 == l.ownerid) return this.conf.barbarian_happiness;
                if (l && l.happiness && !n) return l.happiness;
                if (l) {
                    let n = Ng.constraint(1 - this.popNbHappinessEffect(l) + l.citizens.artists * this.conf.citizens.artists.happiness(this, l.ownerid) + l.citizens.idle * this.conf.citizens.idle.happiness(this, l.ownerid) - this.citiesNbHappinessEffect(l.ownerid) - this.happinessDistance(l) + this.colonyTotalHappinessBonus(l.ownerid) + (this.hasPolicy("patriotism", l.ownerid) ? .05 : 0) + (this.hasBuilding(l, "gardens") ? this.buildingBonus("gardens", l.ownerid) : 0) + (this.hasBuilding(l, "theatre") ? .1 : 0) + (this.hasBuilding(l, "circus") ? .15 : 0) + (this.hasBuilding(l, "zoo") ? .15 : 0) + (this.hasBuilding(l, "hanging_gardens") ? .1 : 0) + (this.hasWonder(l.ownerid, "versailles") ? .1 : 0) + (this.hasPolicy("theocracy", l.ownerid) && this.hasBuilding(l, "monastery") ? .05 : 0) + (this.hasPolicy("secularism", l.ownerid) && this.hasBuilding(l, "shrine") ? .05 : 0) + (this.hasPolicy("despotism", l.ownerid) && this.hasBuilding(l, "barracks") ? .05 : 0) + (this.hasPolicy("police_state", l.ownerid) && this.hasBuilding(l, "courthouse") ? .1 : 0) + (this.hasPolicy("monopoly", l.ownerid) && this.tradeRoutes(l).out.length ? .05 : 0) + this.newfireBonus(l.ownerid) + this.blissBonus(l.ownerid) + this.eyeBonus(l.ownerid) + this.valhallaBonus(l) - this.influenceEffectTotal(l) + this.upgradeHappiness(l.ownerid));
                    return isNaN(n) ? .2 : n
                }
                return this.player().cities.map(l => this.happiness(l)).reduce((l, n) => l + n) / this.player().cities.length
            }
            influenceEffectTotal(l) {
                return this.data.players.filter(n => 1 != n.id && n.id != l.ownerid).reduce((n, e) => n + this.influenceEffectFromPlayer(l, e), 0)
            }
            influenceEffectFromPlayer(l, n) {
                if (1 == n.id) return 0;
                if (!this.haveRelation(l.ownerid, n.id)) return 0;
                let e = Math.max(-2, this.influence(l.ownerid, n.id));
                if (e >= 0) return 0;
                let t = this.closestCity(l.x, l.y, n.id);
                if (t) {
                    let i = this.cityDistance(l.id, t.id) + .5,
                        s = 2;
                    return l.capital && (s = 1.6), Math.floor(Math.pow(-100 * e, s) / (100 * Math.pow(i, .5))) / 100 * (l.rightful_ownerid == n.id ? this.conf.rightful_owner_influence_mult : 1) || 0
                }
                return 0
            }
            mostInfluencialPlayer(l) {
                let n = this.player(1),
                    e = 0;
                return this.data.players.filter(n => 1 != n.id && n.id != l.ownerid).forEach(t => {
                    let i = this.influenceEffectFromPlayer(l, t);
                    i > e && (n = t, e = i)
                }), {
                    player: n,
                    influence: e
                }
            }
            popNbHappinessEffect(l) {
                let n = this.pop(l);
                return Math.floor(5 * Math.pow(n, .9)) / 100
            }
            citiesNbHappinessEffect(l) {
                let n = this.player(l).cities.length;
                return Math.floor(5 * Math.pow(n, .8)) / 100
            }
            happinessDistance(l) {
                return .025 * this.cityDistance(l.id) * (this.hasBuilding(l, "tribunal") ? .5 : 1) * (this.hasBuilding(l, "courthouse") ? .5 : 1) * (this.hasWonder(l.ownerid, "pantheon") ? .5 : 1)
            }
            happinessEffect(l) {
                return Ng.constraint(1 - Math.exp(1 * (.7 - this.happiness(l))), .25, -1)
            }
            cityForWonder(l) {
                return this.allCities().find(n => this.hasBuilding(n, l))
            }
            isWonderDone(l) {
                return this.allCities().some(n => this.hasBuilding(n, l))
            }
            wondersNbTotal() {
                let l = 0;
                return Object.values(this.conf.buildings).filter(l => l.wonder).forEach(n => {
                    this.isWonderDone(n.id) && l++
                }), l
            }
            wondersNb(l = 0) {
                let n = 0;
                return Object.values(this.conf.buildings).filter(l => l.wonder).forEach(e => {
                    this.hasWonder(l, e.id) && n++
                }), n
            }
            wondersNbInCity(l) {
                let n = 0;
                return Object.values(this.conf.buildings).filter(l => l.wonder).forEach(e => {
                    this.hasBuilding(l, e.id) && n++
                }), n
            }
            hasWonder(l, n) {
                return !!this.player(l) && this.player(l).cities.some(l => this.hasBuilding(l, n))
            }
            isBuildingWonder(l, n) {
                return this.player(l).cities.some(l => l.building_queue.includes(n))
            }
            hasBuilding(l, n) {
                return l.buildings[n] && l.buildings[n].done
            }
            buildingPercent(l) {
                return l.building_queue.length ? Math.floor(100 * l.buildings[l.building_queue[0]].progress / this.buildingProdCost(this.conf.buildings[l.building_queue[0]], l)) : 0
            }
            buildingTime(l, n = "") {
                if (!n) {
                    if (!l.building_queue.length) return 0;
                    n = l.building_queue[0]
                }
                return (this.buildingProdCost(this.conf.buildings[n], l) - (l.buildings[n] ? l.buildings[n].progress : 0)) / this.prodDiff(l)
            }
            troopTimeToGoldCost(l, n, e = !0) {
                return this.troopTime(l, n, e) * this.conf.troops[n].gold(this, l.ownerid) / 500 * 50
            }
            isUpgradable(l, n = 0) {
                return l.upgradable && l.obsolete && this.hasScience(l.obsolete, this.player(n))
            }
            canUpgrade(l, n, e) {
                return this.isUpgradable(l, e.ownerid) && this.upgradeCost(l, n, e) < e.gold
            }
            upgradeCost(l, n, e) {
                if (!l.upgradable) return 0;
                let t = this.conf.troops[l.upgradable];
                return t ? n * (t.gold(this, e.ownerid) - l.gold(this, e.ownerid) + (this.troopTimeToGoldCost(e, t.id, !1) - this.troopTimeToGoldCost(e, l.id, !1))) : 0
            }
            upgrade(l, n) {
                let e = n.troops[l.id];
                this.canUpgrade(l, e, n) && (n.troops[l.upgradable] || (n.troops[l.upgradable] = 0), n.troops[l.upgradable] += e, delete n.troops[l.id], n.gold -= this.upgradeCost(l, e, n))
            }
            buildingProdToGoldCost(l, n) {
                let e = 50;
                return "progress" == n && (e = 500), e * (this.buildingProdCost(this.conf.buildings[n], l) - (l.buildings[n] ? l.buildings[n].progress : 0))
            }
            buyBuilding(l, n) {
                return !(l.gold < this.buildingProdToGoldCost(l, n) || (l.gold -= this.buildingProdToGoldCost(l, n), "progress" == n ? (l.buildings[n].progress = 0, l.building_queue.length > 1 && l.building_queue.shift()) : (l.building_queue.splice(l.building_queue.indexOf(n), 1), l.buildings[n] = {
                    progress: 0,
                    done: !0
                }), 0))
            }
            troopTime(l, n = "", e = !0) {
                if (!n) {
                    if (!l.troop_queue.length) return 0;
                    n = l.troop_queue[0].id
                }
                return (this.conf.troops[n].time(this, l.ownerid) - (e && l.troops_progress[n] ? l.troops_progress[n] : 0)) / this.recruitmentSpeed(l)
            }
            isSpellAvailable(l) {
                return !(3 == l.level && this.player().orientation > -75 || 2 == l.level && this.player().orientation > -50 || 1 == l.level && this.player().orientation > -25 || this.data.cooldowns[l.id] || this.isSpellLocked(l))
            }
            isSpellLocked(l) {
                return l.lock && !this.isUnlocked(l.lock)
            }
            useSpell(l, n) {
                if (this.isSpellAvailable(l)) {
                    if (l.charging) this.data.charging[l.id] ? this.data.charging[l.id]++ : this.data.charging[l.id] = 1;
                    else if (l.time) this.data.spelltime[l.id] = l.time;
                    else if (!l.run(this, n)) return;
                    this.data.cooldowns[l.id] = l.cooldown * this.coolDownMult(), this.changeOrientation(this.player(), -1), this.checkLocks()
                }
            }
            viewRange(l, n, e) {
                let t = [];
                for (let i = -e; i <= e; i++)
                    for (let s = -e; s <= e; s++) t.push([l + i, n + s]);
                return t
            }
            cityCache() {
                this.data.citiespos = {}, this.data.citiesids = {}, this.data.players.forEach((l, n) => {
                    l.cities.forEach((l, e) => {
                        this.data.citiespos[l.x + "_" + l.y] = [n, e], this.data.citiesids[l.id] = [n, e]
                    })
                })
            }
            city(l, n) {
                if (void 0 === n) {
                    if (!this.data.citiesids) return this.allCities().find(n => n.id == l); {
                        let n = this.data.citiesids[l];
                        if (n) {
                            let l = this.data.players[n[0]];
                            if (l) return l.cities[n[1]]
                        }
                    }
                    return null
                }
                if (this.data.citiespos) {
                    let e = this.data.citiespos[l + "_" + n];
                    if (e) {
                        let l = this.data.players[e[0]];
                        if (l) return l.cities[e[1]]
                    }
                } else
                    for (let e of this.data.players)
                        for (let t of e.cities)
                            if (t.x == l && t.y == n) return t;
                return null
            }
            capital(l = 0) {
                return this.player(l).cities.find(l => l.capital)
            }
            allCities() {
                return [].concat(...this.data.players.map(l => l.cities))
            }
            closestCity(l, n, e = 0, t) {
                let i = 99999999999,
                    s = void 0;
                return (t ? this.allCities().filter(l => l.ownerid != e) : this.player(e).cities).forEach(e => {
                    let t = this.distance(l, n, e.x, e.y);
                    t < i && 0 != t && (i = t, s = e)
                }), s
            }
            citiesInRange(l, n) {
                return this.allCities().filter(e => e.id != l.id && this.cityDistance(l.id, e.id) <= n)
            }
            hasUndiscovered(l) {
                return this.player(l).discovered.length < this.arrayIndexOf(this.conf.init.map_size + 1, this.conf.init.map_size + 1) || this.player(l).discovered.some(l => !l)
            }
            closestUndiscovered(l, n, e) {
                let t = 1;
                for (; t < 2 * this.conf.init.map_size;) {
                    let i = yg.fromArray([-1, 1]),
                        s = yg.fromArray([-1, 1]);
                    for (let u = n - i * t; u <= n + t && u >= n - t; u += i)
                        for (let n = e - s * t; n <= e + t && n >= e - t; n += s)
                            if (u >= -this.conf.init.map_size && u <= this.conf.init.map_size && n >= -this.conf.init.map_size && n <= this.conf.init.map_size && !this.isDiscovered(l, u, n)) return {
                                x: u,
                                y: n
                            };
                    t++
                }
            }
            closestUndiscoveredWithRange(l, n, e, t, i, s, u = !0) {
                let r = 1;
                for (; r < 2 * this.conf.init.map_size;) {
                    let a = yg.fromArray([-1, 1]),
                        o = yg.fromArray([-1, 1]);
                    for (let c = n - a * r; c <= n + r && c >= n - r; c += a)
                        for (let n = e - o * r; n <= e + r && n >= e - r; n += o)
                            if (c >= -this.conf.init.map_size && c <= this.conf.init.map_size && n >= -this.conf.init.map_size && n <= this.conf.init.map_size && this.distance(c, n, t, i) <= s && !this.isDiscovered(l, c, n) && (!u || !this.data.scouts.some(e => e.ownerid == l && e.to.x == c && e.to.y == n))) return {
                                x: c,
                                y: n
                            };
                    r++
                }
            }
            distance(l, n, e, t) {
                let i = e - l,
                    s = t - n;
                return Math.sqrt(i * i + s * s)
            }
            cityDistance(l, n) {
                let e = this.city(l);
                if (e) {
                    let l = n ? this.city(n) : this.player(e.ownerid).cities.find(l => l.capital);
                    return l ? this.distance(e.x, e.y, l.x, l.y) : 0
                }
                return 10
            }
            movPos(l) {
                return l.progress <= l.dist ? {
                    x: Math.floor(.5 + l.from.x + (l.to.x - l.from.x) * l.progress / l.dist),
                    y: Math.floor(.5 + l.from.y + (l.to.y - l.from.y) * l.progress / l.dist)
                } : l.progress <= 2 * l.dist ? {
                    x: Math.floor(.5 + l.from.x + (l.to.x - l.from.x) * (2 - l.progress / l.dist)),
                    y: Math.floor(.5 + l.from.y + (l.to.y - l.from.y) * (2 - l.progress / l.dist))
                } : {
                    x: l.to.x,
                    y: l.to.y
                }
            }
            speedNoCity(l, n, e, t) {
                let i = this.connected(n, e.x, e.y, t.x, t.y),
                    s = 1;
                return 2 == i ? s = this.conf.rail_speed_mult : 1 == i && (s = this.conf.road_speed_mult), ("gold" == l ? this.conf.gold_transfer_speed : this.conf.troops[l].speed(this.player(n))) * s * (1 + this.hasteBonus(n)) * this.upgradeSpeedMult(n)
            }
            speed(l, n, e, t) {
                let i = this.cityConnected(e, t),
                    s = 1;
                return 2 == i ? s = this.conf.rail_speed_mult : 1 == i && (s = this.conf.road_speed_mult), ("gold" == l ? this.conf.gold_transfer_speed : this.conf.troops[l].speed(this.player(n))) * s * (1 + this.hasteBonus(n)) * this.upgradeSpeedMult(n)
            }
            attackSpeed(l, n, e, t) {
                return Object.keys(l).filter(n => 0 != l[n]).reduce((l, i) => Math.min(l, this.speed(i, n, e, t)), 999)
            }
            defense(l) {
                return this.conf.base_defense + this.pop(l) * this.conf.pop_defense + (l.capital && this.hasPolicy("city_state", l.ownerid) ? .2 : 0) + this.stoneBonus(l.ownerid) + (this.hasBuilding(l, "walls") ? .5 : 0) + (this.hasBuilding(l, "castle") ? .5 : 0) + (this.hasBuilding(l, "fortress") ? .5 : 0) + (this.hasBuilding(l, "temple_artemis") ? .5 : 0) + (this.hasWonder(l.ownerid, "great_wall") ? .5 : 0)
            }
            getPlayerRatio(l, n) {
                if (0 == l) return 1;
                if (1 == l) return "science" == n ? this.difficulty().barbarian_science_mult : "gold" == n || "prod" == n ? this.difficulty().barbarian_gold_prod_mult : "attack" == n || "defense" == n ? this.difficulty().barbarian_battle_mult : 1; {
                    let e = this.conf.civilizations[this.player(l).civ_id];
                    return "recruitment" == n ? this.difficulty().ai_recruit_bonus * e.mult[n] : "attack" == n || "defense" == n ? e.mult[n] : this.era(l) == e.golden ? this.difficulty().ai_golden_bonus * e.mult[n] : this.difficulty().ai_bonus * e.mult[n]
                }
            }
            attackMult(l) {
                return 1 * (1 == l && this.hasPolicy("code_of_honor", l) ? 1.15 : 1) * (this.data.spelltime.berserker ? 1 + this.berserkerAttackBonus(l) : 1) * (this.hasWonder(l, "statue_zeus") ? 1.15 : 1) * (this.hasWonder(l, "brandenburg") ? 1.15 : 1) * this.getPlayerRatio(l, "attack")
            }
            fight(l, n, e, t) {
                let i = this.player(t),
                    s = this.player(t),
                    u = this.attackMult(t),
                    r = 1 * (1 == e.ownerid && this.hasPolicy("code_of_honor", t) ? 1.15 : 1) * this.getPlayerRatio(e.ownerid, "defense"),
                    a = this.defense(e); - 1 != e.id && (a *= 1 - this.influenceEffectFromPlayer(e, this.player(t)));
                let [o, c] = [0, 0], d = Object.assign({}, l), h = Object.assign({}, n), p = !1, f = !1, g = 0, m = 0, y = 0, v = 0;
                if (Object.keys(d).forEach(l => {
                        this.conf.troops[l].siege && (g += d[l] * this.conf.troops[l].attack(i)), m += d[l] * this.conf.troops[l].defense(i)
                    }), g) {
                    Object.keys(h).forEach(l => {
                        this.conf.troops[l].ranged(s) && (y += h[l] * this.conf.troops[l].attack(s)), v += h[l] * this.conf.troops[l].defense(s)
                    }), g *= u, m *= u, y *= 0, v *= r, v *= a;
                    let [l, n] = this.getLost(g, m, y, v);
                    Object.keys(d).forEach(n => {
                        d[n] = Math.floor((1 - l) * d[n])
                    }), Object.keys(h).forEach(l => {
                        h[l] = Math.floor((1 - n) * h[l])
                    });
                    let i = .1 * (this.hasPolicy("discipline", t) ? .75 : 1);
                    g / v > 3 * i ? (this.hasBuilding(e, "fortress") && (p = !0), this.hasBuilding(e, "castle") && (p = !0), this.hasBuilding(e, "walls") && (f = !0)) : g / v > 2 * i ? (this.hasBuilding(e, "fortress") && (p = !0), this.hasBuilding(e, "castle") ? p = !0 : this.hasBuilding(e, "walls") && (f = !0)) : g / v > i && (this.hasBuilding(e, "fortress") ? p = !0 : this.hasBuilding(e, "castle") ? p = !0 : this.hasBuilding(e, "walls") && (f = !0)), p && (e.buildings.castle = {
                        done: !1,
                        progress: 0
                    }), f && (e.buildings.walls = {
                        done: !1,
                        progress: 0
                    }), a *= 1 - this.influenceEffectFromPlayer(e, this.player(t))
                }
                g = 0, m = 0, y = 0, v = 0, Object.keys(d).forEach(l => {
                    this.conf.troops[l].ranged(i) && (g += d[l] * this.conf.troops[l].attack(i)), m += d[l] * this.conf.troops[l].defense(i)
                }), Object.keys(h).forEach(l => {
                    this.conf.troops[l].ranged(s) && !this.conf.troops[l].siege && (y += h[l] * this.conf.troops[l].attack(s)), v += h[l] * this.conf.troops[l].defense(s)
                }), g *= u, m *= u, y *= r, v *= r, v *= a, [o, c] = this.getLost(g, m, y, v), Object.keys(d).forEach(l => {
                    d[l] = Math.floor((1 - o) * d[l])
                }), Object.keys(h).forEach(l => {
                    h[l] = Math.floor((1 - c) * h[l])
                }), g = 0, m = 0, y = 0, v = 0, Object.keys(d).forEach(l => {
                    d[l] = Math.floor((1 - o) * d[l]), this.conf.troops[l].ranged(i) || this.conf.troops[l].siege || (g += d[l] * this.conf.troops[l].attack(i)), m += d[l] * this.conf.troops[l].defense(i)
                }), Object.keys(h).forEach(l => {
                    h[l] = Math.floor((1 - c) * h[l]), this.conf.troops[l].ranged(s) || this.conf.troops[l].siege || (y += h[l] * this.conf.troops[l].attack(s)), v += h[l] * this.conf.troops[l].defense(s)
                }), g *= u, m *= u, y *= r, v *= r, v *= a, [o, c] = this.getLost(g, m, y, v), Object.keys(d).forEach(l => {
                    d[l] = Math.floor((1 - o) * d[l])
                }), Object.keys(h).forEach(l => {
                    h[l] = Math.floor((1 - c) * h[l])
                });
                let b = Object.values(d).reduce((l, n) => l + n, 0);
                return l.governor && b && (d.governor = l.governor), l.slaver && b && (d.slaver = l.slaver), {
                    troops: [d, h],
                    walls: f,
                    castle: p,
                    fortress: !1
                }
            }
            getLost(l, n, e, t) {
                let i = Ng.constraint(.5 * Math.log10(10 * (l ? t ? l / t : 1e3 : 0)));
                return [Ng.constraint(.5 * Math.log10(10 * (t ? n ? e / n : 1e3 : 0))), i]
            }
            spy(l) {
                let n = l.spies / ((this.city(l.to.x, l.to.y).troops.spies || 0) + 1),
                    [e, t, i, s, u, r] = [!1, !1, !1, !1, 0, !1];
                return n >= 3 ? (e = !0, s = !0, t = !0, i = !0, r = !0, u = Math.max(0, Math.floor(100 * Math.log10(n) * this.scienceDiff(this.city(l.to.x, l.to.y))))) : n >= 2 ? (e = !0, s = !0, t = !0, i = !0, r = !0) : n >= 1.5 ? (e = !0, s = !0, t = !0, r = !0) : n >= 1 && (e = !0), {
                    survived: e,
                    buildings: t,
                    troops: i,
                    gold: s,
                    science: u,
                    cityDef: r
                }
            }
            minDistFromCity(l) {
                let n = 999;
                return this.player().cities.forEach(e => {
                    let t = this.distance(e.x, e.y, l.x, l.y);
                    t < n && (n = t)
                }), n
            }
            killCitizen(l) {
                l.citizens.idle ? l.citizens.idle-- : Object.keys(l.citizens).reverse().some(n => {
                    if (l.citizens[n]) return l.citizens[n]--, !0
                })
            }
            killTroop(l) {
                if (!Object.keys(l.troops).length) return;
                let n = yg.get(0, Object.keys(l.troops).length - 1),
                    e = Object.keys(l.troops)[n];
                return "governor" == e && this.troopNb(l, !1) > l.troops.governor ? this.killTroop(l) : (l.troops[e]--, l.troops[e] <= 0 && delete l.troops[e], e)
            }
            govCost(l, n = 0) {
                let e = this.player(l).cities.length + this.troopNbById(l, "governor") + n;
                return Math.floor(500 + 50 * Math.pow(e, 3.15)) * (this.hasPolicy("collective_rules", l) ? .75 : 1)
            }
            powerCost(l, n) {
                let e = this.player(l).powers[n] || 0;
                return Math.pow(2, e)
            }
            reincarnation(l = !1) {
                let n = this.data.dailys.length,
                    e = this.favorGain(),
                    t = this.prestigeGain(),
                    i = this.player().orientation > 0,
                    s = Object.assign({}, this.data.deities);
                this.data.init(!0), this.data.pause = !0, this.initGame(), l || (this.data.rebirths++, i ? this.data.prestige += t : this.data.players.filter(l => 1 != l.id).forEach(l => {
                    let n = s[l.id],
                        t = 1;
                    0 != l.id && (t = yg.get(70, 100) / 100), this.data.favors[l.id] || (this.data.favors[l.id] = {}), n ? (this.data.favors[l.id][n] = Math.floor(t * e[0]) + (this.data.favors[l.id][n] || 0), this.data.favors[l.id][""] = Math.floor(t * e[1]) + (this.data.favors[l.id][""] || 0)) : this.data.favors[l.id][""] = Math.floor(t * e[0] + e[1]) + (this.data.favors[l.id][""] || 0), l.id > 1 && this.allocatePowers(l)
                })), this.data.saveddaily || (this.data.saveddaily = 0), this.data.saveddaily += n, this.checkLocks(), this.toastService.info("You have been reincarnated", ug.favor, "/game/help#reincarnation"), this.data.death_modal = i ? 2 : 1, this.updateStats(), this.router.navigate(["/game/city"])
            }
            chooseCiv(l, n = !0) {
                this.player().civ_id = l, n && (this.player().cities[0].name = this.conf.civilizations[l].vil_names[0], this.initCivs(l))
            }
            allocatePowers(l) {
                let n = 0;
                for (; n < 50;) {
                    let e = yg.fromArray(Object.keys(this.conf.powers).filter(l => "sequencer" != l && "orphic" != l));
                    this.powerAvailable(l.id, e) ? (this.addPower(l.id, e), n = 0) : n++
                }
            }
            powerAvailable(l, n) {
                let e = !0;
                return Object.keys(this.conf.powers[n].cost).forEach(t => {
                    this.powerCost(l, n) * this.conf.powers[n].cost[t] > (this.data.favors[l][t] || 0) && (e = !1)
                }), e
            }
            addPower(l, n) {
                this.powerAvailable(l, n) && (Object.keys(this.conf.powers[n].cost).forEach(e => {
                    this.data.favors[l][e] -= this.powerCost(l, n) * this.conf.powers[n].cost[e]
                }), this.player(l).powers[n] = 1 + (this.player(l).powers[n] || 0), 0 == l && this.updateStats())
            }
            favorGain() {
                let l = Math.pow(this.player().faith, .7) / 600;
                return [Math.floor(.8 * l), Math.ceil(.2 * l)]
            }
            prestigeGain() {
                return Math.floor(Math.pow(this.player().progress, .8) / 5)
            }
            prestigeBonus(l) {
                return !this.data.prestige || l > 0 ? 0 : this.data.prestige / 100
            }
            nextPoint() {
                let l = this.favorGain();
                return Math.min(1 + Math.floor(Math.pow(600 * (1 + l[0]) / .8, 1 / .7)), 1 + Math.floor(Math.pow(600 * (1 + l[1]) / .2, 1 / .7)))
            }
            nextPrestige() {
                let l = this.prestigeGain();
                return 1 + Math.floor(Math.pow(10 * (1 + l), 1 / .7))
            }
            arrayIndexOf(l, n) {
                return l + this.conf.init.map_size + 1 + (n + this.conf.init.map_size + 1) * (2 * (this.conf.init.map_size + 1) + 1)
            }
            indexToCoords(l) {
                let n = 2 * (this.conf.init.map_size + 1) + 1,
                    e = Math.floor(l / n);
                return [l - e * n - (this.conf.init.map_size + 1), e -= this.conf.init.map_size + 1]
            }
            setTile(l, n, e, t = !0) {
                1 != l.id && (l.discovered[this.arrayIndexOf(n, e)] = t ? 1 : 0)
            }
            getTile(l, n, e) {
                if (1 == l.id) return 0;
                let t = this.arrayIndexOf(n, e);
                return l.discovered.length > t ? l.discovered[t] : 0
            }
            setTerrain(l, n, e) {
                l < -this.conf.init.map_size || l > this.conf.init.map_size || n < -this.conf.init.map_size || n > this.conf.init.map_size || (this.data.map[this.arrayIndexOf(l, n)] = e)
            }
            getTerrain(l, n) {
                let e = this.arrayIndexOf(l, n);
                return this.data.map[e]
            }
            setImprovement(l, n, e) {
                this.data.improvements[this.arrayIndexOf(l, n)] = e
            }
            getImprovement(l, n) {
                let e = this.arrayIndexOf(l, n);
                return this.data.improvements.length > e ? this.data.improvements[e] : 0
            }
            setRoad(l, n, e) {
                this.data.roads[this.arrayIndexOf(l, n)] = e
            }
            getRoad(l, n) {
                let e = this.arrayIndexOf(l, n);
                return this.data.roads.length > e ? this.data.roads[e] : 0
            }
            hasRuin(l, n) {
                return this.data.ruins.some(e => e.x == l && e.y == n)
            }
            cityConnectedToCapital(l) {
                let n = this.capital(l.ownerid);
                return n ? this.cityConnected(l, n) : 0
            }
            cityConnected(l, n) {
                if (!l || !n) return 0;
                let e = l.id > n.id ? n.id + "-" + l.id : l.id + "-" + n.id;
                if (this.data.connections[e] || 0 === this.data.connections[e]) return this.data.connections[e]; {
                    let t = this.connected(l.ownerid, l.x, l.y, n.x, n.y);
                    return this.data.connections[e] = t, t
                }
            }
            connected(l, n, e, t, i, s = []) {
                return this.railConnected(n, e, t, i) ? this.hasScience("railroad", this.player(l)) ? 2 : 1 : this.roadConnected(n, e, t, i) ? 1 : 0
            }
            roadConnected(l, n, e, t, i = []) {
                if (l == e && n == t) return !0;
                if (i && i.some(e => e.x == l && e.y == n)) return !1;
                i ? i.push({
                    x: l,
                    y: n
                }) : i = [{
                    x: l,
                    y: n
                }];
                let s = this.getRoad(l, n + 1) || this.city(l, n + 1),
                    u = this.getRoad(l, n - 1) || this.city(l, n - 1),
                    r = this.getRoad(l - 1, n) || this.city(l - 1, n),
                    a = this.getRoad(l + 1, n) || this.city(l + 1, n),
                    o = t < n,
                    c = e < l;
                return !(!(o && u && this.roadConnected(l, n - 1, e, t, i)) && (!s || !this.roadConnected(l, n + 1, e, t, i)) && (o || !u || !this.roadConnected(l, n - 1, e, t, i)) && !(c && r && this.roadConnected(l - 1, n, e, t, i)) && (!a || !this.roadConnected(l + 1, n, e, t, i)) && (c || !r || !this.roadConnected(l - 1, n, e, t, i)))
            }
            railConnected(l, n, e, t, i = []) {
                if (l == e && n == t) return !0;
                if (i && i.some(e => e.x == l && e.y == n)) return !1;
                i ? i.push({
                    x: l,
                    y: n
                }) : i = [{
                    x: l,
                    y: n
                }];
                let s = 6 == this.getRoad(l, n + 1) || this.city(l, n + 1),
                    u = 6 == this.getRoad(l, n - 1) || this.city(l, n - 1),
                    r = 6 == this.getRoad(l - 1, n) || this.city(l - 1, n),
                    a = 6 == this.getRoad(l + 1, n) || this.city(l + 1, n);
                return !!(s && this.railConnected(l, n + 1, e, t, i) || u && this.railConnected(l, n - 1, e, t, i) || r && this.railConnected(l - 1, n, e, t, i) || a && this.railConnected(l + 1, n, e, t, i))
            }
            discover(l, n = !1) {
                if (1 == l.ownerid) return;
                let e = this.player(l.ownerid),
                    t = this.movPos(l);
                this.viewRange(t.x, t.y, 1).forEach(n => {
                    this.isDiscovered(e.id, n[0], n[1]) || (this.setTile(e, n[0], n[1]), 1 != l.ownerid && this.checkNewCiv(e, n))
                })
            }
            checkNewCiv(l, n) {
                let e = this.city(n[0], n[1]);
                if (e && 1 != e.ownerid && e.ownerid != l.id && !this.haveRelation(l.id, e.ownerid)) {
                    let t = this.player(e.ownerid);
                    this.data.relations.push({
                        playersid: [l.id, t.id].sort(),
                        status: 0,
                        war_rating: 0,
                        war_total: 0
                    }), 0 != l.id && (l.appreciation[t.id] = this.conf.civilizations[l.civ_id].starting_relations + (this.hasPolicy("patronage", t.id) ? 10 : 0)), 0 != t.id && (t.appreciation[l.id] = this.conf.civilizations[t.civ_id].starting_relations + (this.hasPolicy("patronage", l.id) ? 10 : 0)), l.influence[t.id] = 0, t.influence[l.id] = 0;
                    let i = this.capital(l.id),
                        s = this.capital(t.id);
                    s && this.setTile(l, s.x, s.y), i && this.setTile(t, i.x, i.y), 0 == l.id ? this.toastService.info("New civilization discovered: " + t.name, ug.act_scout, "/game/world?x=" + n[0] + "&y=" + n[1]) : 0 == t.id ? this.toastService.info("New civilization discovered: " + l.name, ug.act_scout, "/game/world?x=" + n[0] + "&y=" + n[1]) : Pr.production || console.log(l.name + " discovered " + t.name)
                }
            }
            completeCheckNewCiv(l) {
                if (1 != l)
                    for (let n = 0; n < this.player(l).discovered.length; n++) this.player(l).discovered[n] && this.checkNewCiv(this.player(l), this.indexToCoords(n))
            }
            isDiscovered(l, n, e) {
                return 1 == this.getTile(this.player(l), n, e)
            }
            createScout(l, n, e, t, i = []) {
                if (1 == l.ownerid) return;
                let s = !!l.troops.explorer;
                this.data.scouts.push({
                    ownerid: l.ownerid,
                    destid: -1,
                    from: {
                        x: l.x,
                        y: l.y
                    },
                    to: {
                        x: e,
                        y: t
                    },
                    dist: this.distance(l.x, l.y, e, t),
                    progress: 0,
                    speed: this.speedNoCity(s ? "explorer" : "scout", l.ownerid, l, {
                        x: e,
                        y: t
                    }),
                    returning: !1,
                    auto: n,
                    origin_id: l.id,
                    explorer: s,
                    route: i
                }), s ? l.troops.explorer-- : l.troops.scout--
            }
            createGold(l, n, e) {
                this.data.goldtransfers.push({
                    ownerid: l.ownerid,
                    destid: n.ownerid,
                    from: {
                        x: l.x,
                        y: l.y
                    },
                    to: {
                        x: n.x,
                        y: n.y
                    },
                    dist: this.distance(l.x, l.y, n.x, n.y),
                    speed: this.speed("gold", l.ownerid, l, n),
                    progress: 0,
                    gold: e,
                    returning: !1,
                    goldTransfer: !0
                }), l.gold -= e
            }
            availableCitiesForTrade(l) {
                return this.allCities().filter(n => n.ownerid != l.ownerid && this.haveRelation(l.ownerid, n.ownerid) && !this.atWar(l.ownerid, n.ownerid) && -1 == this.data.trades.findIndex(e => e.from.x == l.x && e.from.y == l.y && e.to.x == n.x && e.to.y == n.y) && this.cityDistance(l.id, n.id) <= this.tradeRouteMaxDist(l.ownerid))
            }
            tradeRouteMaxDist(l = 0) {
                if (this.hasWonder(l, "panama")) return 9999;
                let n = this.player(l);
                return this.hasScience("rigging", n) ? 35 : this.hasScience("physics", n) ? 30 : this.hasScience("engineering", n) ? 25 : this.hasScience("optics", n) ? 20 : this.hasScience("wheel", n) ? 15 : 10
            }
            supprTradeRouteForPlayers(l, n) {
                let e = !1;
                return this.data.trades.forEach(t => {
                    if (t.ownerid == l.id && t.destid == n.id || t.ownerid == n.id && t.destid == l.id) {
                        let l = this.city(t.to.x, t.to.y);
                        this.supprTradeRoute(this.city(t.from.x, t.from.y), l) && (e = !0, this.toastService.warning("Trade routes to " + l.name + " have been lost", ug.trade, "/game/diplomacy#tab_trade"))
                    }
                }), e
            }
            supprTradeRoute(l, n = null) {
                let e = this.data.trades.length,
                    t = !1;
                if (n) this.data.trades = this.data.trades.filter(e => !(e.from.x == l.x && e.from.y == l.y && e.to.x == n.x && e.to.y == n.y)), t = e != this.data.trades.length && (0 == l.ownerid || 0 == n.ownerid);
                else {
                    let n = [];
                    this.data.trades.forEach(e => {
                        e.from.x == l.x && e.from.y == l.y || e.to.x == l.x && e.to.y == l.y ? 0 != e.ownerid && 0 != e.destid || (t = !0) : n.push(e)
                    }), this.data.trades = n
                }
                return t
            }
            tradeRouteNb(l) {
                return l || (l = this.player()), this.data.trades.filter(n => n.ownerid == l.id).length
            }
            maxTradeRoute(l) {
                return l || (l = this.player()), 0 + ("arabians" == l.civ_id ? 2 : 0) + (this.hasScience("navigation", l) ? 1 : 0) + (this.hasScience("wheel", l) ? 1 : 0) + (this.hasScience("diplomacy", l) ? 1 : 0) + (this.hasScience("optics", l) ? 1 : 0) + (this.hasScience("engineering", l) ? 1 : 0) + (this.hasScience("corporation", l) ? 1 : 0) + (this.hasPolicyGroup("pacifism", l.id) ? 2 : 0) + (this.hasPolicy("scholasticism", l.id) ? 2 : 0) + (this.hasPolicy("academy", l.id) ? 1 : 0) + (this.hasWonder(l.id, "colossus") ? 1 : 0) + (this.hasWonder(l.id, "panama") ? 2 : 0) + this.upgradeTrade(l.id) + (0 == l.id && this.data.charging.tradenode ? Math.floor(this.tradeNodeBonus()) : 0)
            }
            coloniesAvailable() {
                return this.conf.colony_nb - this.data.colonies.length
            }
            colonyNb(l = 0) {
                return this.data.colonies.filter(n => this.city(n).ownerid == l).length
            }
            colonyNbForCity(l = 0) {
                return this.data.colonies.filter(n => n == l).length
            }
            colonyTotalGoldBonus(l = 0) {
                return this.colonyNb(l) ? this.colonyNb(l) * this.colonyGoldBonus(l) : 0
            }
            colonyTotalTradeGoldBonus(l = 0) {
                return this.colonyNb(l) ? this.colonyNb(l) * this.colonyTradeGoldBonus(l) : 0
            }
            colonyTotalGoldBonusForCity(l) {
                return this.colonyNbForCity(l) ? this.colonyNbForCity(l) * this.colonyGoldBonus(this.city(l).ownerid) : 0
            }
            colonyTotalTradeGoldBonusForCity(l) {
                return this.colonyNbForCity(l) ? this.colonyNbForCity(l) * this.colonyTradeGoldBonus(this.city(l).ownerid) : 0
            }
            colonyTotalHappinessBonus(l = 0) {
                return this.colonyNb(l) ? this.colonyNb(l) * this.colonyHappinessBonus(l) : 0
            }
            colonyGoldBonus(l = 0) {
                return this.conf.colony_base_gold + (this.hasScience("rigging", this.player(l)) ? .03 : 0) + (this.hasWonder(l, "bigben") ? .05 : 0) + (this.hasWonder(l, "casa") ? .02 : 0) + (this.hasPolicy("colonial_conquest", l) ? .05 : 0)
            }
            colonyTradeGoldBonus(l = 0) {
                return this.conf.colony_base_gold_trade
            }
            colonyTotalScienceBonus(l = 0) {
                return this.colonyNb(l) ? this.colonyNb(l) * this.colonyScienceBonus(l) : 0
            }
            colonyScienceBonus(l = 0) {
                return this.hasPolicy("geographical", l) ? .02 : 0
            }
            colonyHappinessBonus(l = 0) {
                return this.conf.colony_base_happiness + (this.hasWonder(l, "bigben") ? .03 : 0) + (this.hasWonder(l, "casa") ? .02 : 0)
            }
            tradeRouteGains(l, n = !1) {
                if (l && l.tradeGains && !n) return l.tradeGains;
                let e = this.tradeRoutes(l),
                    t = {
                        gold: 0,
                        culture: 0,
                        faith: 0,
                        science: 0
                    };
                return e.out.map(l => this.tradeRouteValueForTrade(l)).forEach(l => {
                    t.gold += l.gold, t.culture += l.culture, t.faith += l.faith, t.science += l.science
                }), e.in.map(l => this.tradeRouteValueForTrade(l)).forEach(l => {
                    t.gold += l.gold * this.conf.trade_route_ratio, t.culture += l.culture * this.conf.trade_route_ratio, t.faith += l.faith * this.conf.trade_route_ratio, t.science += l.science * this.conf.trade_route_ratio
                }), t
            }
            tradeRoutes(l) {
                return {
                    out: this.data.trades.filter(n => n.from.x == l.x && n.from.y == l.y),
                    in: this.data.trades.filter(n => n.to.x == l.x && n.to.y == l.y)
                }
            }
            tradeRouteValueForTrade(l) {
                return this.tradeRouteValue(this.city(l.from.x, l.from.y), this.city(l.to.x, l.to.y))
            }
            tradeRouteValue(l, n) {
                if (!l || !n) return {
                    gold: 0,
                    culture: 0,
                    diplomacy: 0,
                    science: 0,
                    faith: 0
                };
                let e = this.cityConnected(l, n),
                    t = 1;
                2 == e ? t = this.conf.rail_trade_mult : 1 == e && (t = this.conf.road_trade_mult);
                let i = ((this.pop(l) + this.pop(n)) / 2 + ("gold" == l.bonus ? 2 : 0) + ("gold" == n.bonus ? 2 : 0) + (this.hasBuilding(l, "market") ? 2 : 0) + (this.hasBuilding(n, "market") ? 1 : 0) + (this.hasBuilding(l, "bank") ? this.buildingBonus("bank", l.ownerid) : 0) + (this.hasBuilding(n, "bank") ? this.buildingBonus("bank", n.ownerid) / 2 : 0) + (this.hasBuilding(l, "stock") ? 10 : 0) + (this.hasBuilding(n, "stock") ? 5 : 0)) * (1 + (this.hasPolicy("merchant_confederacy", l.ownerid) ? .15 : 0)) * (1 + (this.data.spelltime.negociation ? this.negociationBonus(l.ownerid) : 0)) * (1 + this.colonyTotalTradeGoldBonusForCity(l.id)) * (1 + this.colonyTotalTradeGoldBonusForCity(n.id) / 2) * t;
                return {
                    gold: i,
                    culture: ((this.pop(l) + this.pop(n)) / 2 + ("culture" == l.bonus ? 2 : 0) + ("culture" == n.bonus ? 2 : 0) + (this.hasBuilding(l, "monument") ? 2 : 0) + (this.hasBuilding(n, "monument") ? 1 : 0) + (this.hasBuilding(l, "amphitheatre") ? 5 : 0) + (this.hasBuilding(n, "amphitheatre") ? 2 : 0) + (this.hasBuilding(l, "opera") ? 10 : 0) + (this.hasBuilding(n, "opera") ? 5 : 0) + (this.hasWonder(l.ownerid, "pisa") ? 10 : 0)) * (1 + (this.hasPolicy("cultural_diplomacy", l.ownerid) ? .15 : 0)) * t,
                    diplomacy: (1 + (this.hasBuilding(l, "embassy") ? 1 : 0) + (this.hasBuilding(l, "consulate") ? 1 : 0) + (this.hasPolicy("philantropy", l.ownerid) ? 1 : 0)) * this.conf.trade_diplomacy_ratio,
                    science: 0 + (this.hasPolicy("sovereignty", l.ownerid) ? 2 : 0) + (this.hasPolicy("academy", l.ownerid) ? 5 : 0) + (0 == l.ownerid && this.data.spelltime.seshat ? i : 0),
                    faith: 0 + (this.hasPolicy("religious_laws", l.ownerid) ? 2 : 0) + (this.hasPolicy("scholasticism", l.ownerid) ? 5 : 0)
                }
            }
            giftValue(l) {
                let n = 100 * l / this.goldTotal(0);
                return Ng.constraint(Math.min(n, l / 10), 25, 0)
            }
            truce(l, n) {
                let e = this.getRelation(l, n);
                e && (e.status = 2, e.cooldown = this.conf.truce_length, delete e.war_length, l > 1 && (this.player(l).appreciation[n] < 10 && (this.player(l).appreciation[n] += 20), this.player(l).appreciation[n] < 15 && (this.player(l).appreciation[n] += 15), this.player(l).appreciation[n] < 20 && (this.player(l).appreciation[n] += 10)), n > 1 && (this.player(n).appreciation[l] < 10 && (this.player(n).appreciation[l] += 20), this.player(n).appreciation[l] < 15 && (this.player(n).appreciation[l] += 15), this.player(n).appreciation[l] < 20 && (this.player(n).appreciation[l] += 10)), this.data.attacks.filter(e => {
                    let t = this.city(e.to.x, e.to.y);
                    return !e.returning && (e.ownerid == l && t.ownerid == n || e.ownerid == n && t.ownerid == l)
                }).forEach(l => {
                    l.returning = !0, l.progress = 2 * l.dist - l.progress
                }))
            }
            attackRatioRequired(l) {
                return l ? 3 - this.conf.civilizations[l].agressivity / 10 : 1.4
            }
            war(l, n) {
                let e = this.player(l),
                    t = this.player(n),
                    i = this.getRelation(l, n);
                i && (i.status = 1, i.cooldown = this.conf.war_min_length, i.war_length = 0, i.war_rating = 0, i.war_total = 0, 0 != e.id && (e.appreciation[t.id] = 10), 0 != t.id && (t.appreciation[e.id] = 10), this.supprTradeRouteForPlayers(e, t), this.data.relations.filter(e => e.playersid.includes(n) && 3 == e.status && !e.playersid.includes(l)).forEach(e => {
                    let i = e.playersid.find(l => l != n);
                    if (i != n && !this.atWar(l, i) && this.haveRelation(0, l)) {
                        let n = !0;
                        0 == i && 0 == this.data.difficulty && (n = !1), n && (this.war(i, l), 0 == i ? this.toastService.danger("You declared war on " + this.player(l).name + " (def. pact with " + t.name + ")", ug.attack, "/game/diplomacy/") : this.haveRelation(0, i) && this.haveRelation(0, l) && this.toastService.warning(this.player(i).name + " declared war on " + this.player(l).name, ug.attack, "/game/diplomacy/"))
                    }
                }))
            }
            transferCity(l, n, e = !1, t = !0) {
                let i = this.city(l),
                    s = this.player(i.ownerid),
                    u = this.player(n);
                if (i.capital && s.cities.length > 1 && (s.cities[1].capital = !0), i.capital = !1, i.buildings.palace && delete i.buildings.palace, i.building_queue.includes("palace") && (i.building_queue.splice(i.building_queue.indexOf("palace"), 1), i.buildings.palace && (i.buildings.palace.progress = 0)), this.supprTradeRoute(i) && this.toastService.warning("Trade routes to " + i.name + " have been lost because city has been taken", ug.trade, "/game/diplomacy#tab_trade"), this.data.attacks.filter(l => l.to.x == i.x && l.to.y == i.y).forEach(l => {
                        l.destid = n
                    }), this.data.colonies = this.data.colonies.filter(n => n != l), this.data.goldtransfers = this.data.goldtransfers.filter(l => !(l.to.x == i.x && l.to.y == i.y)), this.data.spies.filter(l => l.to.x == i.x && l.to.y == i.y).forEach(l => {
                        this.cancelMove(l)
                    }), i.troop_queue = [], s.cities.splice(s.cities.indexOf(i), 1), e || (u.cities.push(i), i.ownerid = n, 1 != u.id && "Barb. vil." == i.name && (i.name = this.conf.civilizations[u.civ_id].vil_names[u.civ_cities++] || i.name), i.ownerchange = Date.now(), Object.values(this.conf.buildings).forEach(l => {
                        l.add_all && this.hasWonder(n, l.id) && this.player(n).cities.forEach(n => n.buildings[l.add_all] = {
                            done: !0,
                            progress: 0
                        })
                    })), this.viewRange(i.x, i.y, 1).forEach(l => {
                        this.isDiscovered(u.id, l[0], l[1]) || (this.setTile(u, l[0], l[1]), 1 != n && this.checkNewCiv(u, l))
                    }), n > 1 && this.isDiscovered(0, i.x, i.y) && this.checkNewCiv(this.player(), [i.x, i.y]), 0 == n && (e && this.data.burnNb++, this.checkLocks(), this.updateStats()), i.owner_change_timer = this.conf.rightful_owner_timer, t) {
                    let l = e ? "burned down" : "captured",
                        t = 0 != n || e ? "/game/world?x=" + i.x + "&y=" + i.y : "/game/city/" + i.id;
                    0 == n ? this.toastService.success(i.name + " has been " + l + " !", ug.success, t) : 0 == s.id && this.toastService.success(i.name + " has been " + l + " !", ug.defeat, t)
                }
                this.cityCache()
            }
            peaceCost(l, n) {
                let e = this.playerAttack(l),
                    t = this.playerAttack(this.player(n)),
                    i = (e - t) / (t + e),
                    s = (i + this.getRelation(l.id, n).war_rating / (this.getRelation(l.id, n).war_total + 1)) / 2;
                return s *= s >= 0 ? 1.9 - this.fatigueRatio(l, n) : .1 + this.fatigueRatio(l, n), (s = Math.pow(1 + s, .7) - 1) >= 0 && i < 0 ? 0 : s
            }
            playerAttack(l) {
                return (l.cities.reduce((l, n) => l + this.cityAttack(n), 0) + this.data.attacks.filter(n => n.ownerid == l.id).reduce((l, n) => l + this.attackAttack(n), 0)) * this.attackMult(l.id)
            }
            cityAttack(l) {
                return Object.keys(l.troops).reduce((n, e) => n + l.troops[e] * this.conf.troops[e].attack(this.player(l.ownerid)), 0)
            }
            attackAttack(l) {
                return Object.keys(l.troops).reduce((n, e) => n + l.troops[e] * this.conf.troops[e].attack(this.player(l.ownerid)), 0)
            }
            fatigueRatio(l, n) {
                let e = this.player(n).civ_id;
                return this.conf.civilizations[e].war_fatigue_ratio / (this.conf.civilizations[e].war_fatigue_ratio + 1e3 * this.getRelation(l.id, n).war_length)
            }
            aiMinWarTime(l) {
                return this.conf.civilizations[l.civ_id].war_fatigue_ratio / 2500
            }
            playerValue(l) {
                return this.player(l).cities.reduce((l, n) => l + this.cityValue(n), 0)
            }
            cityValue(l) {
                return 50 * this.pop(l) + Object.keys(l.buildings).filter(n => l.buildings[n].done).reduce((l, n) => l + this.buildingGoldCost(this.conf.buildings[n]), 0)
            }
            warChance(l, n) {
                if (0 == n.id && 0 == this.data.difficulty) return 0;
                if (0 == n.id && this.era(n.id) == this.conf.eras.prehistory.id) return 0;
                let e = this.playerAttack(l),
                    t = this.playerAttack(n),
                    i = this.conf.civilizations[l.civ_id].agressivity,
                    s = 999;
                l.cities.forEach(l => {
                    n.cities.forEach(n => {
                        let e = this.cityDistance(l.id, n.id);
                        e < s && (s = e)
                    })
                }), this.getRelations(n.id).filter(n => !n.playersid.includes(l.id)).forEach(e => {
                    let i = e.playersid[0];
                    i == n.id && (i = e.playersid[0]), 3 != e.status || this.atWar(l.id, i) || (t += .5 * this.playerAttack(this.player(i))), 1 == e.status && (t -= .25 * this.playerAttack(this.player(i)))
                }), t < 0 && (t = 0);
                let u = .5 + .5 * (e - t) / (e + t);
                return u < .4 ? 0 : Ng.constraint((1 + (i - 12) * (this.wondersNb(n.id) + this.colonyNb(n.id)) / 100) * Math.pow(500, u - .55) * Math.pow(4, i - 13.5) / (7e3 * Math.pow(s + 1, .5) * Math.pow(1.1, l.appreciation[n.id] - 50)))
            }
            scienceCost(l, n = 0) {
                let e = 1 - .02 * this.data.players.filter(n => this.hasScience(l.id)).length;
                return 1 == n && (e = 1), Math.floor(e * (5.5 * Math.pow(l.rank / 2, 7.8) - 10 + 20 * l.rank))
            }
            buildingGoldCost(l, n = 0) {
                return l.free ? 0 : Math.floor((86 + Math.pow(this.conf.sciences[l.require.science].rank || 0, 6) / 4.5) * (this.hasPolicyGroup("militarism", n) && "military" == l.category ? .75 : 1))
            }
            buildingProdCost(l, n) {
                let e = this.conf.sciences[l.require.science].rank || 0;
                return "progress" == l.id && (e -= 1), (31 + Math.pow(e, 5) / 2) * (l.wonder ? 3.4 + .1 * this.player(n.ownerid).cities.length : 1) * (this.hasPolicyGroup("militarism", n.ownerid) && "military" == l.category ? .75 : 1) * (this.hasBuilding(n, "shrine") && l.wonder ? .95 : 1)
            }
            coolDownMult(l = 0) {
                return (this.hasWonder(l, "mausoleum") ? .85 : 1) * (this.hasWonder(l, "taj") ? .85 : 1) * (this.hasPolicy("miracles", l) ? .8 : 1) * (1 - this.sequencerBonus(l))
            }
            abundanceBonus(l = 0) {
                return 0 != l ? 0 : (40 * Math.pow(1.4, this.player(l).powers.serpent || 0) - 20) / 100
            }
            newfireBonus(l = 0) {
                return 0 != l ? 0 : !this.data.charging.newfire || this.player(l).orientation > 0 ? 0 : .44 * Math.log10(1 + .3 * this.data.charging.newfire)
            }
            sacrificeBonus() {
                return Math.pow(10 + this.foodDiff(null), 1.05) * Math.pow(.5 + this.happiness(), 6.5)
            }
            negociationBonus(l = 0) {
                return 0 != l ? 0 : 20 * Math.pow(1.4, this.player(l).powers.eye || 0) / 100
            }
            tradeNodeBonus(l = 0) {
                return 0 != l ? 0 : !this.data.charging.tradenode || this.player(l).orientation > 0 ? 0 : 7.2 * Math.log(.05 * (this.data.charging.tradenode + 2) + 1)
            }
            warpathBonus(l = 0) {
                return 0 != l ? 0 : !this.data.charging.warpath || this.player(l).orientation > 0 ? 0 : 1.27 * Math.log10(.2 * this.data.charging.warpath + 1)
            }
            warpathMaintenanceBonus(l = 0) {
                return 0 != l ? 0 : !this.data.charging.warpath || this.player(l).orientation > 0 ? 0 : .223 * Math.log10(1 + 1.8 * this.data.charging.warpath)
            }
            berserkerAttackBonus(l = 0) {
                return 0 != l ? 0 : (40 * Math.pow(1.25, this.player(l).powers.valhalla || 0) - 30) / 100
            }
            berserkerSpeedBonus(l = 0) {
                return 0 != l ? 0 : (40 * Math.pow(1.1, this.player(l).powers.valhalla || 0) - 30) / 100
            }
            appropriationBonus(l = 0) {
                return 0 != l ? 0 : 2 * Math.pow(1 + this.playerAttack(this.player(l)) / 70, 1.2)
            }
            timeshiftBonus(l = 0) {
                return 0 != l ? 0 : 80 * Math.pow(1.2, this.player(l).powers.thirdeye || 0) - 50
            }
            enlightmentBonus(l = 0) {
                return 0 != l ? 0 : !this.data.charging.enlightment || this.player(l).orientation > 0 ? 0 : 1.03 * Math.log10(1 + .25 * this.data.charging.enlightment)
            }
            mahaBonus(l = 0) {
                if (0 != l) return 0;
                let n = this.player(l);
                return Math.pow(1 + this.scienceDiff(null, n), 1.5) + Math.pow(1 + this.foodDiff(null, n), 1.5)
            }
            idlersBonus(l = 0) {
                return 0 != l ? 0 : !this.data.charging.idlers || this.player(l).orientation > 0 ? 0 : Math.floor(28 * Math.log10(1 + 1.2 * this.data.charging.idlers)) / 10
            }
            dionysiaBonus(l = 0) {
                return 0 != l ? 0 : .5 * this.happiness() * Math.pow(1 + (this.player(l).powers.orphic || 0), .7)
            }
            bacchanaliaBonus(l = 0) {
                return 0 != l ? 0 : Math.pow(1 + this.colonyNb(l), 2) * Math.pow(100 + this.cultureDiff(null), .2) * Math.pow(this.happiness(), 4) / 1e3
            }
            underworldBonus(l = 0) {
                return 0 != l ? 0 : !this.data.charging.underworld || this.player(l).orientation > 0 ? 0 : .223 * Math.log10(1 + 1.8 * this.data.charging.underworld)
            }
            punisherBonus(l = 0) {
                return 0 != l ? 0 : !this.data.charging.punisher || this.player(l).orientation > 0 ? 0 : .05 * Math.log10(1 + 1.5 * this.data.charging.punisher)
            }
            clairvoyanceBonus(l) {
                return .1 * (this.player(l).powers.clairvoyance || 0)
            }
            stoneBonus(l) {
                return .05 * (this.player(l).powers.stone || 0)
            }
            buildingNb(l) {
                return Object.values(l.buildings).filter(l => l.done).length
            }
            serpentBonus(l) {
                return (this.player(l.ownerid).powers.serpent || 0) * this.buildingNb(l) * .01
            }
            eyeBonus(l = 0) {
                return (this.player(l).powers.eye || 0) * this.tradeRouteNb(this.player(l)) * .005
            }
            valhallaBonus(l) {
                return (this.player(l.ownerid).powers.valhalla || 0) * this.troopNb(l, !1) * 25e-5
            }
            thirdeyeBonus(l) {
                return l.capital ? .1 * (this.player(l.ownerid).powers.thirdeye || 0) : 0
            }
            eternityBonus(l) {
                return (this.player(l).powers.eternity || 0) * this.tradeRouteNb(this.player(l)) * .05
            }
            ouroborosBonus(l) {
                return (this.player(l).powers.ouroboros || 0) * Object.values(this.player(l).sciences).filter(l => l.done).length * .02
            }
            blissBonus(l) {
                return .05 * (this.player(l).powers.bliss || 0)
            }
            sequencerBonus(l, n = 0) {
                return .83 * Math.log10(.15 * (n + (this.player(l).powers.sequencer || 0)) + 1)
            }
            orphicBonus(l) {
                return .2 * (this.player(l).powers.orphic || 0)
            }
            hasteBonus(l) {
                return .05 * (this.player(l).powers.haste || 0)
            }
            recruitmentSpeed(l) {
                return 1.5 * (1 + (this.hasBuilding(l, "mia") ? .25 : 0) + (this.hasBuilding(l, "trc") ? .25 : 0) + (this.hasBuilding(l, "arsenal") ? .25 : 0) + ("recruitment" == l.bonus ? .25 : 0) + (this.hasWonder(l.ownerid, "statue_zeus") ? .15 : 0) + (this.hasWonder(l.ownerid, "brandenburg") ? .15 : 0)) * this.getPlayerRatio(l.ownerid, "recruitment") * (1 + this.warpathBonus())
            }
            updateStats() {
                this.data.nostats || (this.kongService.submmitStat("cities", this.player().cities.length), this.kongService.submmitStat("science", this.currentScienceRank()), this.kongService.submmitStat("powers", Object.values(this.player().powers).reduce((l, n) => l + n, 0)), this.kongService.submmitStat("reincarnations", this.data.rebirths))
            }
            isPolicyAvailable(l, n = 0) {
                let e = this.player(n);
                if (e.culture < this.cultureCost(e)) return !1;
                if (l.require.science && !this.hasScience(l.require.science, e)) return !1;
                if (l.require.policy && !this.hasPolicy(l.require.policy, n)) return !1;
                for (let t = 0; t < l.groups.length; t++)
                    if (!this.hasPolicyGroup(l.groups[t], n)) return !1;
                return !0
            }
            isPolicyGroupAvailable(l, n = 0) {
                let e = this.player(n);
                return !(e.culture < this.cultureCost(e)) && (!l.lockedBy || !this.hasPolicyGroup(l.lockedBy, n)) && (!l.require || this.hasScience(l.require, e))
            }
            hasAnyPolicyAvailable() {
                return Object.values(this.conf.policies.groups).some(l => !this.hasPolicyGroup(l.id) && this.isPolicyGroupAvailable(l)) || Object.values(this.conf.policies.policies).some(l => !this.hasPolicy(l.id) && this.isPolicyAvailable(l))
            }
            hasAnyBuildingAvailable(l) {
                return Object.values(this.conf.buildings).some(n => this.isBuildingSelectable(l, n))
            }
            isBuildingSelectable(l, n) {
                return this.isBuildingVisible(l, n) && this.isBuildingAvailable(l, n)
            }
            isBuildingVisible(l, n) {
                return !(n.wonder && this.isWonderDone(n.id) || "palace" == n.id && !l.capital || "tribunal" == n.id && l.capital || "courthouse" == n.id && l.capital || this.hasBuilding(l, n.id) || l.building_queue.includes(n.id) || n.require.science && !this.hasScience(n.require.science, this.player(l.ownerid)) || n.coastal && !this.isCoastal(l))
            }
            isBuildingAvailable(l, n) {
                if (n.industrial && !n.wonder && this.player(l.ownerid).orientation < 25) return !1;
                if (n.industrial && n.wonder && this.player(l.ownerid).orientation < 75) return !1;
                if (n.require.buildings.length)
                    for (let e = 0; e < n.require.buildings.length; e++)
                        if (!this.hasBuilding(l, n.require.buildings[e]) && !l.building_queue.includes(n.require.buildings[e])) return !1;
                return !(!l.buildings[n.id] && l.gold < this.buildingGoldCost(n, l.ownerid) || n.wonder && this.isBuildingWonder(l.ownerid, n.id))
            }
            visibleBuildings(l) {
                return Object.values(this.conf.buildings).filter(n => this.isBuildingVisible(l, n)).sort((l, n) => {
                    let e = this.conf.sciences[l.require.science].rank,
                        t = this.conf.sciences[n.require.science].rank;
                    return e > t ? 1 : e < t ? -1 : 0
                })
            }
            selectableBuildings(l) {
                return Object.values(this.conf.buildings).filter(n => this.isBuildingSelectable(l, n)).sort((l, n) => {
                    let e = this.buildingGoldCost(l),
                        t = this.buildingGoldCost(n);
                    return e > t ? 1 : e < t ? -1 : 0
                })
            }
            isTroopVisible(l, n) {
                return !(n.require.tech && l.orientation < n.require.tech || n.obsolete && this.hasScience(n.obsolete) || ("caravel" != n.id || "portuguese" != l.civ_id || !this.hasScience("education", l)) && n.require.science && !this.hasScience(n.require.science, l))
            }
            isTroopAvailable(l, n, e) {
                return !(!this.isTroopVisible(l, e) || e.require.building && !this.hasBuilding(n, e.require.building) || n.gold < e.gold(this, l.id))
            }
            isImprovementVisible(l, n, e) {
                return !(n < l.level || l.level > 1 && this.player(e).orientation < 50 || !this.hasScience(l.require, this.player(e)))
            }
            isImprovementAvailable(l, n, e) {
                return !(l.cost > e.gold) && this.isImprovementVisible(l, n, e.ownerid)
            }
            isImprovementAllowed(l, n, e, t, i) {
                let s = this.getTerrain(l, n),
                    u = this.conf.improvements[e];
                return !(2 == u.level && this.player(t.ownerid).orientation < 50 || this.city(l, n) && !i || !this.isDiscovered(t.ownerid, l, n) || this.getImprovement(l, n) == e || !this.hasScience(u.require, this.player(t.ownerid)) || u.cost > t.gold || u.road && this.getRoad(l, n) == e || !(e <= 2 && 6 == s && "australians" == this.player(t.ownerid).civ_id) && u.terrains.length && !u.terrains.includes(s))
            }
            createWorker(l, n, e, t, i, s = !1) {
                Pr.production || console.log("New worker orders from " + l.name + " to create " + this.conf.improvements[n].name + " on (" + e + "," + t + "), roadto: " + s), l.gold -= this.conf.improvements[n].cost;
                let u = [];
                if (s) {
                    let i = l.x,
                        s = l.y,
                        r = !1;
                    for (; i != e || s != t;) {
                        let l = !1;
                        r || i == e ? r && s != t && (s += s > t ? -1 : 1, l = !0) : (i += i > e ? -1 : 1, l = !0), r = !r, l && this.getRoad(i, s) < n && !this.city(i, s) && u.push({
                            x: i,
                            y: s
                        })
                    }
                }
                let r = e,
                    a = t;
                u.length && (r = u[0].x, a = u[0].y, u.splice(0, 1));
                let o = 2 == i ? "engineer" : "worker";
                this.data.workers.push({
                    ownerid: l.ownerid,
                    destid: l.ownerid,
                    from: {
                        x: l.x,
                        y: l.y
                    },
                    to: {
                        x: r,
                        y: a
                    },
                    dist: this.distance(l.x, l.y, r, a),
                    progress: 0,
                    speed: this.speedNoCity(o, l.ownerid, l, {
                        x: r,
                        y: a
                    }),
                    returning: !1,
                    origin_id: l.id,
                    type: n,
                    construction_progress: 0,
                    level: i,
                    route: u
                }), l.troops[o]--
            }
            cancelMove(l) {
                if (l.auto) {
                    let n = this.city(l.origin_id),
                        e = this.movPos(l);
                    l.from = {
                        x: n.x,
                        y: n.y
                    }, l.to = {
                        x: e.x,
                        y: e.y
                    }, l.dist = this.distance(n.x, n.y, l.to.x, l.to.y), l.progress = l.dist, l.auto = !1
                }
                l.returning = !0, l.progress = 2 * l.dist - l.progress
            }
            difficulty() {
                return this.conf.difficulties[this.data.difficulty]
            }
            totalCultureUsed(l, n = 1.5) {
                let e = l.policies.policies.length + l.policies.groups.length,
                    t = 0;
                for (let i = 0; i < e; i++) t += Math.floor((25 + Math.pow(6 * i, 2.8)) * (.3 + .7 * n));
                return t
            }
            cultureResetCost() {
                return this.data.culture_reset ? 2 * this.data.culture_reset + 4 : 4
            }
            haveRelation(l, n) {
                return this.data.relations.some(e => e.playersid.includes(l) && e.playersid.includes(n))
            }
            getRelations(l) {
                return this.data.relations.filter(n => n.playersid.includes(l))
            }
            getRelation(l, n) {
                return this.data.relations.find(e => e.playersid.includes(l) && e.playersid.includes(n))
            }
            atWar(l, n) {
                return this.data.relations.some(e => e.playersid.includes(l) && e.playersid.includes(n) && l != n && 1 == e.status)
            }
            allied(l, n) {
                return this.data.relations.some(e => e.playersid.includes(l) && e.playersid.includes(n) && l != n && 3 == e.status)
            }
            diploDiff(l, n) {
                let e = 0;
                return e += this.diploBase(l, n), e += this.diploTrade(l, n), e -= this.diploProximity(l, n), e += this.diploDeity(l, n), this.atWar(l, n) && (e -= 1), e + this.diploRelations(l, n)
            }
            diploBase(l, n) {
                let e = this.player(l);
                return e.appreciation[n] > this.conf.civilizations[e.civ_id].starting_relations ? -this.conf.civilizations[e.civ_id].relation_decrease : e.appreciation[n] < this.conf.civilizations[e.civ_id].starting_relations ? this.conf.civilizations[e.civ_id].relation_decrease / 2 : 0
            }
            diploRelations(l, n) {
                this.player(l), this.player(n);
                let e = 0;
                return this.getRelations(n).filter(n => !n.playersid.includes(l)).forEach(t => {
                    let i = t.playersid[0];
                    i == n && (i = t.playersid[1]), 1 == t.status && this.atWar(l, i) && (e += this.conf.war_w_enemy_relation_change), 3 == t.status && this.atWar(l, i) && (e += this.conf.alliance_w_enemy_relation_change), 1 == t.status && this.allied(l, i) && (e += this.conf.war_w_friend_relation_change), 3 == t.status && this.allied(l, i) && (e += this.conf.alliance_w_friend_relation_change)
                }), e
            }
            diploDeity(l, n) {
                let e = this.player(l),
                    t = this.player(n);
                return e.orientation <= 0 && t.orientation <= 0 ? e.deity && t.deity ? e.deity == t.deity ? this.conf.deity_relation_change : -this.conf.deity_relation_change : 0 : e.orientation > 0 && t.orientation > 0 ? this.conf.deity_relation_change : -this.conf.deity_relation_change
            }
            diploProximity(l, n) {
                let e = this.player(l),
                    t = this.player(n);
                return e.cities.map(l => this.closestCity(l.x, l.y, e.id, !0).ownerid).filter(l => l == t.id).length * this.conf.closest_relation_decrease * (this.conf.civilizations[e.civ_id].agressivity / 2 - 5)
            }
            diploTrade(l, n) {
                return this.data.trades.filter(e => e.ownerid == l && e.destid == n || e.ownerid == n && e.destid == l).map(l => this.tradeRouteValueForTrade(l).diplomacy).reduce((l, n) => l + n, 0)
            }
            influenceDiff(l, n) {
                let e = this.player(l),
                    t = this.player(n),
                    i = this.cultureDiff(null, e) * (this.hasWonder(l, "forbidden") ? 1.25 : 1) * (this.hasPolicy("conservatism", n) ? .75 : 1) * (this.hasPolicy("holy_place", l) && e.deity && e.deity == t.deity ? 1.25 : 1) * (this.hasPolicy("collaboration", l) && 0 == this.getRelation(l, n).status ? 1.05 : 1) * (this.hasPolicy("collaboration", l) && 3 == this.getRelation(l, n).status ? 1.1 : 1) * (this.hasPolicy("congress", l) ? 1.25 : 1);
                return this.hasPolicy("cultural_promotion", l) && (i *= 1 + .1 * this.data.trades.filter(e => e.destid == n && e.ownerid == l).length), i
            }
            influence(l, n) {
                let e = this.player(l),
                    t = this.player(n);
                if (e.influence[e.id] && e.influence[t.id] && t.influence[e.id] && t.influence[t.id]) {
                    let l = t.influence[e.id] / (1e8 + 10 * t.influence[t.id]) - e.influence[t.id] / (1e8 + 10 * e.influence[e.id]);
                    return l > this.conf.max_influence ? this.conf.max_influence : l < -this.conf.max_influence ? -this.conf.max_influence : l
                }
                return 0
            }
            promotionCost(l) {
                return .1 * this.player(l).influence[l]
            }
            isPromotionAllowed(l, n) {
                return this.player(l).promotion_cooldown || (this.player(l).promotion_cooldown = {}), !this.player(l).promotion_cooldown[n]
            }
            promote(l, n) {
                let e = this.promotionCost(l);
                if (e > this.player(l).culture || !this.isPromotionAllowed(l, n)) return !1;
                this.player(l).culture -= e, this.player(l).promotion_cooldown[n] = this.conf.promotion_cooldown, this.player(n).influence[l] += e / 2
            }
            isCoastal(l) {
                return Math.abs(l.x) == this.conf.init.map_size || Math.abs(l.y) == this.conf.init.map_size
            }
            scoutAmbushRisk(l) {
                let n = this.city(l.origin_id);
                if (!n) return .1;
                let e = this.movPos(l),
                    t = this.distance(e.x, e.y, n.x, n.y);
                l.explorer && (t /= 2.5);
                let i = (Math.exp(t - 15) - 1) / 5e8;
                return i < 0 ? 0 : i
            }
            plagueInitRisk(l) {
                return this.data.last_plague ? this.health(l) >= .4 ? 0 : this.hasBuilding(l, "quarantine") ? 0 : Math.pow(8, this.data.difficulty) * (Math.pow(40 - 100 * this.health(l), 3) - 1) * Math.pow(this.data.last_plague, 4) / 1e23 : 0
            }
            initPlague(l) {
                this.data.last_plague = 0, l.plague = yg.get(60, 600);
                let n = this.isDiscovered(0, l.x, l.y) ? l.name : "unknown city",
                    e = this.isDiscovered(0, l.x, l.y) ? "/game/world?x=" + l.x + "&y=" + l.y : "/game/help#health";
                this.toastService.black("Plague outbreak in " + n + " !", ug.plague, e), this.data.plagueNb++, 0 == l.ownerid && this.data.autopause.plague && (this.data.pause = !0)
            }
            plagueDoctorRatio(l) {
                let n = l.troops.plague_doctor ? l.troops.plague_doctor : 0,
                    e = 100;
                return this.hasBuilding(l, "aqueduct") && (e = 75), this.hasBuilding(l, "hospital") && (e = 50), 1 - Math.pow(n, .8) / e
            }
            plagueRisk(l) {
                if (this.health(l) >= .7) return 0;
                if (this.hasBuilding(l, "quarantine")) return 0;
                let n = Math.pow(this.pop(l), 2) * (Math.pow(14 - 20 * this.health(l), 4) - 1) / 5e8 * (1 + 10 * this.punisherBonus(0)) * this.plagueDoctorRatio(l);
                return n < 0 ? 0 : n
            }
            plague() {
                return this.allCities().some(l => l.plague)
            }
            plagueNb() {
                return this.allCities().filter(l => l.plague && l.plague > 0).length
            }
            plagueTroopKillChances(l) {
                return 5e-4 / Math.pow(this.health(l), 2) * (1 - this.underworldBonus(l.ownerid)) * (1 - (this.hasPolicy("red_cross", l.ownerid) ? .5 : 0))
            }
            plagueTradeLostChances(l) {
                return 1e-6 / Math.pow(this.health(l) + .05, 2) * (1 - this.underworldBonus(l.ownerid)) * (1 - (this.hasPolicy("red_cross", l.ownerid) ? .5 : 0))
            }
            color(l) {
                let n = this.player(l);
                return 1 == l ? this.conf.barbarians_color : n && n.civ_id ? this.conf.civilizations[n.civ_id].color : "#000"
            }
            color2(l) {
                let n = this.player(l);
                return 1 == l ? this.conf.barbarians_color2 : n && n.civ_id ? this.conf.civilizations[n.civ_id].color2 : "#999"
            }
            upgradeTrade(l) {
                return 0 != l ? 0 : 0 + (this.hasUpgrade("trade1") ? 1 : 0) + (this.hasUpgrade("trade2") ? 1 : 0)
            }
            upgradeScienceMult(l) {
                return 0 != l ? 1 : 1 + (this.hasUpgrade("science1") ? .2 : 0) + (this.hasUpgrade("science2") ? .2 : 0)
            }
            upgradeHealth(l) {
                return 0 != l ? 0 : 0 + (this.hasUpgrade("health1") ? .1 : 0) + (this.hasUpgrade("health2") ? .1 : 0)
            }
            upgradeHappiness(l) {
                return 0 != l ? 0 : 0 + (this.hasUpgrade("happiness1") ? .1 : 0) + (this.hasUpgrade("happiness2") ? .1 : 0)
            }
            upgradeGoldMult(l) {
                return 0 != l ? 1 : 1 + (this.hasUpgrade("gold1") ? .2 : 0) + (this.hasUpgrade("gold2") ? .2 : 0)
            }
            upgradeSpeedMult(l) {
                return 0 != l ? 1 : 1 + (this.hasUpgrade("speed1") ? .1 : 0) + (this.hasUpgrade("speed2") ? .1 : 0)
            }
            improvements(l, n) {
                let e = 0;
                for (let t = l.x - 1; t <= l.x + 1; t++)
                    for (let i = l.y - 1; i <= l.y + 1; i++) this.getImprovement(t, i) == n && e++;
                return e
            }
            relicsGain(l) {
                return this.player(l).cities.reduce((l, n) => l + (n.relics || 0) * this.relicsValue(n), 0) + (this.hasWonder(l, "eiffel") ? 10 : 0)
            }
            relicsNb(l) {
                return this.player(l).cities.reduce((l, n) => l + (n.relics || 0), 0)
            }
            relicsValue(l) {
                return 1 * (this.hasBuilding(l, "museum") ? 1.5 : 1)
            }
            changeOrientationFortech(l, n) {
                if (this.currentScienceRank(l.id) < 16) return;
                let e = Math.pow(110 - l.orientation, 1.3) / 100;
                this.changeOrientation(l, n * e)
            }
            changeOrientation(l, n) {
                this.currentScienceRank(l.id) < 16 || (l.orientation += n, l.orientation < -100 && (l.orientation = -100), l.orientation > 100 && (l.orientation = 100))
            }
            initGame() {
                this.generateMap(), this.hasUpgrade("tech1") && (this.player().sciences.language = {
                    done: !0,
                    progress: 0
                }, this.player().sciences.dog_domestication = {
                    done: !0,
                    progress: 0
                }), this.hasUpgrade("tech2") && (this.player().sciences.tanning = {
                    done: !0,
                    progress: 0
                }, this.player().sciences.pottery = {
                    done: !0,
                    progress: 0
                }), this.checkLocks()
            }
            initCivs(l) {
                let n = new Eg(this.data.lastids.player++, "Barbarians");
                this.data.players.push(n), Object.values(this.conf.civilizations).filter(n => !n.respawn && n.id != l).forEach(l => {
                    let n = new Eg(this.data.lastids.player++, l.name);
                    n.civ_id = l.id, Pr.production || console.log("Creation of " + l.name + " (" + n.id + ")");
                    let [e, t] = [0, 0];
                    for (;
                        [].concat(...this.data.players.map(l => l.cities)).find(l => l.x == e && l.y == t);) e = yg.get(-this.conf.init.map_size, this.conf.init.map_size), t = yg.get(-this.conf.init.map_size, this.conf.init.map_size);
                    let i = new Ag(this.data.lastids.city++, l.vil_names[0], e, t, n.id, !0, !0);
                    Pr.production || console.log("Creation of " + i.name + " (" + i.x + "," + i.y + ")"), n.cities.push(i), this.data.players.push(n)
                }), this.data.tmp_powers && (Object.keys(this.data.tmp_powers).forEach(l => {
                    let n = this.data.players[l];
                    n && (n.powers = this.data.tmp_powers[l])
                }), delete this.data.tmp_powers), n.science_queue = Object.keys(this.conf.sciences);
                for (let e = 0; e < this.conf.init.barbarians.nb; e++) {
                    let l = yg.get(-this.conf.init.map_size, this.conf.init.map_size),
                        e = yg.get(-this.conf.init.map_size, this.conf.init.map_size);
                    if (![].concat(...this.data.players.map(l => l.cities)).find(n => n.x == l && n.y == e)) {
                        let t = new Ag(this.data.lastids.city++, "Barb. vil.", l, e, 1, !0);
                        t.bonus = yg.randomVilBonus(), n.cities.push(t)
                    }
                }
                if ([].concat(...this.data.players.map(l => l.cities)).every(l => !(Math.abs(l.x) == this.conf.init.map_size || Math.abs(l.y) == this.conf.init.map_size))) {
                    let l = new Ag(this.data.lastids.city++, "Barb. vil.", -this.conf.init.map_size, 0, 1, !0);
                    l.bonus = yg.randomVilBonus(), n.cities.push(l)
                }
            }
            generateMap() {
                this.data.improvements = [], this.data.roads = [], (this.data.map = []).length = this.arrayIndexOf(this.conf.init.map_size + 2, this.conf.init.map_size + 2) + 1, this.data.map.fill(0);
                let l = -this.conf.init.map_size;
                for (; l <= this.conf.init.map_size;) {
                    let n = -this.conf.init.map_size;
                    for (; n <= this.conf.init.map_size;) {
                        let e = yg.fromArray(this.conf.biomes);
                        for (let t = 0; t < this.conf.biome_size; t++)
                            for (let i = 0; i < this.conf.biome_size; i++) {
                                let s = yg.fromArray(e.terrains);
                                this.setTerrain(n + i, l + t, s)
                            }
                        n += this.conf.biome_size
                    }
                    l += this.conf.biome_size
                }
                this.data.ruins = [];
                for (let n = 0; n < this.conf.ruins; n++) {
                    let l = yg.get(-this.conf.init.map_size, this.conf.init.map_size),
                        n = yg.get(-this.conf.init.map_size, this.conf.init.map_size);
                    this.city(l, n) || this.data.ruins.push({
                        x: l,
                        y: n
                    })
                }
            }
            updateVersion() {
                let l = this.data.version;
                if (l < 4 && (this.data.difficulty = 2), l < 11 && this.data.reports.forEach(l => {
                        let n = this.city(l.from_id);
                        l.isAttacker = 0 == n.ownerid;
                        let e = Object.values(l.troops.remaining.attacker).reduce((l, n) => l + n, 0),
                            t = Object.values(l.troops.remaining.defender).reduce((l, n) => l + n, 0);
                        l.defeat = 0 == n.ownerid && 0 == e || 0 != n.ownerid && 0 == t
                    }), l < 12 && (this.data.darktheme = !1, this.data.players.forEach(l => {
                        l.science_queue = 0 == l.id ? l.cur_science ? [l.cur_science] : [] : Object.keys(this.conf.sciences).filter(n => !l.sciences[n] || !l.sciences[n].done)
                    })), l < 16 && (this.data.cooldowns = {}, this.data.charging = {}, this.data.spelltime = {}, this.data.spellshidden = !1, this.data.burnNb = 0, this.data.nostats = !1, this.data.autopause = {
                        save: !1,
                        incoming: !1,
                        science: !1,
                        building: !1,
                        citizen: !1,
                        city_captured: !1,
                        city_lost: !1,
                        city_joined: !1,
                        plague: !1
                    }, this.isUnlocked("queue_buildings") && (this.data.locks.splice(this.data.locks.indexOf("queue_buildings"), 1), this.data.persistent_locks.push("queue_buildings")), this.isUnlocked("queue_troops") && (this.data.locks.splice(this.data.locks.indexOf("queue_troops"), 1), this.data.persistent_locks.push("queue_troops")), this.isUnlocked("recruit_x10") && (this.data.locks.splice(this.data.locks.indexOf("recruit_x10"), 1), this.data.persistent_locks.push("recruit_x10"))), l < 18 && (this.data.saveddaily = 0, Object.values(this.conf.buildings).forEach(l => {
                        if ((l.add_all || l.add_city) && this.isWonderDone(l.id)) {
                            let n = this.cityForWonder(l.id);
                            l.add_city && (n.buildings[l.add_city] = {
                                done: !0,
                                progress: 0
                            }), l.add_all && this.player(n.ownerid).cities.forEach(n => {
                                n.buildings[l.add_all] = {
                                    done: !0,
                                    progress: 0
                                }
                            })
                        }
                    })), l < 21) {
                    if (this.data.relations = [], this.data.lefthidden = !1, this.data.colonies = [], this.data.max_rpt = 50, this.data.max_notif = 100, this.data.players.filter(l => 1 != l.id).forEach(l => {
                            l.appreciation = {}, l.influence = {}, l.promotion_lastdate = {}, l.discovered = [], l.influence[l.id] = l.culture + this.totalCultureUsed(l), this.data.players.filter(n => 0 != l.id && 0 != n.id && 1 != n.id && n.id != l.id).forEach(n => {
                                0 != l.id && l.id != n.id && (l.appreciation[n.id] = this.conf.civilizations[l.civ_id].starting_relations), l.influence[n.id] = 0, this.haveRelation(l.id, n.id) || this.data.relations.push({
                                    playersid: [l.id, n.id].sort(),
                                    status: 0,
                                    war_rating: 0,
                                    war_total: 0
                                })
                            })
                        }), this.data.diplomacy) {
                        let l = this.data.diplomacy;
                        Object.keys(l).forEach(n => {
                            let e = parseInt(n),
                                t = l[e];
                            this.player(e).appreciation[0] = t.relations;
                            let i = 0;
                            "war" == t.status && (i = 1), "truce" == t.status && (i = 2), this.data.relations.push({
                                playersid: [0, e],
                                status: i,
                                war_rating: t.war_rating,
                                war_total: t.war_rating,
                                status_updated: t.status_updated
                            })
                        }), delete this.data.diplomacy
                    }
                    this.data.discovered.forEach(l => {
                        this.setTile(this.player(), l[0], l[1])
                    }), delete this.data.discovered, this.data.autopause.city_joined = !1, this.data.autopause.save = !1
                }
                if (l < 24 && this.allCities().forEach(l => l.rightful_ownerid = l.ownerid), l < 25 && (this.currentScienceRank() >= 7 && (this.data.last_plague = this.currentScienceRank() * yg.get(1, 600)), this.data.autopause.plague = !1, this.data.plagueNb = 0, this.data.plagueMaxCities = 0, this.data.relations.forEach(l => l.war_total = 2 * l.war_rating)), l < 26 && (this.isUnlocked("empire_orders") || (this.data.emp_autoassign = !1, this.data.emp_priority = "", this.data.emp_strong = !1)), l < 29) {
                    this.data.favors && (this.data.favors = {
                        0: this.data.favors
                    }), this.data.deities = {};
                    let l = 0;
                    this.data.players.filter(l => 1 != l.id).forEach(n => {
                        n.deity && (this.data.deities[n.id] = n.deity), 0 == n.id ? l = Object.values(n.powers).reduce((l, n) => Math.max(l, n), 0) : Object.keys(n.powers).forEach(e => {
                            n.powers[e] > l && (n.powers[e] = l)
                        })
                    })
                }
                if (l < 30 && (this.data.respawn = []), l < 31) {
                    this.data.favors[0] || (this.data.favors[0] = {});
                    let l = Object.keys(this.player().powers).reduce((l, n) => l + (Math.pow(2, this.player().powers[n]) - 1) * Object.keys(this.conf.powers[n].cost).length, 0) + Object.values(this.data.favors[0]).reduce((l, n) => l + n, 0);
                    this.player(1) && (this.player(1).powers = {}), this.data.players.filter(l => l.id > 1).forEach(n => {
                        n.powers = {};
                        let e = Math.floor(yg.get(70, 95) * l / 100);
                        for (this.data.favors[n.id] || (this.data.favors[n.id] = {}), this.data.favors[n.id][""] || (this.data.favors[n.id][""] = 0), this.data.favors[n.id][""] = Math.ceil(.2 * e), e = Math.floor(.8 * e); e > 0;) {
                            let l = Math.max(1, Math.floor(e / 20)),
                                t = yg.fromArray(Object.keys(this.conf.deities));
                            this.data.favors[n.id][t] ? this.data.favors[n.id][t] += l : this.data.favors[n.id][t] = l, e -= l
                        }
                        this.allocatePowers(n)
                    })
                }
                if (l < 32 && (this.data.relations.forEach(l => {
                        l.status_updated && (l.cooldown = Math.max(0, this.conf.war_min_length - (Date.now() - l.status_updated) / 1e3), 1 == l.status && (l.war_length = l.status_updated / 1e3)), delete l.status_updated
                    }), this.data.players.forEach(l => {
                        if (l.promotion_lastdate) {
                            let n = l.promotion_lastdate;
                            Object.keys(n).forEach(e => {
                                l.promotion_cooldown = {}, l.promotion_cooldown[e] = Math.max(0, this.conf.promotion_cooldown - (Date.now() - n[e]) / 1e3)
                            }), delete l.promotion_lastdate
                        }
                    }), delete this.data.capitalchange), l < 35 && !this.player(1)) {
                    let l = new Eg(1, "Barbarians");
                    this.data.players.push(l)
                }
                l < 36 && (this.generateMap(), this.data.prestige = 0, this.data.upgrades = [], this.data.workers = [], this.data.archeologists = [], this.data.players.forEach(l => {
                    l.orientation = -75, l.progress = 0, delete l.color, delete l.color2
                }), this.player(1) && (this.player(1).civ_id = "")), l < 37 && (this.data.notif_pop = !0, this.data.notif_building = !0), l < 39 && this.allCities().forEach(l => {
                    Object.keys(l.buildings).forEach(n => {
                        let e = Object.values(this.conf.buildings).find(l => l.oid == n);
                        e && (l.buildings[e.id] = Object.assign({}, l.buildings[n]), delete l.buildings[n])
                    }), l.building_queue.forEach((n, e) => {
                        let t = Object.values(this.conf.buildings).find(l => l.oid == n);
                        t && (l.building_queue[e] = t.id)
                    })
                }), l < 40 && (this.data.connections = {}, this.allCities().forEach(l => {
                    delete l.connected
                })), this.data.version = this.conf.version
            }
            getStrVersion() {
                switch (this.conf.version) {
                    case 1:
                        return "1.0.0";
                    case 2:
                        return "1.0.1";
                    case 3:
                        return "1.0.2";
                    case 4:
                        return "1.0.3";
                    case 5:
                        return "1.0.4";
                    case 6:
                        return "1.0.5";
                    case 7:
                        return "1.0.6";
                    case 8:
                        return "1.0.7";
                    case 9:
                        return "1.0.8";
                    case 10:
                        return "1.0.9";
                    case 11:
                        return "1.0.10";
                    case 12:
                        return "1.0.11";
                    case 13:
                        return "1.0.12";
                    case 14:
                        return "1.0.13";
                    case 15:
                        return "1.0.14";
                    case 16:
                        return "1.1.0";
                    case 17:
                        return "1.1.1";
                    case 18:
                        return "1.1.2";
                    case 19:
                        return "1.1.3";
                    case 20:
                        return "1.1.4";
                    case 21:
                        return "1.2.0";
                    case 22:
                        return "1.2.1";
                    case 23:
                        return "1.2.2";
                    case 24:
                        return "1.2.3";
                    case 25:
                        return "1.2.4";
                    case 26:
                        return "1.2.5";
                    case 27:
                        return "1.2.6";
                    case 28:
                        return "1.2.7";
                    case 29:
                        return "1.2.8";
                    case 30:
                        return "1.2.9";
                    case 31:
                        return "1.2.10";
                    case 32:
                        return "1.2.11";
                    case 33:
                        return "1.2.12";
                    case 34:
                        return "1.2.13";
                    case 35:
                        return "1.2.14";
                    case 36:
                        return "1.3.0";
                    case 37:
                        return "1.3.1";
                    case 38:
                        return "1.3.2";
                    case 39:
                        return "1.3.3";
                    case 40:
                        return "1.3.4";
                    case 41:
                        return "1.3.5";
                    case 42:
                        return "1.3.6";
                    case 43:
                        return "1.3.7";
                    default:
                        return "?"
                }
            }
        }
        return l.ngInjectableDef = gl({
            factory: function () {
                return new l(ql(_p), ql(Pg), ql(Tg), ql(Rg), ql(Bg))
            },
            token: l,
            providedIn: "root"
        }), l
    })(), $g = (() => {
        class l {
            constructor(l, n, e) {
                this.conf = l, this.data = n, this.dataService = e
            }
            encryptData(l = !0) {
                let n = JSON.parse(JSON.stringify(this.data));
                delete n.conf, delete n.observableSciences, delete n.spelltime, delete n.connections, delete n.citiespos, delete n.citiesids, [].concat(...n.players.map(l => l.cities)).forEach(l => {
                    delete l.happiness, delete l.tradeGains, delete l.cultureDiff
                }), this.data.autopause.save && (n.pause = !0);
                let e = JSON.stringify(n);
                return l && (e = "z|" + Object(Mg.gzip)(e, {
                    to: "string"
                })), Dg.AES.encrypt(e, this.conf.aes_key).toString()
            }
            decryptData(l) {
                let n = Dg.AES.decrypt(l.toString(), this.conf.aes_key).toString(Dg.enc.Utf8);
                return n.startsWith("z|") && (n = Object(Mg.ungzip)(n.substring(2), {
                    to: "string"
                })), JSON.parse(n)
            }
            save(l = !0) {
                try {
                    this.data.savetime = Date.now();
                    let n = new Og(this.data.name, Date.now(), this.dataService.era(), this.data.players[0].orientation <= 0 ? this.data.players[0].deity : "tech", this.data.rebirths, this.dataService.player().civ_id, this.encryptData(l));
                    return localStorage.setItem(this.conf.save.prefix + n.name, JSON.stringify(n)), !0
                } catch (n) {
                    return this.data.noautosave = !0, !1
                }
            }
            delete(l) {
                delete localStorage[this.conf.save.prefix + l]
            }
            extractSave(l) {
                return JSON.parse(localStorage.getItem(this.conf.save.prefix + l))
            }
            load(l) {
                this.data.load(this.decryptData(l)), delete this.data.noautosave, this.dataService.updateVersion(), this.dataService.cityCache(), this.dataService.checkLocks(), this.dataService.updateStats()
            }
        }
        return l.ngInjectableDef = gl({
            factory: function () {
                return new l(ql(Tg), ql(Pg), ql(zg))
            },
            token: l,
            providedIn: "root"
        }), l
    })();
    var Lg = st({
        encapsulation: 0,
        styles: [[".homepage[_ngcontent-%COMP%]{background-image:url(background.0a8e8fb2999222b3636e.jpg);background-size:cover;background-position-y:25%;box-shadow:inset 1em 1em 15em #000,inset -1em -1em 15em #000}.card-container[_ngcontent-%COMP%]{max-height:50vh}.flex-fill[_ngcontent-%COMP%]{height:auto!important}"]],
        data: {}
    });

    function Fg(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [["class", "bg-danger text-light my-2 p-2"]], null, null, null, null, null)), (l()(), _u(1, null, ["", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.component.error)
        }))
    }

    function qg(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 8, "div", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "button", [["class", "btn btn-dark btn-block"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.initNew() && t), t
        }), null, null)), (l()(), _u(-1, null, ["New game"])), (l()(), su(3, 0, null, null, 1, "button", [["class", "btn btn-dark btn-block"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.continue() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Continue"])), (l()(), su(5, 0, null, null, 1, "button", [["class", "btn btn-dark btn-block"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = 0 != (l.component.load = !0) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Load game"])), (l()(), su(7, 0, null, null, 1, "button", [["class", "btn btn-dark btn-block"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = 0 != (l.component.loadText = !0) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Load an exported save"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 3, 0, !e.saves.length), l(n, 5, 0, !e.saves.length)
        }))
    }

    function Ug(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 12, "div", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Paste your exported save here and click on the load button"])), (l()(), su(3, 0, null, null, 5, "textarea", [["class", "form-control mb-2 bg-dark text-light border-dark"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "input" === n && (t = !1 !== ei(l, 4)._handleInput(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 4).onTouched() && t), "compositionstart" === n && (t = !1 !== ei(l, 4)._compositionStart() && t), "compositionend" === n && (t = !1 !== ei(l, 4)._compositionEnd(e.target.value) && t), "ngModelChange" === n && (t = !1 !== (i.loadTextContent = e) && t), t
        }), null, null)), gi(4, 16384, null, 0, tf, [be, fe, [2, ef]], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [tf]), gi(6, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(8, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(9, 0, null, null, 1, "button", [["class", "btn btn-dark btn-block"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = 0 != (l.component.loadText = !1) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Cancel"])), (l()(), su(11, 0, null, null, 1, "button", [["class", "btn btn-dark btn-block"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.loadFromText() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Load"]))], (function (l, n) {
            l(n, 6, 0, n.component.loadTextContent)
        }), (function (l, n) {
            l(n, 3, 0, ei(n, 8).ngClassUntouched, ei(n, 8).ngClassTouched, ei(n, 8).ngClassPristine, ei(n, 8).ngClassDirty, ei(n, 8).ngClassValid, ei(n, 8).ngClassInvalid, ei(n, 8).ngClassPending)
        }))
    }

    function Hg(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [["class", "bg-danger text-light font-weight-bold px-2 py-1 mb-1 rounded"]], null, null, null, null, null)), (l()(), _u(-1, null, [" A save with the same name already exists and will be overwritten if the same name is chosen. "]))], null, null)
    }

    function Vg(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "div", [], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.difficulty = l.context.$implicit.key) && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(2, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(3, {
            "bg-primary": 0,
            "bg-dark": 1,
            "flex-fill text-light card card-body cursor-pointer m-2 p-2 text-90": 2
        }), (l()(), su(4, 0, null, null, 1, "b", [["class", "text-center"]], null, null, null, null, null)), (l()(), _u(5, null, ["", ""])), (l()(), su(6, 0, null, null, 0, "p", [], [[8, "innerHTML", 1]], null, null, null, null))], (function (l, n) {
            var e = n.component,
                t = l(n, 3, 0, e.difficulty == n.context.$implicit.key, e.difficulty != n.context.$implicit.key, !0);
            l(n, 2, 0, t)
        }), (function (l, n) {
            l(n, 5, 0, n.context.$implicit.value.name), l(n, 6, 0, n.context.$implicit.value.description)
        }))
    }

    function jg(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 18, "div", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Hg)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(3, 0, null, null, 7, "input", [["autofocus", ""], ["class", "form-control"], ["placeholder", "Name"], ["required", ""], ["type", "text"]], [[1, "required", 0], [2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "input" === n && (t = !1 !== ei(l, 4)._handleInput(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 4).onTouched() && t), "compositionstart" === n && (t = !1 !== ei(l, 4)._compositionStart() && t), "compositionend" === n && (t = !1 !== ei(l, 4)._compositionEnd(e.target.value) && t), "ngModelChange" === n && (t = !1 !== (i.name = e) && t), t
        }), null, null)), gi(4, 16384, null, 0, tf, [be, fe, [2, ef]], null, null), gi(5, 16384, null, 0, ng, [], {
            required: [0, "required"]
        }, null), yi(1024, null, hf, (function (l) {
            return [l]
        }), [ng]), yi(1024, null, lf, (function (l) {
            return [l]
        }), [tf]), gi(8, 671744, null, 0, lg, [[8, null], [6, hf], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(10, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(11, 0, null, null, 3, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, Vg)), gi(13, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne]), (l()(), su(15, 0, null, null, 1, "button", [["class", "btn btn-secondary w-50"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = 0 != (l.component.new = !1) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Cancel"])), (l()(), su(17, 0, null, null, 1, "button", [["class", "btn btn-dark w-50"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = 0 != (l.component.step2 = !0) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Next"]))], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.warning()), l(n, 5, 0, ""), l(n, 8, 0, e.name), l(n, 13, 0, et(n, 13, 0, ei(n, 14).transform(e.conf.difficulties)))
        }), (function (l, n) {
            var e = n.component;
            l(n, 3, 0, ei(n, 5).required ? "" : null, ei(n, 10).ngClassUntouched, ei(n, 10).ngClassTouched, ei(n, 10).ngClassPristine, ei(n, 10).ngClassDirty, ei(n, 10).ngClassValid, ei(n, 10).ngClassInvalid, ei(n, 10).ngClassPending), l(n, 17, 0, !e.name)
        }))
    }

    function Gg(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 7, "div", [], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.civid = l.context.$implicit.key) && t), t
        }), null, null)), (l()(), su(1, 0, null, null, 6, "div", [], null, null, null, null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(3, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(4, {
            "border-bottom cursor-pointer p-1": 0,
            "bg-primary": 1
        }), (l()(), su(5, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(6, null, ["", ""])), (l()(), su(7, 0, null, null, 0, "div", [], [[8, "innerHTML", 1]], null, null, null, null))], (function (l, n) {
            var e = l(n, 4, 0, !0, n.component.civid == n.context.$implicit.key);
            l(n, 3, 0, e)
        }), (function (l, n) {
            l(n, 6, 0, n.context.$implicit.value.name), l(n, 7, 0, n.context.$implicit.value.description)
        }))
    }

    function Wg(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 10, "div", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "h4", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Choose your civilization"])), (l()(), su(3, 0, null, null, 3, "div", [["class", "overflow-auto d-flex flex-column bg-dark text-light border rounded mb-1"], ["style", "max-height: 250px;"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, Gg)), gi(5, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne]), (l()(), su(7, 0, null, null, 1, "button", [["class", "btn btn-secondary w-50"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = 0 != (l.component.new = !1) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Back"])), (l()(), su(9, 0, null, null, 1, "button", [["class", "btn btn-dark w-50"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.newGame() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Start"]))], (function (l, n) {
            var e = n.component;
            l(n, 5, 0, et(n, 5, 0, ei(n, 6).transform(e.conf.civilizations)))
        }), (function (l, n) {
            l(n, 9, 0, !n.component.civid)
        }))
    }

    function Kg(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [["class", "text-90"]], null, null, null, null, null)), (l()(), _u(1, null, [" - ", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.component.conf.civilizations[n.parent.context.$implicit.civ].name)
        }))
    }

    function Zg(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "card-text"]], null, null, null, null, null)), (l()(), _u(1, null, [" Deity: ", " "])), (l()(), su(2, 0, null, null, 3, "i", [], [[8, "className", 0]], null, null, null, null)), yi(512, null, Oa, Na, [fe, Ne, be]), gi(4, 278528, null, 0, Ba, [Oa], {
            ngStyle: [0, "ngStyle"]
        }, null), vu(5, {
            color: 0
        })], (function (l, n) {
            var e = l(n, 5, 0, n.component.conf.deities[n.parent.context.$implicit.deity].color);
            l(n, 4, 0, e)
        }), (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.conf.deities[n.parent.context.$implicit.deity].name), l(n, 2, 0, e.conf.deities[n.parent.context.$implicit.deity].icon)
        }))
    }

    function Qg(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [["class", "card-text"]], null, null, null, null, null)), (l()(), _u(-1, null, [" Orientation: "])), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 2, 0, n.component.icons.tech + " text-tech")
        }))
    }

    function Yg(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [["class", "card-text"]], null, null, null, null, null)), (l()(), _u(1, null, ["Reincarnations: ", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.parent.context.$implicit.rebirths)
        }))
    }

    function Xg(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 24, "div", [["class", "card cursor-pointer border-0 my-1"], ["hover-class", "bg-dark text-light"]], null, [[null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0;
            return "mouseenter" === n && (t = !1 !== ei(l, 1).onMouseEnter() && t), "mouseleave" === n && (t = !1 !== ei(l, 1).onMouseLeave() && t), t
        }), null, null)), gi(1, 16384, null, 0, sg, [fe], {
            hoverClass: [0, "hoverClass"]
        }, null), (l()(), su(2, 0, null, null, 22, "div", [["class", "d-flex align-items-stretch"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 1, "div", [["class", "text-300 text-light bg-dark d-flex align-items-center px-3"]], null, null, null, null, null)), (l()(), su(4, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(5, 0, null, null, 19, "div", [["class", "card-body d-flex flex-fill align-items-center"]], null, null, null, null, null)), (l()(), su(6, 0, null, null, 15, "div", [["class", "flex-fill"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.loadSave(l.context.$implicit) && t), t
        }), null, null)), (l()(), su(7, 0, null, null, 3, "h5", [["class", "card-title"]], null, null, null, null, null)), (l()(), _u(8, null, ["", " "])), (l()(), iu(16777216, null, null, 1, null, Kg)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(11, 0, null, null, 2, "h6", [["class", "card-subtitle mb-2 text-muted"]], null, null, null, null, null)), (l()(), _u(12, null, ["", ""])), yu(13, 2), (l()(), su(14, 0, null, null, 1, "div", [["class", "card-text"]], null, null, null, null, null)), (l()(), _u(15, null, ["Era: ", ""])), (l()(), iu(16777216, null, null, 1, null, Zg)), gi(17, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Qg)), gi(19, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Yg)), gi(21, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(22, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(23, 0, null, null, 1, "button", [["class", "btn btn-danger"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.delete(l.context.$implicit) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Delete"]))], (function (l, n) {
            l(n, 1, 0, "bg-dark text-light"), l(n, 10, 0, n.context.$implicit.civ), l(n, 17, 0, n.context.$implicit.deity && "tech" != n.context.$implicit.deity), l(n, 19, 0, n.context.$implicit.deity && "tech" == n.context.$implicit.deity), l(n, 21, 0, n.context.$implicit.rebirths)
        }), (function (l, n) {
            var e = n.component;
            l(n, 4, 0, e.icons.save), l(n, 8, 0, n.context.$implicit.name);
            var t = et(n, 12, 0, l(n, 13, 0, ei(n.parent.parent, 0), n.context.$implicit.date, "dd/MM/yyyy HH:mm"));
            l(n, 12, 0, t), l(n, 15, 0, e.conf.eras[n.context.$implicit.era].name)
        }))
    }

    function Jg(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "div", [["class", "card-container overflow-auto"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Xg)), gi(3, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(4, 0, null, null, 1, "button", [["class", "btn btn-dark btn-block"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = 0 != (l.component.load = !1) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Cancel"]))], (function (l, n) {
            l(n, 3, 0, n.component.saves)
        }), null)
    }

    function lm(l) {
        return ku(0, [mi(0, $a, [Ji]), (l()(), su(1, 0, null, null, 19, "div", [["class", "homepage d-flex justify-content-center align-items-center vh-100"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 16, "div", [], null, null, null, null, null)), (l()(), su(3, 0, null, null, 3, "h1", [["class", "display-1 font-weight-bold"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Cividlization II "])), (l()(), su(5, 0, null, null, 1, "div", [["class", "text-muted text-center mb-2"], ["style", "margin-top:-20px;font-size:40%"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Industrial Revolution Update"])), (l()(), iu(16777216, null, null, 1, null, Fg)), gi(8, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, qg)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Ug)), gi(12, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, jg)), gi(14, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Wg)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Jg)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(19, 0, null, null, 1, "div", [["class", "position-absolute text-secondary"], ["style", "bottom:5px;right:5px"]], null, null, null, null, null)), (l()(), _u(20, null, ["Version: ", " "]))], (function (l, n) {
            var e = n.component;
            l(n, 8, 0, e.error), l(n, 10, 0, !e.load && !e.new && !e.loadText), l(n, 12, 0, e.loadText), l(n, 14, 0, e.new && !e.step2), l(n, 16, 0, e.new && e.step2), l(n, 18, 0, e.load)
        }), (function (l, n) {
            l(n, 20, 0, n.component.dataService.getStrVersion())
        }))
    }

    function nm(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-home", [], null, null, null, lm, Lg)), gi(1, 114688, null, 0, rg, [Tg, Pg, _p, $g, Bg, zg], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var em = jt("app-home", rg, nm, {}, {}, []); class tm extends h {
        constructor(l, n) {
            super()
        }
        schedule(l, n = 0) {
            return this
        }
    }
    class im extends tm {
        constructor(l, n) {
            super(l, n), this.scheduler = l, this.work = n, this.pending = !1
        }
        schedule(l, n = 0) {
            if (this.closed) return this;
            this.state = l;
            const e = this.id,
                t = this.scheduler;
            return null != e && (this.id = this.recycleAsyncId(t, e, n)), this.pending = !0, this.delay = n, this.id = this.id || this.requestAsyncId(t, this.id, n), this
        }
        requestAsyncId(l, n, e = 0) {
            return setInterval(l.flush.bind(l, this), e)
        }
        recycleAsyncId(l, n, e = 0) {
            if (null !== e && this.delay === e && !1 === this.pending) return n;
            clearInterval(n)
        }
        execute(l, n) {
            if (this.closed) return new Error("executing a cancelled action");
            this.pending = !1;
            const e = this._execute(l, n);
            if (e) return e;
            !1 === this.pending && null != this.id && (this.id = this.recycleAsyncId(this.scheduler, this.id, null))
        }
        _execute(l, n) {
            let e = !1,
                t = void 0;
            try {
                this.work(l)
            } catch (i) {
                e = !0, t = !!i && i || new Error(i)
            }
            if (e) return this.unsubscribe(), t
        }
        _unsubscribe() {
            const l = this.id,
                n = this.scheduler,
                e = n.actions,
                t = e.indexOf(this);
            this.work = null, this.state = null, this.pending = !1, this.scheduler = null, -1 !== t && e.splice(t, 1), null != l && (this.id = this.recycleAsyncId(n, l, null)), this.delay = null
        }
    }
    let sm = (() => {
        class l {
            constructor(n, e = l.now) {
                this.SchedulerAction = n, this.now = e
            }
            schedule(l, n = 0, e) {
                return new this.SchedulerAction(this, l).schedule(e, n)
            }
        }
        return l.now = () => Date.now(), l
    })(); class um extends sm {
        constructor(l, n = sm.now) {
            super(l, () => um.delegate && um.delegate !== this ? um.delegate.now() : n()), this.actions = [], this.active = !1, this.scheduled = void 0
        }
        schedule(l, n = 0, e) {
            return um.delegate && um.delegate !== this ? um.delegate.schedule(l, n, e) : super.schedule(l, n, e)
        }
        flush(l) {
            const {
                actions: n
            } = this;
            if (this.active) return void n.push(l);
            let e;
            this.active = !0;
            do {
                if (e = l.execute(l.state, l.delay)) break
            } while (l = n.shift());
            if (this.active = !1, e) {
                for (; l = n.shift();) l.unsubscribe();
                throw e
            }
        }
    }
    const rm = new um(im);

    function am(l) {
        return !a(l) && l - parseFloat(l) + 1 >= 0
    }

    function om(l = 0, n, e) {
        let t = -1;
        return am(n) ? t = Number(n) < 1 ? 1 : Number(n) : A(n) && (e = n), A(e) || (e = rm), new w(n => {
            const i = am(l) ? l : +l - e.now();
            return e.schedule(cm, i, {
                index: 0,
                period: t,
                subscriber: n
            })
        })
    }

    function cm(l) {
        const {
            index: n,
            period: e,
            subscriber: t
        } = l;
        if (t.next(n), !t.closed) {
            if (-1 === e) return t.complete();
            l.index = n + 1, this.schedule(l, e)
        }
    }

    function dm(l, n, e, i) {
        return t(e) && (i = e, e = void 0), i ? dm(l, n, e).pipe(U(l => a(l) ? i(...l) : i(l))) : new w(t => {
            ! function l(n, e, t, i, s) {
                let u;
                if (function (l) {
                        return l && "function" == typeof l.addEventListener && "function" == typeof l.removeEventListener
                    }(n)) {
                    const l = n;
                    n.addEventListener(e, t, s), u = () => l.removeEventListener(e, t, s)
                } else if (function (l) {
                        return l && "function" == typeof l.on && "function" == typeof l.off
                    }(n)) {
                    const l = n;
                    n.on(e, t), u = () => l.off(e, t)
                } else if (function (l) {
                        return l && "function" == typeof l.addListener && "function" == typeof l.removeListener
                    }(n)) {
                    const l = n;
                    n.addListener(e, t), u = () => l.removeListener(e, t)
                } else {
                    if (!n || !n.length) throw new TypeError("Invalid event target");
                    for (let u = 0, r = n.length; u < r; u++) l(n[u], e, t, i, s)
                }
                i.add(u)
            }(l, n, (function (l) {
                t.next(arguments.length > 1 ? Array.prototype.slice.call(arguments) : l)
            }), t, e)
        })
    }
    class hm {
        call(l, n) {
            return n.subscribe(new pm(l))
        }
    }
    class pm extends q {
        constructor(l) {
            super(l), this.hasFirst = !1, this.observables = [], this.subscriptions = []
        }
        _next(l) {
            this.observables.push(l)
        }
        _complete() {
            const l = this.observables,
                n = l.length;
            if (0 === n) this.destination.complete();
            else {
                for (let e = 0; e < n && !this.hasFirst; e++) {
                    let n = l[e],
                        t = F(this, n, n, e);
                    this.subscriptions && this.subscriptions.push(t), this.add(t)
                }
                this.observables = null
            }
        }
        notifyNext(l, n, e, t, i) {
            if (!this.hasFirst) {
                this.hasFirst = !0;
                for (let l = 0; l < this.subscriptions.length; l++)
                    if (l !== e) {
                        let n = this.subscriptions[l];
                        n.unsubscribe(), this.remove(n)
                    } this.subscriptions = null
            }
            this.destination.next(n)
        }
    }

    function fm(l) {
        return n => n.lift(new gm(l))
    }
    class gm {
        constructor(l) {
            this.notifier = l
        }
        call(l, n) {
            const e = new mm(l),
                t = F(e, this.notifier);
            return t && !e.seenValue ? (e.add(t), n.subscribe(e)) : e
        }
    }
    class mm extends q {
        constructor(l) {
            super(l), this.seenValue = !1
        }
        notifyNext(l, n, e, t, i) {
            this.seenValue = !0, this.complete()
        }
        notifyComplete() {}
    }

    function ym(...l) {
        return n => {
            let e;
            return "function" == typeof l[l.length - 1] && (e = l.pop()), n.lift(new vm(l, e))
        }
    }
    class vm {
        constructor(l, n) {
            this.observables = l, this.project = n
        }
        call(l, n) {
            return n.subscribe(new bm(l, this.observables, this.project))
        }
    }
    class bm extends q {
        constructor(l, n, e) {
            super(l), this.observables = n, this.project = e, this.toRespond = [];
            const t = n.length;
            this.values = new Array(t);
            for (let i = 0; i < t; i++) this.toRespond.push(i);
            for (let i = 0; i < t; i++) {
                let l = n[i];
                this.add(F(this, l, l, i))
            }
        }
        notifyNext(l, n, e, t, i) {
            this.values[e] = n;
            const s = this.toRespond;
            if (s.length > 0) {
                const l = s.indexOf(e); - 1 !== l && s.splice(l, 1)
            }
        }
        notifyComplete() {}
        _next(l) {
            if (0 === this.toRespond.length) {
                const n = [l, ...this.values];
                this.project ? this._tryProject(n) : this.destination.next(n)
            }
        }
        _tryProject(l) {
            let n;
            try {
                n = this.project.apply(this, l)
            } catch (e) {
                return void this.destination.error(e)
            }
            this.destination.next(n)
        }
    }
    let _m = (() => {
        class l {
            constructor(l, n, e) {
                this.kind = l, this.value = n, this.error = e, this.hasValue = "N" === l
            }
            observe(l) {
                switch (this.kind) {
                    case "N":
                        return l.next && l.next(this.value);
                    case "E":
                        return l.error && l.error(this.error);
                    case "C":
                        return l.complete && l.complete()
                }
            }
            do(l, n, e) {
                switch (this.kind) {
                    case "N":
                        return l && l(this.value);
                    case "E":
                        return n && n(this.error);
                    case "C":
                        return e && e()
                }
            }
            accept(l, n, e) {
                return l && "function" == typeof l.next ? this.observe(l) : this.do(l, n, e)
            }
            toObservable() {
                switch (this.kind) {
                    case "N":
                        return Za(this.value);
                    case "E":
                        return l = this.error, new w(n => n.error(l));
                    case "C":
                        return Wa()
                }
                var l;
                throw new Error("unexpected notification kind value")
            }
            static
            createNext(n) {
                return void 0 !== n ? new l("N", n) : l.undefinedValueNotification
            }
            static createError(n) {
                return new l("E", void 0, n)
            }
            static createComplete() {
                return l.completeNotification
            }
        }
        return l.completeNotification = new l("C"), l.undefinedValueNotification = new l("N", void 0), l
    })();

    function wm(l, n = rm) {
        var e;
        const t = (e = l) instanceof Date && !isNaN(+e) ? +l - n.now() : Math.abs(l);
        return l => l.lift(new xm(t, n))
    }
    class xm {
        constructor(l, n) {
            this.delay = l, this.scheduler = n
        }
        call(l, n) {
            return n.subscribe(new km(l, this.delay, this.scheduler))
        }
    }
    class km extends g {
        constructor(l, n, e) {
            super(l), this.delay = n, this.scheduler = e, this.queue = [], this.active = !1, this.errored = !1
        }
        static dispatch(l) {
            const n = l.source,
                e = n.queue,
                t = l.scheduler,
                i = l.destination;
            for (; e.length > 0 && e[0].time - t.now() <= 0;) e.shift().notification.observe(i);
            if (e.length > 0) {
                const n = Math.max(0, e[0].time - t.now());
                this.schedule(l, n)
            } else this.unsubscribe(), n.active = !1
        }
        _schedule(l) {
            this.active = !0, this.destination.add(l.schedule(km.dispatch, this.delay, {
                source: this,
                destination: this.destination,
                scheduler: l
            }))
        }
        scheduleNotification(l) {
            if (!0 === this.errored) return;
            const n = this.scheduler,
                e = new Sm(n.now() + this.delay, l);
            this.queue.push(e), !1 === this.active && this._schedule(n)
        }
        _next(l) {
            this.scheduleNotification(_m.createNext(l))
        }
        _error(l) {
            this.errored = !0, this.queue = [], this.destination.error(l), this.unsubscribe()
        }
        _complete() {
            this.scheduleNotification(_m.createComplete()), this.unsubscribe()
        }
    }
    class Sm {
        constructor(l, n) {
            this.time = l, this.notification = n
        }
    }

    function Cm(l) {
        return parseInt(`${l}`, 10)
    }

    function Im(l) {
        return null != l ? `${l}` : ""
    }

    function Tm(l) {
        return "number" == typeof l && isFinite(l) && Math.floor(l) === l
    }

    function Em(l) {
        return null != l
    }

    function Am(l, n) {
        return l && l.className && l.className.split && l.className.split(/\s+/).indexOf(n) >= 0
    }
    "undefined" == typeof Element || Element.prototype.closest || (Element.prototype.matches || (Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector), Element.prototype.closest = function (l) {
        let n = this;
        if (!document.documentElement.contains(n)) return null;
        do {
            if (n.matches(l)) return n;
            n = n.parentElement || n.parentNode
        } while (null !== n && 1 === n.nodeType);
        return null
    }); class Pm {}
    let Dm = (() => {
        class l {
            constructor() {
                this.dismissible = !0, this.type = "warning"
            }
        }
        return l.ngInjectableDef = gl({
            factory: function () {
                return new l
            },
            token: l,
            providedIn: "root"
        }), l
    })(); class Mm {
        constructor(l, n, e) {
            this._renderer = n, this._element = e, this.close = new qi, this.dismissible = l.dismissible, this.type = l.type
        }
        closeHandler() {
            this.close.emit(null)
        }
        ngOnChanges(l) {
            const n = l.type;
            n && !n.firstChange && (this._renderer.removeClass(this._element.nativeElement, `alert-${n.previousValue}`), this._renderer.addClass(this._element.nativeElement, `alert-${n.currentValue}`))
        }
        ngOnInit() {
            this._renderer.addClass(this._element.nativeElement, `alert-${this.type}`)
        }
    }
    class Om {}
    class Nm {}
    class Rm {}
    class Bm {}
    class zm {
        static from(l) {
            return l instanceof zm ? l : l ? new zm(l.year, l.month, l.day) : null
        }
        constructor(l, n, e) {
            this.year = Tm(l) ? l : null, this.month = Tm(n) ? n : null, this.day = Tm(e) ? e : null
        }
        equals(l) {
            return l && this.year === l.year && this.month === l.month && this.day === l.day
        }
        before(l) {
            return !!l && (this.year === l.year ? this.month === l.month ? this.day !== l.day && this.day < l.day : this.month < l.month : this.year < l.year)
        }
        after(l) {
            return !!l && (this.year === l.year ? this.month === l.month ? this.day !== l.day && this.day > l.day : this.month > l.month : this.year > l.year)
        }
    }

    function $m(l) {
        return new zm(l.getFullYear(), l.getMonth() + 1, l.getDate())
    }

    function Lm(l) {
        const n = new Date(l.year, l.month - 1, l.day, 12);
        return isNaN(n.getTime()) || n.setFullYear(l.year), n
    }

    function Fm() {
        return new Um
    }
    let qm = (() => {
        class l {}
        return l.ngInjectableDef = gl({
            factory: Fm,
            token: l,
            providedIn: "root"
        }), l
    })(); class Um extends qm {
        getDaysPerWeek() {
            return 7
        }
        getMonths() {
            return [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
        }
        getWeeksPerMonth() {
            return 6
        }
        getNext(l, n = "d", e = 1) {
            let t = Lm(l),
                i = !0,
                s = t.getMonth();
            switch (n) {
                case "y":
                    t.setFullYear(t.getFullYear() + e);
                    break;
                case "m":
                    t.setMonth(s += e), (s %= 12) < 0 && (s += 12);
                    break;
                case "d":
                    t.setDate(t.getDate() + e), i = !1;
                    break;
                default:
                    return l
            }
            return i && t.getMonth() !== s && t.setDate(0), $m(t)
        }
        getPrev(l, n = "d", e = 1) {
            return this.getNext(l, n, -e)
        }
        getWeekday(l) {
            let n = Lm(l).getDay();
            return 0 === n ? 7 : n
        }
        getWeekNumber(l, n) {
            7 === n && (n = 0);
            const e = Lm(l[(11 - n) % 7]);
            e.setDate(e.getDate() + 4 - (e.getDay() || 7));
            const t = e.getTime();
            return e.setMonth(0), e.setDate(1), Math.floor(Math.round((t - e.getTime()) / 864e5) / 7) + 1
        }
        getToday() {
            return $m(new Date)
        }
        isValid(l) {
            if (!(l && Tm(l.year) && Tm(l.month) && Tm(l.day))) return !1;
            if (0 === l.year) return !1;
            const n = Lm(l);
            return !isNaN(n.getTime()) && n.getFullYear() === l.year && n.getMonth() + 1 === l.month && n.getDate() === l.day
        }
    }

    function Hm(l, n) {
        return ! function (l, n) {
            return !l && !n || !!l && !!n && l.equals(n)
        }(l, n)
    }

    function Vm(l, n) {
        return !(!l && !n || l && n && l.year === n.year && l.month === n.month)
    }

    function jm(l, n, e) {
        return l && n && l.before(n) ? n : l && e && l.after(e) ? e : l
    }

    function Gm(l, n) {
        const {
            minDate: e,
            maxDate: t,
            disabled: i,
            markDisabled: s
        } = n;
        return !(!Em(l) || i || s && s(l, {
            year: l.year,
            month: l.month
        }) || e && l.before(e) || t && l.after(t))
    }
    let Wm = (() => {
        class l {
            getDayNumerals(l) {
                return `${l.day}`
            }
            getWeekNumerals(l) {
                return `${l}`
            }
            getYearNumerals(l) {
                return `${l}`
            }
        }
        return l.ngInjectableDef = gl({
            factory: function () {
                return l = ql(Ji), new Km(l);
                var l
            },
            token: l,
            providedIn: "root"
        }), l
    })(); class Km extends Wm {
        constructor(l) {
            super(), this._locale = l;
            const n = Gr(l, Ur.Standalone, Hr.Short);
            this._weekdaysShort = n.map((l, e) => n[(e + 1) % 7]), this._monthsShort = Wr(l, Ur.Standalone, Hr.Abbreviated), this._monthsFull = Wr(l, Ur.Standalone, Hr.Wide)
        }
        getWeekdayShortName(l) {
            return this._weekdaysShort[l - 1]
        }
        getMonthShortName(l) {
            return this._monthsShort[l - 1]
        }
        getMonthFullName(l) {
            return this._monthsFull[l - 1]
        }
        getDayAriaLabel(l) {
            return aa(new Date(l.year, l.month - 1, l.day), "fullDate", this._locale)
        }
    }
    class Zm {
        constructor(l, n) {
            this._calendar = l, this._i18n = n, this._model$ = new T, this._select$ = new T, this._state = {
                disabled: !1,
                displayMonths: 1,
                firstDayOfWeek: 1,
                focusVisible: !1,
                months: [],
                navigation: "select",
                outsideDays: "visible",
                prevDisabled: !1,
                nextDisabled: !1,
                selectBoxes: {
                    years: [],
                    months: []
                },
                selectedDate: null
            }
        }
        get model$() {
            return this._model$.pipe(io(l => l.months.length > 0))
        }
        get select$() {
            return this._select$.pipe(io(l => null !== l))
        }
        set dayTemplateData(l) {
            this._state.dayTemplateData !== l && this._nextState({
                dayTemplateData: l
            })
        }
        set disabled(l) {
            this._state.disabled !== l && this._nextState({
                disabled: l
            })
        }
        set displayMonths(l) {
            Tm(l = Cm(l)) && l > 0 && this._state.displayMonths !== l && this._nextState({
                displayMonths: l
            })
        }
        set firstDayOfWeek(l) {
            Tm(l = Cm(l)) && l >= 0 && this._state.firstDayOfWeek !== l && this._nextState({
                firstDayOfWeek: l
            })
        }
        set focusVisible(l) {
            this._state.focusVisible === l || this._state.disabled || this._nextState({
                focusVisible: l
            })
        }
        set maxDate(l) {
            const n = this.toValidDate(l, null);
            Hm(this._state.maxDate, n) && this._nextState({
                maxDate: n
            })
        }
        set markDisabled(l) {
            this._state.markDisabled !== l && this._nextState({
                markDisabled: l
            })
        }
        set minDate(l) {
            const n = this.toValidDate(l, null);
            Hm(this._state.minDate, n) && this._nextState({
                minDate: n
            })
        }
        set navigation(l) {
            this._state.navigation !== l && this._nextState({
                navigation: l
            })
        }
        set outsideDays(l) {
            this._state.outsideDays !== l && this._nextState({
                outsideDays: l
            })
        }
        focus(l) {
            !this._state.disabled && this._calendar.isValid(l) && Hm(this._state.focusDate, l) && this._nextState({
                focusDate: l
            })
        }
        focusMove(l, n) {
            this.focus(this._calendar.getNext(this._state.focusDate, l, n))
        }
        focusSelect() {
            Gm(this._state.focusDate, this._state) && this.select(this._state.focusDate, {
                emitEvent: !0
            })
        }
        open(l) {
            const n = this.toValidDate(l, this._calendar.getToday());
            this._state.disabled || this._state.firstDate && !Vm(this._state.firstDate, l) || this._nextState({
                firstDate: n
            })
        }
        select(l, n = {}) {
            const e = this.toValidDate(l, null);
            this._state.disabled || (Hm(this._state.selectedDate, e) && this._nextState({
                selectedDate: e
            }), n.emitEvent && Gm(e, this._state) && this._select$.next(e))
        }
        toValidDate(l, n) {
            const e = zm.from(l);
            return void 0 === n && (n = this._calendar.getToday()), this._calendar.isValid(e) ? e : n
        }
        _nextState(l) {
            const n = this._updateState(l);
            this._patchContexts(n), this._state = n, this._model$.next(this._state)
        }
        _patchContexts(l) {
            const {
                months: n,
                displayMonths: e,
                selectedDate: t,
                focusDate: i,
                focusVisible: s,
                disabled: u,
                outsideDays: r
            } = l;
            l.months.forEach(l => {
                l.weeks.forEach(a => {
                    a.days.forEach(a => {
                        i && (a.context.focused = i.equals(a.date) && s), a.tabindex = !u && a.date.equals(i) && i.month === l.number ? 0 : -1, !0 === u && (a.context.disabled = !0), void 0 !== t && (a.context.selected = null !== t && t.equals(a.date)), l.number !== a.date.month && (a.hidden = "hidden" === r || "collapsed" === r || e > 1 && a.date.after(n[0].firstDate) && a.date.before(n[e - 1].lastDate))
                    })
                })
            })
        }
        _updateState(l) {
            const n = Object.assign({}, this._state, l);
            let e = n.firstDate;
            if (("minDate" in l || "maxDate" in l) && (function (l, n) {
                    if (n && l && n.before(l)) throw new Error(`'maxDate' ${n} should be greater than 'minDate' ${l}`)
                }(n.minDate, n.maxDate), n.focusDate = jm(n.focusDate, n.minDate, n.maxDate), n.firstDate = jm(n.firstDate, n.minDate, n.maxDate), e = n.focusDate), "disabled" in l && (n.focusVisible = !1), "selectedDate" in l && 0 === this._state.months.length && (e = n.selectedDate), "focusVisible" in l) return n;
            if ("focusDate" in l && (n.focusDate = jm(n.focusDate, n.minDate, n.maxDate), e = n.focusDate, 0 !== n.months.length && !n.focusDate.before(n.firstDate) && !n.focusDate.after(n.lastDate))) return n;
            if ("firstDate" in l && (n.firstDate = jm(n.firstDate, n.minDate, n.maxDate), e = n.firstDate), e) {
                const t = function (l, n, e, t, i) {
                    const {
                        displayMonths: s,
                        months: u
                    } = e, r = u.splice(0, u.length);
                    return Array.from({
                        length: s
                    }, (e, t) => {
                        const s = Object.assign(l.getNext(n, "m", t), {
                            day: 1
                        });
                        if (u[t] = null, !i) {
                            const l = r.findIndex(l => l.firstDate.equals(s)); - 1 !== l && (u[t] = r.splice(l, 1)[0])
                        }
                        return s
                    }).forEach((n, i) => {
                        null === u[i] && (u[i] = function (l, n, e, t, i = {}) {
                            const {
                                dayTemplateData: s,
                                minDate: u,
                                maxDate: r,
                                firstDayOfWeek: a,
                                markDisabled: o,
                                outsideDays: c
                            } = e, d = l.getToday();
                            i.firstDate = null, i.lastDate = null, i.number = n.month, i.year = n.year, i.weeks = i.weeks || [], i.weekdays = i.weekdays || [], n = function (l, n, e) {
                                const t = l.getDaysPerWeek(),
                                    i = new zm(n.year, n.month, 1),
                                    s = l.getWeekday(i) % t;
                                return l.getPrev(i, "d", (t + s - e) % t)
                            }(l, n, a);
                            for (let h = 0; h < l.getWeeksPerMonth(); h++) {
                                let e = i.weeks[h];
                                e || (e = i.weeks[h] = {
                                    number: 0,
                                    days: [],
                                    collapsed: !0
                                });
                                const p = e.days;
                                for (let a = 0; a < l.getDaysPerWeek(); a++) {
                                    0 === h && (i.weekdays[a] = l.getWeekday(n));
                                    const e = new zm(n.year, n.month, n.day),
                                        c = l.getNext(e),
                                        f = t.getDayAriaLabel(e);
                                    let g = !!(u && e.before(u) || r && e.after(r));
                                    !g && o && (g = o(e, {
                                        month: i.number,
                                        year: i.year
                                    }));
                                    let m = e.equals(d),
                                        y = s ? s(e, {
                                            month: i.number,
                                            year: i.year
                                        }) : void 0;
                                    null === i.firstDate && e.month === i.number && (i.firstDate = e), e.month === i.number && c.month !== i.number && (i.lastDate = e);
                                    let v = p[a];
                                    v || (v = p[a] = {}), v.date = e, v.context = Object.assign(v.context || {}, {
                                        $implicit: e,
                                        date: e,
                                        data: y,
                                        currentMonth: i.number,
                                        disabled: g,
                                        focused: !1,
                                        selected: !1,
                                        today: m
                                    }), v.tabindex = -1, v.ariaLabel = f, v.hidden = !1, n = c
                                }
                                e.number = l.getWeekNumber(p.map(l => l.date), a), e.collapsed = "collapsed" === c && p[0].date.month !== i.number && p[p.length - 1].date.month !== i.number
                            }
                            return i
                        }(l, n, e, t, r.shift() || {}))
                    }), u
                }(this._calendar, e, n, this._i18n, "dayTemplateData" in l || "firstDayOfWeek" in l || "markDisabled" in l || "minDate" in l || "maxDate" in l || "disabled" in l || "outsideDays" in l);
                n.months = t, n.firstDate = t.length > 0 ? t[0].firstDate : void 0, n.lastDate = t.length > 0 ? t[t.length - 1].lastDate : void 0, "selectedDate" in l && !Gm(n.selectedDate, n) && (n.selectedDate = null), "firstDate" in l && (void 0 === n.focusDate || n.focusDate.before(n.firstDate) || n.focusDate.after(n.lastDate)) && (n.focusDate = e);
                const i = !this._state.firstDate || this._state.firstDate.year !== n.firstDate.year,
                    s = !this._state.firstDate || this._state.firstDate.month !== n.firstDate.month;
                "select" === n.navigation ? (("minDate" in l || "maxDate" in l || 0 === n.selectBoxes.years.length || i) && (n.selectBoxes.years = function (l, n, e) {
                    if (!l) return [];
                    const t = n ? Math.max(n.year, l.year - 500) : l.year - 10,
                        i = (e ? Math.min(e.year, l.year + 500) : l.year + 10) - t + 1,
                        s = Array(i);
                    for (let u = 0; u < i; u++) s[u] = t + u;
                    return s
                }(n.firstDate, n.minDate, n.maxDate)), ("minDate" in l || "maxDate" in l || 0 === n.selectBoxes.months.length || i) && (n.selectBoxes.months = function (l, n, e, t) {
                    if (!n) return [];
                    let i = l.getMonths(n.year);
                    if (e && n.year === e.year) {
                        const l = i.findIndex(l => l === e.month);
                        i = i.slice(l)
                    }
                    if (t && n.year === t.year) {
                        const l = i.findIndex(l => l === t.month);
                        i = i.slice(0, l + 1)
                    }
                    return i
                }(this._calendar, n.firstDate, n.minDate, n.maxDate))) : n.selectBoxes = {
                    years: [],
                    months: []
                }, "arrows" !== n.navigation && "select" !== n.navigation || !(s || i || "minDate" in l || "maxDate" in l || "disabled" in l) || (n.prevDisabled = n.disabled || function (l, n, e) {
                    const t = Object.assign(l.getPrev(n, "m"), {
                        day: 1
                    });
                    return e && (t.year === e.year && t.month < e.month || t.year < e.year && 1 === e.month)
                }(this._calendar, n.firstDate, n.minDate), n.nextDisabled = n.disabled || function (l, n, e) {
                    const t = Object.assign(l.getNext(n, "m"), {
                        day: 1
                    });
                    return e && t.after(e)
                }(this._calendar, n.lastDate, n.maxDate))
            }
            return n
        }
    }
    const Qm = function () {
        var l = {
            Tab: 9,
            Enter: 13,
            Escape: 27,
            Space: 32,
            PageUp: 33,
            PageDown: 34,
            End: 35,
            Home: 36,
            ArrowLeft: 37,
            ArrowUp: 38,
            ArrowRight: 39,
            ArrowDown: 40
        };
        return l[l.Tab] = "Tab", l[l.Enter] = "Enter", l[l.Escape] = "Escape", l[l.Space] = "Space", l[l.PageUp] = "PageUp", l[l.PageDown] = "PageDown", l[l.End] = "End", l[l.Home] = "Home", l[l.ArrowLeft] = "ArrowLeft", l[l.ArrowUp] = "ArrowUp", l[l.ArrowRight] = "ArrowRight", l[l.ArrowDown] = "ArrowDown", l
    }(); class Ym {
        constructor(l, n) {
            this._service = l, this._calendar = n, l.model$.subscribe(l => {
                this._minDate = l.minDate, this._maxDate = l.maxDate, this._firstViewDate = l.firstDate, this._lastViewDate = l.lastDate
            })
        }
        processKey(l) {
            switch (l.which) {
                case Qm.PageUp:
                    this._service.focusMove(l.shiftKey ? "y" : "m", -1);
                    break;
                case Qm.PageDown:
                    this._service.focusMove(l.shiftKey ? "y" : "m", 1);
                    break;
                case Qm.End:
                    this._service.focus(l.shiftKey ? this._maxDate : this._lastViewDate);
                    break;
                case Qm.Home:
                    this._service.focus(l.shiftKey ? this._minDate : this._firstViewDate);
                    break;
                case Qm.ArrowLeft:
                    this._service.focusMove("d", -1);
                    break;
                case Qm.ArrowUp:
                    this._service.focusMove("d", -this._calendar.getDaysPerWeek());
                    break;
                case Qm.ArrowRight:
                    this._service.focusMove("d", 1);
                    break;
                case Qm.ArrowDown:
                    this._service.focusMove("d", this._calendar.getDaysPerWeek());
                    break;
                case Qm.Enter:
                case Qm.Space:
                    this._service.focusSelect();
                    break;
                default:
                    return
            }
            l.preventDefault(), l.stopPropagation()
        }
    }
    const Xm = function () {
        var l = {
            PREV: 0,
            NEXT: 1
        };
        return l[l.PREV] = "PREV", l[l.NEXT] = "NEXT", l
    }();
    let Jm = (() => {
        class l {
            constructor() {
                this.displayMonths = 1, this.firstDayOfWeek = 1, this.navigation = "select", this.outsideDays = "visible", this.showWeekdays = !0, this.showWeekNumbers = !1
            }
        }
        return l.ngInjectableDef = gl({
            factory: function () {
                return new l
            },
            token: l,
            providedIn: "root"
        }), l
    })();

    function ly() {
        return new ey
    }
    let ny = (() => {
        class l {}
        return l.ngInjectableDef = gl({
            factory: ly,
            token: l,
            providedIn: "root"
        }), l
    })(); class ey extends ny {
        fromModel(l) {
            return l && Tm(l.year) && Tm(l.month) && Tm(l.day) ? {
                year: l.year,
                month: l.month,
                day: l.day
            } : null
        }
        toModel(l) {
            return l && Tm(l.year) && Tm(l.month) && Tm(l.day) ? {
                year: l.year,
                month: l.month,
                day: l.day
            } : null
        }
    }
    class ty {
        constructor(l, n, e, t, i, s, u, r, a) {
            this._keyMapService = l, this._service = n, this._calendar = e, this.i18n = t, this._cd = s, this._elementRef = u, this._ngbDateAdapter = r, this._ngZone = a, this._destroyed$ = new T, this.navigate = new qi, this.select = new qi, this.onChange = l => {}, this.onTouched = () => {}, ["dayTemplate", "dayTemplateData", "displayMonths", "firstDayOfWeek", "footerTemplate", "markDisabled", "minDate", "maxDate", "navigation", "outsideDays", "showWeekdays", "showWeekNumbers", "startDate"].forEach(l => this[l] = i[l]), n.select$.pipe(fm(this._destroyed$)).subscribe(l => {
                this.select.emit(l)
            }), n.model$.pipe(fm(this._destroyed$)).subscribe(l => {
                const n = l.firstDate,
                    e = this.model ? this.model.firstDate : null;
                let t = !1;
                if (!n.equals(e) && (this.navigate.emit({
                        current: e ? {
                            year: e.year,
                            month: e.month
                        } : null,
                        next: {
                            year: n.year,
                            month: n.month
                        },
                        preventDefault: () => t = !0
                    }), t && null !== e)) return void this._service.open(e);
                const i = l.selectedDate,
                    u = l.focusDate,
                    r = this.model ? this.model.focusDate : null;
                this.model = l, Hm(i, this._controlValue) && (this._controlValue = i, this.onTouched(), this.onChange(this._ngbDateAdapter.toModel(i))), Hm(u, r) && r && l.focusVisible && this.focus(), s.markForCheck()
            })
        }
        focus() {
            this._ngZone.onStable.asObservable().pipe(Co(1)).subscribe(() => {
                const l = this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');
                l && l.focus()
            })
        }
        navigateTo(l) {
            this._service.open(zm.from(l ? l.day ? l : Object.assign({}, l, {
                day: 1
            }) : null))
        }
        ngAfterViewInit() {
            this._ngZone.runOutsideAngular(() => {
                X(dm(this._monthsEl.nativeElement, "focusin"), dm(this._monthsEl.nativeElement, "focusout")).pipe(io(({
                    target: l,
                    relatedTarget: n
                }) => !(Am(l, "ngb-dp-day") && Am(n, "ngb-dp-day"))), fm(this._destroyed$)).subscribe(({
                    type: l
                }) => this._ngZone.run(() => this._service.focusVisible = "focusin" === l))
            })
        }
        ngOnDestroy() {
            this._destroyed$.next()
        }
        ngOnInit() {
            void 0 === this.model && (["dayTemplateData", "displayMonths", "markDisabled", "firstDayOfWeek", "navigation", "minDate", "maxDate", "outsideDays"].forEach(l => this._service[l] = this[l]), this.navigateTo(this.startDate))
        }
        ngOnChanges(l) {
            if (["dayTemplateData", "displayMonths", "markDisabled", "firstDayOfWeek", "navigation", "minDate", "maxDate", "outsideDays"].filter(n => n in l).forEach(l => this._service[l] = this[l]), "startDate" in l) {
                const {
                    currentValue: n,
                    previousValue: e
                } = l.startDate;
                Vm(e, n) && this.navigateTo(this.startDate)
            }
        }
        onDateSelect(l) {
            this._service.focus(l), this._service.select(l, {
                emitEvent: !0
            })
        }
        onKeyDown(l) {
            this._keyMapService.processKey(l)
        }
        onNavigateDateSelect(l) {
            this._service.open(l)
        }
        onNavigateEvent(l) {
            switch (l) {
                case Xm.PREV:
                    this._service.open(this._calendar.getPrev(this.model.firstDate, "m", 1));
                    break;
                case Xm.NEXT:
                    this._service.open(this._calendar.getNext(this.model.firstDate, "m", 1))
            }
        }
        registerOnChange(l) {
            this.onChange = l
        }
        registerOnTouched(l) {
            this.onTouched = l
        }
        setDisabledState(l) {
            this._service.disabled = l
        }
        writeValue(l) {
            this._controlValue = zm.from(this._ngbDateAdapter.fromModel(l)), this._service.select(this._controlValue)
        }
    }
    class iy {
        constructor(l) {
            this.i18n = l, this.select = new qi
        }
        doSelect(l) {
            l.context.disabled || l.hidden || this.select.emit(l.date)
        }
    }
    class sy {
        constructor(l) {
            this.i18n = l, this.navigation = Xm, this.months = [], this.navigate = new qi, this.select = new qi
        }
        onClickPrev(l) {
            l.currentTarget.focus(), this.navigate.emit(this.navigation.PREV)
        }
        onClickNext(l) {
            l.currentTarget.focus(), this.navigate.emit(this.navigation.NEXT)
        }
    }
    const uy = (l, n) => !!n && n.some(n => n.contains(l)), ry = (l, n) => !n || null != function (l, n) {
        return n ? l.closest(n) : null
    }(l, n);
    let ay = !1;
    "undefined" != typeof navigator && (ay = !!navigator.userAgent && /iPad|iPhone|iPod/.test(navigator.userAgent));
    const oy = l => ay ? () => setTimeout(() => l(), 100) : l;

    function cy(l, n, e, t, i, s, u, r) {
        e && l.runOutsideAngular(oy(() => {
            const o = dm(n, "keydown").pipe(fm(i), io(l => l.which === Qm.Escape), po(l => l.preventDefault())),
                c = dm(n, "mousedown").pipe(U(l => {
                    const n = l.target;
                    return 2 !== l.button && !uy(n, u) && ("inside" === e ? uy(n, s) && ry(n, r) : "outside" === e ? !uy(n, s) : ry(n, r) || !uy(n, s))
                }), fm(i));
            (function (...l) {
                if (1 === l.length) {
                    if (!a(l[0])) return l[0];
                    l = l[0]
                }
                return j(l, void 0).lift(new hm)
            })([o, dm(n, "mouseup").pipe(ym(c), io(([l, n]) => n), wm(0), fm(i))]).subscribe(() => l.run(t))
        }))
    }
    const dy = ["a[href]", "button:not([disabled])", 'input:not([disabled]):not([type="hidden"])', "select:not([disabled])", "textarea:not([disabled])", "[contenteditable]", '[tabindex]:not([tabindex="-1"])'].join(", ");

    function hy(l) {
        const n = Array.from(l.querySelectorAll(dy)).filter(l => -1 !== l.tabIndex);
        return [n[0], n[n.length - 1]]
    }
    const py = (l, n, e, t = !1) => {
        l.runOutsideAngular(() => {
            const l = dm(n, "focusin").pipe(fm(e), U(l => l.target));
            dm(n, "keydown").pipe(fm(e), io(l => l.which === Qm.Tab), ym(l)).subscribe(([l, e]) => {
                const [t, i] = hy(n);
                e !== t && e !== n || !l.shiftKey || (i.focus(), l.preventDefault()), e !== i || l.shiftKey || (t.focus(), l.preventDefault())
            }), t && dm(n, "click").pipe(fm(e), ym(l), U(l => l[1])).subscribe(l => l.focus())
        })
    }; class fy {
        getAllStyles(l) {
            return window.getComputedStyle(l)
        }
        getStyle(l, n) {
            return this.getAllStyles(l)[n]
        }
        isStaticPositioned(l) {
            return "static" === (this.getStyle(l, "position") || "static")
        }
        offsetParent(l) {
            let n = l.offsetParent || document.documentElement;
            for (; n && n !== document.documentElement && this.isStaticPositioned(n);) n = n.offsetParent;
            return n || document.documentElement
        }
        position(l, n = !0) {
            let e, t = {
                width: 0,
                height: 0,
                top: 0,
                bottom: 0,
                left: 0,
                right: 0
            };
            if ("fixed" === this.getStyle(l, "position")) e = {
                top: (e = l.getBoundingClientRect()).top,
                bottom: e.bottom,
                left: e.left,
                right: e.right,
                height: e.height,
                width: e.width
            };
            else {
                const n = this.offsetParent(l);
                e = this.offset(l, !1), n !== document.documentElement && (t = this.offset(n, !1)), t.top += n.clientTop, t.left += n.clientLeft
            }
            return e.top -= t.top, e.bottom -= t.top, e.left -= t.left, e.right -= t.left, n && (e.top = Math.round(e.top), e.bottom = Math.round(e.bottom), e.left = Math.round(e.left), e.right = Math.round(e.right)), e
        }
        offset(l, n = !0) {
            const e = l.getBoundingClientRect(),
                t = window.pageYOffset - document.documentElement.clientTop,
                i = window.pageXOffset - document.documentElement.clientLeft;
            let s = {
                height: e.height || l.offsetHeight,
                width: e.width || l.offsetWidth,
                top: e.top + t,
                bottom: e.bottom + t,
                left: e.left + i,
                right: e.right + i
            };
            return n && (s.height = Math.round(s.height), s.width = Math.round(s.width), s.top = Math.round(s.top), s.bottom = Math.round(s.bottom), s.left = Math.round(s.left), s.right = Math.round(s.right)), s
        }
        positionElements(l, n, e, t) {
            const [i = "top", s = "center"] = e.split("-"), u = t ? this.offset(l, !1) : this.position(l, !1), r = this.getAllStyles(n), a = parseFloat(r.marginTop), o = parseFloat(r.marginBottom), c = parseFloat(r.marginLeft), d = parseFloat(r.marginRight);
            let h = 0,
                p = 0;
            switch (i) {
                case "top":
                    h = u.top - (n.offsetHeight + a + o);
                    break;
                case "bottom":
                    h = u.top + u.height;
                    break;
                case "left":
                    p = u.left - (n.offsetWidth + c + d);
                    break;
                case "right":
                    p = u.left + u.width
            }
            switch (s) {
                case "top":
                    h = u.top;
                    break;
                case "bottom":
                    h = u.top + u.height - n.offsetHeight;
                    break;
                case "left":
                    p = u.left;
                    break;
                case "right":
                    p = u.left + u.width - n.offsetWidth;
                    break;
                case "center":
                    "top" === i || "bottom" === i ? p = u.left + u.width / 2 - n.offsetWidth / 2 : h = u.top + u.height / 2 - n.offsetHeight / 2
            }
            n.style.transform = `translate(${Math.round(p)}px, ${Math.round(h)}px)`;
            const f = n.getBoundingClientRect(),
                g = document.documentElement,
                m = window.innerHeight || g.clientHeight,
                y = window.innerWidth || g.clientWidth;
            return f.left >= 0 && f.top >= 0 && f.right <= y && f.bottom <= m
        }
    }
    const gy = /\s+/, my = new fy;

    function yy(l, n, e, t, i) {
        let s = Array.isArray(e) ? e : e.split(gy);
        const u = ["top", "bottom", "left", "right", "top-left", "top-right", "bottom-left", "bottom-right", "left-top", "left-bottom", "right-top", "right-bottom"],
            r = n.classList,
            a = l => {
                const [n, e] = l.split("-"), t = [];
                return i && (t.push(`${i}-${n}`), e && t.push(`${i}-${n}-${e}`), t.forEach(l => {
                    r.add(l)
                })), t
            };
        i && u.forEach(l => {
            r.remove(`${i}-${l}`)
        });
        let o = s.findIndex(l => "auto" === l);
        o >= 0 && u.forEach((function (l) {
            null == s.find(n => -1 !== n.search("^" + l)) && s.splice(o++, 1, l)
        }));
        const c = n.style;
        let d;
        c.position = "absolute", c.top = "0", c.left = "0", c["will-change"] = "transform";
        let h = !1;
        for (d of s) {
            let e = a(d);
            if (my.positionElements(l, n, d, t)) {
                h = !0;
                break
            }
            i && e.forEach(l => {
                r.remove(l)
            })
        }
        return h || (a(d = s[0]), my.positionElements(l, n, d, t)), d
    }
    class vy {
        constructor(l) {
            this.i18n = l
        }
        isMuted() {
            return !this.selected && (this.date.month !== this.currentMonth || this.disabled)
        }
    }
    class by {
        constructor(l, n) {
            this.i18n = l, this._renderer = n, this.select = new qi, this._month = -1, this._year = -1
        }
        changeMonth(l) {
            this.select.emit(new zm(this.date.year, Cm(l), 1))
        }
        changeYear(l) {
            this.select.emit(new zm(Cm(l), this.date.month, 1))
        }
        ngAfterViewChecked() {
            this.date && (this.date.month !== this._month && (this._month = this.date.month, this._renderer.setProperty(this.monthSelect.nativeElement, "value", this._month)), this.date.year !== this._year && (this._year = this.date.year, this._renderer.setProperty(this.yearSelect.nativeElement, "value", this._year)))
        }
    }
    class _y {}
    let wy = (() => {
        class l {
            constructor() {
                this.autoClose = !0, this.placement = ["bottom-left", "bottom-right", "top-left", "top-right"]
            }
        }
        return l.ngInjectableDef = gl({
            factory: function () {
                return new l
            },
            token: l,
            providedIn: "root"
        }), l
    })(); class xy {}
    class ky {
        constructor(l) {
            this.elementRef = l, this._disabled = !1
        }
        set disabled(l) {
            this._disabled = "" === l || !0 === l
        }
        get disabled() {
            return this._disabled
        }
    }
    class Sy {
        constructor(l) {
            this.dropdown = l, this.placement = "bottom", this.isOpen = !1
        }
    }
    class Cy {
        constructor(l, n) {
            this.dropdown = l, this._elementRef = n, this.anchorEl = n.nativeElement
        }
        getNativeElement() {
            return this._elementRef.nativeElement
        }
    }
    class Iy extends Cy {
        constructor(l, n) {
            super(l, n)
        }
    }
    class Ty {
        constructor(l, n, e, t, i, s, u) {
            this._changeDetector = l, this._document = e, this._ngZone = t, this._elementRef = i, this._renderer = s, this._closed$ = new T, this._open = !1, this.openChange = new qi, this.placement = n.placement, this.container = n.container, this.autoClose = n.autoClose, this.display = u ? "static" : "dynamic", this._zoneSubscription = t.onStable.subscribe(() => {
                this._positionMenu()
            })
        }
        ngAfterContentInit() {
            this._ngZone.onStable.pipe(Co(1)).subscribe(() => {
                this._applyPlacementClasses(), this._open && this._setCloseHandlers()
            })
        }
        ngOnChanges(l) {
            l.container && this._open && this._applyContainer(this.container), l.placement && !l.placement.isFirstChange && this._applyPlacementClasses()
        }
        isOpen() {
            return this._open
        }
        open() {
            this._open || (this._open = !0, this._applyContainer(this.container), this.openChange.emit(!0), this._setCloseHandlers())
        }
        _setCloseHandlers() {
            const l = this._anchor;
            cy(this._ngZone, this._document, this.autoClose, () => this.close(), this._closed$, this._menu ? [this._menuElement.nativeElement] : [], l ? [l.getNativeElement()] : [], ".dropdown-item,.dropdown-divider")
        }
        close() {
            this._open && (this._open = !1, this._resetContainer(), this._closed$.next(), this.openChange.emit(!1), this._changeDetector.markForCheck())
        }
        toggle() {
            this.isOpen() ? this.close() : this.open()
        }
        ngOnDestroy() {
            this._resetContainer(), this._closed$.next(), this._zoneSubscription.unsubscribe()
        }
        onKeyDown(l) {
            const n = l.which,
                e = this._getMenuElements();
            let t = -1,
                i = !1;
            const s = this._isEventFromToggle(l);
            if (!s && e.length && e.forEach((n, e) => {
                    n.contains(l.target) && (i = !0), n === this._document.activeElement && (t = e)
                }), n !== Qm.Space && n !== Qm.Enter) {
                if (s || i) {
                    if (this.open(), e.length) {
                        switch (n) {
                            case Qm.ArrowDown:
                                t = Math.min(t + 1, e.length - 1);
                                break;
                            case Qm.ArrowUp:
                                if (this._isDropup() && -1 === t) {
                                    t = e.length - 1;
                                    break
                                }
                                t = Math.max(t - 1, 0);
                                break;
                            case Qm.Home:
                                t = 0;
                                break;
                            case Qm.End:
                                t = e.length - 1
                        }
                        e[t].focus()
                    }
                    l.preventDefault()
                }
            } else !i || !0 !== this.autoClose && "inside" !== this.autoClose || this.close()
        }
        _isDropup() {
            return this._elementRef.nativeElement.classList.contains("dropup")
        }
        _isEventFromToggle(l) {
            return this._anchor.getNativeElement().contains(l.target)
        }
        _getMenuElements() {
            const l = this._menu;
            return null == l ? [] : l.menuItems.filter(l => !l.disabled).map(l => l.elementRef.nativeElement)
        }
        _positionMenu() {
            const l = this._menu;
            this.isOpen() && l && this._applyPlacementClasses("dynamic" === this.display ? yy(this._anchor.anchorEl, this._bodyContainer || this._menuElement.nativeElement, this.placement, "body" === this.container) : this._getFirstPlacement(this.placement))
        }
        _getFirstPlacement(l) {
            return Array.isArray(l) ? l[0] : l.split(" ")[0]
        }
        _resetContainer() {
            const l = this._renderer,
                n = this._menuElement;
            if (n) {
                const e = n.nativeElement;
                l.appendChild(this._elementRef.nativeElement, e), l.removeStyle(e, "position"), l.removeStyle(e, "transform")
            }
            this._bodyContainer && (l.removeChild(this._document.body, this._bodyContainer), this._bodyContainer = null)
        }
        _applyContainer(l = null) {
            if (this._resetContainer(), "body" === l) {
                const l = this._renderer,
                    n = this._menuElement.nativeElement,
                    e = this._bodyContainer = this._bodyContainer || l.createElement("div");
                l.setStyle(e, "position", "absolute"), l.setStyle(n, "position", "static"), l.setStyle(e, "z-index", "1050"), l.appendChild(e, n), l.appendChild(this._document.body, e)
            }
        }
        _applyPlacementClasses(l) {
            const n = this._menu;
            if (n) {
                l || (l = this._getFirstPlacement(this.placement));
                const e = this._renderer,
                    t = this._elementRef.nativeElement;
                e.removeClass(t, "dropup"), e.removeClass(t, "dropdown"), n.placement = "static" === this.display ? null : l;
                const i = -1 !== l.search("^top") ? "dropup" : "dropdown";
                e.addClass(t, i);
                const s = this._bodyContainer;
                s && (e.removeClass(s, "dropup"), e.removeClass(s, "dropdown"), e.addClass(s, i))
            }
        }
    }
    class Ey {}
    let Ay = (() => {
        class l {
            constructor() {
                this.backdrop = !0, this.keyboard = !0
            }
        }
        return l.ngInjectableDef = gl({
            factory: function () {
                return new l
            },
            token: l,
            providedIn: "root"
        }), l
    })(); class Py {
        constructor(l, n, e) {
            this.nodes = l, this.viewRef = n, this.componentRef = e
        }
    }
    class Dy {
        constructor(l, n, e, t, i, s) {
            this._type = l, this._injector = n, this._viewContainerRef = e, this._renderer = t, this._componentFactoryResolver = i, this._applicationRef = s
        }
        open(l, n) {
            return this._windowRef || (this._contentRef = this._getContentRef(l, n), this._windowRef = this._viewContainerRef.createComponent(this._componentFactoryResolver.resolveComponentFactory(this._type), 0, this._injector, this._contentRef.nodes)), this._windowRef
        }
        close() {
            this._windowRef && (this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)), this._windowRef = null, this._contentRef.viewRef && (this._applicationRef.detachView(this._contentRef.viewRef), this._contentRef.viewRef.destroy(), this._contentRef = null))
        }
        _getContentRef(l, n) {
            if (l) {
                if (l instanceof $e) {
                    const e = l.createEmbeddedView(n);
                    return this._applicationRef.attachView(e), new Py([e.rootNodes], e)
                }
                return new Py([[this._renderer.createText(`${l}`)]])
            }
            return new Py([])
        }
    }
    const My = () => {};
    let Oy = (() => {
        class l {
            constructor(l) {
                this._document = l
            }
            compensate() {
                return this._isPresent() ? this._adjustBody(this._getWidth()) : My
            }
            _adjustBody(l) {
                const n = this._document.body,
                    e = n.style.paddingRight,
                    t = parseFloat(window.getComputedStyle(n)["padding-right"]);
                return n.style["padding-right"] = `${t+l}px`, () => n.style["padding-right"] = e
            }
            _isPresent() {
                const l = this._document.body.getBoundingClientRect();
                return l.left + l.right < window.innerWidth
            }
            _getWidth() {
                const l = this._document.createElement("div");
                l.className = "modal-scrollbar-measure";
                const n = this._document.body;
                n.appendChild(l);
                const e = l.getBoundingClientRect().width - l.clientWidth;
                return n.removeChild(l), e
            }
        }
        return l.ngInjectableDef = gl({
            factory: function () {
                return new l(ql(Ua))
            },
            token: l,
            providedIn: "root"
        }), l
    })(); class Ny {}
    class Ry {
        close(l) {}
        dismiss(l) {}
    }
    class By {
        constructor(l, n, e, t) {
            this._windowCmptRef = l, this._contentRef = n, this._backdropCmptRef = e, this._beforeDismiss = t, l.instance.dismissEvent.subscribe(l => {
                this.dismiss(l)
            }), this.result = new Promise((l, n) => {
                this._resolve = l, this._reject = n
            }), this.result.then(null, () => {})
        }
        get componentInstance() {
            if (this._contentRef && this._contentRef.componentRef) return this._contentRef.componentRef.instance
        }
        close(l) {
            this._windowCmptRef && (this._resolve(l), this._removeModalElements())
        }
        _dismiss(l) {
            this._reject(l), this._removeModalElements()
        }
        dismiss(l) {
            if (this._windowCmptRef)
                if (this._beforeDismiss) {
                    const n = this._beforeDismiss();
                    n && n.then ? n.then(n => {
                        !1 !== n && this._dismiss(l)
                    }, () => {}) : !1 !== n && this._dismiss(l)
                } else this._dismiss(l)
        }
        _removeModalElements() {
            const l = this._windowCmptRef.location.nativeElement;
            if (l.parentNode.removeChild(l), this._windowCmptRef.destroy(), this._backdropCmptRef) {
                const l = this._backdropCmptRef.location.nativeElement;
                l.parentNode.removeChild(l), this._backdropCmptRef.destroy()
            }
            this._contentRef && this._contentRef.viewRef && this._contentRef.viewRef.destroy(), this._windowCmptRef = null, this._backdropCmptRef = null, this._contentRef = null
        }
    }
    const zy = function () {
        var l = {
            BACKDROP_CLICK: 0,
            ESC: 1
        };
        return l[l.BACKDROP_CLICK] = "BACKDROP_CLICK", l[l.ESC] = "ESC", l
    }(); class $y {
        constructor(l, n, e) {
            this._document = l, this._elRef = n, this._zone = e, this.backdrop = !0, this.keyboard = !0, this.dismissEvent = new qi, e.runOutsideAngular(() => {
                dm(this._elRef.nativeElement, "keydown").pipe(fm(this.dismissEvent), io(l => l.which === Qm.Escape && this.keyboard)).subscribe(l => requestAnimationFrame(() => {
                    l.defaultPrevented || e.run(() => this.dismiss(zy.ESC))
                }));
                const l = dm(this._elRef.nativeElement, "mousedown").pipe(fm(this.dismissEvent), U(l => !0 === this.backdrop && this._elRef.nativeElement === l.target));
                dm(this._elRef.nativeElement, "mouseup").pipe(fm(this.dismissEvent), ym(l), io(([l, n]) => n)).subscribe(() => this._zone.run(() => this.dismiss(zy.BACKDROP_CLICK)))
            })
        }
        dismiss(l) {
            this.dismissEvent.emit(l)
        }
        ngOnInit() {
            this._elWithFocus = this._document.activeElement
        }
        ngAfterViewInit() {
            if (!this._elRef.nativeElement.contains(document.activeElement)) {
                const l = this._elRef.nativeElement.querySelector("[ngbAutofocus]"),
                    n = hy(this._elRef.nativeElement)[0];
                (l || n || this._elRef.nativeElement).focus()
            }
        }
        ngOnDestroy() {
            const l = this._document.body,
                n = this._elWithFocus;
            let e;
            e = n && n.focus && l.contains(n) ? n : l, this._zone.runOutsideAngular(() => {
                setTimeout(() => e.focus()), this._elWithFocus = null
            })
        }
    }
    let Ly = (() => {
        class l {
            constructor(l, n, e, t, i, s) {
                this._applicationRef = l, this._injector = n, this._document = e, this._scrollBar = t, this._rendererFactory = i, this._ngZone = s, this._activeWindowCmptHasChanged = new T, this._ariaHiddenValues = new Map, this._backdropAttributes = ["backdropClass"], this._modalRefs = [], this._windowAttributes = ["ariaLabelledBy", "backdrop", "centered", "keyboard", "scrollable", "size", "windowClass"], this._windowCmpts = [], this._activeWindowCmptHasChanged.subscribe(() => {
                    if (this._windowCmpts.length) {
                        const l = this._windowCmpts[this._windowCmpts.length - 1];
                        py(this._ngZone, l.location.nativeElement, this._activeWindowCmptHasChanged), this._revertAriaHidden(), this._setAriaHidden(l.location.nativeElement)
                    }
                })
            }
            open(l, n, e, t) {
                const i = Em(t.container) ? this._document.querySelector(t.container) : this._document.body,
                    s = this._rendererFactory.createRenderer(null, null),
                    u = this._scrollBar.compensate(),
                    r = () => {
                        this._modalRefs.length || (s.removeClass(this._document.body, "modal-open"), this._revertAriaHidden())
                    };
                if (!i) throw new Error(`The specified modal container "${t.container||"body"}" was not found in the DOM.`);
                const a = new Ry,
                    o = this._getContentRef(l, t.injector || n, e, a, t);
                let c = !1 !== t.backdrop ? this._attachBackdrop(l, i) : null,
                    d = this._attachWindowComponent(l, i, o),
                    h = new By(d, o, c, t.beforeDismiss);
                return this._registerModalRef(h), this._registerWindowCmpt(d), h.result.then(u, u), h.result.then(r, r), a.close = l => {
                    h.close(l)
                }, a.dismiss = l => {
                    h.dismiss(l)
                }, this._applyWindowOptions(d.instance, t), 1 === this._modalRefs.length && s.addClass(this._document.body, "modal-open"), c && c.instance && this._applyBackdropOptions(c.instance, t), h
            }
            dismissAll(l) {
                this._modalRefs.forEach(n => n.dismiss(l))
            }
            hasOpenModals() {
                return this._modalRefs.length > 0
            }
            _attachBackdrop(l, n) {
                let e = l.resolveComponentFactory(Ny).create(this._injector);
                return this._applicationRef.attachView(e.hostView), n.appendChild(e.location.nativeElement), e
            }
            _attachWindowComponent(l, n, e) {
                let t = l.resolveComponentFactory($y).create(this._injector, e.nodes);
                return this._applicationRef.attachView(t.hostView), n.appendChild(t.location.nativeElement), t
            }
            _applyWindowOptions(l, n) {
                this._windowAttributes.forEach(e => {
                    Em(n[e]) && (l[e] = n[e])
                })
            }
            _applyBackdropOptions(l, n) {
                this._backdropAttributes.forEach(e => {
                    Em(n[e]) && (l[e] = n[e])
                })
            }
            _getContentRef(l, n, e, t, i) {
                return e ? e instanceof $e ? this._createFromTemplateRef(e, t) : "string" == typeof e ? this._createFromString(e) : this._createFromComponent(l, n, e, t, i) : new Py([])
            }
            _createFromTemplateRef(l, n) {
                const e = l.createEmbeddedView({
                    $implicit: n,
                    close(l) {
                        n.close(l)
                    },
                    dismiss(l) {
                        n.dismiss(l)
                    }
                });
                return this._applicationRef.attachView(e), new Py([e.rootNodes], e)
            }
            _createFromString(l) {
                const n = this._document.createTextNode(`${l}`);
                return new Py([[n]])
            }
            _createFromComponent(l, n, e, t, i) {
                const s = l.resolveComponentFactory(e),
                    u = Ln.create({
                        providers: [{
                            provide: Ry,
                            useValue: t
                        }],
                        parent: n
                    }),
                    r = s.create(u),
                    a = r.location.nativeElement;
                return i.scrollable && a.classList.add("component-host-scrollable"), this._applicationRef.attachView(r.hostView), new Py([[a]], r.hostView, r)
            }
            _setAriaHidden(l) {
                const n = l.parentElement;
                n && l !== this._document.body && (Array.from(n.children).forEach(n => {
                    n !== l && "SCRIPT" !== n.nodeName && (this._ariaHiddenValues.set(n, n.getAttribute("aria-hidden")), n.setAttribute("aria-hidden", "true"))
                }), this._setAriaHidden(n))
            }
            _revertAriaHidden() {
                this._ariaHiddenValues.forEach((l, n) => {
                    l ? n.setAttribute("aria-hidden", l) : n.removeAttribute("aria-hidden")
                }), this._ariaHiddenValues.clear()
            }
            _registerModalRef(l) {
                const n = () => {
                    const n = this._modalRefs.indexOf(l);
                    n > -1 && this._modalRefs.splice(n, 1)
                };
                this._modalRefs.push(l), l.result.then(n, n)
            }
            _registerWindowCmpt(l) {
                this._windowCmpts.push(l), this._activeWindowCmptHasChanged.next(), l.onDestroy(() => {
                    const n = this._windowCmpts.indexOf(l);
                    n > -1 && (this._windowCmpts.splice(n, 1), this._activeWindowCmptHasChanged.next())
                })
            }
        }
        return l.ngInjectableDef = gl({
            factory: function () {
                return new l(ql(zs), ql(Al), ql(Ua), ql(Oy), ql(ye), ql(ys))
            },
            token: l,
            providedIn: "root"
        }), l
    })(), Fy = (() => {
        class l {
            constructor(l, n, e, t) {
                this._moduleCFR = l, this._injector = n, this._modalStack = e, this._config = t
            }
            open(l, n = {}) {
                const e = Object.assign({}, this._config, n);
                return this._modalStack.open(this._moduleCFR, this._injector, l, e)
            }
            dismissAll(l) {
                this._modalStack.dismissAll(l)
            }
            hasOpenModals() {
                return this._modalStack.hasOpenModals()
            }
        }
        return l.ngInjectableDef = gl({
            factory: function () {
                return new l(ql(ce), ql(Al), ql(Ly), ql(Ay))
            },
            token: l,
            providedIn: "root"
        }), l
    })(); class qy {}
    class Uy {}
    class Hy {
        constructor(l, n) {
            this.open = l, this.close = n, n || (this.close = l)
        }
        isManual() {
            return "manual" === this.open || "manual" === this.close
        }
    }
    const Vy = {
        hover: ["mouseenter", "mouseleave"],
        focus: ["focusin", "focusout"]
    }, jy = l => l > 0 ? wm(l) : l => l;
    let Gy = (() => {
        class l {
            constructor() {
                this.autoClose = !0, this.placement = "auto", this.triggers = "click", this.disablePopover = !1, this.openDelay = 0, this.closeDelay = 0
            }
        }
        return l.ngInjectableDef = gl({
            factory: function () {
                return new l
            },
            token: l,
            providedIn: "root"
        }), l
    })(), Wy = 0; class Ky {
        isTitleTemplate() {
            return this.title instanceof $e
        }
    }
    class Zy {
        constructor(l, n, e, t, i, s, u, r, a, o) {
            this._elementRef = l, this._renderer = n, this._ngZone = u, this._document = r, this._changeDetector = a, this._applicationRef = o, this.shown = new qi, this.hidden = new qi, this._ngbPopoverWindowId = `ngb-popover-${Wy++}`, this.autoClose = s.autoClose, this.placement = s.placement, this.triggers = s.triggers, this.container = s.container, this.disablePopover = s.disablePopover, this.popoverClass = s.popoverClass, this.openDelay = s.openDelay, this.closeDelay = s.closeDelay, this._popupService = new Dy(Ky, e, i, n, t, o), this._zoneSubscription = u.onStable.subscribe(() => {
                this._windowRef && yy(this._elementRef.nativeElement, this._windowRef.location.nativeElement, this.placement, "body" === this.container, "bs-popover")
            })
        }
        _isDisabled() {
            return !!this.disablePopover || !this.ngbPopover && !this.popoverTitle
        }
        open(l) {
            this._windowRef || this._isDisabled() || (this._windowRef = this._popupService.open(this.ngbPopover, l), this._windowRef.instance.title = this.popoverTitle, this._windowRef.instance.context = l, this._windowRef.instance.popoverClass = this.popoverClass, this._windowRef.instance.id = this._ngbPopoverWindowId, this._renderer.setAttribute(this._elementRef.nativeElement, "aria-describedby", this._ngbPopoverWindowId), "body" === this.container && this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement), this._windowRef.changeDetectorRef.detectChanges(), this._windowRef.changeDetectorRef.markForCheck(), cy(this._ngZone, this._document, this.autoClose, () => this.close(), this.hidden, [this._windowRef.location.nativeElement]), this.shown.emit())
        }
        close() {
            this._windowRef && (this._renderer.removeAttribute(this._elementRef.nativeElement, "aria-describedby"), this._popupService.close(), this._windowRef = null, this.hidden.emit(), this._changeDetector.markForCheck())
        }
        toggle() {
            this._windowRef ? this.close() : this.open()
        }
        isOpen() {
            return null != this._windowRef
        }
        ngOnInit() {
            this._unregisterListenersFn = function (l, n, e, t, i, s, u = 0, r = 0) {
                const a = function (l, n = Vy) {
                    const e = (l || "").trim();
                    if (0 === e.length) return [];
                    const t = e.split(/\s+/).map(l => l.split(":")).map(l => {
                            let e = n[l[0]] || l;
                            return new Hy(e[0], e[1])
                        }),
                        i = t.filter(l => l.isManual());
                    if (i.length > 1) throw "Triggers parse error: only one manual trigger is allowed";
                    if (1 === i.length && t.length > 1) throw "Triggers parse error: manual trigger can't be mixed with other triggers";
                    return t
                }(e);
                if (1 === a.length && a[0].isManual()) return () => {};
                const o = function (l, n, e, t) {
                    return new w(i => {
                        const s = [],
                            u = () => i.next(!0),
                            r = () => i.next(!1),
                            a = () => i.next(!t());
                        return e.forEach(e => {
                            e.open === e.close ? s.push(l.listen(n, e.open, a)) : s.push(l.listen(n, e.open, u), l.listen(n, e.close, r))
                        }), () => {
                            s.forEach(l => l())
                        }
                    })
                }(l, n, a, t).pipe(function (l, n, e) {
                    return t => {
                        let i = null;
                        const s = t.pipe(U(l => ({
                            open: l
                        })), io(l => {
                            const n = e();
                            return n === l.open || i && i.open !== n ? (i && i.open !== l.open && (i = null), !1) : (i = l, !0)
                        }), ul());
                        return X(s.pipe(io(l => l.open), jy(l)), s.pipe(io(l => !l.open), jy(n))).pipe(io(l => l === i && (i = null, l.open !== e())), U(l => l.open))
                    }
                }(u, r, t)).subscribe(l => l ? i() : s());
                return () => o.unsubscribe()
            }(this._renderer, this._elementRef.nativeElement, this.triggers, this.isOpen.bind(this), this.open.bind(this), this.close.bind(this), +this.openDelay, +this.closeDelay)
        }
        ngOnChanges({
            ngbPopover: l,
            popoverTitle: n,
            disablePopover: e,
            popoverClass: t
        }) {
            t && this.isOpen() && (this._windowRef.instance.popoverClass = t.currentValue), (l || n || e) && this._isDisabled() && this.close()
        }
        ngOnDestroy() {
            this.close(), this._unregisterListenersFn && this._unregisterListenersFn(), this._zoneSubscription.unsubscribe()
        }
    }
    class Qy {}
    class Yy {}
    class Xy {}
    let Jy = (() => {
        class l {
            constructor() {
                this.justify = "start", this.orientation = "horizontal", this.type = "tabs"
            }
        }
        return l.ngInjectableDef = gl({
            factory: function () {
                return new l
            },
            token: l,
            providedIn: "root"
        }), l
    })(), lv = 0; class nv {
        constructor(l) {
            this.templateRef = l
        }
    }
    class ev {
        constructor() {
            this.id = `ngb-tab-${lv++}`, this.disabled = !1
        }
        ngAfterContentChecked() {
            this.titleTpl = this.titleTpls.first, this.contentTpl = this.contentTpls.first
        }
    }
    class tv {
        constructor(l) {
            this.destroyOnHide = !0, this.tabChange = new qi, this.type = l.type, this.justify = l.justify, this.orientation = l.orientation
        }
        set justify(l) {
            this.justifyClass = "fill" === l || "justified" === l ? `nav-${l}` : `justify-content-${l}`
        }
        select(l) {
            let n = this._getTabById(l);
            if (n && !n.disabled && this.activeId !== n.id) {
                let l = !1;
                this.tabChange.emit({
                    activeId: this.activeId,
                    nextId: n.id,
                    preventDefault: () => {
                        l = !0
                    }
                }), l || (this.activeId = n.id)
            }
        }
        ngAfterContentChecked() {
            let l = this._getTabById(this.activeId);
            this.activeId = l ? l.id : this.tabs.length ? this.tabs.first.id : null
        }
        _getTabById(l) {
            let n = this.tabs.filter(n => n.id === l);
            return n.length ? n[0] : null
        }
    }
    class iv {}
    class sv {}
    let uv = (() => {
        class l {
            constructor() {
                this.autohide = !0, this.delay = 500, this.ariaLive = "polite"
            }
        }
        return l.ngInjectableDef = gl({
            factory: function () {
                return new l
            },
            token: l,
            providedIn: "root"
        }), l
    })(); class rv {
        constructor(l, n) {
            this.ariaLive = l, this.contentHeaderTpl = null, this.hideOutput = new qi, null == this.ariaLive && (this.ariaLive = n.ariaLive), this.delay = n.delay, this.autohide = n.autohide
        }
        ngAfterContentInit() {
            this._init()
        }
        ngOnChanges(l) {
            "autohide" in l && (this._clearTimeout(), this._init())
        }
        hide() {
            this._clearTimeout(), this.hideOutput.emit()
        }
        _init() {
            this.autohide && !this._timeoutID && (this._timeoutID = setTimeout(() => this.hide(), this.delay))
        }
        _clearTimeout() {
            this._timeoutID && (clearTimeout(this._timeoutID), this._timeoutID = null)
        }
    }
    class av {}
    class ov {}
    class cv {}
    class dv {
        constructor() {
            this.highlightClass = "ngb-highlight"
        }
        ngOnChanges(l) {
            const n = Im(this.result),
                e = (Array.isArray(this.term) ? this.term : [this.term]).map(l => (function (l) {
                    return l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&")
                })(Im(l))).filter(l => l);
            this.parts = e.length ? n.split(new RegExp(`(${e.join("|")})`, "gmi")) : [n]
        }
    }
    class hv {
        constructor() {
            this.activeIdx = 0, this.focusFirst = !0, this.formatter = Im, this.selectEvent = new qi, this.activeChangeEvent = new qi
        }
        hasActive() {
            return this.activeIdx > -1 && this.activeIdx < this.results.length
        }
        getActive() {
            return this.results[this.activeIdx]
        }
        markActive(l) {
            this.activeIdx = l, this._activeChanged()
        }
        next() {
            this.activeIdx === this.results.length - 1 ? this.activeIdx = this.focusFirst ? (this.activeIdx + 1) % this.results.length : -1 : this.activeIdx++, this._activeChanged()
        }
        prev() {
            this.activeIdx < 0 ? this.activeIdx = this.results.length - 1 : 0 === this.activeIdx ? this.activeIdx = this.focusFirst ? this.results.length - 1 : -1 : this.activeIdx--, this._activeChanged()
        }
        resetActive() {
            this.activeIdx = this.focusFirst ? 0 : -1, this._activeChanged()
        }
        select(l) {
            this.selectEvent.emit(l)
        }
        ngOnInit() {
            this.resetActive()
        }
        _activeChanged() {
            this.activeChangeEvent.emit(this.activeIdx >= 0 ? this.id + "-" + this.activeIdx : void 0)
        }
    }
    class pv {}
    class fv {}
    class gv {
        transform(l) {
            return mg.formatTime(l)
        }
    }
    class mv {
        constructor(l, n, e, t, i, s) {
            this.conf = l, this.data = n, this.dataService = e, this.coreEngine = t, this.sanitizer = i, this.route = s, this.icons = ug
        }
        handleKeydownEvent(l) {
            if ("INPUT" != l.target.tagName.toUpperCase()) {
                let n = -1;
                if (l.keyCode >= 49 && l.keyCode <= 51 && (n = l.keyCode - 49), l.keyCode >= 97 && l.keyCode <= 99 && (n = l.keyCode - 97), -1 != n) {
                    let l = Object.values(this.conf.spells).filter(l => l.deity == this.dataService.player().deity)[n];
                    25 * -l.level >= this.dataService.player().orientation && this.dataService.useSpell(l, this.coreEngine)
                }
            }
        }
        isAvailable(l) {
            return this.dataService.isSpellAvailable(l)
        }
        isLocked(l) {
            return this.dataService.isSpellLocked(l)
        }
        use(l) {
            if (this.autocast) return this.autocast = !1, void(this.data.autocast = this.data.autocast == l.id ? "" : l.id);
            this.dataService.useSpell(l, this.coreEngine)
        }
        style(l) {
            return this.data.spelltime[l.id] ? this.sanitizer.bypassSecurityTrustStyle("clip-path:inset(" + Math.floor(100 * (l.time - this.data.spelltime[l.id]) / l.time) + "% 0 0 0)") : this.data.cooldowns[l.id] ? this.sanitizer.bypassSecurityTrustStyle("clip-path:inset(" + Math.floor(100 * this.data.cooldowns[l.id] / (l.cooldown * this.dataService.coolDownMult())) + "% 0 0 0)") : ""
        }
        display() {
            let l = this.route.snapshot._routerState.url;
            return !!(l.startsWith("/game/empire") || l.startsWith("/game/city") || l.startsWith("/game/science") || l.startsWith("/game/policies") || l.startsWith("/game/world") || l.startsWith("/game/attacks") || l.startsWith("/game/diplomacy") || l.startsWith("/game/powers"))
        }
        hide() {
            this.data.spellshidden = !0
        }
        show() {
            this.data.spellshidden = !1
        }
        mouseenter(l, n) {
            l.open({
                title: n.name,
                id: n.id,
                desc: n.description(this.dataService),
                lockDesc: this.isLocked(n) ? n.lockDesc(this.dataService) : "",
                level: n.level
            })
        }
        mouseleave(l) {
            l.close()
        }
    }
    class yv {
        constructor(l) {
            this.read = !1, this.id = l, this.date = new Date
        }
    }
    class vv {
        constructor(l, n, e, t, i) {
            this.conf = l, this.data = n, this.dataService = e, this.toastService = t, this.saveService = i, this.icons = ug, this.subscriptions = [], this.engine = om(0, this.conf.ut), this.minuteEngine = om(0, this.conf.mut)
        }
        ngOnDestroy() {
            this.stop()
        }
        stop() {
            this.subscriptions.forEach(l => l.unsubscribe())
        }
        start() {
            this.subscriptions.push(this.engine.subscribe(this.run.bind(this))), this.subscriptions.push(this.minuteEngine.subscribe(this.runMinute.bind(this)))
        }
        runMinute(l) {
            if (!this.data.pause) {
                let l = this.conf.init.barbarians.nb + Object.keys(this.conf.civilizations).length + 2;
                if (!this.data.no_respawn && yg.roll(.2) && this.dataService.allCities().length < l) {
                    let l = !1,
                        n = 0,
                        e = 0;
                    if (this.dataService.allCities().some(l => this.dataService.isCoastal(l)))
                        for (; !l;) n = yg.get(-this.conf.init.map_size, this.conf.init.map_size), e = yg.get(-this.conf.init.map_size, this.conf.init.map_size), this.dataService.allCities().some(l => l.x == n && l.y == e) || (l = !0);
                    else n = -30, e = yg.get(-this.conf.init.map_size, this.conf.init.map_size);
                    if (this.data.players.length <= 8 && this.data.respawn.length < Object.values(this.conf.civilizations).filter(l => l.respawn).length) {
                        let l = Object.values(this.conf.civilizations).find(l => l.respawn && !this.data.respawn.includes(l.id));
                        this.data.respawn.push(l.id);
                        let t = new Eg(this.data.lastids.player++, l.name);
                        t.civ_id = l.id, Pr.production || console.log("Creation of " + l.name + " (" + t.id + ")");
                        let i = new Ag(this.data.lastids.city++, l.vil_names[0], n, e, t.id, !0, !0);
                        Pr.production || console.log("Creation of " + i.name + " (" + i.x + "," + i.y + ")"), t.cities.push(i);
                        let s = this.dataService.pop(this.dataService.capital(0)) - 1;
                        s < 5 && (s = 5), i.citizens.idle = s, t.sciences = Object.assign({}, this.dataService.player().sciences), this.dataService.isTroopVisible(t, this.conf.troops.musketman) ? (i.troops.pikeman = 100, i.troops.musketman = 100, i.troops.explorer = 3) : this.dataService.isTroopVisible(t, this.conf.troops.pikeman) ? (i.troops.pikeman = 100, i.troops.longbowman = 100, i.troops.scout = 3) : (i.troops.lancier = 100, i.troops.archer = 100, i.troops.scout = 3), i.troops.governor = 2, i.troops.caravan = 2, i.buildings = Object.assign({}, this.dataService.capital(0).buildings), Object.keys(i.buildings).forEach(l => {
                            this.conf.buildings[l].wonder && delete i.buildings[l], i.buildings[l].done || delete i.buildings[l]
                        }), i.buildings.walls && i.buildings.walls.done || (i.buildings.walls = {
                            progress: 0,
                            done: !0
                        }), i.buildings.cop && i.buildings.cop.done || (i.buildings.cop = {
                            progress: 0,
                            done: !0
                        }), i.gold = 1e6, t.influence[t.id] = this.dataService.player().influence[0], t.culture = this.dataService.totalCultureUsed(this.dataService.player()), this.data.players.push(t), this.data.favors[0] || (this.data.favors[0] = {});
                        let u = Object.keys(this.dataService.player().powers).reduce((l, n) => l + (Math.pow(2, this.dataService.player().powers[n]) - 1) * Object.keys(this.conf.powers[n].cost).length, 0) + Object.values(this.data.favors[0]).reduce((l, n) => l + n, 0);
                        t.powers = {};
                        let r = Math.floor(yg.get(70, 95) * u / 100);
                        for (this.data.favors[t.id] || (this.data.favors[t.id] = {}), this.data.favors[t.id][""] || (this.data.favors[t.id][""] = 0), this.data.favors[t.id][""] = Math.ceil(.2 * r), r = Math.floor(.8 * r); r > 0;) {
                            let l = Math.max(1, Math.floor(r / 20)),
                                n = yg.fromArray(Object.keys(this.conf.deities));
                            this.data.favors[t.id][n] ? this.data.favors[t.id][n] += l : this.data.favors[t.id][n] = l, r -= l
                        }
                        this.dataService.allocatePowers(t)
                    } else if (this.dataService.player(1)) {
                        let l = new Ag(this.data.lastids.city++, "Barb. vil.", n, e, 1, !0);
                        l.bonus = yg.randomVilBonus(), this.dataService.player(1).cities.push(l)
                    }
                    this.dataService.cityCache()
                }
                this.data.players.forEach(l => {
                    if (this.dataService.hasPolicy("conscription", l.id) && (l.id > 0 || !this.data.emp_noconscription) && yg.roll(.05)) {
                        let n = this.data.colonies.filter(n => this.dataService.city(n).ownerid == l.id);
                        if (n.length) {
                            let e = this.dataService.city(yg.fromArray(n));
                            if (e) {
                                let n = Object.values(this.conf.troops).filter(n => this.dataService.isTroopVisible(l, n) && n.conscript),
                                    t = yg.fromArray(n),
                                    i = this.dataService.currentScienceRank(l.id),
                                    s = Math.floor(yg.get(3 * i, 16 * i));
                                e.troops[t.id] || (e.troops[t.id] = 0), e.troops[t.id] += s, 0 == l.id && this.toastService.success("Conscription: " + s + " " + t.name(l) + " arrived in " + e.name, ug.attack, "/game/city/" + e.id)
                            }
                        }
                    }
                })
            }
            this.data.max_rpt && this.data.reports.splice(0, this.data.reports.length - this.data.max_rpt), this.data.max_notif && this.data.notifications.splice(0, this.data.notifications.length - this.data.max_notif), Object.values(this.conf.buildings).filter(l => l.wonder).forEach(l => {
                let n = this.dataService.allCities().filter(n => this.dataService.hasBuilding(n, l.id));
                n.length > 1 && (n.pop(), n.forEach(n => {
                    console.log("removing " + l.id + " from " + n.name), delete n.buildings[l.id]
                }))
            }), this.data.players.forEach(l => this.dataService.completeCheckNewCiv(l.id)), Object.values(this.conf.buildings).forEach(l => {
                if (l.add_all && this.dataService.isWonderDone(l.id)) {
                    let n = this.dataService.cityForWonder(l.id);
                    n && this.dataService.player(n.ownerid).cities.forEach(n => n.buildings[l.add_all] = {
                        done: !0,
                        progress: 0
                    })
                }
            }), this.dataService.allCities().forEach(l => {
                l.buildings.progress && l.buildings.progress.done && (l.buildings.progress.done = !1), Object.keys(l.buildings).forEach(n => {
                    let e = l.buildings[n];
                    e.done && delete e.progress
                })
            })
        }
        run(l, n = 0, e = !1) {
            let t = Date.now();
            if (n || (n = (t - this.data.lt) / 1e3), n > this.conf.max_dt && (n = this.conf.max_dt), t - this.data.savetime >= this.conf.autosave_delay && this.saveService.save(!1), l % 40 == 0 && (this.data.connections = {}), l % 20 == 0 && this.dataService.allCities().forEach(l => {
                    l.tradeGains = this.dataService.tradeRouteGains(l, !0)
                }), l % 10 == 0 && (this.dataService.cityCache(), this.dataService.allCities().forEach(l => {
                    (l.autoassign || this.data.emp_autoassign) && this.conf.autoassign.balanced.sort(l, this.dataService)
                }), this.data.pause && !e || this.dataService.allCities().filter(l => l.autobuild && 0 == l.building_queue.length).forEach(l => {
                    let n = this.dataService.selectableBuildings(l).filter(l => !l.wonder);
                    n.length > 0 && (l.gold -= this.dataService.buildingGoldCost(n[0]), l.building_queue.push(n[0].id))
                })), l % 5 == 0 && this.dataService.allCities().forEach(l => {
                    l.happiness = this.dataService.happiness(l, !0), l.cultureDiff = this.dataService.cultureDiff(l, null, !0)
                }), !this.data.pause || e) {
                if (this.data.players.forEach(l => {
                        if (l.cities.length) {
                            l.cities.forEach(e => {
                                e.food += this.dataService.foodDiff(e) * n;
                                let t = !1;
                                if (e.autoassign_options && e.autoassign_options.nogrowth && (t = !0), e.food >= this.dataService.foodRequired(e) ? t ? e.food = this.dataService.foodRequired(e) : (e.food = this.dataService.hasBuilding(e, "town_hall") ? .25 * this.dataService.foodRequired(e) : this.dataService.hasBuilding(e, "lo") ? .15 * this.dataService.foodRequired(e) : 0, e.citizens.idle++, 0 == e.ownerid && (this.data.notif_pop && this.toastService.success("A new citizen is available in " + e.name, ug.pop, "/game/city/" + e.id), this.data.autopause.citizen && (this.data.pause = !0))) : e.food < 0 && this.dataService.pop(e) > 1 ? (this.dataService.killCitizen(e), e.food = this.dataService.foodRequired(e) / 10, 0 == e.ownerid && this.toastService.danger("A citizen died of starvation in " + e.name, ug.defeat, "/game/city/" + e.id)) : e.food < 0 && 1 == this.dataService.pop(e) && (e.food = 0), e.gold = e.gold + this.dataService.goldDiff(e) * n, isNaN(e.gold) && (e.gold = 0), e.gold > this.dataService.maxGold(e) && (e.gold = this.dataService.maxGold(e)), e.gold < 0) {
                                    let n = {};
                                    for (; this.dataService.goldDiff(e) < 0 && this.dataService.troopNb(e, !1);) {
                                        let l = this.dataService.killTroop(e);
                                        n[l] ? n[l]++ : n[l] = 1
                                    }
                                    if (Object.keys(n).length && 0 == e.ownerid) {
                                        let t = "";
                                        Object.keys(n).forEach(e => t += n[e] + " " + this.conf.troops[e].name(l) + ", "), t = t.slice(0, -2), this.toastService.danger("Troops have been dismissed due to lack of gold: " + t, ug.defeat, "/game/city/" + e.id)
                                    }
                                    e.gold = 0
                                }
                                if (e.building_queue.length && (e.buildings[e.building_queue[0]] || (e.buildings[e.building_queue[0]] = {
                                        progress: 0,
                                        done: !1
                                    }), e.buildings[e.building_queue[0]].progress += this.dataService.prodDiff(e) * n, e.buildings[e.building_queue[0]].progress >= this.dataService.buildingProdCost(this.conf.buildings[e.building_queue[0]], e))) {
                                    let n = e.buildings[e.building_queue[0]].progress - this.dataService.buildingProdCost(this.conf.buildings[e.building_queue[0]], e);
                                    for (; n > 0 && e.building_queue.length;) {
                                        let t = this.conf.buildings[e.building_queue[0]];
                                        if ("progress" == t.id) e.buildings[e.building_queue[0]].progress = 0, l.progress++, this.dataService.changeOrientationFortech(l, 1), e.building_queue.length > 1 && e.building_queue.shift();
                                        else {
                                            if (0 == l.id)(this.data.notif_building || t.wonder) && this.toastService.success(e.name + " has finished the construction of " + this.conf.buildings[e.building_queue[0]].label(l), t.wonder ? ug.wonder : ug.prod, "/game/city/" + e.id), this.data.autopause.building && (this.data.pause = !0);
                                            else if (t.wonder) {
                                                let n = this.dataService.haveRelation(0, e.ownerid) ? this.dataService.player(e.ownerid).name : "An unknown civilization";
                                                this.toastService.danger(n + " has finished the construction of " + this.conf.buildings[e.building_queue[0]].label(l), ug.wonder, "/game/world?x=" + e.x + "&y=" + e.y)
                                            }
                                            t.add_city && (e.buildings[t.add_city] = {
                                                done: !0,
                                                progress: 0
                                            }), t.add_all && l.cities.forEach(l => {
                                                l.buildings[t.add_all] = {
                                                    done: !0,
                                                    progress: 0
                                                }
                                            }), e.buildings[e.building_queue[0]].done = !0, e.building_queue.shift(), t.wonder && this.dataService.allCities().filter(l => l.building_queue.includes(t.id)).forEach(l => {
                                                l.building_queue.splice(l.building_queue.indexOf(t.id), 1), delete l.buildings[t.id], l.gold += this.dataService.buildingGoldCost(t, l.ownerid)
                                            })
                                        }
                                        e.building_queue.length && (e.buildings[e.building_queue[0]].progress = n, n -= this.dataService.buildingProdCost(this.conf.buildings[e.building_queue[0]], e))
                                    }
                                }
                                for (let l in e.troops) e.troops[l] < 0 && (e.troops[l] = 0);
                                if (e.troop_queue.length) {
                                    if (e.troops_progress[e.troop_queue[0].id] += n * this.dataService.recruitmentSpeed(e), e.troops_progress[e.troop_queue[0].id] >= this.conf.troops[e.troop_queue[0].id].time(this.dataService, l.id)) {
                                        let n = e.troops_progress[e.troop_queue[0].id] - this.conf.troops[e.troop_queue[0].id].time(this.dataService, l.id);
                                        for (; n > 0 && e.troop_queue.length;) {
                                            let t = this.conf.troops[e.troop_queue[0].id].citizen,
                                                i = this.dataService.pop(e);
                                            if (t && i > 1 && this.dataService.killCitizen(e), (!t || i > 1) && (e.troops[e.troop_queue[0].id] ? e.troops[e.troop_queue[0].id]++ : e.troops[e.troop_queue[0].id] = 1), e.troops_progress[e.troop_queue[0].id] = n, e.troop_queue[0].nb--, e.troop_queue[0].nb <= 0 && (e.troops_progress[e.troop_queue[0].id] = 0, e.troop_queue.shift()), !e.troop_queue.length && e.autorecruit) {
                                                let l = this.conf.troops[e.autorecruit];
                                                e.gold >= l.gold(this.dataService, e.ownerid) && (e.gold -= l.gold(this.dataService, e.ownerid), e.troops_progress[l.id] || (e.troops_progress[l.id] = 0), e.troop_queue.push({
                                                    id: l.id,
                                                    nb: 1
                                                }))
                                            }
                                            e.troop_queue.length && (n -= this.conf.troops[e.troop_queue[0].id].time(this.dataService, l.id))
                                        }
                                    }
                                } else if (e.autorecruit) {
                                    let l = this.conf.troops[e.autorecruit];
                                    e.gold >= l.gold(this.dataService, e.ownerid) && (e.gold -= l.gold(this.dataService, e.ownerid), e.troops_progress[l.id] || (e.troops_progress[l.id] = 0), e.troop_queue.push({
                                        id: l.id,
                                        nb: 1
                                    }))
                                }
                                if (this.dataService.pop(e) > 1 && yg.roll(this.dataService.healthKillChance(e)) && (this.dataService.killCitizen(e), 0 == e.ownerid && this.toastService.danger("Citizen died from disease in " + e.name, ug.health, "/game/city/" + e.id)), 1 != e.ownerid && !e.capital && this.dataService.happiness(e) < .2) {
                                    let l = this.dataService.revoltRisks(e);
                                    l && (0 != e.ownerid && 0 != l.id || this.toastService.danger("Uprising in " + e.name + ". The city joined " + l.name, ug.happiness, "/game/world?x=" + e.x + "&y=" + e.y), e.troops = {}, this.dataService.transferCity(e.id, l.id, !1, !1), this.data.autopause.city_joined && 0 == l.id && (this.data.pause = !0))
                                }
                                if (e.owner_change_timer && (e.owner_change_timer -= n, e.owner_change_timer <= 0 && (delete e.owner_change_timer, e.rightful_ownerid = e.ownerid)), 0 != this.data.difficulty && !this.dataService.plague() && yg.roll(this.dataService.plagueInitRisk(e)) && this.dataService.initPlague(e), e.plague) {
                                    let l = e.plague,
                                        t = e.troops.plague_doctor ? e.troops.plague_doctor : 0,
                                        i = .1;
                                    if (this.dataService.hasBuilding(e, "aqueduct") && (i = .2), this.dataService.hasBuilding(e, "hospital") && (i = .3), e.plague -= e.plague > 0 ? n * (10 * this.dataService.health(e) / this.dataService.pop(e) + Math.pow(t, .8) * i) : n, e.plague <= -600 && delete e.plague, e.plague && (0 == e.ownerid && l > 0 && e.plague <= 0 && this.toastService.success("Plague is over in " + e.name + " !", ug.plague, "/game/world?x=" + e.x + "&y=" + e.y), e.plague > 0)) {
                                        let l = this.dataService.citiesInRange(e, 5),
                                            n = this.dataService.tradeRoutes(e);
                                        if ([...n.in.map(l => this.dataService.city(l.from.x, l.from.y)), ...n.out.map(l => this.dataService.city(l.to.x, l.to.y))].forEach(n => {
                                                l.some(l => l.id == n.id) || l.push(n)
                                            }), (l = l.filter(l => !l.plague)).forEach(l => {
                                                yg.roll(this.dataService.plagueRisk(l)) && (l.plague = yg.get(60, 600), this.data.plagueMaxCities = this.dataService.plagueNb(), 0 == l.ownerid && (this.toastService.black("Plague has propagated to " + l.name + " !", ug.plague, "/game/world?x=" + l.x + "&y=" + l.y), this.data.autopause.plague && (this.data.pause = !0)))
                                            }), yg.roll(this.dataService.plagueTroopKillChances(e))) {
                                            let l = Object.keys(e.troops).filter(l => "governor" != l);
                                            if (l.length) {
                                                let n = yg.fromArray(l);
                                                "plague_doctor" != n && (e.troops[n]--, e.troops[n] <= 0 && delete e.troops[n])
                                            }
                                        }
                                        if (yg.roll(this.dataService.plagueTradeLostChances(e))) {
                                            let l = this.dataService.tradeRoutes(e).out;
                                            if (l.length) {
                                                let n = yg.fromArray(l),
                                                    t = this.dataService.city(n.to.x, n.to.y);
                                                this.data.trades.splice(this.data.trades.indexOf(n), 1), 0 != e.ownerid && 0 != t.ownerid || this.toastService.danger("Trade route between " + e.name + " and " + t.name + " has been lost due to the plague", ug.trade, "/game/diplomacy#tab_trade")
                                            }
                                        }
                                    }
                                }
                            }), l.science_queue.length && (l.sciences[l.science_queue[0]] || (l.sciences[l.science_queue[0]] = {
                                progress: 0,
                                done: !1
                            }), l.sciences[l.science_queue[0]].progress += this.dataService.scienceDiff(null, l) * n, l.sciences[l.science_queue[0]].progress >= this.dataService.scienceCost(this.conf.sciences[l.science_queue[0]], l.id) && (this.dataService.discoverScience(l.id), 0 == l.id && this.data.autopause.science && (this.data.pause = !0))), 1 != l.id && (l.culture += this.dataService.cultureDiff(null, l) * n, this.dataService.cultureCost(l), l.faith += this.dataService.faithDiff(null, l) * n, l.influence[l.id] || (l.influence[l.id] = 0), l.influence[l.id] += this.dataService.cultureDiff(null, l) * Math.min(n, this.conf.max_influence_dt)), l.promotion_cooldown && Object.keys(l.promotion_cooldown).forEach(e => {
                                l.promotion_cooldown[e] -= n, l.promotion_cooldown[e] <= 0 && delete l.promotion_cooldown[e]
                            });
                            let e = this.dataService.relicsGain(l.id) * n / 60;
                            l.progress += e, this.dataService.changeOrientationFortech(l, e)
                        } else 0 == l.id ? (this.dataService.reincarnation(), this.toastService.danger("You lost your last city...", ug.defeat)) : 1 != l.id && this.toastService.danger("Player " + l.name + " has lost his last city", ug.success, "/game/diplomacy"), 1 != l.id && (this.data.players.splice(this.data.players.indexOf(l), 1), this.data.relations = this.data.relations.filter(n => n.playersid[0] != l.id && n.playersid[1] != l.id)), this.data.attacks = this.data.attacks.filter(n => n.ownerid != l.id), this.data.spies = this.data.spies.filter(n => n.ownerid != l.id), this.data.scouts = this.data.scouts.filter(n => n.ownerid != l.id), this.data.goldtransfers = this.data.goldtransfers.filter(n => n.ownerid != l.id)
                    }), this.data.relations.forEach(l => {
                        l.cooldown && (l.cooldown -= n, l.cooldown <= 0 && delete l.cooldown), l.war_length && (l.war_length += n), 2 != l.status || l.cooldown || (l.status = 0);
                        let e = this.dataService.player(l.playersid[0]),
                            t = this.dataService.player(l.playersid[1]);
                        e.influence[t.id] || (e.influence[t.id] = 0), e.influence[t.id] += this.dataService.influenceDiff(t.id, e.id) * Math.min(n, this.conf.max_influence_dt), t.influence[e.id] || (t.influence[e.id] = 0), t.influence[e.id] += this.dataService.influenceDiff(e.id, t.id) * Math.min(n, this.conf.max_influence_dt)
                    }), this.data.workers = this.data.workers.filter(l => 1 != l.ownerid && this.dataService.player(l.ownerid)), this.data.workers.slice(0).forEach(l => {
                        if (l.construction_progress ? (l.construction_progress += l.speed * n * (this.dataService.hasWonder(l.ownerid, "apadana") ? 1.25 : 1), this.conf.improvements[l.type].road ? this.dataService.getRoad(l.to.x, l.to.y) >= l.type && (l.construction_progress = 99999) : this.dataService.getImprovement(l.to.x, l.to.y) == l.type && (l.construction_progress = 0, l.returning = !0)) : l.progress += l.speed * n * this.conf.troop_speed_ratio, l.returning && l.progress >= 2 * l.dist) {
                            let n = this.dataService.city(l.origin_id);
                            if (n) {
                                let e = 2 == l.level ? "engineer" : "worker";
                                n.troops[e] ? n.troops[e]++ : n.troops[e] = 1
                            }
                            this.data.workers.splice(this.data.workers.indexOf(l), 1)
                        } else if (!l.returning && !l.construction_progress && l.progress >= l.dist) l.construction_progress = .01;
                        else if (l.construction_progress && l.construction_progress >= this.conf.improvements[l.type].time)
                            if (this.conf.improvements[l.type].road)
                                if (this.dataService.setRoad(l.to.x, l.to.y, l.type), l.route.length) {
                                    let n = this.dataService.city(l.origin_id),
                                        e = this.conf.improvements[l.type];
                                    n && n.gold >= e.cost ? (n.gold -= e.cost, l.from.x = l.to.x, l.from.y = l.to.y, l.to.x = l.route[0].x, l.to.y = l.route[0].y, l.route.splice(0, 1), l.progress = 0, l.construction_progress = 0, l.dist = this.dataService.distance(l.from.x, l.from.y, l.to.x, l.to.y)) : l.route = []
                                } else {
                                    let n = this.dataService.city(l.origin_id);
                                    n ? (l.from.x = l.to.x, l.from.y = l.to.y, l.to.x = n.x, l.to.y = n.y, l.returning = !0, l.dist = this.dataService.distance(l.from.x, l.from.y, l.to.x, l.to.y), l.progress = l.dist, l.construction_progress = 0) : this.data.workers.splice(this.data.workers.indexOf(l), 1)
                                }
                        else this.dataService.setImprovement(l.to.x, l.to.y, l.type), this.data.workers.splice(this.data.workers.indexOf(l), 1);
                        else this.dataService.discover(l, !0)
                    }), this.data.archeologists.slice(0).forEach(l => {
                        if (l.progress += l.speed * n * this.conf.troop_speed_ratio, !l.returning && l.progress >= l.dist)
                            if (this.dataService.hasRuin(l.to.x, l.to.y)) {
                                let n = this.dataService.city(l.from.x, l.from.y);
                                n && (n.relics || (n.relics = 0), n.relics++, 0 == l.ownerid && this.toastService.success("A new relic in " + n.name, ug.relics, "/game/empire#tab_orientation"), this.data.ruins.splice(this.data.ruins.indexOf(this.data.ruins.find(n => n.x == l.to.x && n.y == l.to.y)), 1)), this.data.archeologists.splice(this.data.archeologists.indexOf(l), 1)
                            } else l.returning = !0;
                        else if (l.returning && l.progress >= 2 * l.dist) {
                            let n = this.dataService.city(l.from.x, l.from.y);
                            n && n.troops.archeologist++, this.data.archeologists.splice(this.data.archeologists.indexOf(l), 1)
                        } else this.dataService.discover(l, !0)
                    }), this.data.scouts = this.data.scouts.filter(l => 1 != l.ownerid), this.data.scouts.slice(0).forEach(l => {
                        if (yg.roll(this.dataService.scoutAmbushRisk(l))) {
                            this.data.scouts.splice(this.data.scouts.indexOf(l), 1);
                            let n = this.dataService.movPos(l);
                            0 == l.ownerid && this.toastService.danger("A scout has been ambushed by marauders", ug.act_scout, "/game/world?x=" + n.x + "&y=" + n.y)
                        } else if (l.progress += l.speed * n * this.conf.troop_speed_ratio, l.returning && l.progress >= 2 * l.dist) {
                            this.data.scouts.splice(this.data.scouts.indexOf(l), 1);
                            let n = this.dataService.city(l.from.x, l.from.y);
                            n && (l.explorer ? n.troops.explorer ? n.troops.explorer++ : n.troops.explorer = 1 : n.troops.scout ? n.troops.scout++ : n.troops.scout = 1)
                        } else if (!l.returning && l.progress >= l.dist)
                            if (l.auto) {
                                let n = this.dataService.city(l.origin_id),
                                    e = l.explorer || !n ? this.dataService.closestUndiscovered(l.ownerid, l.to.x, l.to.y) : this.dataService.closestUndiscoveredWithRange(l.ownerid, l.to.x, l.to.y, n.x, n.y, 15);
                                e ? (l.progress = 0, l.from = {
                                    x: l.to.x,
                                    y: l.to.y
                                }, l.to = {
                                    x: e.x,
                                    y: e.y
                                }, l.dist = this.dataService.distance(l.from.x, l.from.y, l.to.x, l.to.y)) : n ? this.dataService.cancelMove(l) : this.data.scouts.splice(this.data.scouts.indexOf(l), 1)
                            } else if (l.route && l.route.length) {
                            let n = l.route.shift();
                            l.route.length ? (l.progress = 0, l.from.x = l.to.x, l.from.y = l.to.y, l.to.x = n.x, l.to.y = n.y, l.dist = this.dataService.distance(l.from.x, l.from.y, l.to.x, l.to.y)) : (l.auto = !0, this.dataService.cancelMove(l))
                        } else l.returning = !0;
                        else this.dataService.discover(l, !0)
                    }), this.data.spies.slice(0).forEach(e => {
                        let t = this.dataService.city(e.from.x, e.from.y),
                            i = this.dataService.city(e.to.x, e.to.y);
                        if (l % 10 == 0 && t && i && (e.speed = this.dataService.speed("spy", e.ownerid, t, i)), e.progress += e.speed * n * this.conf.troop_speed_ratio, e.returning && e.progress >= 2 * e.dist) {
                            this.data.spies.splice(this.data.spies.indexOf(e), 1);
                            let l = this.dataService.city(e.from.x, e.from.y);
                            l && (l.troops.spy ? l.troops.spy += e.spies : l.troops.spy = e.spies)
                        } else if (!e.returning && e.progress >= e.dist) {
                            let l = this.dataService.spy(e);
                            if (t && i) {
                                let n = this.dataService.player(i.ownerid);
                                0 == e.ownerid && !l.survived && i.ownerid > 1 && (n.appreciation[e.ownerid] -= 5);
                                let s = {
                                    id: this.data.lastids.report++,
                                    from_id: t.id,
                                    to_id: i.id,
                                    spy: !0,
                                    spyBuildings: l.buildings ? Object.assign({}, i.buildings) : {},
                                    spyPop: l.buildings ? this.dataService.pop(i) : 0,
                                    spyData: l,
                                    spyTroops: l.troops ? Object.assign({}, i.troops) : {},
                                    spyScience: l.science || 0,
                                    troops: {
                                        initial: {
                                            attacker: {
                                                spy: e.spies
                                            },
                                            defender: {}
                                        },
                                        remaining: {
                                            attacker: {
                                                spy: l.survived ? e.spies : 0
                                            },
                                            defender: {}
                                        }
                                    },
                                    gold: l.gold ? Math.floor(i.gold) : 0,
                                    cityTaken: !1,
                                    cityBurned: !1,
                                    date: new Date,
                                    victory: l.buildings,
                                    isAttacker: !0,
                                    defense: l.cityDef ? this.dataService.defense(i) : 0
                                };
                                if (this.data.reports.push(s), s.victory ? this.toastService.success("Spying succeded in " + i.name + " !", ug.success, "/game/reports/" + s.id) : this.toastService.success(l.survived ? "Spying failed in " + i.name + " !" : "Spying failed in " + i.name + ". Relations with " + n.name + " decreased.", ug.defeat, "/game/reports/" + s.id), l.science && this.dataService.player().science_queue.length) {
                                    let n = this.dataService.player().science_queue[0];
                                    this.dataService.player().sciences[n].progress += l.science, this.dataService.player().sciences[n].progress > this.dataService.scienceCost(this.conf.sciences[n], e.ownerid) && (this.dataService.player().sciences[n].progress = this.dataService.scienceCost(this.conf.sciences[n], e.ownerid))
                                }
                                l.survived ? e.returning = !0 : this.data.spies.splice(this.data.spies.indexOf(e), 1)
                            } else e.returning = !0
                        } else this.dataService.discover(e)
                    }), this.data.goldtransfers.slice(0).forEach(e => {
                        let t = this.dataService.city(e.from.x, e.from.y),
                            i = this.dataService.city(e.to.x, e.to.y);
                        if (l % 10 == 0 && t && i && (e.speed = this.dataService.speed("gold", e.ownerid, t, i)), e.progress += e.speed * n * this.conf.troop_speed_ratio, e.progress >= e.dist && !e.returning || e.progress >= 2 * e.dist && e.returning)
                            if (i && i.ownerid == e.destid) {
                                i.gold += e.gold;
                                let l = this.dataService.player(i.ownerid);
                                if (l.appreciation[e.ownerid]) {
                                    let n = this.dataService.giftValue(e.gold);
                                    l.appreciation[e.ownerid] = Ng.constraint(l.appreciation[e.ownerid] + n, 100, 0)
                                }
                                0 == e.ownerid && 0 == i.ownerid ? this.toastService.success("Gold transfer arrived in " + i.name + " !", ug.gold, "/game/city/" + i.id) : 0 == e.ownerid ? this.toastService.success("Your gift arrived in " + i.name + " !", ug.diplomacy, "/game/diplomacy/") : 0 == i.ownerid && this.toastService.success("Gift from " + this.dataService.player(e.ownerid).name + " arrived in " + i.name + " !", ug.diplomacy, "/game/city/" + i.id), !e.returning && t && i.ownerid == e.ownerid && i.gold > this.dataService.maxGold(i) ? (e.from.x = i.x, e.from.y = i.y, e.to.x = t.x, e.to.y = t.y, e.gold = i.gold - this.dataService.maxGold(i), e.returning = !0, i.gold = this.dataService.maxGold(i)) : this.data.goldtransfers.splice(this.data.goldtransfers.indexOf(e), 1)
                            } else this.data.goldtransfers.splice(this.data.goldtransfers.indexOf(e), 1);
                        else this.dataService.discover(e)
                    }), this.data.attacks.slice(0).forEach(e => {
                        let t = this.dataService.city(e.from.x, e.from.y),
                            i = this.dataService.city(e.to.x, e.to.y);
                        if (l % 10 == 0 && t && i && (e.speed = this.dataService.attackSpeed(e.troops, e.ownerid, t, i)), i && (0 == this.data.difficulty && 0 == i.ownerid && 0 != e.ownerid || 1 == this.data.difficulty && 0 == i.ownerid && 1 == e.ownerid) && (e.returning = !0, e.progress = 2 * e.dist - e.progress), e.progress += e.speed * n * this.conf.troop_speed_ratio * (this.data.spelltime.berserker ? 1 + this.dataService.berserkerSpeedBonus(e.ownerid) : 1), e.returning && e.progress >= 2 * e.dist) t ? t.ownerid != e.ownerid ? (this.dataService.fight(e.troops, t.troops, t, e.ownerid), this.data.attacks.splice(this.data.attacks.indexOf(e), 1)) : (Object.keys(e.troops).forEach(l => {
                            t.troops[l] ? t.troops[l] += e.troops[l] : t.troops[l] = e.troops[l]
                        }), e.gold && (t.gold += e.gold), this.data.attacks.splice(this.data.attacks.indexOf(e), 1)) : this.data.attacks.splice(this.data.attacks.indexOf(e), 1);
                        else if (!e.returning && e.progress >= e.dist) {
                            let l = this.dataService.city(e.from.x, e.from.y),
                                n = this.dataService.city(e.to.x, e.to.y);
                            if (l && n)
                                if (e.ownerid == n.ownerid) Object.keys(e.troops).forEach(l => {
                                    n.troops[l] || (n.troops[l] = 0), n.troops[l] += e.troops[l]
                                }), this.data.attacks.splice(this.data.attacks.indexOf(e), 1), 0 == n.ownerid && this.toastService.info("Your troops have arrived in " + n.name, ug.act_move, "/game/city/" + n.id);
                                else if (1 == n.ownerid || 1 == e.ownerid || this.dataService.atWar(l.ownerid, n.ownerid)) {
                                let t = this.dataService.player(e.ownerid),
                                    i = this.dataService.player(n.ownerid),
                                    s = new yv(this.data.lastids.report++);
                                s.from_id = l.id, s.name = n.name, s.to_pid = n.ownerid, s.to_id = n.id, s.troops = {
                                    initial: {
                                        attacker: Object.assign({}, e.troops),
                                        defender: Object.assign({}, n.troops)
                                    },
                                    remaining: void 0
                                }, s.cityTaken = !1, s.defense = this.dataService.defense(n), s.gold = 0, s.isAttacker = !0;
                                let u = Object.values(e.troops).reduce((l, n) => l + n, 0),
                                    r = Object.values(n.troops).reduce((l, n) => l + n, 0),
                                    a = Object.keys(e.troops).reduce((l, n) => l + e.troops[n] * this.conf.troops[n].attack(t), 0),
                                    o = Object.keys(n.troops).reduce((l, e) => l + n.troops[e] * this.conf.troops[e].attack(i), 0),
                                    c = this.dataService.fight(e.troops, n.troops, n, e.ownerid);
                                [e.troops, n.troops] = c.troops;
                                let d = this.dataService.influenceEffectFromPlayer(n, this.dataService.player(e.ownerid));
                                d && (s.influence = d), c.castle && (s.castle_destroyed = !0), c.walls && (s.walls_destroyed = !0), s.troops.remaining = {
                                    attacker: Object.assign({}, e.troops),
                                    defender: Object.assign({}, n.troops)
                                };
                                let h = Object.values(e.troops).reduce((l, n) => l + n, 0),
                                    p = Object.values(n.troops).reduce((l, n) => l + n, 0),
                                    f = Object.keys(e.troops).reduce((l, n) => l + e.troops[n] * this.conf.troops[n].attack(t), 0),
                                    g = Object.keys(n.troops).reduce((l, e) => l + n.troops[e] * this.conf.troops[e].attack(i), 0);
                                if (1 != e.ownerid && 1 != e.destid) {
                                    let t = this.dataService.getRelation(e.ownerid, n.ownerid);
                                    t && (l.ownerid == t.playersid[0] ? t.war_rating += o - g - (a - f) : t.war_rating -= o - g - (a - f), t.war_total += o - g + (a - f))
                                }
                                if (this.data.spelltime.appropriation && 0 == e.ownerid) {
                                    let l = this.dataService.player(e.ownerid),
                                        n = this.dataService.appropriationBonus(e.ownerid) * (r - p);
                                    l.sciences[l.science_queue[0]].progress || (l.sciences[l.science_queue[0]].progress = 0), l.sciences[l.science_queue[0]].progress += n, l.sciences[l.science_queue[0]].progress >= this.dataService.scienceCost(this.dataService.conf.sciences[l.science_queue[0]], l.id) && this.dataService.discoverScience(l.id), l.faith += n
                                }
                                if (this.dataService.hasPolicy("crusades", t.id) && (t.faith += 10 * (r - p)), s.isAttacker = 0 == e.ownerid, s.victory = 0 == e.ownerid && h > 0 || 0 != e.ownerid && 0 == h, s.defeat = 0 == e.ownerid && 0 == h || 0 != e.ownerid && 0 == p, e.returning = !0, (e.troops.slaver || e.troops.warrior && "aztecs" == t.civ_id && this.dataService.hasScience("bronze_working", t)) && (0 != p || !e.troops.governor)) {
                                    let l = (h / (.1 + u) - p / (.1 + r)) * (this.dataService.pop(n) - 1) * .1 * (this.dataService.hasWonder(t.id, "ziggurat") ? 2 : 1),
                                        i = 0;
                                    e.troops.slaver && (i += e.troops.slaver), e.troops.warrior && "aztecs" == t.civ_id && (i += e.troops.warrior), l = 1 - Math.pow(1 - l, i), yg.roll(l) && (this.dataService.killCitizen(n), e.troops.worker = 1, this.dataService.pop(n) > 1 && this.dataService.hasPolicy("slavery") && yg.roll(.5) && (this.dataService.killCitizen(n), e.troops.worker = 2))
                                }
                                let m = n.gold;
                                if (0 == h) this.data.attacks.splice(this.data.attacks.indexOf(e), 1);
                                else if (0 == p && e.troops.governor) {
                                    if (1 != e.ownerid && 1 != e.destid) {
                                        let t = this.dataService.getRelation(e.ownerid, n.ownerid);
                                        if (t) {
                                            let e = this.dataService.cityValue(n);
                                            l.ownerid == t.playersid[0] ? t.war_rating += e / 10 : t.war_rating -= e / 10, t.war_total += e / 10
                                        }
                                    }
                                    e.burn ? this.dataService.transferCity(n.id, e.ownerid, !0) : (this.dataService.transferCity(n.id, e.ownerid), e.troops.governor--, e.troops.governor || delete e.troops.governor, e.noreturn && (Object.keys(e.troops).forEach(l => {
                                        n.troops[l] || (n.troops[l] = 0), n.troops[l] += e.troops[l]
                                    }), this.data.attacks.splice(this.data.attacks.indexOf(e), 1))), this.dataService.hasPolicy("civilizing", t.id) && (t.progress += 50, this.dataService.changeOrientationFortech(t, 50)), 0 == e.ownerid && this.data.autopause.city_captured && (this.data.pause = !0), 0 == n.id && this.data.autopause.city_lost && (this.data.pause = !0), s.cityTaken = !0, e.burn && (s.cityBurned = !0)
                                }
                                if (!s.cityTaken || s.cityBurned) {
                                    let l = Object.keys(e.troops).map(l => this.conf.troops[l].capacity * e.troops[l]).reduce((l, n) => l + n);
                                    this.data.spelltime.berserker && (l *= 10);
                                    let t = Math.floor(Math.min(l, m));
                                    n && (n.gold -= t), e.gold = t, s.gold = t
                                }
                                0 != l.ownerid && 0 != n.ownerid || (this.data.reports.push(s), s.victory ? this.toastService.success("Victory in " + n.name + " !", ug.success, "/game/reports/" + s.id) : s.defeat ? this.toastService.info("Defeat in " + n.name + " !", ug.defeat, "/game/reports/" + s.id) : this.toastService.info("Battle of " + n.name + " is over !", ug.attack, "/game/reports/" + s.id))
                            } else e.returning = !0;
                            else e.returning = !0
                        } else this.dataService.discover(e)
                    }), !e) {
                    for (let l in this.data.cooldowns) this.data.cooldowns[l] -= n, this.data.cooldowns[l] <= 0 && delete this.data.cooldowns[l];
                    for (let l in this.data.spelltime) this.data.spelltime[l] -= n, this.data.spelltime[l] <= 0 && delete this.data.spelltime[l]
                }
                if (this.data.autocast && !e)
                    if (this.dataService.player().orientation > -100) this.data.autocast = void 0;
                    else {
                        let l = this.conf.spells[this.data.autocast];
                        this.dataService.isSpellAvailable(l) && this.dataService.useSpell(l, this)
                    } this.data.last_plague += Math.min(n, this.conf.max_plague_dt), this.data.capitalchange_cooldown && (this.data.capitalchange_cooldown -= n, this.data.capitalchange_cooldown <= 0 && delete this.data.capitalchange_cooldown), this.dataService.checkLocks()
            }
            this.data.lt = t
        }
    }
    var bv = st({
        encapsulation: 0,
        styles: [[".spells-deck[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:40px;height:40px}.spells-deck[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:10px;bottom:8px}.spells-deck[_ngcontent-%COMP%]   .hoverable[_ngcontent-%COMP%]{cursor:pointer}.spells-deck[_ngcontent-%COMP%]   .hoverable[_ngcontent-%COMP%]:hover{background-color:#f8f9fa!important}.spells-deck[_ngcontent-%COMP%]   .hoverable[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#343a40!important}.spells-hidden[_ngcontent-%COMP%]{width:40px;height:40px;bottom:-20px}.spells-hidden[_ngcontent-%COMP%]:hover{bottom:-18px}"]],
        data: {}
    });

    function _v(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [["class", "rounded-circle text-center position-relative border border-danger cursor-pointer"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (t = 0 != (i.autocast = !i.autocast) && t), t
        }), null, null)), yi(512, null, Oa, Na, [fe, Ne, be]), gi(2, 278528, null, 0, Ba, [Oa], {
            ngStyle: [0, "ngStyle"]
        }, null), vu(3, {
            opacity: 0
        }), (l()(), _u(-1, null, [" A "]))], (function (l, n) {
            var e = l(n, 3, 0, n.component.autocast ? 1 : .6);
            l(n, 2, 0, e)
        }), null)
    }

    function wv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0], [8, "style", 2]], null, null, null, null))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, n.parent.parent.context.$implicit.value.icon + " " + (e.data.cooldowns[n.parent.parent.context.$implicit.key] ? "text-light" : "text-warning"), e.style(n.parent.parent.context.$implicit.value))
        }))
    }

    function xv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0], [8, "style", 2]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.parent.parent.context.$implicit.value.icon + " text-success", n.component.style(n.parent.parent.context.$implicit.value))
        }))
    }

    function kv(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 9, "div", [["container", "body"], ["triggers", "manuel"]], null, [[null, "mouseenter"], [null, "mouseleave"], [null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== i.mouseenter(ei(l, 4), l.parent.context.$implicit.value) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 4)) && t), "click" === n && (t = !1 !== i.use(l.parent.context.$implicit.value) && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(2, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(3, {
            "rounded-circle text-center position-relative": 0,
            "text-light hoverable": 1,
            "text-secondary": 2,
            "border border-danger": 3
        }), gi(4, 737280, [["p1", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            popoverTitle: [1, "popoverTitle"],
            triggers: [2, "triggers"],
            container: [3, "container"]
        }, null), (l()(), su(5, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, wv)), gi(7, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, xv)), gi(9, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component,
                t = l(n, 3, 0, !0, e.isAvailable(n.parent.context.$implicit.value), !e.isAvailable(n.parent.context.$implicit.value), e.data.autocast == n.parent.context.$implicit.key);
            l(n, 2, 0, t), l(n, 4, 0, ei(n.parent.parent.parent.parent, 4), ei(n.parent.parent.parent.parent, 3), "manuel", "body"), l(n, 7, 0, !e.data.spelltime[n.parent.context.$implicit.key] && !e.isLocked(n.parent.context.$implicit.value)), l(n, 9, 0, e.data.spelltime[n.parent.context.$implicit.key])
        }), (function (l, n) {
            l(n, 5, 0, n.parent.context.$implicit.value.icon)
        }))
    }

    function Sv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, kv)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, n.context.$implicit.value.deity == e.dataService.player().deity && 25 * (0 - n.context.$implicit.value.level) >= e.dataService.player().orientation)
        }), null)
    }

    function Cv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 9, "div", [["class", "position-absolute"], ["style", "left:50%;bottom:10px;z-index:5"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 8, "div", [["class", "spells-deck position-relative bg-dark text-light text-150 rounded d-flex border border-light px-2 py-1"], ["style", "left:-50%"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, _v)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 2, null, Sv)), gi(5, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne]), (l()(), su(7, 16777216, null, null, 2, "div", [["class", "rounded-circle text-center cursor-pointer position-relative text-light hoverable"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.hide() && t), t
        }), null, null)), gi(8, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"]
        }, null), (l()(), su(9, 0, null, null, 0, "i", [["style", "left:12px"]], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, e.dataService.player().orientation <= -100), l(n, 5, 0, et(n, 5, 0, ei(n, 6).transform(e.conf.spells))), l(n, 8, 0, ei(n.parent.parent, 5))
        }), (function (l, n) {
            l(n, 9, 0, n.component.icons.arrow_down)
        }))
    }

    function Iv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "div", [["class", "position-absolute"], ["style", "left:50%;bottom:0"]], null, null, null, null, null)), (l()(), su(1, 16777216, null, null, 2, "div", [["class", "spells-hidden rounded-circle bg-dark text-light text-130 text-center position-relative cursor-pointer border border-light"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.show() && t), t
        }), null, null)), gi(2, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"]
        }, null), (l()(), su(3, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            l(n, 2, 0, ei(n.parent.parent, 6))
        }), (function (l, n) {
            l(n, 3, 0, n.component.icons.arrow_up)
        }))
    }

    function Tv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Cv)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Iv)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, !e.data.spellshidden && e.display()), l(n, 4, 0, e.data.spellshidden && e.display())
        }), null)
    }

    function Ev(l) {
        return ku(0, [(l()(), _u(0, null, ["", ""]))], null, (function (l, n) {
            l(n, 0, 0, n.context.title)
        }))
    }

    function Av(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [["class", "border-top text-success"]], null, null, null, null, null)), (l()(), _u(1, null, ["Charge: ", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.component.data.charging[n.parent.context.id])
        }))
    }

    function Pv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [["class", "border-top text-success"]], null, null, null, null, null)), (l()(), _u(1, null, ["Active: ", ""])), yu(2, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 1, 0, l(n, 2, 0, ei(n.parent.parent, 0), e.data.spelltime[n.parent.context.id]));
            l(n, 1, 0, t)
        }))
    }

    function Dv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [["class", "border-top text-primary"]], null, null, null, null, null)), (l()(), _u(1, null, ["Cooldown: ", ""])), yu(2, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 1, 0, l(n, 2, 0, ei(n.parent.parent, 0), e.data.cooldowns[n.parent.context.id]));
            l(n, 1, 0, t)
        }))
    }

    function Mv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "div", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "b", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Locked"])), (l()(), _u(3, null, [" ", " to unlock"]))], null, (function (l, n) {
            l(n, 3, 0, n.parent.context.lockDesc)
        }))
    }

    function Ov(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "div", [], [[8, "innerHTML", 1]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Av)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Pv)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Dv)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Mv)), gi(8, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(9, 0, null, null, 3, "div", [["class", "border-top"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Hotkey: "])), (l()(), su(11, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(12, null, ["", ""]))], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.data.charging[n.context.id]), l(n, 4, 0, e.data.spelltime[n.context.id]), l(n, 6, 0, !e.data.spelltime[n.context.id] && e.data.cooldowns[n.context.id]), l(n, 8, 0, n.context.lockDesc)
        }), (function (l, n) {
            l(n, 0, 0, n.context.desc), l(n, 12, 0, n.context.level)
        }))
    }

    function Nv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Hide"]))], null, null)
    }

    function Rv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Show"]))], null, null)
    }

    function Bv(l) {
        return ku(0, [mi(0, gv, []), (l()(), iu(16777216, null, null, 1, null, Tv)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, [["popTitle", 2]], null, 0, null, Ev)), (l()(), iu(0, [["popContent", 2]], null, 0, null, Ov)), (l()(), iu(0, [["popHide", 2]], null, 0, null, Nv)), (l()(), iu(0, [["popShow", 2]], null, 0, null, Rv))], (function (l, n) {
            l(n, 2, 0, n.component.dataService.player().orientation <= -25)
        }), null)
    }
    class zv {
        transform(l, n = "") {
            return void 0 === l ? "" : mg.format(l, n)
        }
    }
    class $v {
        transform(l) {
            return l == 1 / 0 ? "Infinity" : Math.round(100 * l) + " %"
        }
    }
    var Lv = e("HXk2"); class Fv {
        constructor(l, n, e, t, i, s, u, r, a) {
            this.data = l, this.dataService = n, this.conf = e, this.saveService = t, this.router = i, this.coreEngine = s, this.aiEngine = u, this.modalService = r, this.clipboardService = a, this.environment = Pr, this.icons = ug, this.now = Date.now()
        }
        ngOnInit() {
            this.timer = setInterval(() => {
                this.now = Date.now()
            }, 100)
        }
        ngOnDestroy() {
            this.timer && clearInterval(this.timer)
        }
        open(l) {
            this.saveStr = this.saveService.encryptData(), this.clipboardService.copyFromContent(this.saveStr), this.modalService.open(l)
        }
        download(l = !1) {
            l && (this.saveStr = this.saveService.encryptData());
            const n = new Blob([this.saveStr], {
                type: "text"
            });
            Object(Lv.saveAs)(n, "civ2_" + this.data.name.replace(/ /g, "_") + ".txt")
        }
        terminal() {
            console.log(this)
        }
        expand() {
            if (window.self !== window.top) {
                try {
                    localStorage.fsa = "true", delete localStorage.openpages, delete localStorage.page_available
                } catch (l) {}
                window.open("https://festive-perlman-5fad70.netlify.com/"), window.location.href = "about:blank"
            }
        }
        save() {
            this.saveService.save()
        }
        reincarnation(l) {
            this.modalService.open(l)
        }
        doReincarnation() {
            this.dataService.reincarnation()
        }
        favorGain() {
            let l = this.dataService.favorGain();
            return l[0] + "|" + l[1]
        }
        saveTime() {
            return Math.floor((this.now - this.data.savetime) / 1e3)
        }
        exit() {
            this.coreEngine.stop(), this.aiEngine.stop(), delete this.data, this.router.navigate(["/"])
        }
        inIframe() {
            return window.self !== window.top
        }
    }
    class qv {
        constructor(l, n, e, t) {
            this.conf = l, this.data = n, this.dataService = e, this.toastService = t, this.engine = om(0, this.conf.ait), this.icons = ug
        }
        ngOnDestroy() {
            this.stop()
        }
        stop() {
            this.subscription.unsubscribe()
        }
        start() {
            this.subscription = this.engine.subscribe(this.run.bind(this))
        }
        run(l) {
            this.data.pause || (Date.now(), this.data.relations.filter(l => !l.playersid.includes(0) && 1 == l.status).forEach(l => {
                if (!l.cooldown) {
                    let n = this.dataService.player(l.playersid[0]),
                        e = this.dataService.player(l.playersid[1]);
                    l.war_length >= this.dataService.aiMinWarTime(n) && l.war_length >= this.dataService.aiMinWarTime(e) && (this.dataService.truce(n.id, e.id), this.dataService.haveRelation(0, n.id) && this.dataService.haveRelation(0, e.id) && this.toastService.info(n.name + " and " + e.name + " are now in peace.", ug.diplomacy, "/game/diplomacy"))
                }
            }), this.data.relations.filter(l => !l.playersid.includes(0) && 0 == l.status).forEach(l => {
                let n = this.dataService.player(l.playersid[0]),
                    e = this.dataService.player(l.playersid[1]);
                this.dataService.hasScience("diplomacy", n) && this.dataService.hasScience("diplomacy", e) && n.appreciation[e.id] >= 95 && e.appreciation[n.id] >= 95 && (l.status = 3, l.cooldown = this.conf.alliance_min_length, this.dataService.haveRelation(0, n.id) && this.dataService.haveRelation(0, e.id) && this.toastService.info(n.name + " and " + e.name + " have formed an alliance.", ug.diplomacy, "/game/diplomacy"))
            }), this.data.relations.filter(l => 0 == l.status).forEach(l => {
                let n = this.dataService.player(l.playersid[0]),
                    e = this.dataService.player(l.playersid[1]);
                n.id > 1 && yg.roll(this.dataService.warChance(n, e)) ? (0 == e.id ? this.toastService.danger(n.name + " declared war on you", ug.attack, "/game/diplomacy/") : this.dataService.haveRelation(0, n.id) && this.dataService.haveRelation(0, e.id) && this.toastService.warning(n.name + " declared war on " + e.name, ug.attack, "/game/diplomacy/"), this.dataService.war(n.id, e.id)) : e.id > 1 && yg.roll(this.dataService.warChance(e, n)) && (0 == n.id ? this.toastService.danger(e.name + " declared war on you", ug.attack, "/game/diplomacy/") : this.dataService.haveRelation(0, n.id) && this.dataService.haveRelation(0, e.id) && this.toastService.warning(e.name + " declared war on " + n.name, ug.attack, "/game/diplomacy/"), this.dataService.war(e.id, n.id))
            }), this.data.relations.filter(l => 3 == l.status).forEach(l => {
                if (!l.cooldown) {
                    let n = this.dataService.player(l.playersid[0]),
                        e = this.dataService.player(l.playersid[1]);
                    l.playersid.includes(0) ? e.appreciation[0] < 85 && (l.status = 0, this.toastService.info(e.name + " has dissolved the alliance with you.", ug.diplomacy, "/game/diplomacy")) : (e.appreciation[n.id] < 85 || n.appreciation[e.id] < 85) && (l.status = 0, this.dataService.haveRelation(0, n.id) && this.dataService.haveRelation(0, e.id) && this.toastService.info(n.name + " has dissolved the alliance with " + e.name, ug.diplomacy, "/game/diplomacy"))
                }
            }), this.data.players.filter(l => 0 != l.id).forEach(l => {
                if (l.cities.forEach(n => {
                        let e = ["", "builders", "scientists", "merchants", "artists"],
                            t = this.dataService.health(n);
                        t <= .2 && (n.autoassign_options.nogrowth = !0), t >= .5 && (e.push("farmers"), n.autoassign_options.nogrowth = !1), t >= .8 && e.push("farmers"), n.autoassign_options.priority = yg.fromArray(e), Object.keys(n.troops).forEach(l => {
                            let e = this.conf.troops[l],
                                t = n.troops[l];
                            t && this.dataService.canUpgrade(e, t, n) && this.dataService.upgrade(e, n)
                        });
                        let i = [];
                        if (Object.values(this.conf.buildings).forEach(l => {
                                this.isBuildingAvailable(n, l) && i.push(l)
                            }), i.length && yg.roll(.8)) {
                            i.length > 1 && i.some(l => "progress" == l.id) && i.splice(i.indexOf(i.find(l => "progress" == l.id)), 1);
                            let e = yg.fromArray(i);
                            i.some(l => "cop" == l.id) && (e = i.find(l => "cop" == l.id)), i.some(l => "go" == l.id) && (e = i.find(l => "go" == l.id)), i.some(l => "coa" == l.id) && (e = i.find(l => "coa" == l.id)), i.some(l => "market" == l.id) && (e = i.find(l => "market" == l.id)), i.some(l => "bank" == l.id) && (e = i.find(l => "bank" == l.id)), i.some(l => "stock" == l.id) && (e = i.find(l => "stock" == l.id)), i.some(l => "seaport" == l.id) && (e = i.find(l => "seaport" == l.id)), n.gold -= this.dataService.buildingGoldCost(e, l.id), n.buildings[e.id] = {
                                progress: 0,
                                done: !1
                            }, n.building_queue.push(e.id), "progress" != e.id && "progress" == n.building_queue[0] && n.building_queue.splice(0, 1)
                        }
                        let s = 1 == l.id ? 15 : this.conf.civilizations[l.civ_id].agressivity,
                            u = this.dataService.goldDiff(n);
                        if (n.troop_queue.length < 20 && u > 0 && yg.roll(s / 5 - 2.3)) {
                            let e = [];
                            if (Object.values(this.conf.troops).forEach(t => {
                                    let i = this.isTroopAvailable(l, n, t);
                                    return ("caravan" != t.id || 1 != l.id) && ("caravan" == t.id && this.dataService.tradeRouteNb(l) + this.dataService.troopNbById(l.id, "caravan") >= this.dataService.maxTradeRoute(l) && (i = !1), ("caravel" != t.id || 1 != l.id) && ("caravel" == t.id && this.dataService.coloniesAvailable() <= this.dataService.troopNbById(l.id, "caravel") + 1 && (i = !1), ("scout" != t.id && "explorer" != t.id || 1 != l.id) && (("scout" == t.id || "explorer" == t.id) && this.dataService.troopNbById(l.id, "explorer", !0, !0) + this.dataService.troopNbById(l.id, "scout", !0, !0) >= 3 && (i = !1), "scout" != t.id && "explorer" != t.id || this.dataService.hasUndiscovered(l.id) || (i = !1), "spy" == t.id && n.troops.spy && n.troops.spies >= 20 && (i = !1), "governor" == t.id && (n.troops.governor || n.troop_queue.some(l => "governor" == l.id)) && (i = !1), "governor" == t.id && this.dataService.troopNbById(l.id, "governor", !0, !0) >= 5 && (i = !1), "slaver" == t.id && n.troops.slaver && n.troops.slaver >= 5 && (i = !1), "plague_doctor" == t.id && n.troops.plague_doctor && n.troops.plague_doctor >= 10 && (i = !1), "plague_doctor" == t.id && !this.dataService.plague() && this.dataService.currentScienceRank() < 10 && (i = !1), ("worker" != t.id && "engineer" != t.id || 1 != l.id) && ("worker" != t.id && "engineer" != t.id || !(this.dataService.pop(n) <= 1)) && (("worker" == t.id || "engineer" == t.id) && this.dataService.troopNbById(l.id, "worker", !0, !0) + this.dataService.troopNbById(l.id, "engineer", !0, !0) >= l.cities.length && (i = !1), ("archeologist" != t.id || 1 != l.id) && !("archeologist" == t.id && this.dataService.troopNbById(l.id, "archeologist", !0, !0) >= this.data.ruins.length) && void(i && e.push(t))))))
                                }), e.length) {
                                let t = yg.fromArray(e);
                                e.some(l => "caravel" == l.id) && (t = e.find(l => "caravel" == l.id)), e.some(l => "caravan" == l.id) && (t = e.find(l => "caravan" == l.id)), n.plague > 0 && e.some(l => "plague_doctor" == l.id) && (t = e.find(l => "plague_doctor" == l.id));
                                let i = 1;
                                t.special || "governor" == t.id || (i = yg.get(1, Ng.constraint(u / 5, 1, 5)), i = Ng.constraint(i, n.gold / t.gold(this.dataService, l.id))), n.gold -= i * t.gold(this.dataService, l.id), n.troops_progress[t.id] || (n.troops_progress[t.id] = 0), n.troop_queue.push({
                                    id: t.id,
                                    nb: i
                                })
                            }
                        } else n.troop_queue.length > 20 && (n.gold += 20 * (n.troop_queue.length - 20), n.troop_queue.splice(20));
                        if (n.building_queue.includes("seaport") && n.gold >= this.dataService.buildingProdToGoldCost(n, "seaport") && this.dataService.buyBuilding(n, "seaport"), Object.keys(n.troop_queue).includes("caravel") && n.gold >= this.dataService.troopTimeToGoldCost(n, "caravel")) {
                            n.gold -= this.dataService.troopTimeToGoldCost(n, "caravel");
                            let l = Object.keys(n.troop_queue).indexOf("caravel");
                            n.troops_progress.caravel = 0, n.troop_queue[l].nb--, n.troop_queue[l].nb || n.troop_queue.splice(l, 1), n.troops.caravel ? n.troops.caravel++ : n.troops.caravel = 1
                        }
                        if (n.gold >= .9 * this.dataService.maxGold(n) && n.building_queue.length && this.dataService.buildingProdToGoldCost(n, n.building_queue[0]) <= n.gold && !this.conf.buildings[n.building_queue[0]].wonder && this.dataService.buyBuilding(n, n.building_queue[0]), l.id > 1 && (n.troops.explorer && this.dataService.hasUndiscovered(l.id) ? this.dataService.createScout(n, !0, n.x, n.y) : delete n.troops.explorer, n.troops.scout && this.dataService.hasUndiscovered(l.id) ? this.dataService.createScout(n, !0, n.x, n.y) : delete n.troops.scout), l.id > 1 && this.data.attacks.some(l => l.to.x == n.x && l.to.y == n.y) && !n.buildings.walls) {
                            let l = n.building_queue.findIndex(l => "walls" == l); - 1 == l ? this.isBuildingAvailable(n, this.conf.buildings.walls) && n.building_queue.unshift("walls") : 0 != l && (n.building_queue.splice(l, 1), n.building_queue.unshift("walls"))
                        }
                        let r = this.dataService.closestCity(n.x, n.y, l.id, !0),
                            a = this.dataService.player(r.ownerid);
                        if (1 != l.id && 1 != r.ownerid && this.dataService.haveRelation(l.id, a.id) && !this.dataService.atWar(l.id, a.id) && l.appreciation[r.ownerid] >= 50 && n.gold > 100 && yg.roll(1e-4)) {
                            let e = Math.floor(yg.get(.01 * n.gold, .002 * l.appreciation[r.ownerid] * n.gold));
                            this.dataService.createGold(n, r, e), 0 == r.ownerid && this.toastService.info(l.name + " are sending a gift to " + r.name, ug.gold, "/game/attacks")
                        }
                        if (1 != l.id && n.troops.caravel && this.dataService.coloniesAvailable() > 0 && (this.data.colonies.push(n.id), n.troops.caravel--, this.dataService.haveRelation(0, l.id) && this.toastService.warning(l.name + " have founded a colony", ug.colony, "/game/diplomacy#tab_colonies")), 1 != l.id && n.troops.caravan && this.dataService.tradeRouteNb(l) < this.dataService.maxTradeRoute(l)) {
                            let e = this.dataService.availableCitiesForTrade(n);
                            if (e.length) {
                                let t = e.map(e => {
                                        let t = this.dataService.tradeRouteValue(n, e),
                                            i = t.gold + t.culture + t.faith + t.science;
                                        return l.appreciation[e.ownerid] && (i *= Math.sqrt(l.appreciation[e.ownerid] / 2)), i
                                    }),
                                    i = -1,
                                    s = -1;
                                if (t.forEach((l, n) => {
                                        l > i && (i = l, s = n)
                                    }), s >= 0) {
                                    let t = e[s];
                                    this.data.trades.push({
                                        ownerid: l.id,
                                        destid: t.ownerid,
                                        from: {
                                            x: n.x,
                                            y: n.y
                                        },
                                        to: {
                                            x: t.x,
                                            y: t.y
                                        }
                                    }), n.troops.caravan -= 1, Pr.production || console.log(l.name + " is starting trade from " + n.name + " to " + t.name), 0 == t.ownerid && this.toastService.info(l.name + " created a trade route between " + n.name + " and " + t.name, ug.trade, "/game/world?x=" + n.x + "&y=" + n.y)
                                }
                            }
                        }
                        if (1 != l.id && n.troops.archeologist) {
                            let e, t = 999999;
                            for (let l of this.data.ruins) {
                                let i = this.dataService.distance(n.x, n.y, l.x, l.y);
                                i < t && !this.data.archeologists.some(n => n.to.x == l.x && n.to.y == l.y) && (e = l, t = i)
                            }
                            e && (Pr.production || console.log("New archeo orders from " + n.name + " to (" + e.x + "," + e.y + ")"), this.data.archeologists.push({
                                from: {
                                    x: n.x,
                                    y: n.y
                                },
                                to: {
                                    x: e.x,
                                    y: e.y
                                },
                                ownerid: l.id,
                                destid: l.id,
                                dist: this.dataService.distance(n.x, n.y, e.x, e.y),
                                progress: 0,
                                speed: this.dataService.speed("archeologist", l.id, n, e),
                                returning: !1
                            })), n.troops.archeologist--, n.troops.archeologist || delete n.troops.archeologist
                        }
                        if ((n.troops.worker || n.troops.engineer) && (1 == l.id || this.dataService.troopNbById(l.id, "worker", !0, !0) + this.dataService.troopNbById(l.id, "engineer", !0, !0) >= l.cities.length) && (n.troops[n.troops.worker ? "worker" : "engineer"]--, n.citizens.idle++), 1 != l.id && (n.troops.worker || n.troops.engineer)) {
                            let e = n.troops.engineer ? "engineer" : "worker",
                                t = n.troops.engineer ? 2 : 1,
                                i = 0;
                            2 == t && this.dataService.isImprovementAvailable(this.conf.improvements[6], t, n) ? i = 6 : this.dataService.isImprovementAvailable(this.conf.improvements[5], t, n) && (i = 5);
                            let s = this.dataService.closestCity(n.x, n.y, l.id, !1);
                            if (i && s && this.dataService.cityConnected(n, s) + 4 < i) this.dataService.createWorker(n, i, s.x, s.y, t, !0);
                            else if (i && this.dataService.cityConnectedToCapital(n) + 4 < i) {
                                let e = this.dataService.capital(l.id);
                                this.dataService.createWorker(n, i, e.x, e.y, t, !0)
                            } else {
                                let i = [];
                                for (let e = n.x - 1; e <= n.x + 1; e++)
                                    for (let s = n.y - 1; s <= n.y + 1; s++) {
                                        let u = this.dataService.getTerrain(e, s),
                                            r = this.dataService.getImprovement(e, s),
                                            a = 0;
                                        1 == u || 3 == u || 6 == u && "australians" == l.civ_id ? a = 2 == t ? 2 : 1 : 2 == u || 4 == u ? a = 2 == t ? 4 : 3 : 1 == u ? a = 7 : 5 == u && (a = 8), 0 != a && r != a && this.dataService.isImprovementAvailable(this.conf.improvements[a], t, n) && this.dataService.isImprovementAllowed(e, s, a, n, !1) && !this.data.workers.some(l => l.type == a && l.to.x == e && l.to.y == s) && i.push({
                                            x: e,
                                            y: s,
                                            type: a
                                        })
                                    }
                                if (i.length) {
                                    let l = yg.fromArray(i);
                                    this.dataService.createWorker(n, l.type, l.x, l.y, t, !1)
                                } else {
                                    let t = yg.fromArray(l.cities),
                                        i = {};
                                    i[e] = 1, this.data.attacks.push({
                                        ownerid: l.id,
                                        destid: l.id,
                                        from: {
                                            x: n.x,
                                            y: n.y
                                        },
                                        to: {
                                            x: t.x,
                                            y: t.y
                                        },
                                        dist: this.dataService.distance(n.x, n.y, t.x, t.y),
                                        speed: this.dataService.speed(e, l.id, n, t),
                                        progress: 0,
                                        troops: i,
                                        returning: !1,
                                        agressive: !1,
                                        noreturn: !1,
                                        burn: !1
                                    }), n.troops[e]--
                                }
                            }
                        }
                        if (-1 == this.data.attacks.findIndex(l => l.to.x == n.x && l.to.y == n.y)) {
                            let e = this.dataService.citiesInRange(n, 10).filter(e => e.ownerid != l.id && (1 == e.ownerid || this.dataService.era(e.ownerid) != this.conf.eras.prehistory.id) && !(0 == e.ownerid && 0 == this.data.difficulty) && !(0 == e.ownerid && 1 == this.data.difficulty && 1 == l.id) && (1 == e.ownerid || 1 == l.id || this.dataService.atWar(l.id, e.ownerid)) && (3 != this.data.difficulty && this.dataService.cityAttack(n) > this.dataService.attackRatioRequired(l.civ_id) * this.dataService.playerAttack(this.dataService.player(e.ownerid)) / this.dataService.player(e.ownerid).cities.length || 3 == this.data.difficulty && this.dataService.cityAttack(n) > this.dataService.attackRatioRequired(l.civ_id) * this.dataService.cityAttack(e)));
                            if (e.length) {
                                let t = .05;
                                if (1 == this.data.difficulty ? t = 1 == l.id ? 0 : .05 : 2 == this.data.difficulty ? t = 1 == l.id ? .001 : .1 : 3 == this.data.difficulty && (t = 1 == l.id ? .01 : .5), yg.roll(t)) {
                                    let t = yg.fromArray(e);
                                    !Pr.production && n.troops.governor && console.log(l.name + " is launching an attack with gov from " + n.name + " to " + t.name);
                                    let i = {};
                                    for (let l in n.troops) this.conf.troops[l].special || ("governor" == l ? (i[l] = 1, n.troops[l] -= 1) : (i[l] = n.troops[l], delete n.troops[l]));
                                    let s = this.conf.barbarian_burn_chances;
                                    l.id > 1 && (s = this.conf.civilizations[l.civ_id].burn_chances);
                                    let u = yg.roll(s);
                                    this.data.attacks.push({
                                        ownerid: l.id,
                                        destid: t.ownerid,
                                        from: {
                                            x: n.x,
                                            y: n.y
                                        },
                                        to: {
                                            x: t.x,
                                            y: t.y
                                        },
                                        dist: this.dataService.distance(t.x, t.y, n.x, n.y),
                                        speed: this.dataService.attackSpeed(i, n.ownerid, n, t),
                                        progress: 0,
                                        troops: i,
                                        returning: !1,
                                        agressive: !0,
                                        burn: u
                                    }), 0 == t.ownerid && (this.toastService.danger("Incoming attack in " + t.name, ug.attack, "/game/attacks/"), this.data.autopause.incoming && (this.data.pause = !0))
                                }
                            }
                        }
                    }), l.id > 1 && this.data.players.filter(n => 1 != n.id && n.id != l.id && this.dataService.haveRelation(l.id, n.id)).forEach(n => {
                        l.appreciation[n.id] += this.dataService.diploDiff(l.id, n.id) / 12, l.appreciation[n.id] = Ng.constraint(l.appreciation[n.id], 100, 0)
                    }), !l.science_queue.length) {
                    let n = [];
                    if (Object.values(this.conf.sciences).forEach(e => {
                            this.dataService.isScienceAvailable(e.id, l) && n.push(e)
                        }), n.length) {
                        let e = yg.fromArray(n),
                            t = "astronomy";
                        "portuguese" == l.civ_id && (t = "education"), n.some(l => l.id == t) && (e = this.conf.sciences[t]), l.science_queue = [e.id], l.sciences[e.id] = {
                            progress: 0,
                            done: !1
                        }
                    }
                }
                if (1 != l.id) {
                    if (l.culture >= this.dataService.cultureCost(l)) {
                        let n = [];
                        if (Object.values(this.conf.policies.groups).forEach(e => {
                                this.isGroupAvailable(l, e) && !l.policies.groups.includes(e.id) && n.push(e)
                            }), n.length) {
                            let e = yg.fromArray(n);
                            l.culture -= this.dataService.cultureCost(l), l.policies.groups.push(e.id)
                        } else {
                            let n = [];
                            if (Object.values(this.conf.policies.policies).forEach(e => {
                                    this.isPolicyAvailable(l, e) && !l.policies.policies.includes(e.id) && n.push(e)
                                }), n.length) {
                                let e = yg.fromArray(n);
                                l.culture -= this.dataService.cultureCost(l), l.policies.policies.push(e.id)
                            }
                        }
                    }
                    if (yg.roll((this.conf.civilizations[l.civ_id].mult.culture - 1) / 1e3)) {
                        let n = yg.fromArray(this.data.players.filter(n => 1 != n.id && n.id != l.id && this.dataService.haveRelation(l.id, n.id) && !this.dataService.atWar(l.id, n.id)));
                        n && this.dataService.promote(l.id, n.id) && 0 == n.id && this.toastService.info(l.name + " have been promoting their culture to us.", ug.culture, "/game/diplomacy#tab_influence")
                    }
                }
            }))
        }
        isPolicyAvailable(l, n) {
            return this.dataService.isPolicyAvailable(n, l.id)
        }
        isGroupAvailable(l, n) {
            return this.dataService.isPolicyGroupAvailable(n, l.id)
        }
        isTroopAvailable(l, n, e) {
            return this.dataService.isTroopAvailable(l, n, e)
        }
        isBuildingAvailable(l, n) {
            return (1 != l.ownerid || !n.wonder) && this.dataService.isBuildingSelectable(l, n)
        }
    }
    const Uv = new El("WindowToken", "undefined" != typeof window && window.document ? {
        providedIn: "root",
        factory: () => window
    } : void 0);
    let Hv = (() => {
        class l {
            constructor(l, n) {
                this.document = l, this.window = n, this.copySubject = new T, this.copyResponse$ = this.copySubject.asObservable(), this.config = {}
            }
            configure(l) {
                this.config = l
            }
            copy(l) {
                if (!this.isSupported || !l) return this.pushCopyResponse({
                    isSuccess: !1,
                    content: l
                });
                const n = this.copyFromContent(l);
                return this.pushCopyResponse(n ? {
                    content: l,
                    isSuccess: n
                } : {
                    isSuccess: !1,
                    content: l
                })
            }
            get isSupported() {
                return !!this.document.queryCommandSupported && !!this.document.queryCommandSupported("copy") && !!this.window
            }
            isTargetValid(l) {
                if (l instanceof HTMLInputElement || l instanceof HTMLTextAreaElement) {
                    if (l.hasAttribute("disabled")) throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');
                    return !0
                }
                throw new Error("Target should be input or textarea")
            }
            copyFromInputElement(l, n = !0) {
                try {
                    this.selectTarget(l);
                    const e = this.copyText();
                    return this.clearSelection(n ? l : void 0, this.window), e && this.isCopySuccessInIE11()
                } catch (e) {
                    return !1
                }
            }
            isCopySuccessInIE11() {
                const l = this.window.clipboardData;
                return !(l && l.getData && !l.getData("Text"))
            }
            copyFromContent(l, n = this.document.body) {
                if (this.tempTextArea && !n.contains(this.tempTextArea) && this.destroy(this.tempTextArea.parentElement), !this.tempTextArea) {
                    this.tempTextArea = this.createTempTextArea(this.document, this.window);
                    try {
                        n.appendChild(this.tempTextArea)
                    } catch (t) {
                        throw new Error("Container should be a Dom element")
                    }
                }
                this.tempTextArea.value = l;
                const e = this.copyFromInputElement(this.tempTextArea, !1);
                return this.config.cleanUpAfterCopy && this.destroy(this.tempTextArea.parentElement), e
            }
            destroy(l = this.document.body) {
                this.tempTextArea && (l.removeChild(this.tempTextArea), this.tempTextArea = void 0)
            }
            selectTarget(l) {
                return l.select(), l.setSelectionRange(0, l.value.length), l.value.length
            }
            copyText() {
                return this.document.execCommand("copy")
            }
            clearSelection(l, n) {
                l && l.focus(), n.getSelection().removeAllRanges()
            }
            createTempTextArea(l, n) {
                const e = "rtl" === l.documentElement.getAttribute("dir");
                let t;
                return (t = l.createElement("textarea")).style.fontSize = "12pt", t.style.border = "0", t.style.padding = "0", t.style.margin = "0", t.style.position = "absolute", t.style[e ? "right" : "left"] = "-9999px", t.style.top = (n.pageYOffset || l.documentElement.scrollTop) + "px", t.setAttribute("readonly", ""), t
            }
            pushCopyResponse(l) {
                this.copySubject.next(l)
            }
            pushCopyReponse(l) {
                this.pushCopyResponse(l)
            }
        }
        return l.ngInjectableDef = ml({
            factory: function () {
                return new l(Ul(Ua), Ul(Uv, 8))
            },
            token: l,
            providedIn: "root"
        }), l
    })(); class Vv {}
    var jv = st({
        encapsulation: 0,
        styles: [["a[_ngcontent-%COMP%]{color:inherit;text-decoration:none}.opacity-90[_ngcontent-%COMP%]{opacity:.9}.opacity-90[_ngcontent-%COMP%]:hover{opacity:1}"]],
        data: {}
    });

    function Gv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "a", [["class", "mr-2 text-center text-culture text-truncate text-90"], ["routerLink", "/game/policies"], ["style", "width: 200px"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(1, 671744, null, 0, xp, [_p, oh, Rr], {
            routerLink: [0, "routerLink"]
        }, null), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(3, null, [" ", " (", ")"])), yu(4, 1), yu(5, 2)], (function (l, n) {
            l(n, 1, 0, "/game/policies")
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, ei(n, 1).target, ei(n, 1).href), l(n, 2, 0, e.icons.culture);
            var t = et(n, 3, 0, l(n, 4, 0, ei(n.parent, 0), e.dataService.player().culture)),
                i = et(n, 3, 1, l(n, 5, 0, ei(n.parent, 0), e.dataService.cultureDiff(), "+.1"));
            l(n, 3, 0, t, i)
        }))
    }

    function Wv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "a", [["class", "mr-2 text-center text-trade"], ["fragment", "tab_trade"], ["routerLink", "/game/diplomacy"], ["style", "width: 88px"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(1, 671744, null, 0, xp, [_p, oh, Rr], {
            fragment: [0, "fragment"],
            routerLink: [1, "routerLink"]
        }, null), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(3, null, [" ", " / ", " "]))], (function (l, n) {
            l(n, 1, 0, "tab_trade", "/game/diplomacy")
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, ei(n, 1).target, ei(n, 1).href), l(n, 2, 0, e.icons.trade), l(n, 3, 0, e.dataService.tradeRouteNb(), e.dataService.maxTradeRoute())
        }))
    }

    function Kv(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 4, "a", [["class", "mr-2 text-center text-colony"], ["fragment", "tab_colonies"], ["placement", "bottom"], ["routerLink", "/game/diplomacy"], ["style", "width: 88px"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(1, 671744, null, 0, xp, [_p, oh, Rr], {
            fragment: [0, "fragment"],
            routerLink: [1, "routerLink"]
        }, null), gi(2, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            placement: [1, "placement"]
        }, null), (l()(), su(3, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(4, null, [" ", " / ", " "])), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 1, 0, "tab_colonies", "/game/diplomacy"), l(n, 2, 0, ei(n.parent, 53), "bottom")
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, ei(n, 1).target, ei(n, 1).href), l(n, 3, 0, e.icons.colony), l(n, 4, 0, e.dataService.colonyNb(), e.dataService.coloniesAvailable())
        }))
    }

    function Zv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "a", [["class", "ml-1"], ["routerLink", "/game/science"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(1, 671744, null, 0, xp, [_p, oh, Rr], {
            routerLink: [0, "routerLink"]
        }, null), (l()(), _u(2, null, [" ", " ", " (", ") "])), yu(3, 1), yu(4, 2)], (function (l, n) {
            l(n, 1, 0, "/game/science")
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, ei(n, 1).target, ei(n, 1).href);
            var t = e.conf.sciences[e.dataService.player().science_queue[0]].label,
                i = et(n, 2, 1, l(n, 3, 0, ei(n.parent, 2), e.dataService.scienceTime())),
                s = et(n, 2, 2, l(n, 4, 0, ei(n.parent, 0), e.dataService.scienceDiff(), "+.1"));
            l(n, 2, 0, t, i, s)
        }))
    }

    function Qv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "a", [["routerLink", "/game/science"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(1, 671744, null, 0, xp, [_p, oh, Rr], {
            routerLink: [0, "routerLink"]
        }, null), (l()(), _u(-1, null, ["Nothing selected"]))], (function (l, n) {
            l(n, 1, 0, "/game/science")
        }), (function (l, n) {
            l(n, 0, 0, ei(n, 1).target, ei(n, 1).href)
        }))
    }

    function Yv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [["class", "mr-2 text-center text-faith text-90"], ["style", "width: 135px"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" ", " (", ")"])), yu(3, 1), yu(4, 2)], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons.faith);
            var t = et(n, 2, 0, l(n, 3, 0, ei(n.parent, 0), e.dataService.player().faith)),
                i = et(n, 2, 1, l(n, 4, 0, ei(n.parent, 0), e.dataService.faithDiff(), "+.1"));
            l(n, 2, 0, t, i)
        }))
    }

    function Xv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "div", [["class", "mr-2 text-center text-progress"], ["style", "width: 88px"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" ", ""])), yu(3, 1)], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons.progress);
            var t = et(n, 2, 0, l(n, 3, 0, ei(n.parent, 0), e.dataService.player().progress));
            l(n, 2, 0, t)
        }))
    }

    function Jv(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "a", [["fragment", "tab_orientation"], ["routerLink", "/game/empire"]], [[8, "className", 0], [1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(1, 671744, null, 0, xp, [_p, oh, Rr], {
            fragment: [0, "fragment"],
            routerLink: [1, "routerLink"]
        }, null), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(3, null, [" ", " "])), yu(4, 2)], (function (l, n) {
            l(n, 1, 0, "tab_orientation", "/game/empire")
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, e.dataService.player().orientation >= 0 ? "text-tech mr-2" : "text-magic mr-2", ei(n, 1).target, ei(n, 1).href), l(n, 2, 0, e.dataService.player().orientation >= 0 ? e.icons.tech : e.icons.spells);
            var t = et(n, 3, 0, l(n, 4, 0, ei(n.parent, 0), e.dataService.player().orientation, "+.0"));
            l(n, 3, 0, t)
        }))
    }

    function lb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "a", [["class", "text-prestige mr-2'"], ["fragment", "tab_prestige"], ["routerLink", "/game/powers"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(1, 671744, null, 0, xp, [_p, oh, Rr], {
            fragment: [0, "fragment"],
            routerLink: [1, "routerLink"]
        }, null), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(3, null, [" ", " "])), yu(4, 1)], (function (l, n) {
            l(n, 1, 0, "tab_prestige", "/game/powers")
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, ei(n, 1).target, ei(n, 1).href), l(n, 2, 0, e.icons.prestige);
            var t = et(n, 3, 0, l(n, 4, 0, ei(n.parent, 0), e.data.prestige));
            l(n, 3, 0, t)
        }))
    }

    function nb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "a", [["class", "mr-2 text-center text-120 line-height-1"], ["routerLink", "/game/deity"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(1, 671744, null, 0, xp, [_p, oh, Rr], {
            routerLink: [0, "routerLink"]
        }, null), (l()(), su(2, 0, null, null, 3, "i", [], [[8, "className", 0]], null, null, null, null)), yi(512, null, Oa, Na, [fe, Ne, be]), gi(4, 278528, null, 0, Ba, [Oa], {
            ngStyle: [0, "ngStyle"]
        }, null), vu(5, {
            color: 0
        })], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, "/game/deity");
            var t = l(n, 5, 0, e.conf.deities[e.dataService.player().deity].color);
            l(n, 4, 0, t)
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, ei(n, 1).target, ei(n, 1).href), l(n, 2, 0, e.conf.deities[e.dataService.player().deity].icon)
        }))
    }

    function eb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-success btn-sm"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.terminal() && t), t
        }), null, null)), (l()(), su(1, 0, null, null, 0, "i", [["class", "fas fa-terminal"]], null, null, null, null, null))], null, null)
    }

    function tb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [["class", "cursor-pointer p-3 opacity-90"], ["title", "Fullscreen"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.expand() && t), t
        }), null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 1, 0, n.component.icons.expand)
        }))
    }

    function ib(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(1, null, ["(", "s)"]))], null, (function (l, n) {
            l(n, 1, 0, n.component.saveTime())
        }))
    }

    function sb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 25, "div", [["class", "btn-group mr-2"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 3, "button", [["class", "btn btn-primary btn-sm text-nowrap"], ["style", "width:78px"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.save() && t), t
        }), null, null)), (l()(), _u(-1, null, [" Save "])), (l()(), iu(16777216, null, null, 1, null, ib)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(5, 0, null, null, 20, "div", [["class", "btn-group"], ["container", "body"], ["ngbDropdown", ""]], [[2, "show", null]], null, null, null, null)), gi(6, 1720320, null, 3, Ty, [Rn, wy, Ua, ys, fe, be, [2, xy]], {
            container: [0, "container"]
        }, null), cu(603979776, 1, {
            _menu: 0
        }), cu(603979776, 2, {
            _menuElement: 0
        }), cu(603979776, 3, {
            _anchor: 0
        }), (l()(), su(10, 0, null, null, 2, "button", [["aria-haspopup", "true"], ["class", "btn btn-primary dropdown-toggle-split btn-sm dropdown-toggle"], ["ngbDropdownToggle", ""]], [[1, "aria-expanded", 0]], [[null, "click"], [null, "keydown.ArrowUp"], [null, "keydown.ArrowDown"], [null, "keydown.Home"], [null, "keydown.End"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 11).dropdown.toggle() && t), "keydown.ArrowUp" === n && (t = !1 !== ei(l, 11).dropdown.onKeyDown(e) && t), "keydown.ArrowDown" === n && (t = !1 !== ei(l, 11).dropdown.onKeyDown(e) && t), "keydown.Home" === n && (t = !1 !== ei(l, 11).dropdown.onKeyDown(e) && t), "keydown.End" === n && (t = !1 !== ei(l, 11).dropdown.onKeyDown(e) && t), t
        }), null, null)), gi(11, 16384, null, 0, Iy, [Ty, fe], null, null), yi(2048, [[3, 4]], Cy, null, [Iy]), (l()(), su(13, 0, [[2, 0]], null, 12, "div", [["class", "dropdown-menu"], ["ngbDropdownMenu", ""]], [[2, "dropdown-menu", null], [2, "show", null], [1, "x-placement", 0]], [[null, "keydown.ArrowUp"], [null, "keydown.ArrowDown"], [null, "keydown.Home"], [null, "keydown.End"], [null, "keydown.Enter"], [null, "keydown.Space"]], (function (l, n, e) {
            var t = !0;
            return "keydown.ArrowUp" === n && (t = !1 !== ei(l, 14).dropdown.onKeyDown(e) && t), "keydown.ArrowDown" === n && (t = !1 !== ei(l, 14).dropdown.onKeyDown(e) && t), "keydown.Home" === n && (t = !1 !== ei(l, 14).dropdown.onKeyDown(e) && t), "keydown.End" === n && (t = !1 !== ei(l, 14).dropdown.onKeyDown(e) && t), "keydown.Enter" === n && (t = !1 !== ei(l, 14).dropdown.onKeyDown(e) && t), "keydown.Space" === n && (t = !1 !== ei(l, 14).dropdown.onKeyDown(e) && t), t
        }), null, null)), gi(14, 16384, [[1, 4]], 1, Sy, [Ty], null, null), cu(603979776, 4, {
            menuItems: 1
        }), (l()(), su(16, 0, null, null, 4, "button", [["class", "dropdown-item"], ["hover-class", "bg-primary text-light"], ["ngbDropdownItem", ""]], [[2, "disabled", null]], [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== ei(l, 18).onMouseEnter() && t), "mouseleave" === n && (t = !1 !== ei(l, 18).onMouseLeave() && t), "click" === n && (t = !1 !== i.open(ei(l.parent, 50)) && t), t
        }), null, null)), gi(17, 16384, [[4, 4]], 0, ky, [fe], null, null), gi(18, 16384, null, 0, sg, [fe], {
            hoverClass: [0, "hoverClass"]
        }, null), (l()(), su(19, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Export"])), (l()(), su(21, 0, null, null, 4, "button", [["class", "dropdown-item"], ["hover-class", "bg-primary text-light"], ["ngbDropdownItem", ""]], [[2, "disabled", null]], [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== ei(l, 23).onMouseEnter() && t), "mouseleave" === n && (t = !1 !== ei(l, 23).onMouseLeave() && t), "click" === n && (t = !1 !== i.download(!0) && t), t
        }), null, null)), gi(22, 16384, [[4, 4]], 0, ky, [fe], null, null), gi(23, 16384, null, 0, sg, [fe], {
            hoverClass: [0, "hoverClass"]
        }, null), (l()(), su(24, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Download"]))], (function (l, n) {
            l(n, 4, 0, n.component.data.tuto_done), l(n, 6, 0, "body"), l(n, 18, 0, "bg-primary text-light"), l(n, 23, 0, "bg-primary text-light")
        }), (function (l, n) {
            var e = n.component;
            l(n, 5, 0, ei(n, 6).isOpen()), l(n, 10, 0, ei(n, 11).dropdown.isOpen()), l(n, 13, 0, !0, ei(n, 14).dropdown.isOpen(), ei(n, 14).placement), l(n, 16, 0, ei(n, 17).disabled), l(n, 19, 0, e.icons.copy), l(n, 21, 0, ei(n, 22).disabled), l(n, 24, 0, e.icons.download)
        }))
    }

    function ub(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-primary btn-sm text-nowrap"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.open(ei(l.parent, 50)) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Save"]))], null, null)
    }

    function rb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "button", [["class", "btn btn-outline-warning btn-sm"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.reincarnation(ei(l.parent, 51)) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Reincarnation ("])), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(3, null, [" +", ") "]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.icons.favor), l(n, 3, 0, e.favorGain())
        }))
    }

    function ab(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "button", [["class", "btn btn-outline-warning btn-sm"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.reincarnation(ei(l.parent, 52)) && t), t
        }), null, null)), (l()(), _u(-1, null, [" Time Travel ("])), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(3, null, [" +", ") "]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.icons.prestige), l(n, 3, 0, e.dataService.prestigeGain())
        }))
    }

    function ob(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "modal-header"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "h4", [["class", "modal-title"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Export save"])), (l()(), su(3, 0, null, null, 2, "button", [["class", "close"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.context.$implicit.dismiss() && t), t
        }), null, null)), (l()(), su(4, 0, null, null, 1, "span", [["aria-hidden", "true"]], null, null, null, null, null)), (l()(), _u(-1, null, ["\xd7"])), (l()(), su(6, 0, null, null, 5, "div", [["class", "modal-body"]], null, null, null, null, null)), (l()(), su(7, 0, null, null, 1, "textarea", [["class", "form-control"], ["readonly", ""]], null, null, null, null, null)), (l()(), _u(8, null, ["", ""])), (l()(), su(9, 0, null, null, 2, "div", [["class", "bg-success text-light p-3 mt-3 rounded font-weight-bold"]], null, null, null, null, null)), (l()(), su(10, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Save has been copied to clipboard"])), (l()(), su(12, 0, null, null, 5, "div", [["class", "modal-footer"]], null, null, null, null, null)), (l()(), su(13, 0, null, null, 2, "button", [["class", "btn btn-primary"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.download() && t), t
        }), null, null)), (l()(), su(14, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Download"])), (l()(), su(16, 0, null, null, 1, "button", [["class", "btn btn-outline-dark"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.context.$implicit.close() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Close"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 8, 0, e.saveStr), l(n, 10, 0, e.icons.copy), l(n, 14, 0, e.icons.download)
        }))
    }

    function cb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 16, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["You will gain: "])), (l()(), su(2, 0, null, null, 2, "b", [["class", "mr-1"]], null, null, null, null, null)), (l()(), _u(3, null, ["", ""])), yu(4, 1), (l()(), su(5, 0, null, null, 4, "span", [], null, null, null, null, null)), yi(512, null, Oa, Na, [fe, Ne, be]), gi(7, 278528, null, 0, Ba, [Oa], {
            ngStyle: [0, "ngStyle"]
        }, null), vu(8, {
            color: 0
        }), (l()(), su(9, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" and "])), (l()(), su(11, 0, null, null, 2, "b", [["class", "mr-1"]], null, null, null, null, null)), (l()(), _u(12, null, ["", ""])), yu(13, 1), (l()(), su(14, 0, null, null, 1, "span", [["class", "text-dark"]], null, null, null, null, null)), (l()(), su(15, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" ( based on your current faith) "]))], (function (l, n) {
            var e = n.component,
                t = l(n, 8, 0, e.conf.deities[e.dataService.player().deity].color);
            l(n, 7, 0, t)
        }), (function (l, n) {
            var e = n.component,
                t = et(n, 3, 0, l(n, 4, 0, ei(n.parent.parent, 0), e.dataService.favorGain()[0]));
            l(n, 3, 0, t), l(n, 9, 0, e.icons.favor);
            var i = et(n, 12, 0, l(n, 13, 0, ei(n.parent.parent, 0), e.dataService.favorGain()[1]));
            l(n, 12, 0, i), l(n, 15, 0, e.icons.favor)
        }))
    }

    function db(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["You will gain "])), (l()(), su(2, 0, null, null, 1, "b", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(-1, null, ["nothing !"]))], null, null)
    }

    function hb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "modal-header"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "h4", [["class", "modal-title"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Reincarnation"])), (l()(), su(3, 0, null, null, 2, "button", [["class", "close"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.context.$implicit.dismiss() && t), t
        }), null, null)), (l()(), su(4, 0, null, null, 1, "span", [["aria-hidden", "true"]], null, null, null, null, null)), (l()(), _u(-1, null, ["\xd7"])), (l()(), su(6, 0, null, null, 17, "div", [["class", "modal-body"]], null, null, null, null, null)), (l()(), su(7, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Are you sure you want to reincarnate ?"])), (l()(), iu(16777216, null, null, 1, null, cb)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(11, 0, null, null, 4, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Next favor point at: "])), (l()(), su(13, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(14, null, [" ", ""])), yu(15, 1), (l()(), iu(16777216, null, null, 1, null, db)), gi(17, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(18, 0, null, null, 1, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, [" You will keep : your powers, your previously earned favor"])), (l()(), su(20, 0, null, null, 3, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, [" You will lose: "])), (l()(), su(22, 0, null, null, 1, "u", [], null, null, null, null, null)), (l()(), _u(-1, null, ["everything else"])), (l()(), su(24, 0, null, null, 4, "div", [["class", "modal-footer"]], null, null, null, null, null)), (l()(), su(25, 0, null, null, 1, "button", [["class", "btn btn-outline-dark"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.context.$implicit.close() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Cancel"])), (l()(), su(27, 0, null, null, 1, "button", [["class", "btn btn-warning"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (l.context.$implicit.close(), t = !1 !== i.doReincarnation() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Reincarnate !"]))], (function (l, n) {
            var e = n.component;
            l(n, 10, 0, 0 != e.dataService.favorGain()[1]), l(n, 17, 0, 0 == e.dataService.favorGain()[1])
        }), (function (l, n) {
            var e = n.component;
            l(n, 13, 0, e.icons.faith + " text-faith");
            var t = et(n, 14, 0, l(n, 15, 0, ei(n.parent, 0), e.dataService.nextPoint()));
            l(n, 14, 0, t)
        }))
    }

    function pb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 7, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["You will gain: "])), (l()(), su(2, 0, null, null, 2, "b", [["class", "mr-1"]], null, null, null, null, null)), (l()(), _u(3, null, ["", ""])), yu(4, 1), (l()(), su(5, 0, null, null, 1, "span", [["class", "text-prestige"]], null, null, null, null, null)), (l()(), su(6, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" ( based on your current progress) "]))], null, (function (l, n) {
            var e = n.component,
                t = et(n, 3, 0, l(n, 4, 0, ei(n.parent.parent, 0), e.dataService.prestigeGain()));
            l(n, 3, 0, t), l(n, 6, 0, e.icons.prestige)
        }))
    }

    function fb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["You will gain "])), (l()(), su(2, 0, null, null, 1, "b", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(-1, null, ["nothing !"]))], null, null)
    }

    function gb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "modal-header"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "h4", [["class", "modal-title"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Time Travel"])), (l()(), su(3, 0, null, null, 2, "button", [["class", "close"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.context.$implicit.dismiss() && t), t
        }), null, null)), (l()(), su(4, 0, null, null, 1, "span", [["aria-hidden", "true"]], null, null, null, null, null)), (l()(), _u(-1, null, ["\xd7"])), (l()(), su(6, 0, null, null, 22, "div", [["class", "modal-body"]], null, null, null, null, null)), (l()(), su(7, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Are you sure you want to time travel ?"])), (l()(), iu(16777216, null, null, 1, null, pb)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(11, 0, null, null, 6, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Each "])), (l()(), su(13, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" gives you a +1% bonus in "])), (l()(), su(15, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" & "])), (l()(), su(17, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, fb)), gi(19, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(20, 0, null, null, 4, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, [" You will keep : your "])), (l()(), su(22, 0, null, null, 1, "span", [["class", "text-prestige"]], null, null, null, null, null)), (l()(), su(23, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [", your powers, your previously earned favor"])), (l()(), su(25, 0, null, null, 3, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, [" You will lose: "])), (l()(), su(27, 0, null, null, 1, "u", [], null, null, null, null, null)), (l()(), _u(-1, null, ["everything else"])), (l()(), su(29, 0, null, null, 4, "div", [["class", "modal-footer"]], null, null, null, null, null)), (l()(), su(30, 0, null, null, 1, "button", [["class", "btn btn-outline-dark"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.context.$implicit.close() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Cancel"])), (l()(), su(32, 0, null, null, 1, "button", [["class", "btn btn-warning"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (l.context.$implicit.close(), t = !1 !== i.doReincarnation() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Time Travel !"]))], (function (l, n) {
            var e = n.component;
            l(n, 10, 0, 0 != e.dataService.prestigeGain()), l(n, 19, 0, 0 == e.dataService.prestigeGain())
        }), (function (l, n) {
            var e = n.component;
            l(n, 13, 0, e.icons.prestige + " text-prestige"), l(n, 15, 0, e.icons.food + " text-food"), l(n, 17, 0, e.icons.prod + " text-prod"), l(n, 23, 0, e.icons.prestige)
        }))
    }

    function mb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 9, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "td", [["class", "text-science"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Science (empire)"])), (l()(), su(4, 0, null, null, 2, "td", [["class", "text-science"]], null, null, null, null, null)), (l()(), _u(5, null, ["", ""])), yu(6, 1), (l()(), su(7, 0, null, null, 2, "td", [["class", "text-science pl-1"]], null, null, null, null, null)), (l()(), _u(8, null, ["", " "])), yu(9, 1)], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.icons.science);
            var t = et(n, 5, 0, l(n, 6, 0, ei(n.parent.parent, 1), e.dataService.colonyScienceBonus()));
            l(n, 5, 0, t);
            var i = et(n, 8, 0, l(n, 9, 0, ei(n.parent.parent, 1), e.dataService.colonyTotalScienceBonus()));
            l(n, 8, 0, i)
        }))
    }

    function yb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "b", [["class", "d-block"]], null, null, null, null, null)), (l()(), _u(1, null, ["Available colonies (global): ", ""])), (l()(), su(2, 0, null, null, 1, "b", [["class", "d-block"]], null, null, null, null, null)), (l()(), _u(3, null, ["Occupied colonies (global): ", ""])), (l()(), su(4, 0, null, null, 1, "b", [["class", "text-center d-block border-bottom bg-dark text-light"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Colony Bonus"])), (l()(), su(6, 0, null, null, 41, "table", [["class", "popover-table"]], null, null, null, null, null)), (l()(), su(7, 0, null, null, 40, "tbody", [], null, null, null, null, null)), (l()(), su(8, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(9, 0, null, null, 0, "td", [], null, null, null, null, null)), (l()(), su(10, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["colony"])), (l()(), su(12, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["total"])), (l()(), su(14, 0, null, null, 9, "tr", [], null, null, null, null, null)), (l()(), su(15, 0, null, null, 2, "td", [["class", "text-gold"]], null, null, null, null, null)), (l()(), su(16, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Gold (empire)"])), (l()(), su(18, 0, null, null, 2, "td", [["class", "text-gold"]], null, null, null, null, null)), (l()(), _u(19, null, ["", ""])), yu(20, 1), (l()(), su(21, 0, null, null, 2, "td", [["class", "text-gold pl-1"]], null, null, null, null, null)), (l()(), _u(22, null, ["", ""])), yu(23, 1), (l()(), su(24, 0, null, null, 11, "tr", [], null, null, null, null, null)), (l()(), su(25, 0, null, null, 4, "td", [["class", ""]], null, null, null, null, null)), (l()(), su(26, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" / "])), (l()(), su(28, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" (city)"])), (l()(), su(30, 0, null, null, 2, "td", [["class", "text-gold"]], null, null, null, null, null)), (l()(), _u(31, null, ["", ""])), yu(32, 1), (l()(), su(33, 0, null, null, 2, "td", [["class", "text-gold pl-1"]], null, null, null, null, null)), (l()(), _u(34, null, ["", " "])), yu(35, 1), (l()(), su(36, 0, null, null, 9, "tr", [], null, null, null, null, null)), (l()(), su(37, 0, null, null, 2, "td", [["class", "text-happiness"]], null, null, null, null, null)), (l()(), su(38, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Happiness (empire)"])), (l()(), su(40, 0, null, null, 2, "td", [["class", "text-happiness"]], null, null, null, null, null)), (l()(), _u(41, null, ["", ""])), yu(42, 1), (l()(), su(43, 0, null, null, 2, "td", [["class", "text-happiness pl-1"]], null, null, null, null, null)), (l()(), _u(44, null, [" ", " "])), yu(45, 1), (l()(), iu(16777216, null, null, 1, null, mb)), gi(47, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 47, 0, n.component.dataService.hasPolicy("geographical"))
        }), (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.dataService.coloniesAvailable()), l(n, 3, 0, e.conf.colony_nb - e.dataService.coloniesAvailable()), l(n, 16, 0, e.icons.gold);
            var t = et(n, 19, 0, l(n, 20, 0, ei(n.parent, 1), e.dataService.colonyGoldBonus()));
            l(n, 19, 0, t);
            var i = et(n, 22, 0, l(n, 23, 0, ei(n.parent, 1), e.dataService.colonyTotalGoldBonus()));
            l(n, 22, 0, i), l(n, 26, 0, "text-gold " + e.icons.gold), l(n, 28, 0, "text-trade " + e.icons.trade);
            var s = et(n, 31, 0, l(n, 32, 0, ei(n.parent, 1), e.dataService.colonyTradeGoldBonus()));
            l(n, 31, 0, s);
            var u = et(n, 34, 0, l(n, 35, 0, ei(n.parent, 1), e.dataService.colonyTotalTradeGoldBonus()));
            l(n, 34, 0, u), l(n, 38, 0, e.icons.happiness);
            var r = et(n, 41, 0, l(n, 42, 0, ei(n.parent, 1), e.dataService.colonyHappinessBonus()));
            l(n, 41, 0, r);
            var a = et(n, 44, 0, l(n, 45, 0, ei(n.parent, 1), e.dataService.colonyTotalHappinessBonus()));
            l(n, 44, 0, a)
        }))
    }

    function vb(l) {
        return ku(0, [mi(0, zv, []), mi(0, $v, []), mi(0, gv, []), (l()(), su(3, 0, null, null, 46, "nav", [["class", "d-flex bg-dark text-light p-2 text-110 font-weight-bold overflow-hidden"], ["style", "height:47px;"]], null, null, null, null, null)), (l()(), su(4, 0, null, null, 2, "div", [["class", "mr-2 text-center text-pop"]], null, null, null, null, null)), (l()(), su(5, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(6, null, [" ", " "])), (l()(), iu(16777216, null, null, 1, null, Gv)), gi(8, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(9, 0, null, null, 3, "div", [["class", "mr-2 text-center text-happiness"], ["style", "width: 75px"]], null, null, null, null, null)), (l()(), su(10, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(11, null, [" ", " "])), yu(12, 1), (l()(), iu(16777216, null, null, 1, null, Wv)), gi(14, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Kv)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(17, 0, null, null, 5, "div", [["class", "mr-2 text-center text-science text-truncate text-90"], ["style", "max-width:300px"]], null, null, null, null, null)), (l()(), su(18, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Zv)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Qv)), gi(22, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Yv)), gi(24, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Xv)), gi(26, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Jv)), gi(28, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, lb)), gi(30, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(31, 0, null, null, 18, "div", [["class", "ml-auto"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, nb)), gi(33, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(34, 0, null, null, 1, "span", [["class", "cursor-pointer p-3 opacity-90"], ["title", "Play/pause [space]"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (t = 0 != (i.data.pause = !i.data.pause) && t), t
        }), null, null)), (l()(), su(35, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, eb)), gi(37, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, tb)), gi(39, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, sb)), gi(41, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, ub)), gi(43, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, rb)), gi(45, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, ab)), gi(47, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(48, 0, null, null, 1, "span", [["class", "cursor-pointer p-3 opacity-90"], ["title", "Exit"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.exit() && t), t
        }), null, null)), (l()(), su(49, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), iu(0, [["content", 2]], null, 0, null, ob)), (l()(), iu(0, [["confirmation", 2]], null, 0, null, hb)), (l()(), iu(0, [["confirmation2", 2]], null, 0, null, gb)), (l()(), iu(0, [["popColony", 2]], null, 0, null, yb))], (function (l, n) {
            var e = n.component;
            l(n, 8, 0, e.dataService.hasScience("art")), l(n, 14, 0, e.dataService.isUnlocked("trade")), l(n, 16, 0, e.dataService.isUnlocked("colonization")), l(n, 20, 0, e.dataService.player().science_queue.length), l(n, 22, 0, !e.dataService.player().science_queue.length), l(n, 24, 0, e.dataService.hasScience("spirituality") && e.dataService.player().orientation <= 0), l(n, 26, 0, e.dataService.player().orientation > 0), l(n, 28, 0, e.dataService.isUnlocked("orientation")), l(n, 30, 0, e.data.prestige), l(n, 33, 0, e.dataService.player().deity && e.dataService.player().orientation <= 0), l(n, 37, 0, !e.environment.production), l(n, 39, 0, e.inIframe()), l(n, 41, 0, !e.data.noautosave), l(n, 43, 0, e.data.noautosave), l(n, 45, 0, e.dataService.isUnlocked("reincarnation") && e.dataService.player().orientation <= 0), l(n, 47, 0, e.dataService.player().orientation > 0)
        }), (function (l, n) {
            var e = n.component;
            l(n, 5, 0, e.icons.pop), l(n, 6, 0, e.dataService.pop()), l(n, 10, 0, e.icons.happiness);
            var t = et(n, 11, 0, l(n, 12, 0, ei(n, 1), e.dataService.happiness()));
            l(n, 11, 0, t), l(n, 18, 0, e.icons.science), l(n, 35, 0, e.data.pause ? e.icons.play + " text-warning" : e.icons.pause), l(n, 49, 0, e.icons.exit)
        }))
    }
    class bb {
        constructor(l, n, e) {
            this.data = l, this.dataService = n, this.conf = e, this.icons = ug
        }
        ngOnInit() {}
        getIncomings() {
            return this.data.attacks.filter(l => 0 == l.destid && 0 != l.ownerid && !l.returning).length
        }
        hasNewReports() {
            return -1 != this.data.reports.findIndex(l => !l.read)
        }
        hasNewPolicy() {
            return this.dataService.hasAnyPolicyAvailable()
        }
        hasSomethingToBuild() {
            return this.dataService.isUnlocked("buildings") && this.dataService.isUnlocked("citizen_builders") && this.dataService.player().cities.some(l => !l.building_queue.length && this.dataService.hasAnyBuildingAvailable(l))
        }
    }
    var _b = st({
        encapsulation: 0,
        styles: [["li[_ngcontent-%COMP%]{cursor:pointer}.list-group-item[_ngcontent-%COMP%]{padding:.5rem 1.25rem!important}.list-group-min[_ngcontent-%COMP%]{width:58px;text-align:center}.list-group-min[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{padding:.5rem!important}"]],
        data: {}
    });

    function wb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "li", [["class", "list-group-item"], ["routerLink", "empire"], ["routerLinkActive", "active"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, [[1, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(2, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActiveOptions: [0, "routerLinkActiveOptions"],
            routerLinkActive: [1, "routerLinkActive"]
        }, null), cu(603979776, 1, {
            links: 1
        }), cu(603979776, 2, {
            linksWithHrefs: 1
        }), vu(5, {
            exact: 0
        }), (l()(), _u(-1, null, [" Empire "]))], (function (l, n) {
            l(n, 1, 0, "empire");
            var e = l(n, 5, 0, !0);
            l(n, 2, 0, e, "active")
        }), null)
    }

    function xb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.icons.exclamation)
        }))
    }

    function kb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.icons.exclamation)
        }))
    }

    function Sb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.icons.exclamation)
        }))
    }

    function Cb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 7, "li", [["class", "list-group-item"], ["routerLink", "policies"], ["routerLinkActive", "active"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, [[7, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(2, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 7, {
            links: 1
        }), cu(603979776, 8, {
            linksWithHrefs: 1
        }), (l()(), iu(16777216, null, null, 1, null, Sb)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), _u(-1, null, [" Social Policies "]))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, "policies"), l(n, 2, 0, "active"), l(n, 6, 0, e.hasNewPolicy())
        }), null)
    }

    function Ib(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "li", [["class", "list-group-item"], ["routerLink", "world"], ["routerLinkActive", "active"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, [[9, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(2, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 9, {
            links: 1
        }), cu(603979776, 10, {
            linksWithHrefs: 1
        }), (l()(), _u(-1, null, ["World"]))], (function (l, n) {
            l(n, 1, 0, "world"), l(n, 2, 0, "active")
        }), null)
    }

    function Tb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [["class", "badge badge-pill badge-danger"]], null, null, null, null, null)), (l()(), _u(1, null, ["", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.component.getIncomings())
        }))
    }

    function Eb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 7, "li", [["class", "list-group-item"], ["routerLink", "attacks"], ["routerLinkActive", "active"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, [[11, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(2, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 11, {
            links: 1
        }), cu(603979776, 12, {
            linksWithHrefs: 1
        }), (l()(), iu(16777216, null, null, 1, null, Tb)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), _u(-1, null, [" Attacks & Transfers "]))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, "attacks"), l(n, 2, 0, "active"), l(n, 6, 0, e.getIncomings())
        }), null)
    }

    function Ab(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.icons.exclamation)
        }))
    }

    function Pb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 7, "li", [["class", "list-group-item"], ["routerLink", "reports"], ["routerLinkActive", "active"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, [[13, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(2, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 13, {
            links: 1
        }), cu(603979776, 14, {
            linksWithHrefs: 1
        }), (l()(), iu(16777216, null, null, 1, null, Ab)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), _u(-1, null, [" Battle reports"]))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, "reports"), l(n, 2, 0, "active"), l(n, 6, 0, e.hasNewReports())
        }), null)
    }

    function Db(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "li", [["class", "list-group-item"], ["routerLink", "simulator"], ["routerLinkActive", "active"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, [[15, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(2, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 15, {
            links: 1
        }), cu(603979776, 16, {
            linksWithHrefs: 1
        }), (l()(), _u(-1, null, ["Battle simulator"]))], (function (l, n) {
            l(n, 1, 0, "simulator"), l(n, 2, 0, "active")
        }), null)
    }

    function Mb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "li", [["class", "list-group-item"], ["routerLink", "diplomacy"], ["routerLinkActive", "active"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, [[19, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(2, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 19, {
            links: 1
        }), cu(603979776, 20, {
            linksWithHrefs: 1
        }), (l()(), _u(-1, null, ["Diplomacy"]))], (function (l, n) {
            l(n, 1, 0, "diplomacy"), l(n, 2, 0, "active")
        }), null)
    }

    function Ob(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(-1, null, ["& Upgrades"]))], null, null)
    }

    function Nb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 7, "li", [["class", "list-group-item"], ["routerLink", "powers"], ["routerLinkActive", "active"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, [[21, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(2, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 21, {
            links: 1
        }), cu(603979776, 22, {
            linksWithHrefs: 1
        }), (l()(), _u(-1, null, ["Powers "])), (l()(), iu(16777216, null, null, 1, null, Ob)), gi(7, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, "powers"), l(n, 2, 0, "active"), l(n, 7, 0, e.data.prestige)
        }), null)
    }

    function Rb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 60, "div", [["class", "border-right position-relative overflow-hidden"], ["style", "min-width:230px"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 59, "ul", [["class", "list-group"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, wb)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(4, 0, null, null, 7, "li", [["class", "list-group-item"], ["routerLink", "city"], ["routerLinkActive", "active"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 5).onClick() && t), t
        }), null, null)), gi(5, 16384, [[3, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(6, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 3, {
            links: 1
        }), cu(603979776, 4, {
            linksWithHrefs: 1
        }), (l()(), iu(16777216, null, null, 1, null, xb)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), _u(-1, null, [" City"])), (l()(), su(12, 0, null, null, 7, "li", [["class", "list-group-item"], ["routerLink", "science"], ["routerLinkActive", "active"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 13).onClick() && t), t
        }), null, null)), gi(13, 16384, [[5, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(14, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 5, {
            links: 1
        }), cu(603979776, 6, {
            linksWithHrefs: 1
        }), (l()(), iu(16777216, null, null, 1, null, kb)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), _u(-1, null, ["Science"])), (l()(), iu(16777216, null, null, 1, null, Cb)), gi(21, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Ib)), gi(23, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Eb)), gi(25, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Pb)), gi(27, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Db)), gi(29, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(30, 0, null, null, 5, "li", [["class", "list-group-item"], ["routerLink", "notifications"], ["routerLinkActive", "active"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 31).onClick() && t), t
        }), null, null)), gi(31, 16384, [[17, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(32, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 17, {
            links: 1
        }), cu(603979776, 18, {
            linksWithHrefs: 1
        }), (l()(), _u(-1, null, ["Notifications"])), (l()(), iu(16777216, null, null, 1, null, Mb)), gi(37, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Nb)), gi(39, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(40, 0, null, null, 5, "li", [["class", "list-group-item"], ["routerLink", "help"], ["routerLinkActive", "active"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 41).onClick() && t), t
        }), null, null)), gi(41, 16384, [[23, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(42, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 23, {
            links: 1
        }), cu(603979776, 24, {
            linksWithHrefs: 1
        }), (l()(), _u(-1, null, ["Help"])), (l()(), su(46, 0, null, null, 5, "li", [["class", "list-group-item"], ["routerLink", "options"], ["routerLinkActive", "active"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 47).onClick() && t), t
        }), null, null)), gi(47, 16384, [[25, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(48, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 25, {
            links: 1
        }), cu(603979776, 26, {
            linksWithHrefs: 1
        }), (l()(), _u(-1, null, ["Options"])), (l()(), su(52, 0, null, null, 5, "li", [["class", "list-group-item"], ["routerLink", "support"], ["routerLinkActive", "active"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 53).onClick() && t), t
        }), null, null)), gi(53, 16384, [[27, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(54, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 27, {
            links: 1
        }), cu(603979776, 28, {
            linksWithHrefs: 1
        }), (l()(), _u(-1, null, ["Support & Credits"])), (l()(), su(58, 0, null, null, 2, "li", [["class", "list-group-item text-secondary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = 0 != (l.component.data.lefthidden = !0) && t), t
        }), null, null)), (l()(), su(59, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Minimize "]))], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, e.dataService.isUnlocked("menu_empire")), l(n, 5, 0, "city"), l(n, 6, 0, "active"), l(n, 10, 0, e.hasSomethingToBuild()), l(n, 13, 0, "science"), l(n, 14, 0, "active"), l(n, 18, 0, !e.dataService.player().science_queue.length), l(n, 21, 0, e.dataService.isUnlocked("menu_policies")), l(n, 23, 0, e.dataService.isUnlocked("menu_world")), l(n, 25, 0, e.dataService.isUnlocked("menu_world")), l(n, 27, 0, e.dataService.isUnlocked("menu_world")), l(n, 29, 0, e.dataService.isUnlocked("menu_simulator")), l(n, 31, 0, "notifications"), l(n, 32, 0, "active"), l(n, 37, 0, e.dataService.isUnlocked("menu_diplomacy")), l(n, 39, 0, e.dataService.isUnlocked("menu_powers")), l(n, 41, 0, "help"), l(n, 42, 0, "active"), l(n, 47, 0, "options"), l(n, 48, 0, "active"), l(n, 53, 0, "support"), l(n, 54, 0, "active")
        }), (function (l, n) {
            l(n, 59, 0, n.component.icons.arrow_angle_left_double)
        }))
    }

    function Bb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "li", [["class", "list-group-item"], ["routerLink", "empire"], ["routerLinkActive", "active"], ["title", "Empire"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, [[29, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(2, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActiveOptions: [0, "routerLinkActiveOptions"],
            routerLinkActive: [1, "routerLinkActive"]
        }, null), cu(603979776, 29, {
            links: 1
        }), cu(603979776, 30, {
            linksWithHrefs: 1
        }), vu(5, {
            exact: 0
        }), (l()(), su(6, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            l(n, 1, 0, "empire");
            var e = l(n, 5, 0, !0);
            l(n, 2, 0, e, "active")
        }), (function (l, n) {
            l(n, 6, 0, n.component.icons.empire)
        }))
    }

    function zb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.icons.exclamation)
        }))
    }

    function $b(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.icons.exclamation)
        }))
    }

    function Lb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.icons.exclamation)
        }))
    }

    function Fb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 7, "li", [["class", "list-group-item"], ["routerLink", "policies"], ["routerLinkActive", "active"], ["title", "Social Policies"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, [[35, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(2, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 35, {
            links: 1
        }), cu(603979776, 36, {
            linksWithHrefs: 1
        }), (l()(), iu(16777216, null, null, 1, null, Lb)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(7, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, "policies"), l(n, 2, 0, "active"), l(n, 6, 0, e.hasNewPolicy())
        }), (function (l, n) {
            l(n, 7, 0, n.component.icons.culture)
        }))
    }

    function qb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "li", [["class", "list-group-item"], ["routerLink", "world"], ["routerLinkActive", "active"], ["title", "World"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, [[37, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(2, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 37, {
            links: 1
        }), cu(603979776, 38, {
            linksWithHrefs: 1
        }), (l()(), su(5, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            l(n, 1, 0, "world"), l(n, 2, 0, "active")
        }), (function (l, n) {
            l(n, 5, 0, n.component.icons.world)
        }))
    }

    function Ub(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [["class", "badge badge-pill badge-danger"]], null, null, null, null, null)), (l()(), _u(1, null, ["", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.component.getIncomings())
        }))
    }

    function Hb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 7, "li", [["class", "list-group-item"], ["routerLink", "attacks"], ["routerLinkActive", "active"], ["title", "Attacks & Transfers"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, [[39, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(2, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 39, {
            links: 1
        }), cu(603979776, 40, {
            linksWithHrefs: 1
        }), (l()(), iu(16777216, null, null, 1, null, Ub)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(7, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, "attacks"), l(n, 2, 0, "active"), l(n, 6, 0, e.getIncomings())
        }), (function (l, n) {
            l(n, 7, 0, n.component.icons.attack)
        }))
    }

    function Vb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.icons.exclamation)
        }))
    }

    function jb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 7, "li", [["class", "list-group-item"], ["routerLink", "reports"], ["routerLinkActive", "active"], ["title", "Battle Reports"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, [[41, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(2, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 41, {
            links: 1
        }), cu(603979776, 42, {
            linksWithHrefs: 1
        }), (l()(), iu(16777216, null, null, 1, null, Vb)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(7, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, "reports"), l(n, 2, 0, "active"), l(n, 6, 0, e.hasNewReports())
        }), (function (l, n) {
            l(n, 7, 0, n.component.icons.report)
        }))
    }

    function Gb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "li", [["class", "list-group-item"], ["routerLink", "simulator"], ["routerLinkActive", "active"], ["title", "Battle Simulator"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, [[43, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(2, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 43, {
            links: 1
        }), cu(603979776, 44, {
            linksWithHrefs: 1
        }), (l()(), su(5, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            l(n, 1, 0, "simulator"), l(n, 2, 0, "active")
        }), (function (l, n) {
            l(n, 5, 0, n.component.icons.simulator)
        }))
    }

    function Wb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "li", [["class", "list-group-item"], ["routerLink", "diplomacy"], ["routerLinkActive", "active"], ["title", "Diplomacy"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, [[47, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(2, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 47, {
            links: 1
        }), cu(603979776, 48, {
            linksWithHrefs: 1
        }), (l()(), su(5, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            l(n, 1, 0, "diplomacy"), l(n, 2, 0, "active")
        }), (function (l, n) {
            l(n, 5, 0, n.component.icons.diplomacy)
        }))
    }

    function Kb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "li", [["class", "list-group-item"], ["routerLink", "powers"], ["routerLinkActive", "active"], ["title", "Powers"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, [[49, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(2, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 49, {
            links: 1
        }), cu(603979776, 50, {
            linksWithHrefs: 1
        }), (l()(), su(5, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            l(n, 1, 0, "powers"), l(n, 2, 0, "active")
        }), (function (l, n) {
            l(n, 5, 0, n.component.icons.power)
        }))
    }

    function Zb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 59, "div", [["class", "border-right position-relative overflow-hidden"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 58, "ul", [["class", "list-group list-group-min"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Bb)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(4, 0, null, null, 7, "li", [["class", "list-group-item"], ["routerLink", "city"], ["routerLinkActive", "active"], ["title", "City"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 5).onClick() && t), t
        }), null, null)), gi(5, 16384, [[31, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(6, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 31, {
            links: 1
        }), cu(603979776, 32, {
            linksWithHrefs: 1
        }), (l()(), iu(16777216, null, null, 1, null, zb)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(11, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(12, 0, null, null, 7, "li", [["class", "list-group-item"], ["routerLink", "science"], ["routerLinkActive", "active"], ["title", "Science"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 13).onClick() && t), t
        }), null, null)), gi(13, 16384, [[33, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(14, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 33, {
            links: 1
        }), cu(603979776, 34, {
            linksWithHrefs: 1
        }), (l()(), iu(16777216, null, null, 1, null, $b)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(19, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Fb)), gi(21, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, qb)), gi(23, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Hb)), gi(25, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, jb)), gi(27, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Gb)), gi(29, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(30, 0, null, null, 5, "li", [["class", "list-group-item"], ["routerLink", "notifications"], ["routerLinkActive", "active"], ["title", "Notifications"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 31).onClick() && t), t
        }), null, null)), gi(31, 16384, [[45, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(32, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 45, {
            links: 1
        }), cu(603979776, 46, {
            linksWithHrefs: 1
        }), (l()(), su(35, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Wb)), gi(37, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Kb)), gi(39, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(40, 0, null, null, 5, "li", [["class", "list-group-item"], ["routerLink", "help"], ["routerLinkActive", "active"], ["title", "Help"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 41).onClick() && t), t
        }), null, null)), gi(41, 16384, [[51, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(42, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 51, {
            links: 1
        }), cu(603979776, 52, {
            linksWithHrefs: 1
        }), (l()(), su(45, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(46, 0, null, null, 5, "li", [["class", "list-group-item"], ["routerLink", "options"], ["routerLinkActive", "active"], ["title", "Options"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 47).onClick() && t), t
        }), null, null)), gi(47, 16384, [[53, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(48, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 53, {
            links: 1
        }), cu(603979776, 54, {
            linksWithHrefs: 1
        }), (l()(), su(51, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(52, 0, null, null, 5, "li", [["class", "list-group-item"], ["routerLink", "support"], ["routerLinkActive", "active"], ["title", "Support & Credits"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 53).onClick() && t), t
        }), null, null)), gi(53, 16384, [[55, 4]], 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), gi(54, 1720320, null, 2, Sp, [_p, fe, be, [2, wp], [2, xp]], {
            routerLinkActive: [0, "routerLinkActive"]
        }, null), cu(603979776, 55, {
            links: 1
        }), cu(603979776, 56, {
            linksWithHrefs: 1
        }), (l()(), su(57, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(58, 0, null, null, 1, "li", [["class", "list-group-item text-secondary"], ["title", "Expand"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = 0 != (l.component.data.lefthidden = !1) && t), t
        }), null, null)), (l()(), su(59, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, e.dataService.isUnlocked("menu_empire")), l(n, 5, 0, "city"), l(n, 6, 0, "active"), l(n, 10, 0, e.hasSomethingToBuild()), l(n, 13, 0, "science"), l(n, 14, 0, "active"), l(n, 18, 0, !e.dataService.player().science_queue.length), l(n, 21, 0, e.dataService.isUnlocked("menu_policies")), l(n, 23, 0, e.dataService.isUnlocked("menu_world")), l(n, 25, 0, e.dataService.isUnlocked("menu_world")), l(n, 27, 0, e.dataService.isUnlocked("menu_world")), l(n, 29, 0, e.dataService.isUnlocked("menu_simulator")), l(n, 31, 0, "notifications"), l(n, 32, 0, "active"), l(n, 37, 0, e.dataService.isUnlocked("menu_diplomacy")), l(n, 39, 0, e.dataService.isUnlocked("menu_powers")), l(n, 41, 0, "help"), l(n, 42, 0, "active"), l(n, 47, 0, "options"), l(n, 48, 0, "active"), l(n, 53, 0, "support"), l(n, 54, 0, "active")
        }), (function (l, n) {
            var e = n.component;
            l(n, 11, 0, e.icons.city), l(n, 19, 0, e.icons.science), l(n, 35, 0, e.icons.notification), l(n, 45, 0, e.icons.help), l(n, 51, 0, e.icons.option), l(n, 57, 0, e.icons.support), l(n, 59, 0, e.icons.arrow_angle_right_double)
        }))
    }

    function Qb(l) {
        return ku(0, [(l()(), iu(16777216, null, null, 1, null, Rb)), gi(1, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Zb)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, !e.data.lefthidden), l(n, 3, 0, e.data.lefthidden)
        }), null)
    }
    var Yb = st({
        encapsulation: 2,
        styles: ["ngb-alert{display:block}"],
        data: {}
    });

    function Xb(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "button", [["aria-label", "Close"], ["class", "close"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.closeHandler() && t), t
        }), null, null)), (l()(), su(1, 0, null, null, 1, "span", [["aria-hidden", "true"]], null, null, null, null, null)), (l()(), _u(-1, null, ["\xd7"]))], null, null)
    }

    function Jb(l) {
        return ku(2, [gu(null, 0), (l()(), iu(16777216, null, null, 1, null, Xb)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 2, 0, n.component.dismissible)
        }), null)
    }

    function l_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "ngb-alert", [["class", "alert"], ["role", "alert"]], [[2, "alert-dismissible", null]], null, null, Jb, Yb)), gi(1, 638976, null, 0, Mm, [Dm, be, fe], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), (function (l, n) {
            l(n, 0, 0, ei(n, 1).dismissible)
        }))
    }
    var n_ = jt("ngb-alert", Mm, l_, {
        dismissible: "dismissible",
        type: "type"
    }, {
        close: "close"
    }, ["*"]), e_ = st({
        encapsulation: 2,
        styles: ['ngb-datepicker-month-view{display:block}.ngb-dp-week-number,.ngb-dp-weekday{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:#5bc0de;color:var(--info)}.ngb-dp-week{border-radius:.25rem;display:-ms-flexbox;display:flex}.ngb-dp-weekdays{border-bottom:1px solid rgba(0,0,0,.125);border-radius:0;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-day,.ngb-dp-week-number,.ngb-dp-weekday{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default}.ngb-dp-day[tabindex="0"]{z-index:1}'],
        data: {}
    });

    function t_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "div", [["class", "ngb-dp-weekday ngb-dp-showweek"]], null, null, null, null, null))], null, null)
    }

    function i_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [["class", "ngb-dp-weekday small"], ["role", "columnheader"]], null, null, null, null, null)), (l()(), _u(1, null, [" ", " "]))], null, (function (l, n) {
            l(n, 1, 0, n.component.i18n.getWeekdayShortName(n.context.$implicit))
        }))
    }

    function s_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [["class", "ngb-dp-week ngb-dp-weekdays"], ["role", "row"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, t_)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, i_)), gi(4, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.showWeekNumbers), l(n, 4, 0, e.month.weekdays)
        }), null)
    }

    function u_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [["class", "ngb-dp-week-number small text-muted"]], null, null, null, null, null)), (l()(), _u(1, null, ["", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.component.i18n.getWeekNumerals(n.parent.parent.context.$implicit.number))
        }))
    }

    function r_(l) {
        return ku(0, [(l()(), iu(0, null, null, 0))], null, null)
    }

    function a_(l) {
        return ku(0, [(l()(), iu(16777216, null, null, 1, null, r_)), gi(1, 540672, null, 0, za, [Fe], {
            ngTemplateOutletContext: [0, "ngTemplateOutletContext"],
            ngTemplateOutlet: [1, "ngTemplateOutlet"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 1, 0, n.parent.context.$implicit.context, n.component.dayTemplate)
        }), null)
    }

    function o_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [["class", "ngb-dp-day"], ["role", "gridcell"]], [[2, "disabled", null], [8, "tabIndex", 0], [2, "hidden", null], [2, "ngb-dp-today", null], [1, "aria-label", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.doSelect(l.context.$implicit) && t), t
        }), null, null)), (l()(), iu(16777216, null, null, 1, null, a_)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 2, 0, !n.context.$implicit.hidden)
        }), (function (l, n) {
            l(n, 0, 0, n.context.$implicit.context.disabled, n.context.$implicit.tabindex, n.context.$implicit.hidden, n.context.$implicit.context.today, n.context.$implicit.ariaLabel)
        }))
    }

    function c_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [["class", "ngb-dp-week"], ["role", "row"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, u_)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, o_)), gi(4, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            l(n, 2, 0, n.component.showWeekNumbers), l(n, 4, 0, n.parent.context.$implicit.days)
        }), null)
    }

    function d_(l) {
        return ku(0, [(l()(), iu(16777216, null, null, 1, null, c_)), gi(1, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 1, 0, !n.context.$implicit.collapsed)
        }), null)
    }

    function h_(l) {
        return ku(0, [(l()(), iu(16777216, null, null, 1, null, s_)), gi(1, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, d_)), gi(3, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.showWeekdays), l(n, 3, 0, e.month.weeks)
        }), null)
    }
    var p_ = st({
        encapsulation: 2,
        styles: ["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:0 0}[ngbDatepickerDayView].outside{opacity:.5}"],
        data: {}
    });

    function f_(l) {
        return ku(2, [(l()(), _u(0, null, ["", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, e.i18n.getDayNumerals(e.date))
        }))
    }
    var g_ = st({
        encapsulation: 2,
        styles: ["ngb-datepicker-navigation{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;-webkit-transform:rotate(-135deg);transform:rotate(-135deg)}.right .ngb-dp-navigation-chevron{-webkit-transform:rotate(45deg);transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow{display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{-ms-flex-pack:end;justify-content:flex-end}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:-ms-flexbox;display:flex;-ms-flex:1 1 9rem;flex:1 1 9rem}"],
        data: {}
    });

    function m_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "ngb-datepicker-navigation-select", [["class", "ngb-dp-navigation-select"]], null, [[null, "select"]], (function (l, n, e) {
            var t = !0;
            return "select" === n && (t = !1 !== l.component.select.emit(e) && t), t
        }), C_, x_)), gi(1, 8437760, null, 0, by, [Wm, be], {
            date: [0, "date"],
            disabled: [1, "disabled"],
            months: [2, "months"],
            years: [3, "years"]
        }, {
            select: "select"
        })], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.date, e.disabled, e.selectBoxes.months, e.selectBoxes.years)
        }), null)
    }

    function y_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "div", [["class", "ngb-dp-arrow"]], null, null, null, null, null))], null, null)
    }

    function v_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "div", [["class", "ngb-dp-arrow"]], null, null, null, null, null))], null, null)
    }

    function b_(l) {
        return ku(0, [(l()(), iu(16777216, null, null, 1, null, y_)), gi(1, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(2, 0, null, null, 1, "div", [["class", "ngb-dp-month-name"]], null, null, null, null, null)), (l()(), _u(3, null, [" ", " ", " "])), (l()(), iu(16777216, null, null, 1, null, v_)), gi(5, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, n.context.index > 0), l(n, 5, 0, n.context.index !== e.months.length - 1)
        }), (function (l, n) {
            var e = n.component;
            l(n, 3, 0, e.i18n.getMonthFullName(n.context.$implicit.number, n.context.$implicit.year), e.i18n.getYearNumerals(n.context.$implicit.year))
        }))
    }

    function __(l) {
        return ku(0, [(l()(), iu(16777216, null, null, 1, null, b_)), gi(1, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 1, 0, n.component.months)
        }), null)
    }

    function w_(l) {
        return ku(2, [(l()(), su(0, 0, null, null, 2, "div", [["class", "ngb-dp-arrow"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "button", [["aria-label", "Previous month"], ["class", "btn btn-link ngb-dp-arrow-btn"], ["title", "Previous month"], ["type", "button"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.onClickPrev(e) && t), t
        }), null, null)), (l()(), su(2, 0, null, null, 0, "span", [["class", "ngb-dp-navigation-chevron"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, m_)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, __)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(7, 0, null, null, 2, "div", [["class", "ngb-dp-arrow right"]], null, null, null, null, null)), (l()(), su(8, 0, null, null, 1, "button", [["aria-label", "Next month"], ["class", "btn btn-link ngb-dp-arrow-btn"], ["title", "Next month"], ["type", "button"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.onClickNext(e) && t), t
        }), null, null)), (l()(), su(9, 0, null, null, 0, "span", [["class", "ngb-dp-navigation-chevron"]], null, null, null, null, null))], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, e.showSelect), l(n, 6, 0, !e.showSelect)
        }), (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.prevDisabled), l(n, 8, 0, e.nextDisabled)
        }))
    }
    var x_ = st({
        encapsulation: 2,
        styles: ["ngb-datepicker-navigation-select>.custom-select{-ms-flex:1 1 auto;flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}"],
        data: {}
    });

    function k_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "option", [], [[1, "aria-label", 0]], null, null, null, null)), gi(1, 147456, null, 0, If, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), gi(2, 147456, null, 0, Ef, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), (l()(), _u(3, null, ["", ""]))], (function (l, n) {
            l(n, 1, 0, n.context.$implicit), l(n, 2, 0, n.context.$implicit)
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, e.i18n.getMonthFullName(n.context.$implicit, null == e.date ? null : e.date.year)), l(n, 3, 0, e.i18n.getMonthShortName(n.context.$implicit, null == e.date ? null : e.date.year))
        }))
    }

    function S_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "option", [], null, null, null, null, null)), gi(1, 147456, null, 0, If, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), gi(2, 147456, null, 0, Ef, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), (l()(), _u(3, null, ["", ""]))], (function (l, n) {
            l(n, 1, 0, n.context.$implicit), l(n, 2, 0, n.context.$implicit)
        }), (function (l, n) {
            l(n, 3, 0, n.component.i18n.getYearNumerals(n.context.$implicit))
        }))
    }

    function C_(l) {
        return ku(2, [cu(402653184, 1, {
            monthSelect: 0
        }), cu(402653184, 2, {
            yearSelect: 0
        }), (l()(), su(2, 0, [[1, 0], ["month", 1]], null, 2, "select", [["aria-label", "Select month"], ["class", "custom-select"], ["title", "Select month"]], [[8, "disabled", 0]], [[null, "change"]], (function (l, n, e) {
            var t = !0;
            return "change" === n && (t = !1 !== l.component.changeMonth(e.target.value) && t), t
        }), null, null)), (l()(), iu(16777216, null, null, 1, null, k_)), gi(4, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(5, 0, [[2, 0], ["year", 1]], null, 2, "select", [["aria-label", "Select year"], ["class", "custom-select"], ["title", "Select year"]], [[8, "disabled", 0]], [[null, "change"]], (function (l, n, e) {
            var t = !0;
            return "change" === n && (t = !1 !== l.component.changeYear(e.target.value) && t), t
        }), null, null)), (l()(), iu(16777216, null, null, 1, null, S_)), gi(7, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, e.months), l(n, 7, 0, e.years)
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.disabled), l(n, 5, 0, e.disabled)
        }))
    }
    var I_ = st({
        encapsulation: 2,
        styles: ["ngb-datepicker{border:1px solid #dfdfdf;border-radius:.25rem;display:inline-block}ngb-datepicker-month-view{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}.ngb-dp-body{z-index:1050}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-months{display:-ms-flexbox;display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}"],
        data: {}
    });

    function T_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [["class", "btn-light"], ["ngbDatepickerDayView", ""]], [[2, "bg-primary", null], [2, "text-white", null], [2, "text-muted", null], [2, "outside", null], [2, "active", null]], null, null, f_, p_)), gi(1, 49152, null, 0, vy, [Wm], {
            currentMonth: [0, "currentMonth"],
            date: [1, "date"],
            disabled: [2, "disabled"],
            focused: [3, "focused"],
            selected: [4, "selected"]
        }, null)], (function (l, n) {
            l(n, 1, 0, n.context.currentMonth, n.context.date, n.context.disabled, n.context.focused, n.context.selected)
        }), (function (l, n) {
            l(n, 0, 0, ei(n, 1).selected, ei(n, 1).selected, ei(n, 1).isMuted(), ei(n, 1).isMuted(), ei(n, 1).focused)
        }))
    }

    function E_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "ngb-datepicker-navigation", [], null, [[null, "navigate"], [null, "select"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "navigate" === n && (t = !1 !== i.onNavigateEvent(e) && t), "select" === n && (t = !1 !== i.onNavigateDateSelect(e) && t), t
        }), w_, g_)), gi(1, 49152, null, 0, sy, [Wm], {
            date: [0, "date"],
            disabled: [1, "disabled"],
            months: [2, "months"],
            showSelect: [3, "showSelect"],
            prevDisabled: [4, "prevDisabled"],
            nextDisabled: [5, "nextDisabled"],
            selectBoxes: [6, "selectBoxes"]
        }, {
            navigate: "navigate",
            select: "select"
        })], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.model.firstDate, e.model.disabled, e.model.months, "select" === e.model.navigation, e.model.prevDisabled, e.model.nextDisabled, e.model.selectBoxes)
        }), null)
    }

    function A_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [["class", "ngb-dp-month-name"]], null, null, null, null, null)), (l()(), _u(1, null, [" ", " ", " "]))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.i18n.getMonthFullName(n.parent.context.$implicit.number, n.parent.context.$implicit.year), e.i18n.getYearNumerals(n.parent.context.$implicit.year))
        }))
    }

    function P_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [["class", "ngb-dp-month"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, A_)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(3, 0, null, null, 1, "ngb-datepicker-month-view", [["role", "grid"]], null, [[null, "select"]], (function (l, n, e) {
            var t = !0;
            return "select" === n && (t = !1 !== l.component.onDateSelect(e) && t), t
        }), h_, e_)), gi(4, 49152, null, 0, iy, [Wm], {
            dayTemplate: [0, "dayTemplate"],
            month: [1, "month"],
            showWeekdays: [2, "showWeekdays"],
            showWeekNumbers: [3, "showWeekNumbers"]
        }, {
            select: "select"
        })], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, "none" === e.navigation || e.displayMonths > 1 && "select" === e.navigation), l(n, 4, 0, e.dayTemplate || ei(n.parent, 1), n.context.$implicit, e.showWeekdays, e.showWeekNumbers)
        }), null)
    }

    function D_(l) {
        return ku(0, [(l()(), iu(0, null, null, 0))], null, null)
    }

    function M_(l) {
        return ku(2, [cu(402653184, 1, {
            _monthsEl: 0
        }), (l()(), iu(0, [["dt", 2]], null, 0, null, T_)), (l()(), su(2, 0, null, null, 2, "div", [["class", "ngb-dp-header"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, E_)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(5, 0, [[1, 0], ["months", 1]], null, 2, "div", [["class", "ngb-dp-months"]], null, [[null, "keydown"]], (function (l, n, e) {
            var t = !0;
            return "keydown" === n && (t = !1 !== l.component.onKeyDown(e) && t), t
        }), null, null)), (l()(), iu(16777216, null, null, 1, null, P_)), gi(7, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, D_)), gi(9, 540672, null, 0, za, [Fe], {
            ngTemplateOutlet: [0, "ngTemplateOutlet"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, "none" !== e.navigation), l(n, 7, 0, e.model.months), l(n, 9, 0, e.footerTemplate)
        }), null)
    }

    function O_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "ngb-datepicker", [], null, null, null, M_, I_)), yi(5120, null, lf, (function (l) {
            return [l]
        }), [ty]), yi(512, null, Zm, Zm, [qm, Wm]), yi(512, null, Ym, Ym, [Zm, qm]), gi(4, 4964352, null, 0, ty, [Ym, Zm, qm, Wm, Jm, Rn, fe, ny, ys], null, null)], (function (l, n) {
            l(n, 4, 0)
        }), null)
    }
    var N_ = jt("ngb-datepicker", ty, O_, {
        dayTemplate: "dayTemplate",
        dayTemplateData: "dayTemplateData",
        displayMonths: "displayMonths",
        firstDayOfWeek: "firstDayOfWeek",
        footerTemplate: "footerTemplate",
        markDisabled: "markDisabled",
        maxDate: "maxDate",
        minDate: "minDate",
        navigation: "navigation",
        outsideDays: "outsideDays",
        showWeekdays: "showWeekdays",
        showWeekNumbers: "showWeekNumbers",
        startDate: "startDate"
    }, {
        navigate: "navigate",
        select: "select"
    }, []), R_ = st({
        encapsulation: 2,
        styles: ["ngb-popover-window.bs-popover-bottom>.arrow,ngb-popover-window.bs-popover-top>.arrow{left:50%;margin-left:-.5rem}ngb-popover-window.bs-popover-bottom-left>.arrow,ngb-popover-window.bs-popover-top-left>.arrow{left:2em}ngb-popover-window.bs-popover-bottom-right>.arrow,ngb-popover-window.bs-popover-top-right>.arrow{left:auto;right:2em}ngb-popover-window.bs-popover-left>.arrow,ngb-popover-window.bs-popover-right>.arrow{top:50%;margin-top:-.5rem}ngb-popover-window.bs-popover-left-top>.arrow,ngb-popover-window.bs-popover-right-top>.arrow{top:.7em}ngb-popover-window.bs-popover-left-bottom>.arrow,ngb-popover-window.bs-popover-right-bottom>.arrow{top:auto;bottom:.7em}"],
        data: {}
    });

    function B_(l) {
        return ku(0, [(l()(), _u(0, null, ["", ""]))], null, (function (l, n) {
            l(n, 0, 0, n.component.title)
        }))
    }

    function z_(l) {
        return ku(0, [(l()(), iu(0, null, null, 0))], null, null)
    }

    function $_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "h3", [["class", "popover-header"]], null, null, null, null, null)), (l()(), iu(0, [["simpleTitle", 2]], null, 0, null, B_)), (l()(), iu(16777216, null, null, 1, null, z_)), gi(3, 540672, null, 0, za, [Fe], {
            ngTemplateOutletContext: [0, "ngTemplateOutletContext"],
            ngTemplateOutlet: [1, "ngTemplateOutlet"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, e.context, e.isTitleTemplate() ? e.title : ei(n, 1))
        }), null)
    }

    function L_(l) {
        return ku(2, [(l()(), su(0, 0, null, null, 0, "div", [["class", "arrow"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, $_)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(3, 0, null, null, 1, "div", [["class", "popover-body"]], null, null, null, null, null)), gu(null, 0)], (function (l, n) {
            l(n, 2, 0, null != n.component.title)
        }), null)
    }

    function F_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "ngb-popover-window", [["role", "tooltip"]], [[8, "className", 0], [8, "id", 0]], null, null, L_, R_)), gi(1, 49152, null, 0, Ky, [], null, null)], null, (function (l, n) {
            l(n, 0, 0, "popover" + (ei(n, 1).popoverClass ? " " + ei(n, 1).popoverClass : ""), ei(n, 1).id)
        }))
    }
    var q_ = jt("ngb-popover-window", Ky, F_, {
        title: "title",
        id: "id",
        popoverClass: "popoverClass",
        context: "context"
    }, {}, ["*"]), U_ = st({
        encapsulation: 2,
        styles: [],
        data: {}
    });

    function H_(l) {
        return ku(0, [(l()(), iu(0, null, null, 0))], null, null)
    }

    function V_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "li", [["class", "nav-item"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 3, "a", [["class", "nav-link"], ["href", ""], ["role", "tab"]], [[8, "id", 0], [2, "active", null], [2, "disabled", null], [1, "tabindex", 0], [1, "aria-controls", 0], [1, "aria-selected", 0], [1, "aria-disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (l.component.select(l.context.$implicit.id), t = !1 !== e.preventDefault() && t), t
        }), null, null)), (l()(), _u(2, null, [" ", ""])), (l()(), iu(16777216, null, null, 1, null, H_)), gi(4, 540672, null, 0, za, [Fe], {
            ngTemplateOutlet: [0, "ngTemplateOutlet"]
        }, null)], (function (l, n) {
            l(n, 4, 0, null == n.context.$implicit.titleTpl ? null : n.context.$implicit.titleTpl.templateRef)
        }), (function (l, n) {
            var e = n.component;
            l(n, 1, 0, n.context.$implicit.id, n.context.$implicit.id === e.activeId, n.context.$implicit.disabled, n.context.$implicit.disabled ? "-1" : void 0, e.destroyOnHide && n.context.$implicit.id !== e.activeId ? null : n.context.$implicit.id + "-panel", n.context.$implicit.id === e.activeId, n.context.$implicit.disabled), l(n, 2, 0, n.context.$implicit.title)
        }))
    }

    function j_(l) {
        return ku(0, [(l()(), iu(0, null, null, 0))], null, null)
    }

    function G_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [["role", "tabpanel"]], [[8, "className", 0], [1, "aria-labelledby", 0], [8, "id", 0]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, j_)), gi(2, 540672, null, 0, za, [Fe], {
            ngTemplateOutlet: [0, "ngTemplateOutlet"]
        }, null)], (function (l, n) {
            l(n, 2, 0, null == n.parent.context.$implicit.contentTpl ? null : n.parent.context.$implicit.contentTpl.templateRef)
        }), (function (l, n) {
            l(n, 0, 0, Mt(1, "tab-pane ", n.parent.context.$implicit.id === n.component.activeId ? "active" : null, ""), n.parent.context.$implicit.id, Mt(1, "", n.parent.context.$implicit.id, "-panel"))
        }))
    }

    function W_(l) {
        return ku(0, [(l()(), iu(16777216, null, null, 1, null, G_)), gi(1, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, !e.destroyOnHide || n.context.$implicit.id === e.activeId)
        }), null)
    }

    function K_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "ul", [["role", "tablist"]], [[8, "className", 0]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, V_)), gi(2, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(3, 0, null, null, 2, "div", [["class", "tab-content"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, W_)), gi(5, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.tabs), l(n, 5, 0, e.tabs)
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, "nav nav-" + e.type + ("horizontal" == e.orientation ? " " + e.justifyClass : " flex-column"))
        }))
    }
    var Z_ = st({
        encapsulation: 2,
        styles: [".ngb-toasts{position:fixed;top:0;right:0;margin:.5em;z-index:1200}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}"],
        data: {}
    });

    function Q_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "strong", [["class", "mr-auto"]], null, null, null, null, null)), (l()(), _u(1, null, ["", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.component.header)
        }))
    }

    function Y_(l) {
        return ku(0, [(l()(), iu(0, null, null, 0))], null, null)
    }

    function X_(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "toast-header"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Y_)), gi(2, 540672, null, 0, za, [Fe], {
            ngTemplateOutlet: [0, "ngTemplateOutlet"]
        }, null), (l()(), su(3, 0, null, null, 2, "button", [["aria-label", "Close"], ["class", "close"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.hide() && t), t
        }), null, null)), (l()(), su(4, 0, null, null, 1, "span", [["aria-hidden", "true"]], null, null, null, null, null)), (l()(), _u(-1, null, ["\xd7"]))], (function (l, n) {
            l(n, 2, 0, n.component.contentHeaderTpl || ei(n.parent, 0))
        }), null)
    }

    function J_(l) {
        return ku(0, [(l()(), iu(0, [["headerTpl", 2]], null, 0, null, Q_)), (l()(), iu(16777216, null, null, 1, null, X_)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(3, 0, null, null, 1, "div", [["class", "toast-body"]], null, null, null, null, null)), gu(null, 0)], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.contentHeaderTpl || e.header)
        }), null)
    }
    var lw = st({
        encapsulation: 2,
        styles: ["ngb-tooltip-window.bs-tooltip-bottom .arrow,ngb-tooltip-window.bs-tooltip-top .arrow{left:calc(50% - .4rem)}ngb-tooltip-window.bs-tooltip-bottom-left .arrow,ngb-tooltip-window.bs-tooltip-top-left .arrow{left:1em}ngb-tooltip-window.bs-tooltip-bottom-right .arrow,ngb-tooltip-window.bs-tooltip-top-right .arrow{left:auto;right:.8rem}ngb-tooltip-window.bs-tooltip-left .arrow,ngb-tooltip-window.bs-tooltip-right .arrow{top:calc(50% - .4rem)}ngb-tooltip-window.bs-tooltip-left-top .arrow,ngb-tooltip-window.bs-tooltip-right-top .arrow{top:.4rem}ngb-tooltip-window.bs-tooltip-left-bottom .arrow,ngb-tooltip-window.bs-tooltip-right-bottom .arrow{top:auto;bottom:.4rem}"],
        data: {}
    });

    function nw(l) {
        return ku(2, [(l()(), su(0, 0, null, null, 0, "div", [["class", "arrow"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "div", [["class", "tooltip-inner"]], null, null, null, null, null)), gu(null, 0)], null, null)
    }

    function ew(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "ngb-tooltip-window", [["role", "tooltip"]], [[8, "className", 0], [8, "id", 0]], null, null, nw, lw)), gi(1, 49152, null, 0, ov, [], null, null)], null, (function (l, n) {
            l(n, 0, 0, "tooltip show" + (ei(n, 1).tooltipClass ? " " + ei(n, 1).tooltipClass : ""), ei(n, 1).id)
        }))
    }
    var tw = jt("ngb-tooltip-window", ov, ew, {
        id: "id",
        tooltipClass: "tooltipClass"
    }, {}, ["*"]), iw = st({
        encapsulation: 2,
        styles: [],
        data: {}
    });

    function sw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "ngb-highlight", [], null, null, null, gw, dw)), gi(1, 573440, null, 0, dv, [], {
            result: [0, "result"],
            term: [1, "term"]
        }, null)], (function (l, n) {
            var e = n.context.formatter(n.context.result);
            l(n, 1, 0, e, n.context.term)
        }), null)
    }

    function uw(l) {
        return ku(0, [(l()(), iu(0, null, null, 0))], null, null)
    }

    function rw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "button", [["class", "dropdown-item"], ["role", "option"], ["type", "button"]], [[8, "id", 0], [2, "active", null]], [[null, "mouseenter"], [null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== i.markActive(l.context.index) && t), "click" === n && (t = !1 !== i.select(l.context.$implicit) && t), t
        }), null, null)), (l()(), iu(16777216, null, null, 2, null, uw)), gi(2, 540672, null, 0, za, [Fe], {
            ngTemplateOutletContext: [0, "ngTemplateOutletContext"],
            ngTemplateOutlet: [1, "ngTemplateOutlet"]
        }, null), vu(3, {
            result: 0,
            term: 1,
            formatter: 2
        })], (function (l, n) {
            var e = n.component,
                t = l(n, 3, 0, n.context.$implicit, e.term, e.formatter);
            l(n, 2, 0, t, e.resultTemplate || ei(n.parent, 0))
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, e.id + "-" + n.context.index, n.context.index === e.activeIdx)
        }))
    }

    function aw(l) {
        return ku(0, [(l()(), iu(0, [["rt", 2]], null, 0, null, sw)), (l()(), iu(16777216, null, null, 1, null, rw)), gi(2, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            l(n, 2, 0, n.component.results)
        }), null)
    }

    function ow(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "ngb-typeahead-window", [["class", "dropdown-menu show"], ["role", "listbox"]], [[8, "id", 0]], [[null, "mousedown"]], (function (l, n, e) {
            var t = !0;
            return "mousedown" === n && (t = !1 !== e.preventDefault() && t), t
        }), aw, iw)), gi(1, 114688, null, 0, hv, [], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), (function (l, n) {
            l(n, 0, 0, ei(n, 1).id)
        }))
    }
    var cw = jt("ngb-typeahead-window", hv, ow, {
        id: "id",
        focusFirst: "focusFirst",
        results: "results",
        term: "term",
        formatter: "formatter",
        resultTemplate: "resultTemplate"
    }, {
        selectEvent: "select",
        activeChangeEvent: "activeChange"
    }, []), dw = st({
        encapsulation: 2,
        styles: [".ngb-highlight{font-weight:700}"],
        data: {}
    });

    function hw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(1, null, ["", ""]))], null, (function (l, n) {
            l(n, 0, 0, n.component.highlightClass), l(n, 1, 0, n.parent.context.$implicit)
        }))
    }

    function pw(l) {
        return ku(0, [(l()(), _u(0, null, ["", ""]))], null, (function (l, n) {
            l(n, 0, 0, n.parent.context.$implicit)
        }))
    }

    function fw(l) {
        return ku(0, [(l()(), iu(16777216, null, null, 1, null, hw)), gi(1, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"],
            ngIfElse: [1, "ngIfElse"]
        }, null), (l()(), iu(0, [["even", 2]], null, 0, null, pw))], (function (l, n) {
            l(n, 1, 0, n.context.odd, ei(n, 2))
        }), null)
    }

    function gw(l) {
        return ku(2, [(l()(), iu(16777216, null, null, 1, null, fw)), gi(1, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            l(n, 1, 0, n.component.parts)
        }), null)
    }
    var mw = st({
        encapsulation: 2,
        styles: [],
        data: {}
    });

    function yw(l) {
        return ku(0, [], null, null)
    }

    function vw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "ngb-modal-backdrop", [["style", "z-index: 1050"]], [[8, "className", 0]], null, null, yw, mw)), gi(1, 49152, null, 0, Ny, [], null, null)], null, (function (l, n) {
            l(n, 0, 0, "modal-backdrop fade show" + (ei(n, 1).backdropClass ? " " + ei(n, 1).backdropClass : ""))
        }))
    }
    var bw = jt("ngb-modal-backdrop", Ny, vw, {
        backdropClass: "backdropClass"
    }, {}, []), _w = st({
        encapsulation: 2,
        styles: ["ngb-modal-window .component-host-scrollable{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;overflow:hidden}"],
        data: {}
    });

    function ww(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [["role", "document"]], [[8, "className", 0]], null, null, null, null)), (l()(), su(1, 0, null, null, 1, "div", [["class", "modal-content"]], null, null, null, null, null)), gu(null, 0)], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, "modal-dialog" + (e.size ? " modal-" + e.size : "") + (e.centered ? " modal-dialog-centered" : "") + (e.scrollable ? " modal-dialog-scrollable" : ""))
        }))
    }

    function xw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "ngb-modal-window", [["role", "dialog"], ["tabindex", "-1"]], [[8, "className", 0], [1, "aria-modal", 0], [1, "aria-labelledby", 0]], null, null, ww, _w)), gi(1, 4440064, null, 0, $y, [Ua, fe, ys], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), (function (l, n) {
            l(n, 0, 0, "modal fade show d-block" + (ei(n, 1).windowClass ? " " + ei(n, 1).windowClass : ""), !0, ei(n, 1).ariaLabelledBy)
        }))
    }
    var kw = jt("ngb-modal-window", $y, xw, {
        ariaLabelledBy: "ariaLabelledBy",
        backdrop: "backdrop",
        centered: "centered",
        keyboard: "keyboard",
        scrollable: "scrollable",
        size: "size",
        windowClass: "windowClass"
    }, {
        dismissEvent: "dismiss"
    }, ["*"]); class Sw {
        constructor(l, n) {
            this.toastService = l, this.router = n, this.icons = ug
        }
        ngOnInit() {}
        click(l) {
            if (this.toastService.remove(l), l.link)
                if (l.link.indexOf("#") >= 0) this.router.navigate([l.link.split("#")[0]], {
                    fragment: l.link.split("#")[1]
                });
                else if (l.link.indexOf("?") >= 0) {
                let n = {};
                l.link.split("?")[1].split("&").forEach(l => {
                    let e = l.split("=");
                    e.length > 1 && (n[e[0]] = e[1])
                }), this.router.navigate([l.link.split("?")[0]], {
                    queryParams: n
                })
            } else this.router.navigate([l.link])
        }
    }
    var Cw = st({
        encapsulation: 0,
        styles: [[".toast[_ngcontent-%COMP%]{width:250px}.toast[_ngcontent-%COMP%]:not(:last-child){margin-bottom:.5rem!important}.toast-body[_ngcontent-%COMP%]{padding:.5rem!important}"]],
        data: {}
    });

    function Iw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, "text-120 " + n.parent.context.$implicit.icon)
        }))
    }

    function Tw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 9, "ngb-toast", [["aria-atomic", "true"], ["role", "alert"]], [[8, "className", 0], [1, "aria-live", 0], [2, "toast", null], [2, "show", null]], [[null, "hide"], [null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "hide" === n && (t = !1 !== i.toastService.remove(l.context.$implicit) && t), "click" === n && (t = !1 !== i.click(l.context.$implicit) && t), t
        }), J_, Z_)), gi(1, 1622016, null, 1, rv, [[8, null], uv], {
            delay: [0, "delay"],
            autohide: [1, "autohide"]
        }, {
            hideOutput: "hide"
        }), cu(335544320, 1, {
            contentHeaderTpl: 0
        }), (l()(), su(3, 0, null, 0, 6, "div", [["class", "d-flex cursor-pointer"]], null, null, null, null, null)), (l()(), su(4, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Iw)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(7, 0, null, null, 0, "div", [["class", "font-weight-bold ml-2 flex-fill"], ["style", "height:auto!important"]], [[8, "innerHTML", 1]], null, null, null, null)), (l()(), su(8, 0, null, null, 1, "div", [["class", "text-150 font-wieght-bold line-height-1"], ["title", "close"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.toastService.remove(l.context.$implicit) && t), t
        }), null, null)), (l()(), _u(-1, null, [" \xd7"]))], (function (l, n) {
            l(n, 1, 0, n.context.$implicit.delay || 5e3, !0), l(n, 6, 0, n.context.$implicit.icon)
        }), (function (l, n) {
            l(n, 0, 0, n.context.$implicit.classname, ei(n, 1).ariaLive, !0, !0), l(n, 7, 0, n.context.$implicit.text)
        }))
    }

    function Ew(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [["class", "position-absolute"], ["style", "bottom:0;right:0;z-index:5"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Tw)), gi(2, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            l(n, 2, 0, n.component.toastService.toasts)
        }), null)
    }
    class Aw {
        constructor(l, n, e, t, i, s) {
            this.coreEngine = l, this.aiEngine = n, this.dataService = t, this.data = i, this.conf = s, this.icons = ug, this.tuto_step = 0, e.triggers = "hover"
        }
        handleKeydownEvent(l) {
            32 == l.keyCode && "INPUT" != l.target.tagName.toUpperCase() && (this.data.pause = !this.data.pause, l.preventDefault())
        }
        ngOnInit() {
            this.init(!1)
        }
        init(l) {
            l && (this.data.tuto_done = !0), this.data.tuto_done && (this.data.savetime = Date.now(), this.coreEngine.start(), this.aiEngine.start())
        }
        ngOnDestroy() {
            this.coreEngine.stop(), this.aiEngine.stop()
        }
        civExists(l) {
            return this.data.players.some(n => n.civ_id == l)
        }
    }
    var Pw = st({
        encapsulation: 0,
        styles: [[".tuto_bg[_ngcontent-%COMP%]{position:fixed;width:100%;height:100vh;background-color:rgba(0,0,0,.85);padding:10px}"]],
        data: {}
    });

    function Dw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [["class", "bounce"], ["routerLink", "/game/daily"], ["style", "position:absolute;right:225px;bottom:10px"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, null, 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            l(n, 1, 0, "/game/daily")
        }), (function (l, n) {
            l(n, 2, 0, n.component.icons.daily)
        }))
    }

    function Mw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [["class", "bounce"], ["routerLink", "/game/deity"], ["style", "position:absolute;right:300px;bottom:10px"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick() && t), t
        }), null, null)), gi(1, 16384, null, 0, wp, [_p, oh, [8, null], be, fe], {
            routerLink: [0, "routerLink"]
        }, null), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            l(n, 1, 0, "/game/deity")
        }), (function (l, n) {
            l(n, 2, 0, n.component.icons.deity)
        }))
    }

    function Ow(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 12, "div", [["class", "tuto_bg d-flex justify-content-center align-items-center text-light text-150"], ["style", "top:0;left:0"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 11, "div", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "h4", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Welcome to Cividlization II !"])), (l()(), su(4, 0, null, null, 1, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["This is a short tutorial to help you get started with this game."])), (l()(), su(6, 0, null, null, 1, "p", [["class", "text-90"]], null, null, null, null, null)), (l()(), _u(-1, null, ["It will not cover every feature of this game, you will need to refer to the help section to get more information."])), (l()(), su(8, 0, null, null, 4, "p", [], null, null, null, null, null)), (l()(), su(9, 0, null, null, 1, "a", [["class", "btn mr-2 btn-danger"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.init(!0) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Skip"])), (l()(), su(11, 0, null, null, 1, "a", [["class", "btn mr-2 btn-primary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.tuto_step = 1) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Next"]))], null, null)
    }

    function Nw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 38, "div", [["class", "tuto_bg d-flex justify-content-center align-items-top text-light text-120"], ["style", "top:47px;left:0"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 37, "div", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 0, "i", [["class", "fas fa-long-arrow-alt-up text-200 ml-4"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 1, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["This is the topbar where you can see how your empire is going."])), (l()(), su(5, 0, null, null, 24, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, [" There's already a few interesting information to look at: "])), (l()(), su(7, 0, null, null, 22, "ul", [], null, null, null, null, null)), (l()(), su(8, 0, null, null, 3, "li", [], null, null, null, null, null)), (l()(), su(9, 0, null, null, 1, "span", [["class", "text-pop"]], null, null, null, null, null)), (l()(), su(10, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" represents the total population of your empire. The more population you have, the more you will be able to produce."])), (l()(), su(12, 0, null, null, 3, "li", [], null, null, null, null, null)), (l()(), su(13, 0, null, null, 1, "span", [["class", "text-happiness"]], null, null, null, null, null)), (l()(), su(14, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Next to your population is the average happiness of your people. Happy citizens are more efficient so keep it up!"])), (l()(), su(16, 0, null, null, 3, "li", [], null, null, null, null, null)), (l()(), su(17, 0, null, null, 1, "span", [["class", "text-science"]], null, null, null, null, null)), (l()(), su(18, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" represents your science production. you can see that you are not researching anything at the moment. Try to keep it active as much as possible or you will be left behind!"])), (l()(), su(20, 0, null, null, 2, "li", [], null, null, null, null, null)), (l()(), su(21, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" allows you to pause the game."])), (l()(), su(23, 0, null, null, 2, "li", [], null, null, null, null, null)), (l()(), su(24, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" allows you to switch between full screen and windowed."])), (l()(), su(26, 0, null, null, 3, "li", [], null, null, null, null, null)), (l()(), su(27, 0, null, null, 1, "button", [["class", "btn mr-2 btn-primary btn-sm"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Save"])), (l()(), _u(-1, null, ["allows you to save your game locally. The game will save every 10s so you don't really have to actively save. You can also export your save to use it on another computer or if you play in private mode."])), (l()(), su(30, 0, null, null, 1, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["There will be more stuff in it when you will progress in the game."])), (l()(), su(32, 0, null, null, 6, "p", [], null, null, null, null, null)), (l()(), su(33, 0, null, null, 1, "a", [["class", "btn mr-2 btn-danger"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.init(!0) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Skip"])), (l()(), su(35, 0, null, null, 1, "a", [["class", "btn mr-2 btn-secondary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.tuto_step = 0) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Previous"])), (l()(), su(37, 0, null, null, 1, "a", [["class", "btn mr-2 btn-primary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.tuto_step = 2) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Next"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 10, 0, e.icons.pop), l(n, 14, 0, e.icons.happiness), l(n, 18, 0, e.icons.science), l(n, 21, 0, e.icons.pause), l(n, 24, 0, e.icons.expand)
        }))
    }

    function Rw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 40, "div", [["class", "tuto_bg d-flex justify-content-center align-items-top text-light text-120"], ["style", "top:47px;left:16.6666666667%;width:83.3333333333%"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "div", [["class", "tuto_bg"], ["style", "top:0;left:0;height:47px"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 0, "i", [["class", "fas fa-long-arrow-alt-left text-200 mt-4 mr-4"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 37, "div", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 1, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["This is the main menu that will help you access the different screens you need to manage your empire."])), (l()(), su(6, 0, null, null, 27, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, [" There's not much at the moment but there will be more options in it when you will progress in the game: "])), (l()(), su(8, 0, null, null, 25, "ul", [], null, null, null, null, null)), (l()(), su(9, 0, null, null, 3, "li", [], null, null, null, null, null)), (l()(), su(10, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(-1, null, ["City"])), (l()(), _u(-1, null, [" is the current screen. It allows you to manage your cities which is the core of your empire"])), (l()(), su(13, 0, null, null, 5, "li", [], null, null, null, null, null)), (l()(), su(14, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Science"])), (l()(), _u(-1, null, [" is where you will be able to select a science to work on. You can see a small icon "])), (l()(), su(17, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" which means that your attention is required. In this case it means that there is no science selected and that you should choose one."])), (l()(), su(19, 0, null, null, 3, "li", [], null, null, null, null, null)), (l()(), su(20, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Notifications"])), (l()(), _u(-1, null, [" allows you to check all your previous notifications that appeared on screen. You will be notified every time an interesting event happens"])), (l()(), su(23, 0, null, null, 6, "li", [], null, null, null, null, null)), (l()(), su(24, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Help"])), (l()(), _u(-1, null, [" is a very important section since "])), (l()(), su(27, 0, null, null, 1, "u", [], null, null, null, null, null)), (l()(), _u(-1, null, ["there will not be any other tutorial"])), (l()(), _u(-1, null, [". It allows you to find all the information you need to play this game."])), (l()(), su(30, 0, null, null, 3, "li", [], null, null, null, null, null)), (l()(), su(31, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Support & Credits"])), (l()(), _u(-1, null, [" This game is completly free but if you like it, you can support the dev there !"])), (l()(), su(34, 0, null, null, 6, "p", [], null, null, null, null, null)), (l()(), su(35, 0, null, null, 1, "a", [["class", "btn mr-2 btn-danger"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.init(!0) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Skip"])), (l()(), su(37, 0, null, null, 1, "a", [["class", "btn mr-2 btn-secondary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.tuto_step = 1) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Previous"])), (l()(), su(39, 0, null, null, 1, "a", [["class", "btn mr-2 btn-primary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.tuto_step = 3) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Next"]))], null, (function (l, n) {
            l(n, 17, 0, n.component.icons.exclamation)
        }))
    }

    function Bw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 43, "div", [["style", "top:0;left:0;width:100%;height:100vh;"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "div", [["class", "tuto_bg"], ["style", "top:0;left:0;width:16.7%"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 0, "div", [["class", "tuto_bg"], ["style", "top:0;left:0;height:47px"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 40, "div", [["class", "tuto_bg d-flex justify-content-left align-items-top text-120 text-light pl-3"], ["style", "top:200px;left:16.6666666667%;width:83.3333333333%"]], null, null, null, null, null)), (l()(), su(4, 0, null, null, 39, "div", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["And this is the City Screen where you will be able to manage your cities"])), (l()(), su(7, 0, null, null, 1, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Let's see what we have in the menu on the left part of this screen"])), (l()(), su(9, 0, null, null, 21, "ul", [], null, null, null, null, null)), (l()(), su(10, 0, null, null, 8, "li", [], null, null, null, null, null)), (l()(), _u(-1, null, [" You already know those icons: "])), (l()(), su(12, 0, null, null, 1, "span", [["class", "text-pop"]], null, null, null, null, null)), (l()(), su(13, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(14, 0, null, null, 1, "span", [["class", "text-science"]], null, null, null, null, null)), (l()(), su(15, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(16, 0, null, null, 1, "span", [["class", "text-happiness"]], null, null, null, null, null)), (l()(), su(17, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" They have the same meaning but at the city level. "])), (l()(), su(19, 0, null, null, 3, "li", [], null, null, null, null, null)), (l()(), su(20, 0, null, null, 1, "span", [["class", "text-food"]], null, null, null, null, null)), (l()(), su(21, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" represents the food. If you want you city to grow, you will need to meet the requirements for food."])), (l()(), su(23, 0, null, null, 3, "li", [], null, null, null, null, null)), (l()(), su(24, 0, null, null, 1, "span", [["class", "text-health"]], null, null, null, null, null)), (l()(), su(25, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" represents the health of your citizens. Be careful not to let it go too low or disease will strike."])), (l()(), su(27, 0, null, null, 3, "li", [], null, null, null, null, null)), (l()(), su(28, 0, null, null, 1, "span", [["class", "text-gold"]], null, null, null, null, null)), (l()(), su(29, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" represents the gold in this city's treasury. You will need it for a lot of things that you will discover later in this game. There is a maximum amount that you can hold."])), (l()(), su(31, 0, null, null, 1, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["And now the central part of this screen shows your citizens and what they are doing. There are not a lot of roles at the moment but you will unlock others when you will progress."])), (l()(), su(33, 0, null, null, 1, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["You can find more information about the roles in the help menu."])), (l()(), su(35, 0, null, null, 1, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["The autoassign option allows you to let the game allocate citizens automatically. You will find more information about it in the Help section "])), (l()(), su(37, 0, null, null, 6, "p", [], null, null, null, null, null)), (l()(), su(38, 0, null, null, 1, "a", [["class", "btn mr-2 btn-danger"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.init(!0) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Skip"])), (l()(), su(40, 0, null, null, 1, "a", [["class", "btn mr-2 btn-secondary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.tuto_step = 2) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Previous"])), (l()(), su(42, 0, null, null, 1, "a", [["class", "btn mr-2 btn-primary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.tuto_step = 4) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Next"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 13, 0, e.icons.pop), l(n, 15, 0, e.icons.science), l(n, 17, 0, e.icons.happiness), l(n, 21, 0, e.icons.food), l(n, 25, 0, e.icons.health), l(n, 29, 0, e.icons.gold)
        }))
    }

    function zw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 10, "div", [["class", "tuto_bg d-flex justify-content-center align-items-center text-light text-150"], ["style", "top:0;left:0"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 9, "div", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Alright, now you are ready to start. Just click on Start and watch your food accumulate, your city grow and your empire prosper... or fall appart"])), (l()(), su(4, 0, null, null, 1, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Don't forget to look at the help pages if you need any help !"])), (l()(), su(6, 0, null, null, 4, "p", [], null, null, null, null, null)), (l()(), su(7, 0, null, null, 1, "a", [["class", "btn mr-2 btn-secondary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.tuto_step = 3) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Previous"])), (l()(), su(9, 0, null, null, 1, "a", [["class", "btn mr-2 btn-primary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.init(!0) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Start !"]))], null, null)
    }

    function $w(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 10, "div", [["class", "position-fixed vh-100 w-100"], ["style", "top:0;left:0;z-index:50;"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Ow)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Nw)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Rw)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Bw)), gi(8, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, zw)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, 0 == e.tuto_step), l(n, 4, 0, 1 == e.tuto_step), l(n, 6, 0, 2 == e.tuto_step), l(n, 8, 0, 3 == e.tuto_step), l(n, 10, 0, 4 == e.tuto_step)
        }), null)
    }

    function Lw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-spells", [], null, [["document", "keydown"]], (function (l, n, e) {
            var t = !0;
            return "document:keydown" === n && (t = !1 !== ei(l, 1).handleKeydownEvent(e) && t), t
        }), Bv, bv)), gi(1, 49152, null, 0, mv, [Tg, Pg, zg, vv, Vc, oh], null, null)], null, null)
    }

    function Fw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "h4", [["class", "modal-title"]], null, null, null, null, null)), (l()(), _u(-1, null, ["You've just been reincarnated !"]))], null, null)
    }

    function qw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "h4", [["class", "modal-title"]], null, null, null, null, null)), (l()(), _u(-1, null, ["You've just traveled back in time !"]))], null, null)
    }

    function Uw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "span", [["class", "ml-2"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 3, "i", [], [[8, "className", 0]], null, null, null, null)), yi(512, null, Oa, Na, [fe, Ne, be]), gi(3, 278528, null, 0, Ba, [Oa], {
            ngStyle: [0, "ngStyle"]
        }, null), vu(4, {
            color: 0
        }), (l()(), su(5, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(6, null, ["", ""]))], (function (l, n) {
            var e = l(n, 4, 0, n.context.$implicit.key ? n.component.conf.deities[n.context.$implicit.key].color : "#000");
            l(n, 3, 0, e)
        }), (function (l, n) {
            l(n, 1, 0, n.component.icons.favor), l(n, 6, 0, n.context.$implicit.value)
        }))
    }

    function Hw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, ["You now have: "])), (l()(), iu(16777216, null, null, 2, null, Uw)), gi(3, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne]), (l()(), su(5, 0, null, null, 0, "br", [], null, null, null, null, null)), (l()(), _u(-1, null, [" You can use those to buy helpful powers ! "]))], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, et(n, 3, 0, ei(n, 4).transform(e.data.favors[0])))
        }), null)
    }

    function Vw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Hw)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 2, 0, n.component.data.favors[0])
        }), null)
    }

    function jw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 16, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, ["You now have: "])), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(3, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(4, null, ["", ""])), (l()(), su(5, 0, null, null, 11, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Each "])), (l()(), su(7, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" gives you a +1% bonus in "])), (l()(), su(9, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" & "])), (l()(), su(11, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(12, 0, null, null, 0, "br", [], null, null, null, null, null)), (l()(), _u(-1, null, [" You can also use them to buy special "])), (l()(), su(14, 0, null, null, 1, "b", [["class", "text-special"]], null, null, null, null, null)), (l()(), _u(-1, null, ["upgrade"])), (l()(), _u(-1, null, [" !"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.icons.prestige + " text-prestige"), l(n, 4, 0, e.data.prestige), l(n, 7, 0, e.icons.prestige + " text-prestige"), l(n, 9, 0, e.icons.food + " text-food"), l(n, 11, 0, e.icons.prod + " text-prod")
        }))
    }

    function Gw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, jw)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 2, 0, n.component.data.prestige)
        }), null)
    }

    function Ww(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 7, "div", [], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.civid = l.context.$implicit.key) && t), t
        }), null, null)), (l()(), su(1, 0, null, null, 6, "div", [], null, null, null, null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(3, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(4, {
            "border-bottom cursor-pointer p-1": 0,
            "bg-dark text-light": 1
        }), (l()(), su(5, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(6, null, ["", ""])), (l()(), su(7, 0, null, null, 0, "div", [], [[8, "innerHTML", 1]], null, null, null, null))], (function (l, n) {
            var e = l(n, 4, 0, !0, n.component.civid == n.context.$implicit.key);
            l(n, 3, 0, e)
        }), (function (l, n) {
            l(n, 6, 0, n.context.$implicit.value.name), l(n, 7, 0, n.context.$implicit.value.description)
        }))
    }

    function Kw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 23, "div", [["class", "tuto_bg d-flex justify-content-center align-items-center"], ["style", "top:0;left:0;z-index:49;"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 22, "div", [["class", "bg-light"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 4, "div", [["class", "modal-header"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Fw)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, qw)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(7, 0, null, null, 13, "div", [["class", "modal-body"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Vw)), gi(9, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Gw)), gi(11, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(12, 0, null, null, 0, "hr", [], null, null, null, null, null)), (l()(), su(13, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Please select your next civilization"])), (l()(), su(15, 0, null, null, 1, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Choose well, you will not be able to change until next reincarnation !"])), (l()(), su(17, 0, null, null, 3, "div", [["class", "overflow-auto d-flex flex-column border rounded mb-1"], ["style", "max-height: 250px;"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, Ww)), gi(19, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne]), (l()(), su(21, 0, null, null, 2, "div", [["class", "modal-footer"]], null, null, null, null, null)), (l()(), su(22, 0, null, null, 1, "button", [["class", "btn btn-outline-dark"], ["type", "button"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (i.data.death_modal = 0, i.dataService.chooseCiv(i.civid), t = 0 != (i.data.pause = !1) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Ok, cool !"]))], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, 1 == e.data.death_modal), l(n, 6, 0, 2 == e.data.death_modal), l(n, 9, 0, 1 == e.data.death_modal), l(n, 11, 0, 2 == e.data.death_modal), l(n, 19, 0, et(n, 19, 0, ei(n, 20).transform(e.conf.civilizations)))
        }), (function (l, n) {
            l(n, 22, 0, !n.component.civid)
        }))
    }

    function Zw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "div", [], null, null, null, null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(2, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(3, {
            "border-bottom cursor-pointer p-1": 0,
            "bg-dark text-light": 1
        }), (l()(), su(4, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(5, null, ["", ""])), (l()(), su(6, 0, null, null, 0, "div", [], [[8, "innerHTML", 1]], null, null, null, null))], (function (l, n) {
            var e = l(n, 3, 0, !0, n.component.civid == n.parent.context.$implicit.key);
            l(n, 2, 0, e)
        }), (function (l, n) {
            l(n, 5, 0, n.parent.context.$implicit.value.name), l(n, 6, 0, n.parent.context.$implicit.value.description)
        }))
    }

    function Qw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.civid = l.context.$implicit.key) && t), t
        }), null, null)), (l()(), iu(16777216, null, null, 1, null, Zw)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 2, 0, !n.component.civExists(n.context.$implicit.key))
        }), null)
    }

    function Yw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 16, "div", [["class", "tuto_bg d-flex justify-content-center align-items-center"], ["style", "top:0;left:0;z-index:49;"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 15, "div", [["class", "bg-light"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 2, "div", [["class", "modal-header"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 1, "h4", [["class", "modal-title"]], null, null, null, null, null)), (l()(), _u(4, null, ["Welcome to v", " !"])), (l()(), su(5, 0, null, null, 8, "div", [["class", "modal-body"]], null, null, null, null, null)), (l()(), su(6, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["You now get to select a civilization !"])), (l()(), su(8, 0, null, null, 1, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Choose well, you will not be able to change until next reincarnation !"])), (l()(), su(10, 0, null, null, 3, "div", [["class", "overflow-auto d-flex flex-column border rounded mb-1"], ["style", "max-height: 250px;"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, Qw)), gi(12, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne]), (l()(), su(14, 0, null, null, 2, "div", [["class", "modal-footer"]], null, null, null, null, null)), (l()(), su(15, 0, null, null, 1, "button", [["class", "btn btn-outline-dark"], ["type", "button"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (t = !1 !== i.dataService.chooseCiv(i.civid, !1) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Select"]))], (function (l, n) {
            var e = n.component;
            l(n, 12, 0, et(n, 12, 0, ei(n, 13).transform(e.conf.civilizations)))
        }), (function (l, n) {
            var e = n.component;
            l(n, 4, 0, e.dataService.getStrVersion()), l(n, 15, 0, !e.civid)
        }))
    }

    function Xw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 13, "div", [], null, null, null, null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(2, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(3, {
            "vh-100 d-flex flex-column": 0,
            dark: 1
        }), (l()(), su(4, 0, null, null, 1, "app-topbar", [], null, null, null, vb, jv)), gi(5, 245760, null, 0, Fv, [Pg, zg, Tg, $g, _p, vv, qv, Fy, Hv], null, null), (l()(), su(6, 0, null, null, 7, "div", [["class", "container-fluid px-0 flex-fill"]], null, null, null, null, null)), (l()(), su(7, 0, null, null, 6, "div", [["class", "d-flex h-100"]], null, null, null, null, null)), (l()(), su(8, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(9, 0, null, null, 1, "app-leftmenu", [], null, null, null, Qb, _b)), gi(10, 114688, null, 0, bb, [Pg, zg, Tg], null, null), (l()(), su(11, 0, null, null, 2, "div", [["class", "flex-fill"], ["style", "height:auto!important;width:0;"]], null, null, null, null, null)), (l()(), su(12, 16777216, null, null, 1, "router-outlet", [], null, null, null, null, null)), gi(13, 212992, null, 0, Tp, [Ip, Fe, ce, [8, null], Rn], null, null), (l()(), su(14, 0, null, null, 1, "app-toasts", [["aria-atomic", "true"], ["aria-live", "polite"]], null, null, null, Ew, Cw)), gi(15, 114688, null, 0, Sw, [Rg, _p], null, null), (l()(), iu(16777216, null, null, 1, null, Dw)), gi(17, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Mw)), gi(19, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, $w)), gi(21, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Lw)), gi(23, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Kw)), gi(25, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Yw)), gi(27, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component,
                t = l(n, 3, 0, !0, e.data.darktheme);
            l(n, 2, 0, t), l(n, 5, 0), l(n, 10, 0), l(n, 13, 0), l(n, 15, 0), l(n, 17, 0, e.dataService.isDailyAllowed() > 0), l(n, 19, 0, e.dataService.isDeitySelectionAllowed()), l(n, 21, 0, !e.data.tuto_done), l(n, 23, 0, e.dataService.player().deity), l(n, 25, 0, e.data.death_modal), l(n, 27, 0, !e.dataService.player().civ_id && !e.data.death_modal)
        }), null)
    }

    function Jw(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-game", [], null, [["document", "keydown"]], (function (l, n, e) {
            var t = !0;
            return "document:keydown" === n && (t = !1 !== ei(l, 1).handleKeydownEvent(e) && t), t
        }), Xw, Pw)), gi(1, 245760, null, 0, Aw, [vv, qv, Gy, zg, Pg, Tg], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var lx = jt("app-game", Aw, Jw, {}, {}, []); class nx {
        constructor(l, n) {
            this.data = l, this.dataService = n, this.icons = ug
        }
        ngOnInit() {
            this.city = null != this.id ? this.dataService.allCities().find(l => l.id == this.id) : this.dataService.allCities().find(l => l.x == this.x && l.y == this.y), this.city && (this.player = this.data.players.find(l => l.id == this.city.ownerid), 0 == this.city.ownerid ? this.link = "/game/city/" + this.city.id : (this.link = "/game/world", this.params = {
                x: this.city.x,
                y: this.city.y
            }))
        }
        style() {
            return {
                color: this.dataService.color(this.player.id),
                "-webkit-text-fill-color": this.dataService.color2(this.player.id),
                "-webkit-text-stroke-width": "1px",
                "-webkit-text-stroke-color": this.dataService.color(this.player.id)
            }
        }
    }
    var ex = st({
        encapsulation: 0,
        styles: [[""]],
        data: {}
    });

    function tx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "a", [], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(1, 671744, null, 0, xp, [_p, oh, Rr], {
            queryParams: [0, "queryParams"],
            routerLink: [1, "routerLink"]
        }, null), (l()(), su(2, 0, null, null, 3, "span", [], null, null, null, null, null)), yi(512, null, Oa, Na, [fe, Ne, be]), gi(4, 278528, null, 0, Ba, [Oa], {
            ngStyle: [0, "ngStyle"]
        }, null), (l()(), su(5, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(6, null, [" ", "\n"]))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.params, e.link), l(n, 4, 0, e.style())
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, ei(n, 1).target, ei(n, 1).href), l(n, 5, 0, e.icons.player), l(n, 6, 0, e.city.name)
        }))
    }

    function ix(l) {
        return ku(0, [(l()(), iu(16777216, null, null, 1, null, tx)), gi(1, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.city && e.player)
        }), null)
    }
    class sx {
        constructor(l, n, e, t) {
            this.conf = l, this.data = n, this.dataService = e, this.activatedRoute = t, this.icons = ug, this.svg = {
                steps: [0, 0, 0, 0, 0, 0, 0, 0, 0],
                cr: 15,
                cr2: 30,
                cdist: 80,
                rh: 15,
                pad: 5
            }
        }
        ngOnInit() {
            this.activatedRoute.fragment.subscribe(l => {
                l && (this.activetabeid = l)
            })
        }
        updateName() {
            this.data.name = this.newName, this.dataService.player().name = this.newName
        }
        hasTroopsInQueue(l) {
            return Object.keys(l.troop_queue).length > 0
        }
        autoassign_icon(l) {
            return "builders" == l ? ug.prod : "scientists" == l ? ug.science : "merchants" == l ? ug.gold : "artists" == l ? ug.culture : "priests" == l ? ug.faith : "farmers" == l ? ug.food : ug.balanced
        }
        hasSomethingToBuild(l) {
            return this.dataService.isUnlocked("buildings") && this.dataService.isUnlocked("citizen_builders") && !l.building_queue.length && this.dataService.hasAnyBuildingAvailable(l)
        }
        circleFilled(l) {
            if (4 == l) return !0;
            let n = 25 * (l - 4);
            return n < 0 && n >= this.dataService.player().orientation || n > 0 && n <= this.dataService.player().orientation
        }
        repent() {
            this.dataService.player().orientation = -25, this.dataService.player().progress = 0, Object.values(this.conf.buildings).filter(l => l.industrial).forEach(l => {
                this.dataService.player().cities.forEach(n => {
                    delete n.buildings[l.id], n.building_queue.includes(l.id) && n.building_queue.splice(n.building_queue.indexOf(l.id), 1)
                })
            })
        }
        mouseenter(l, n) {
            let e = "";
            0 == n && (e = 'Unlock <span class="text-magic">Autocast <i class="' + ug.spells + '"></i> Spells</span>'), 1 == n && (e = 'Unlock <span class="text-magic"><i class="' + ug.spells + '"></i> Spell 3</span>'), 2 == n && (e = 'Unlock <span class="text-magic"><i class="' + ug.spells + '"></i> Spell 2</span>'), 3 == n && (e = 'Unlock <span class="text-magic"><i class="' + ug.spells + '"></i> Spell 1</span>.'), 4 == n && (e = '0-: Unlock <span class="text-magic"><i class="' + ug.favor + '"></i> Reincarnation</span>. Allow incremental spells effects.<br/>0+: <span class="text-prestige"><i class="' + ug.prestige + '"></i> Time Travel</span>'), 5 == n && (e = 'Unlock <span class="text-tech">Industrial buildings</span>'), 6 == n && (e = 'Unlock <span class="text-tech">Industrial improvements</span>'), 7 == n && (e = 'Unlock <span class="text-tech">Industrial wonders</span>'), 8 == n && (e = 'Unlock <span class="text-tech">Archeologists & Ruins</span>'), l.open({
                desc: e
            })
        }
        mouseleave(l) {
            l.close()
        }
    }
    var ux = st({
        encapsulation: 0,
        styles: [["circle[_ngcontent-%COMP%]{fill:#fff;stroke:#000}text[_ngcontent-%COMP%]{font-weight:700}rect[_ngcontent-%COMP%]{stroke:#000}.fill[_ngcontent-%COMP%]{fill:#58ca8f;stroke:#0da054;stroke-width:2}.fill.rust[_ngcontent-%COMP%]{fill:#e18c55;stroke:#b7410e}.fill.center[_ngcontent-%COMP%]{stroke:#444;stroke-width:1;fill:url(#center)}"]],
        data: {}
    });

    function rx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "span", [], null, null, null, null, null)), (l()(), _u(1, null, [" ", " "])), (l()(), su(2, 0, null, null, 1, "button", [["class", "btn btn-dark btn-sm line-height-1 ml-2"], ["title", "Rename"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (i.edit = !0, t = !1 !== (i.newName = i.data.name) && t), t
        }), null, null)), (l()(), su(3, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.data.name), l(n, 3, 0, e.icons.edit)
        }))
    }

    function ax(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 10, "span", [["class", "input-group form-inline d-inline"], ["style", "width:200px"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 5, "input", [["class", "form-control form-control-sm"], ["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "input" === n && (t = !1 !== ei(l, 2)._handleInput(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 2).onTouched() && t), "compositionstart" === n && (t = !1 !== ei(l, 2)._compositionStart() && t), "compositionend" === n && (t = !1 !== ei(l, 2)._compositionEnd(e.target.value) && t), "ngModelChange" === n && (t = !1 !== (i.newName = e) && t), t
        }), null, null)), gi(2, 16384, null, 0, tf, [be, fe, [2, ef]], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [tf]), gi(4, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(6, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(7, 0, null, null, 1, "button", [["class", "btn btn-sm btn-secondary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = 0 != (l.component.edit = !1) && t), t
        }), null, null)), (l()(), su(8, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(9, 0, null, null, 1, "button", [["class", "btn btn-sm btn-primary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (i.updateName(), t = 0 != (i.edit = !1) && t), t
        }), null, null)), (l()(), su(10, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            l(n, 4, 0, n.component.newName)
        }), (function (l, n) {
            var e = n.component;
            l(n, 1, 0, ei(n, 6).ngClassUntouched, ei(n, 6).ngClassTouched, ei(n, 6).ngClassPristine, ei(n, 6).ngClassDirty, ei(n, 6).ngClassValid, ei(n, 6).ngClassInvalid, ei(n, 6).ngClassPending), l(n, 8, 0, e.icons.cancel), l(n, 10, 0, e.icons.ok)
        }))
    }

    function ox(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.icons.capital + " mr-1")
        }))
    }

    function cx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, e.icons.connected + " text-connected" + e.dataService.cityConnectedToCapital(n.parent.context.$implicit) + " mr-1")
        }))
    }

    function dx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [["class", "rounded-circle bg-primary text-light p-1 text-80 font-weight-bold mr-1"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.autoassign_icon(e.data.emp_priority))
        }))
    }

    function hx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [["class", "rounded-circle bg-primary text-light p-1 text-80 font-weight-bold mr-1"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 1, 0, n.component.autoassign_icon(n.parent.context.$implicit.autoassign_options.priority))
        }))
    }

    function px(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "span", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" ", ""])), yu(3, 1)], null, (function (l, n) {
            l(n, 1, 0, n.component.icons.sleep);
            var e = et(n, 2, 0, l(n, 3, 0, ei(n.parent.parent.parent, 0), n.parent.context.$implicit.citizens.idle));
            l(n, 2, 0, e)
        }))
    }

    function fx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [["class", "text-plague"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 1, 0, n.component.icons.plague)
        }))
    }

    function gx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.icons.forbidden)
        }))
    }

    function mx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(1, null, [" +", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.parent.parent.context.$implicit.building_queue.length - 1)
        }))
    }

    function yx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (l()(), _u(1, null, ["( ", " "])), (l()(), iu(16777216, null, null, 1, null, mx)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), _u(-1, null, [" )"]))], (function (l, n) {
            l(n, 3, 0, n.parent.context.$implicit.building_queue.length > 1)
        }), (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.conf.buildings[n.parent.context.$implicit.building_queue[0]].label(e.dataService.player()))
        }))
    }

    function vx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.icons.exclamation)
        }))
    }

    function bx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (l()(), _u(-1, null, ["("])), (l()(), iu(16777216, null, null, 1, null, vx)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), _u(-1, null, [" Nothing)"]))], (function (l, n) {
            l(n, 3, 0, n.component.hasSomethingToBuild(n.parent.context.$implicit))
        }), null)
    }

    function _x(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.icons.exclamation)
        }))
    }

    function wx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "span", [["class", "text-trade"]], null, null, null, null, null)), (l()(), _u(-1, null, [" ( "])), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" ) "]))], null, (function (l, n) {
            l(n, 2, 0, n.component.icons.trade)
        }))
    }

    function xx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(1, null, [" +", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.parent.parent.context.$implicit.troop_queue[0].nb)
        }))
    }

    function kx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (l()(), _u(1, null, ["( ", " "])), (l()(), iu(16777216, null, null, 1, null, xx)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), _u(-1, null, [" )"]))], (function (l, n) {
            l(n, 3, 0, n.parent.context.$implicit.troop_queue.length > 1)
        }), (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.conf.troops[n.parent.context.$implicit.troop_queue[0].id].name(e.dataService.player()))
        }))
    }

    function Sx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "span", [], null, null, null, null, null)), (l()(), _u(-1, null, ["("])), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Nothing)"]))], null, (function (l, n) {
            l(n, 2, 0, n.component.icons.exclamation)
        }))
    }

    function Cx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 84, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 11, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, ox)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, cx)), gi(5, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, dx)), gi(7, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, hx)), gi(9, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(10, 0, null, null, 2, "a", [], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 11).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(11, 671744, null, 0, xp, [_p, oh, Rr], {
            routerLink: [0, "routerLink"]
        }, null), (l()(), _u(12, null, ["", ""])), (l()(), su(13, 0, null, null, 5, "td", [["class", "text-pop"]], null, null, null, null, null)), (l()(), su(14, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(15, null, [" ", " "])), yu(16, 1), (l()(), iu(16777216, null, null, 1, null, px)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(19, 0, null, null, 5, "td", [["class", "text-health"]], null, null, null, null, null)), (l()(), su(20, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(21, null, [" ", " "])), yu(22, 1), (l()(), iu(16777216, null, null, 1, null, fx)), gi(24, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(25, 0, null, null, 13, "td", [["class", "text-food"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, gx)), gi(27, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(28, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(29, null, [" ", "/", " ("])), yu(30, 1), yu(31, 1), (l()(), su(32, 0, null, null, 5, "span", [], null, null, null, null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(34, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(35, {
            "text-danger": 0
        }), (l()(), _u(36, null, ["", ""])), yu(37, 2), (l()(), _u(-1, null, [") "])), (l()(), su(39, 0, null, null, 7, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), su(40, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(41, null, [" ", " "])), yu(42, 2), (l()(), iu(16777216, null, null, 1, null, yx)), gi(44, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, bx)), gi(46, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(47, 0, null, null, 15, "td", [["class", "text-gold"]], null, null, null, null, null)), (l()(), su(48, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(49, null, [" ", "/", " ("])), yu(50, 1), yu(51, 1), (l()(), su(52, 0, null, null, 5, "span", [], null, null, null, null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(54, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(55, {
            "text-danger": 0
        }), (l()(), _u(56, null, ["", ""])), yu(57, 2), (l()(), _u(-1, null, [") "])), (l()(), iu(16777216, null, null, 1, null, _x)), gi(60, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, wx)), gi(62, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(63, 0, null, null, 3, "td", [["class", "text-science"]], null, null, null, null, null)), (l()(), su(64, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(65, null, [" ", " "])), yu(66, 2), (l()(), su(67, 0, null, null, 3, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), su(68, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(69, null, [" ", " "])), yu(70, 2), (l()(), su(71, 0, null, null, 3, "td", [["class", "text-faith"]], null, null, null, null, null)), (l()(), su(72, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(73, null, [" ", " "])), yu(74, 2), (l()(), su(75, 0, null, null, 3, "td", [["class", "text-happiness"]], null, null, null, null, null)), (l()(), su(76, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(77, null, [" ", " "])), yu(78, 1), (l()(), su(79, 0, null, null, 5, "td", [["class", "text-attack"]], null, null, null, null, null)), (l()(), su(80, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, kx)), gi(82, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Sx)), gi(84, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, n.context.$implicit.capital), l(n, 5, 0, e.dataService.cityConnectedToCapital(n.context.$implicit)), l(n, 7, 0, e.data.emp_autoassign), l(n, 9, 0, !e.data.emp_autoassign && n.context.$implicit.autoassign && n.context.$implicit.autoassign_options), l(n, 11, 0, "/game/city/" + n.context.$implicit.id), l(n, 18, 0, n.context.$implicit.citizens.idle), l(n, 24, 0, n.context.$implicit.plague && n.context.$implicit.plague > 0), l(n, 27, 0, n.context.$implicit.autoassign_options.nogrowth);
            var t = l(n, 35, 0, e.dataService.foodDiff(n.context.$implicit) < 0);
            l(n, 34, 0, t), l(n, 44, 0, n.context.$implicit.building_queue.length), l(n, 46, 0, !n.context.$implicit.building_queue.length);
            var i = l(n, 55, 0, e.dataService.goldDiff(n.context.$implicit) < 0);
            l(n, 54, 0, i), l(n, 60, 0, e.dataService.maxGold(n.context.$implicit) == n.context.$implicit.gold), l(n, 62, 0, n.context.$implicit.troops.caravan), l(n, 82, 0, e.hasTroopsInQueue(n.context.$implicit)), l(n, 84, 0, !n.context.$implicit.troop_queue.length)
        }), (function (l, n) {
            var e = n.component;
            l(n, 10, 0, ei(n, 11).target, ei(n, 11).href), l(n, 12, 0, n.context.$implicit.name), l(n, 14, 0, e.icons.pop);
            var t = et(n, 15, 0, l(n, 16, 0, ei(n.parent.parent, 0), e.dataService.pop(n.context.$implicit)));
            l(n, 15, 0, t), l(n, 20, 0, e.icons.health);
            var i = et(n, 21, 0, l(n, 22, 0, ei(n.parent.parent, 1), e.dataService.health(n.context.$implicit)));
            l(n, 21, 0, i), l(n, 28, 0, e.icons.food);
            var s = et(n, 29, 0, l(n, 30, 0, ei(n.parent.parent, 0), n.context.$implicit.food)),
                u = et(n, 29, 1, l(n, 31, 0, ei(n.parent.parent, 0), e.dataService.foodRequired(n.context.$implicit)));
            l(n, 29, 0, s, u);
            var r = et(n, 36, 0, l(n, 37, 0, ei(n.parent.parent, 0), e.dataService.foodDiff(n.context.$implicit), "+.1"));
            l(n, 36, 0, r), l(n, 40, 0, e.icons.prod);
            var a = et(n, 41, 0, l(n, 42, 0, ei(n.parent.parent, 0), e.dataService.prodDiff(n.context.$implicit), "+.1"));
            l(n, 41, 0, a), l(n, 48, 0, e.icons.gold);
            var o = et(n, 49, 0, l(n, 50, 0, ei(n.parent.parent, 0), n.context.$implicit.gold)),
                c = et(n, 49, 1, l(n, 51, 0, ei(n.parent.parent, 0), e.dataService.maxGold(n.context.$implicit)));
            l(n, 49, 0, o, c);
            var d = et(n, 56, 0, l(n, 57, 0, ei(n.parent.parent, 0), e.dataService.goldDiff(n.context.$implicit), "+.1"));
            l(n, 56, 0, d), l(n, 64, 0, e.icons.science);
            var h = et(n, 65, 0, l(n, 66, 0, ei(n.parent.parent, 0), e.dataService.scienceDiff(n.context.$implicit), "+.1"));
            l(n, 65, 0, h), l(n, 68, 0, e.icons.culture);
            var p = et(n, 69, 0, l(n, 70, 0, ei(n.parent.parent, 0), e.dataService.cultureDiff(n.context.$implicit), "+.1"));
            l(n, 69, 0, p), l(n, 72, 0, e.icons.faith);
            var f = et(n, 73, 0, l(n, 74, 0, ei(n.parent.parent, 0), e.dataService.faithDiff(n.context.$implicit), "+.1"));
            l(n, 73, 0, f), l(n, 76, 0, e.icons.happiness);
            var g = et(n, 77, 0, l(n, 78, 0, ei(n.parent.parent, 1), e.dataService.happiness(n.context.$implicit)));
            l(n, 77, 0, g), l(n, 80, 0, e.icons.attack)
        }))
    }

    function Ix(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "h2", [], null, null, null, null, null)), (l()(), _u(1, null, ["", " Empire - "])), (l()(), iu(16777216, null, null, 1, null, rx)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, ax)), gi(5, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(6, 0, null, null, 31, "table", [["class", "table"]], null, null, null, null, null)), (l()(), su(7, 0, null, null, 30, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Cx)), gi(9, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(10, 0, null, null, 27, "tr", [["class", "font-weight-bold"]], null, null, null, null, null)), (l()(), su(11, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total"])), (l()(), su(13, 0, null, null, 3, "td", [["class", "text-pop"]], null, null, null, null, null)), (l()(), su(14, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(15, null, [" ", ""])), yu(16, 1), (l()(), su(17, 0, null, null, 0, "td", [], null, null, null, null, null)), (l()(), su(18, 0, null, null, 0, "td", [], null, null, null, null, null)), (l()(), su(19, 0, null, null, 0, "td", [], null, null, null, null, null)), (l()(), su(20, 0, null, null, 4, "td", [["class", "text-gold"]], null, null, null, null, null)), (l()(), su(21, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(22, null, [" ", " (", ")"])), yu(23, 1), yu(24, 2), (l()(), su(25, 0, null, null, 3, "td", [["class", "text-science"]], null, null, null, null, null)), (l()(), su(26, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(27, null, [" ", " "])), yu(28, 2), (l()(), su(29, 0, null, null, 3, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), su(30, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(31, null, [" ", " "])), yu(32, 2), (l()(), su(33, 0, null, null, 3, "td", [["class", "text-faith"]], null, null, null, null, null)), (l()(), su(34, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(35, null, [" ", " "])), yu(36, 2), (l()(), su(37, 0, null, null, 0, "td", [["class", "text-faith"]], null, null, null, null, null))], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, !e.edit), l(n, 5, 0, e.edit), l(n, 9, 0, e.dataService.player().cities)
        }), (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.conf.civilizations[e.dataService.player().civ_id].name2), l(n, 14, 0, e.icons.pop);
            var t = et(n, 15, 0, l(n, 16, 0, ei(n.parent, 0), e.dataService.pop()));
            l(n, 15, 0, t), l(n, 21, 0, e.icons.gold);
            var i = et(n, 22, 0, l(n, 23, 0, ei(n.parent, 0), e.dataService.goldTotal())),
                s = et(n, 22, 1, l(n, 24, 0, ei(n.parent, 0), e.dataService.goldDiff(), "+.1"));
            l(n, 22, 0, i, s), l(n, 26, 0, e.icons.science);
            var u = et(n, 27, 0, l(n, 28, 0, ei(n.parent, 0), e.dataService.scienceDiff(), "+.1"));
            l(n, 27, 0, u), l(n, 30, 0, e.icons.culture);
            var r = et(n, 31, 0, l(n, 32, 0, ei(n.parent, 0), e.dataService.cultureDiff(), "+.1"));
            l(n, 31, 0, r), l(n, 34, 0, e.icons.faith);
            var a = et(n, 35, 0, l(n, 36, 0, ei(n.parent, 0), e.dataService.faithDiff(), "+.1"));
            l(n, 35, 0, a)
        }))
    }

    function Tx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [["class", "mr-2"]], null, null, null, null, null)), (l()(), _u(1, null, [" ", " ", " "]))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, n.parent.context.$implicit.value, e.conf.troops[n.parent.context.$implicit.key].name(e.dataService.player()))
        }))
    }

    function Ex(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Tx)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, n.context.$implicit.value)
        }), null)
    }

    function Ax(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 8, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 3, "td", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 2, "a", [], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 3).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(3, 671744, null, 0, xp, [_p, oh, Rr], {
            routerLink: [0, "routerLink"]
        }, null), (l()(), _u(4, null, ["", ""])), (l()(), su(5, 0, null, null, 3, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, Ex)), gi(7, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne])], (function (l, n) {
            l(n, 3, 0, "/game/city/" + n.context.$implicit.id), l(n, 7, 0, et(n, 7, 0, ei(n, 8).transform(n.context.$implicit.troops)))
        }), (function (l, n) {
            l(n, 2, 0, ei(n, 3).target, ei(n, 3).href), l(n, 4, 0, n.context.$implicit.name)
        }))
    }

    function Px(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "table", [["class", "table"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Ax)), gi(3, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            l(n, 3, 0, n.component.dataService.player().cities)
        }), null)
    }

    function Dx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "option", [["value", "builders"]], null, null, null, null, null)), gi(1, 147456, null, 0, If, [fe, be, [2, Cf]], {
            value: [0, "value"]
        }, null), gi(2, 147456, null, 0, Ef, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), (l()(), _u(-1, null, ["Production"]))], (function (l, n) {
            l(n, 1, 0, "builders"), l(n, 2, 0, "builders")
        }), null)
    }

    function Mx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "option", [["value", "merchants"]], null, null, null, null, null)), gi(1, 147456, null, 0, If, [fe, be, [2, Cf]], {
            value: [0, "value"]
        }, null), gi(2, 147456, null, 0, Ef, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), (l()(), _u(-1, null, ["Gold"]))], (function (l, n) {
            l(n, 1, 0, "merchants"), l(n, 2, 0, "merchants")
        }), null)
    }

    function Ox(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "option", [["value", "scientists"]], null, null, null, null, null)), gi(1, 147456, null, 0, If, [fe, be, [2, Cf]], {
            value: [0, "value"]
        }, null), gi(2, 147456, null, 0, Ef, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), (l()(), _u(-1, null, ["Science"]))], (function (l, n) {
            l(n, 1, 0, "scientists"), l(n, 2, 0, "scientists")
        }), null)
    }

    function Nx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "option", [["value", "artists"]], null, null, null, null, null)), gi(1, 147456, null, 0, If, [fe, be, [2, Cf]], {
            value: [0, "value"]
        }, null), gi(2, 147456, null, 0, Ef, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), (l()(), _u(-1, null, ["Culture"]))], (function (l, n) {
            l(n, 1, 0, "artists"), l(n, 2, 0, "artists")
        }), null)
    }

    function Rx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "option", [["value", "priests"]], null, null, null, null, null)), gi(1, 147456, null, 0, If, [fe, be, [2, Cf]], {
            value: [0, "value"]
        }, null), gi(2, 147456, null, 0, Ef, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), (l()(), _u(-1, null, ["Faith"]))], (function (l, n) {
            l(n, 1, 0, "priests"), l(n, 2, 0, "priests")
        }), null)
    }

    function Bx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 26, "div", [["class", "form-group form-check mb-0"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "autoassign_priority"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Priority"])), (l()(), su(3, 0, null, null, 23, "select", [["id", "autoassign_priority"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 4).onChange(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 4).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.data.emp_priority = e) && t), t
        }), null, null)), gi(4, 16384, null, 0, Cf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [Cf]), gi(6, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(8, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(9, 0, null, null, 3, "option", [["value", ""]], null, null, null, null, null)), gi(10, 147456, null, 0, If, [fe, be, [2, Cf]], {
            value: [0, "value"]
        }, null), gi(11, 147456, null, 0, Ef, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), (l()(), _u(-1, null, ["None"])), (l()(), su(13, 0, null, null, 3, "option", [["value", "farmers"]], null, null, null, null, null)), gi(14, 147456, null, 0, If, [fe, be, [2, Cf]], {
            value: [0, "value"]
        }, null), gi(15, 147456, null, 0, Ef, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), (l()(), _u(-1, null, ["Food"])), (l()(), iu(16777216, null, null, 1, null, Dx)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Mx)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Ox)), gi(22, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Nx)), gi(24, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Rx)), gi(26, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 6, 0, e.data.emp_priority), l(n, 10, 0, ""), l(n, 11, 0, ""), l(n, 14, 0, "farmers"), l(n, 15, 0, "farmers"), l(n, 18, 0, e.dataService.isUnlocked("citizen_builders")), l(n, 20, 0, e.dataService.isUnlocked("citizen_merchants")), l(n, 22, 0, e.dataService.isUnlocked("citizen_scientists")), l(n, 24, 0, e.dataService.isUnlocked("citizen_artists")), l(n, 26, 0, e.dataService.isUnlocked("citizen_priests"))
        }), (function (l, n) {
            l(n, 3, 0, ei(n, 8).ngClassUntouched, ei(n, 8).ngClassTouched, ei(n, 8).ngClassPristine, ei(n, 8).ngClassDirty, ei(n, 8).ngClassValid, ei(n, 8).ngClassInvalid, ei(n, 8).ngClassPending)
        }))
    }

    function zx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 8, "div", [["class", "form-group form-check mb-0"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "autoassign_strong"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 2).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 2).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.data.emp_strong = e) && t), t
        }), null, null)), gi(2, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(4, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            isDisabled: [0, "isDisabled"],
            model: [1, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(6, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(7, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "autoassign_strong"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Strong priority"]))], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, !e.data.emp_priority, e.data.emp_strong)
        }), (function (l, n) {
            l(n, 1, 0, ei(n, 6).ngClassUntouched, ei(n, 6).ngClassTouched, ei(n, 6).ngClassPristine, ei(n, 6).ngClassDirty, ei(n, 6).ngClassValid, ei(n, 6).ngClassInvalid, ei(n, 6).ngClassPending)
        }))
    }

    function $x(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 8, "div", [["class", "form-group form-check mb-0"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "autoassign"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 2).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 2).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.data.emp_autoassign = e) && t), t
        }), null, null)), gi(2, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(4, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(6, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(7, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "autoassign"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Auto-assign for all cities"])), (l()(), iu(16777216, null, null, 1, null, Bx)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, zx)), gi(12, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, e.data.emp_autoassign), l(n, 10, 0, e.data.emp_autoassign), l(n, 12, 0, e.data.emp_autoassign)
        }), (function (l, n) {
            l(n, 1, 0, ei(n, 6).ngClassUntouched, ei(n, 6).ngClassTouched, ei(n, 6).ngClassPristine, ei(n, 6).ngClassDirty, ei(n, 6).ngClassValid, ei(n, 6).ngClassInvalid, ei(n, 6).ngClassPending)
        }))
    }

    function Lx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "ngb-tab", [["id", "tab_orders"], ["title", "Orders"]], null, null, null, null, null)), gi(1, 2113536, [[1, 4]], 2, ev, [], {
            id: [0, "id"],
            title: [1, "title"]
        }, null), cu(603979776, 6, {
            titleTpls: 1
        }), cu(603979776, 7, {
            contentTpls: 1
        }), (l()(), iu(0, null, null, 1, null, $x)), gi(5, 16384, [[7, 4]], 0, nv, [$e], null, null)], (function (l, n) {
            l(n, 1, 0, "tab_orders", "Orders")
        }), null)
    }

    function Fx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, ":svg:stop", [["stop-color", "white"]], [[1, "offset", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.dataService.player().orientation / 2 + 49 + "%")
        }))
    }

    function qx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, ":svg:stop", [["stop-color", "#58ca8f"]], [[1, "offset", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.dataService.player().orientation / 2 + 51 + "%")
        }))
    }

    function Ux(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, ":svg:stop", [["offset", "50%"], ["stop-color", "#58ca8f"]], null, null, null, null, null))], null, null)
    }

    function Hx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, ":svg:stop", [["offset", "50%"], ["stop-color", "#e18c55"]], null, null, null, null, null))], null, null)
    }

    function Vx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, ":svg:stop", [["stop-color", "#e18c55"]], [[1, "offset", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.dataService.player().orientation / 2 + 49 + "%")
        }))
    }

    function jx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, ":svg:stop", [["stop-color", "white"]], [[1, "offset", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.dataService.player().orientation / 2 + 51 + "%")
        }))
    }

    function Gx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, null, null, null, null, null, null, null)), (l()(), su(1, 16777216, null, null, 4, ":svg:circle", [["container", "body"], ["placement", "bottom"], ["triggers", "manuel"]], [[1, "cx", 0], [1, "cy", 0], [1, "r", 0]], [[null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== i.mouseenter(ei(l, 5), l.context.index) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 5)) && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(3, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(4, {
            center: 0,
            fill: 1,
            rust: 2
        }), gi(5, 737280, [["p1", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            placement: [1, "placement"],
            triggers: [2, "triggers"],
            container: [3, "container"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = l(n, 4, 0, 4 == n.context.index, n.component.circleFilled(n.context.index), n.context.index > 4);
            l(n, 3, 0, e), l(n, 5, 0, ei(n.parent.parent.parent, 21), "bottom", "manuel", "body")
        }), (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.svg.cdist * n.context.index + e.svg.cr + e.svg.pad, e.svg.cr2 + e.svg.pad, n.context.index == (e.svg.steps.length - 1) / 2 ? e.svg.cr2 : e.svg.cr)
        }))
    }

    function Wx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 11, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(3, 114688, null, 0, nx, [Pg, zg], {
            id: [0, "id"]
        }, null), (l()(), su(4, 0, null, null, 2, "td", [["class", "text-relics"]], null, null, null, null, null)), (l()(), su(5, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(6, null, [" ", ""])), (l()(), su(7, 0, null, null, 4, "td", [["class", "text-progress"]], null, null, null, null, null)), (l()(), _u(8, null, ["+ ", " "])), yu(9, 1), (l()(), su(10, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" / min"]))], (function (l, n) {
            l(n, 3, 0, n.parent.context.$implicit.id)
        }), (function (l, n) {
            var e = n.component;
            l(n, 5, 0, e.icons.relics), l(n, 6, 0, n.parent.context.$implicit.relics);
            var t = et(n, 8, 0, l(n, 9, 0, ei(n.parent.parent.parent.parent.parent, 0), e.dataService.relicsValue(n.parent.context.$implicit) * n.parent.context.$implicit.relics));
            l(n, 8, 0, t), l(n, 10, 0, e.icons.progress)
        }))
    }

    function Kx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Wx)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, n.context.$implicit.relics)
        }), null)
    }

    function Zx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 9, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(3, 114688, null, 0, nx, [Pg, zg], {
            id: [0, "id"]
        }, null), (l()(), su(4, 0, null, null, 1, "td", [["class", "text-special"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Eiffel Tower"])), (l()(), su(6, 0, null, null, 3, "td", [["class", "text-progress"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 10 "])), (l()(), su(8, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" / min"]))], (function (l, n) {
            l(n, 3, 0, n.component.dataService.cityForWonder("eiffel").id)
        }), (function (l, n) {
            l(n, 8, 0, n.component.icons.progress)
        }))
    }

    function Qx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 20, "div", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "h5", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, ["Relics"])), (l()(), su(4, 0, null, null, 16, "table", [["class", "table table-sm d-inline"]], null, null, null, null, null)), (l()(), su(5, 0, null, null, 15, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Kx)), gi(7, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Zx)), gi(9, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(10, 0, null, null, 10, "tr", [["class", "font-weight-bold"]], null, null, null, null, null)), (l()(), su(11, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total"])), (l()(), su(13, 0, null, null, 2, "td", [["class", "text-relics"]], null, null, null, null, null)), (l()(), su(14, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(15, null, [" ", ""])), (l()(), su(16, 0, null, null, 4, "td", [["class", "text-progress"]], null, null, null, null, null)), (l()(), _u(17, null, ["+ ", " "])), yu(18, 1), (l()(), su(19, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" / min"]))], (function (l, n) {
            var e = n.component;
            l(n, 7, 0, e.dataService.player().cities), l(n, 9, 0, e.dataService.hasWonder(0, "eiffel"))
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.icons.relics + " text-relics mx-2"), l(n, 14, 0, e.icons.relics), l(n, 15, 0, e.dataService.relicsNb(0));
            var t = et(n, 17, 0, l(n, 18, 0, ei(n.parent.parent.parent, 0), e.dataService.relicsGain(0)));
            l(n, 17, 0, t), l(n, 19, 0, e.icons.progress)
        }))
    }

    function Yx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 8, "div", [], null, null, null, null, null)), (l()(), su(1, 16777216, null, null, 7, "button", [["class", "btn btn-warning btn-sm mt-2"], ["ngbPopover", "Sacrifice all you progress to reset your orienation to -25. All your industrial buildings & wonders will be lost."]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.repent() && t), t
        }), null, null)), gi(2, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"]
        }, null), (l()(), _u(-1, null, ["Repent ("])), (l()(), su(4, 0, null, null, 3, "span", [["class", "text-progress"]], null, null, null, null, null)), (l()(), su(5, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(6, null, [" ", ""])), yu(7, 1), (l()(), _u(-1, null, [")"]))], (function (l, n) {
            l(n, 2, 0, "Sacrifice all you progress to reset your orienation to -25. All your industrial buildings & wonders will be lost.")
        }), (function (l, n) {
            var e = n.component;
            l(n, 5, 0, e.icons.progress);
            var t = et(n, 6, 0, l(n, 7, 0, ei(n.parent.parent.parent, 0), e.dataService.player().progress));
            l(n, 6, 0, t)
        }))
    }

    function Xx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 30, "div", [["class", "d-flex align-items-center m-3"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(2, 0, null, null, 27, ":svg:svg", [["class", "mx-3"]], [[1, "width", 0], [1, "height", 0]], null, null, null, null)), (l()(), su(3, 0, null, null, 19, ":svg:defs", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 2, ":svg:linearGradient", [["id", "center"], ["x1", "0%"], ["x2", "100%"], ["y1", "0%"], ["y2", "0%"]], null, null, null, null, null)), (l()(), su(5, 0, null, null, 0, ":svg:stop", [["offset", "0%"], ["style", "stop-color:#58ca8f;stop-opacity:1"]], null, null, null, null, null)), (l()(), su(6, 0, null, null, 0, ":svg:stop", [["offset", "100%"], ["style", "stop-color:#e18c55;stop-opacity:1"]], null, null, null, null, null)), (l()(), su(7, 0, null, null, 15, ":svg:linearGradient", [["id", "grad"]], null, null, null, null, null)), (l()(), su(8, 0, null, null, 0, ":svg:stop", [["offset", "0%"], ["stop-color", "white"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Fx)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, qx)), gi(12, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Ux)), gi(14, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(15, 0, null, null, 0, ":svg:stop", [["offset", "50%"], ["stop-color", "white"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Hx)), gi(17, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Vx)), gi(19, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, jx)), gi(21, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(22, 0, null, null, 0, ":svg:stop", [["offset", "100%"], ["stop-color", "white"]], null, null, null, null, null)), (l()(), su(23, 0, null, null, 0, ":svg:rect", [["fill", "url(#grad)"]], [[1, "x", 0], [1, "y", 0], [1, "width", 0], [1, "height", 0]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Gx)), gi(25, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(26, 16777216, null, null, 3, ":svg:text", [["container", "body"], ["placement", "bottom"], ["text-anchor", "middle"], ["triggers", "manuel"]], [[1, "x", 0], [1, "y", 0]], [[null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== i.mouseenter(ei(l, 27), 4) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 27)) && t), t
        }), null, null)), gi(27, 737280, [["p1", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            placement: [1, "placement"],
            triggers: [2, "triggers"],
            container: [3, "container"]
        }, null), (l()(), _u(28, null, [" ", " "])), yu(29, 2), (l()(), su(30, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, Qx)), gi(32, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Yx)), gi(34, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 10, 0, e.dataService.player().orientation < 0), l(n, 12, 0, e.dataService.player().orientation < 0), l(n, 14, 0, e.dataService.player().orientation < 0), l(n, 17, 0, e.dataService.player().orientation > 0), l(n, 19, 0, e.dataService.player().orientation > 0), l(n, 21, 0, e.dataService.player().orientation > 0), l(n, 25, 0, e.svg.steps), l(n, 27, 0, ei(n.parent.parent, 21), "bottom", "manuel", "body"), l(n, 32, 0, e.dataService.player().orientation >= 100), l(n, 34, 0, e.dataService.player().orientation > -25)
        }), (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons.spells + " text-300 text-magic"), l(n, 2, 0, e.svg.cdist * (e.svg.steps.length - 1) + 2 * e.svg.cr + 2 * e.svg.pad, 2 * (e.svg.cr2 + e.svg.pad)), l(n, 23, 0, e.svg.cr + e.svg.pad, e.svg.cr2 - e.svg.rh / 2 + e.svg.pad, e.svg.cdist * (e.svg.steps.length - 1), e.svg.rh), l(n, 26, 0, e.svg.cdist * (e.svg.steps.length - 1) / 2 + e.svg.cr + e.svg.pad, e.svg.cr2 + 5 + e.svg.pad);
            var t = et(n, 28, 0, l(n, 29, 0, ei(n.parent.parent, 0), e.dataService.player().orientation, "+.0"));
            l(n, 28, 0, t), l(n, 30, 0, e.icons.tech + " text-300 text-tech")
        }))
    }

    function Jx(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "ngb-tab", [["id", "tab_orientation"], ["title", "Orientation"]], null, null, null, null, null)), gi(1, 2113536, [[1, 4]], 2, ev, [], {
            id: [0, "id"],
            title: [1, "title"]
        }, null), cu(603979776, 8, {
            titleTpls: 1
        }), cu(603979776, 9, {
            contentTpls: 1
        }), (l()(), iu(0, null, null, 1, null, Xx)), gi(5, 16384, [[9, 4]], 0, nv, [$e], null, null)], (function (l, n) {
            l(n, 1, 0, "tab_orientation", "Orientation")
        }), null)
    }

    function lk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "div", [], [[8, "innerHTML", 1]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.context.desc)
        }))
    }

    function nk(l) {
        return ku(0, [mi(0, zv, []), mi(0, $v, []), (l()(), su(2, 0, null, null, 18, "ngb-tabset", [], null, null, null, K_, U_)), gi(3, 2146304, null, 1, tv, [Jy], {
            activeId: [0, "activeId"]
        }, null), cu(603979776, 1, {
            tabs: 1
        }), (l()(), su(5, 0, null, null, 5, "ngb-tab", [["title", "Cities"]], null, null, null, null, null)), gi(6, 2113536, [[1, 4]], 2, ev, [], {
            title: [0, "title"]
        }, null), cu(603979776, 2, {
            titleTpls: 1
        }), cu(603979776, 3, {
            contentTpls: 1
        }), (l()(), iu(0, null, null, 1, null, Ix)), gi(10, 16384, [[3, 4]], 0, nv, [$e], null, null), (l()(), su(11, 0, null, null, 5, "ngb-tab", [["title", "Armies"]], null, null, null, null, null)), gi(12, 2113536, [[1, 4]], 2, ev, [], {
            title: [0, "title"]
        }, null), cu(603979776, 4, {
            titleTpls: 1
        }), cu(603979776, 5, {
            contentTpls: 1
        }), (l()(), iu(0, null, null, 1, null, Px)), gi(16, 16384, [[5, 4]], 0, nv, [$e], null, null), (l()(), iu(16777216, null, null, 1, null, Lx)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Jx)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, [["popContent", 2]], null, 0, null, lk))], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, e.activetabeid), l(n, 6, 0, "Cities"), l(n, 12, 0, "Armies"), l(n, 18, 0, e.dataService.isUnlocked("empire_orders")), l(n, 20, 0, e.dataService.isUnlocked("orientation"))
        }), null)
    }

    function ek(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-home", [], null, null, null, nk, ux)), gi(1, 114688, null, 0, sx, [Tg, Pg, zg, oh], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var tk = jt("app-home", sx, ek, {}, {}, []); class ik {
        constructor(l, n, e) {
            this.dataService = l, this.conf = n, this.data = e, this.edit = !1, this.icons = ug
        }
        ngOnInit() {}
        useBonus(l) {
            let n = this.data.dailys[l];
            if ("gold" == n.bonus && (this.city.gold += n.quantity), "science" == n.bonus && this.dataService.player().science_queue.length && (this.dataService.player().sciences[this.dataService.player().science_queue[0]].progress += n.quantity), "prod" == n.bonus && this.city.building_queue.length && (this.city.buildings[this.city.building_queue[0]].progress += n.quantity), "culture" == n.bonus && (this.dataService.player().culture += n.quantity), "food" == n.bonus && (this.city.food += n.quantity), "troops" == n.bonus) {
                let l = "warrior";
                this.dataService.hasScience("steel") ? l = "longswordsman" : this.dataService.hasScience("iron_working") && (l = "swordsman"), this.city.troops[l] ? this.city.troops[l] += n.quantity : this.city.troops[l] = n.quantity
            }
            this.data.dailys.splice(l, 1)
        }
        capitalize(l) {
            return mg.capitalizeFirstLetter(l)
        }
    }
    var sk = st({
        encapsulation: 0,
        styles: [[""]],
        data: {}
    });

    function uk(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 3, "div", [["class", "mr-2"], ["placement", "bottom"]], null, null, null, null, null)), gi(1, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            placement: [1, "placement"]
        }, null), (l()(), su(2, 0, null, null, 1, "span", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(3, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 1, 0, ei(n.parent, 74), "bottom")
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, "text-" + e.city.bonus), l(n, 3, 0, e.icons[e.city.bonus])
        }))
    }

    function rk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.icons.capital + " mr-1")
        }))
    }

    function ak(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 1, "i", [["placement", "bottom"], ["triggers", "mouseenter:mouseleave"]], [[8, "className", 0]], null, null, null, null)), gi(1, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            placement: [1, "placement"],
            triggers: [2, "triggers"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, "City is connected to capital" + (2 == e.dataService.cityConnectedToCapital(e.city) ? " by railroad" : ""), "bottom", "mouseenter:mouseleave")
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, e.icons.connected + " text-connected" + e.dataService.cityConnectedToCapital(e.city) + " mr-1")
        }))
    }

    function ok(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 8, "div", [["class", "bg-dark text-light mr-2"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, rk)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, ak)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(5, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(6, null, ["", ""])), (l()(), su(7, 0, null, null, 1, "button", [["class", "btn btn-dark btn-sm line-height-1 ml-2"], ["title", "Rename"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (i.edit = !0, t = !1 !== (i.newName = i.city.name) && t), t
        }), null, null)), (l()(), su(8, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.city.capital), l(n, 4, 0, e.dataService.cityConnectedToCapital(e.city))
        }), (function (l, n) {
            var e = n.component;
            l(n, 6, 0, e.city.name), l(n, 8, 0, e.icons.edit)
        }))
    }

    function ck(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 10, "div", [["class", "bg-dark text-light input-group  form-inline mr-2"], ["style", "width:200px"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 5, "input", [["class", "form-control form-control-sm"], ["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "input" === n && (t = !1 !== ei(l, 2)._handleInput(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 2).onTouched() && t), "compositionstart" === n && (t = !1 !== ei(l, 2)._compositionStart() && t), "compositionend" === n && (t = !1 !== ei(l, 2)._compositionEnd(e.target.value) && t), "ngModelChange" === n && (t = !1 !== (i.newName = e) && t), t
        }), null, null)), gi(2, 16384, null, 0, tf, [be, fe, [2, ef]], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [tf]), gi(4, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(6, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(7, 0, null, null, 1, "button", [["class", "btn btn-sm btn-secondary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = 0 != (l.component.edit = !1) && t), t
        }), null, null)), (l()(), su(8, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(9, 0, null, null, 1, "button", [["class", "btn btn-sm btn-primary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (i.city.name = i.newName, t = 0 != (i.edit = !1) && t), t
        }), null, null)), (l()(), su(10, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            l(n, 4, 0, n.component.newName)
        }), (function (l, n) {
            var e = n.component;
            l(n, 1, 0, ei(n, 6).ngClassUntouched, ei(n, 6).ngClassTouched, ei(n, 6).ngClassPristine, ei(n, 6).ngClassDirty, ei(n, 6).ngClassValid, ei(n, 6).ngClassInvalid, ei(n, 6).ngClassPending), l(n, 8, 0, e.icons.cancel), l(n, 10, 0, e.icons.ok)
        }))
    }

    function dk(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 4, "div", [["class", "text-prod mr-2"], ["placement", "bottom"]], null, null, null, null, null)), gi(1, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            placement: [1, "placement"]
        }, null), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(3, null, [" ", ""])), yu(4, 2), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 1, 0, ei(n.parent, 80), "bottom")
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.icons.prod);
            var t = et(n, 3, 0, l(n, 4, 0, ei(n.parent, 0), e.dataService.prodDiff(e.city), "+.1"));
            l(n, 3, 0, t)
        }))
    }

    function hk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.icons.exclamation)
        }))
    }

    function pk(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 4, "div", [["class", "text-culture mr-2"], ["placement", "bottom"]], null, null, null, null, null)), gi(1, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            placement: [1, "placement"]
        }, null), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(3, null, [" ", ""])), yu(4, 2), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 1, 0, ei(n.parent, 78), "bottom")
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.icons.culture);
            var t = et(n, 3, 0, l(n, 4, 0, ei(n.parent, 0), e.dataService.cultureDiff(e.city), "+.1"));
            l(n, 3, 0, t)
        }))
    }

    function fk(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 4, "div", [["class", "text-faith mr-2"], ["placement", "bottom"]], null, null, null, null, null)), gi(1, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            placement: [1, "placement"]
        }, null), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(3, null, [" ", ""])), yu(4, 2), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 1, 0, ei(n.parent, 79), "bottom")
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.icons.faith);
            var t = et(n, 3, 0, l(n, 4, 0, ei(n.parent, 0), e.dataService.faithDiff(e.city), "+.1"));
            l(n, 3, 0, t)
        }))
    }

    function gk(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 6, "div", [["class", "text-gold mr-2"], ["placement", "bottom"]], null, null, null, null, null)), gi(1, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            placement: [1, "placement"]
        }, null), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, ["/"])), (l()(), su(4, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(5, null, [" ", ""])), yu(6, 2), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 1, 0, ei(n.parent, 84), "bottom")
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.icons.gold), l(n, 4, 0, e.icons.troops);
            var t = et(n, 5, 0, l(n, 6, 0, ei(n.parent, 0), e.dataService.maintenanceUnitaryCost(e.city), ".1"));
            l(n, 5, 0, t)
        }))
    }

    function mk(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 4, "div", [["class", "text-light mr-2"], ["placement", "bottom"]], null, null, null, null, null)), gi(1, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            placement: [1, "placement"]
        }, null), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(3, null, [" ", ""])), yu(4, 1), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 1, 0, ei(n.parent, 83), "bottom")
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.icons.defense);
            var t = et(n, 3, 0, l(n, 4, 0, ei(n.parent, 1), e.dataService.defense(e.city)));
            l(n, 3, 0, t)
        }))
    }

    function yk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "button", [["class", "dropdown-item"], ["ngbDropdownItem", ""]], [[2, "disabled", null]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.useBonus(l.context.index) && t), t
        }), null, null)), gi(1, 16384, [[4, 4]], 0, ky, [fe], null, null), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(3, null, [" ", " "]))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, ei(n, 1).disabled), l(n, 2, 0, e.icons[n.context.$implicit.bonus]), l(n, 3, 0, n.context.$implicit.quantity)
        }))
    }

    function vk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 13, "div", [["class", "d-inline-block"], ["container", "body"], ["ngbDropdown", ""]], [[2, "show", null]], null, null, null, null)), gi(1, 1720320, null, 3, Ty, [Rn, wy, Ua, ys, fe, be, [2, xy]], {
            container: [0, "container"]
        }, null), cu(603979776, 1, {
            _menu: 0
        }), cu(603979776, 2, {
            _menuElement: 0
        }), cu(603979776, 3, {
            _anchor: 0
        }), (l()(), su(5, 0, null, null, 3, "button", [["aria-haspopup", "true"], ["class", "btn btn-warning btn-sm p-0 dropdown-toggle"], ["id", "bonusdd"], ["ngbDropdownToggle", ""]], [[1, "aria-expanded", 0]], [[null, "click"], [null, "keydown.ArrowUp"], [null, "keydown.ArrowDown"], [null, "keydown.Home"], [null, "keydown.End"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 6).dropdown.toggle() && t), "keydown.ArrowUp" === n && (t = !1 !== ei(l, 6).dropdown.onKeyDown(e) && t), "keydown.ArrowDown" === n && (t = !1 !== ei(l, 6).dropdown.onKeyDown(e) && t), "keydown.Home" === n && (t = !1 !== ei(l, 6).dropdown.onKeyDown(e) && t), "keydown.End" === n && (t = !1 !== ei(l, 6).dropdown.onKeyDown(e) && t), t
        }), null, null)), gi(6, 16384, null, 0, Iy, [Ty, fe], null, null), yi(2048, [[3, 4]], Cy, null, [Iy]), (l()(), _u(-1, null, ["Use a bonus"])), (l()(), su(9, 0, [[2, 0]], null, 4, "div", [["aria-labelledby", "bonusdd"], ["class", "bg-warning text-dark"], ["ngbDropdownMenu", ""]], [[2, "dropdown-menu", null], [2, "show", null], [1, "x-placement", 0]], [[null, "keydown.ArrowUp"], [null, "keydown.ArrowDown"], [null, "keydown.Home"], [null, "keydown.End"], [null, "keydown.Enter"], [null, "keydown.Space"]], (function (l, n, e) {
            var t = !0;
            return "keydown.ArrowUp" === n && (t = !1 !== ei(l, 10).dropdown.onKeyDown(e) && t), "keydown.ArrowDown" === n && (t = !1 !== ei(l, 10).dropdown.onKeyDown(e) && t), "keydown.Home" === n && (t = !1 !== ei(l, 10).dropdown.onKeyDown(e) && t), "keydown.End" === n && (t = !1 !== ei(l, 10).dropdown.onKeyDown(e) && t), "keydown.Enter" === n && (t = !1 !== ei(l, 10).dropdown.onKeyDown(e) && t), "keydown.Space" === n && (t = !1 !== ei(l, 10).dropdown.onKeyDown(e) && t), t
        }), null, null)), gi(10, 16384, [[1, 4]], 1, Sy, [Ty], null, null), cu(603979776, 4, {
            menuItems: 1
        }), (l()(), iu(16777216, null, null, 1, null, yk)), gi(13, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, "body"), l(n, 13, 0, e.data.dailys)
        }), (function (l, n) {
            l(n, 0, 0, ei(n, 1).isOpen()), l(n, 5, 0, ei(n, 6).dropdown.isOpen()), l(n, 9, 0, !0, ei(n, 10).dropdown.isOpen(), ei(n, 10).placement)
        }))
    }

    function bk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "span", [], null, null, null, null, null)), (l()(), _u(1, null, ["New citizen in ", ""])), yu(2, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 1, 0, l(n, 2, 0, ei(n.parent.parent, 2), e.dataService.citizenTime(e.city)));
            l(n, 1, 0, t)
        }))
    }

    function _k(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "span", [], null, null, null, null, null)), (l()(), _u(1, null, ["Loosing citizen in ", ""])), yu(2, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 1, 0, l(n, 2, 0, ei(n.parent.parent, 2), 0 - e.dataService.citizenTime(e.city)));
            l(n, 1, 0, t)
        }))
    }

    function wk(l) {
        return ku(0, [(l()(), iu(16777216, null, null, 1, null, bk)), gi(1, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, _k)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.dataService.foodDiff(e.city) >= 0), l(n, 3, 0, e.dataService.foodDiff(e.city) < 0)
        }), null)
    }

    function xk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "span", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "span", [["class", "text-food"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Food"])), (l()(), _u(-1, null, [" bonus: "])), (l()(), su(4, 0, null, null, 1, "span", [["class", "text-food"]], null, null, null, null, null)), (l()(), su(5, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" +20%"]))], null, (function (l, n) {
            l(n, 5, 0, n.component.icons.food)
        }))
    }

    function kk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "span", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "span", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Industry"])), (l()(), _u(-1, null, [" bonus: "])), (l()(), su(4, 0, null, null, 1, "span", [["class", "text-prod"]], null, null, null, null, null)), (l()(), su(5, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" +20%"]))], null, (function (l, n) {
            l(n, 5, 0, n.component.icons.prod)
        }))
    }

    function Sk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "span", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "span", [["class", "text-science"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Science"])), (l()(), _u(-1, null, [" bonus: "])), (l()(), su(4, 0, null, null, 1, "span", [["class", "text-science"]], null, null, null, null, null)), (l()(), su(5, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" +20%"]))], null, (function (l, n) {
            l(n, 5, 0, n.component.icons.science)
        }))
    }

    function Ck(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "span", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "span", [["class", "text-gold"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Gold"])), (l()(), _u(-1, null, [" bonus: "])), (l()(), su(4, 0, null, null, 1, "span", [["class", "text-gold"]], null, null, null, null, null)), (l()(), su(5, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" +20%"]))], null, (function (l, n) {
            l(n, 5, 0, n.component.icons.gold)
        }))
    }

    function Ik(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "span", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "span", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Culture"])), (l()(), _u(-1, null, [" bonus: "])), (l()(), su(4, 0, null, null, 1, "span", [["class", "text-culture"]], null, null, null, null, null)), (l()(), su(5, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" +20%"]))], null, (function (l, n) {
            l(n, 5, 0, n.component.icons.culture)
        }))
    }

    function Tk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "span", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "span", [["class", "text-faith"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Faith"])), (l()(), _u(-1, null, [" bonus: "])), (l()(), su(4, 0, null, null, 1, "span", [["class", "text-faith"]], null, null, null, null, null)), (l()(), su(5, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" +20%"]))], null, (function (l, n) {
            l(n, 5, 0, n.component.icons.faith)
        }))
    }

    function Ek(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "span", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "span", [["class", "text-dark"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Recruitment"])), (l()(), _u(-1, null, [" bonus: recruitment speed +25%"]))], null, null)
    }

    function Ak(l) {
        return ku(0, [(l()(), iu(16777216, null, null, 1, null, xk)), gi(1, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, kk)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Sk)), gi(5, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Ck)), gi(7, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Ik)), gi(9, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Tk)), gi(11, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Ek)), gi(13, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, "food" == e.city.bonus), l(n, 3, 0, "prod" == e.city.bonus), l(n, 5, 0, "science" == e.city.bonus), l(n, 7, 0, "gold" == e.city.bonus), l(n, 9, 0, "culture" == e.city.bonus), l(n, 11, 0, "faith" == e.city.bonus), l(n, 13, 0, "recruitment" == e.city.bonus)
        }), null)
    }

    function Pk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Palace: "])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 2"]))], null, null)
    }

    function Dk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(2, null, ["", ": "])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.conf.buildings.granary.label(e.dataService.player())), l(n, 4, 0, e.dataService.buildingBonus("granary", 0))
        }))
    }

    function Mk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Harbor: "])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5"]))], null, null)
    }

    function Ok(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Mill: "])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 10"]))], null, null)
    }

    function Nk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Hanging Gardens: "])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 10"]))], null, null)
    }

    function Rk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["City bonus"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 20 %"]))], null, null)
    }

    function Bk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Monopoly"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 10%"]))], null, null)
    }

    function zk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Feathered Serpent"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.serpentBonus(e.city)));
            l(n, 4, 0, t)
        }))
    }

    function $k(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Abundance"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.abundanceBonus()));
            l(n, 4, 0, t)
        }))
    }

    function Lk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Third Eye"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.thirdeyeBonus(e.city)));
            l(n, 4, 0, t)
        }))
    }

    function Fk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Prestige"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", " %"])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 0), 100 * e.dataService.prestigeBonus(0)));
            l(n, 4, 0, t)
        }))
    }

    function qk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "b", [["class", "text-center d-block border-bottom bg-dark text-light"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Food"])), (l()(), su(2, 0, null, null, 63, "table", [["class", "popover-table"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 62, "tbody", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Base"])), (l()(), su(7, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["1"])), (l()(), su(9, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(10, 0, null, null, 1, "td", [["class", "text-pop"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Idle"])), (l()(), su(12, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(13, 2), (l()(), su(14, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(15, 0, null, null, 1, "td", [["class", "text-pop"]], null, null, null, null, null)), (l()(), _u(16, null, ["", ": "])), (l()(), su(17, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(18, 2), (l()(), iu(16777216, null, null, 1, null, Pk)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Dk)), gi(22, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Mk)), gi(24, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Ok)), gi(26, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Nk)), gi(28, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(29, 0, null, null, 4, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(30, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total production: "])), (l()(), su(32, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(33, 2), (l()(), su(34, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(35, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Happiness"])), (l()(), su(37, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(38, 2), (l()(), iu(16777216, null, null, 1, null, Rk)), gi(40, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Bk)), gi(42, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, zk)), gi(44, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, $k)), gi(46, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Lk)), gi(48, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Fk)), gi(50, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(51, 0, null, null, 4, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(52, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total gains: "])), (l()(), su(54, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(55, 2), (l()(), su(56, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(57, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Citizens"])), (l()(), su(59, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(60, 2), (l()(), su(61, 0, null, null, 4, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(62, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total"])), (l()(), su(64, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(65, 2)], (function (l, n) {
            var e = n.component;
            l(n, 20, 0, e.dataService.hasBuilding(e.city, "palace")), l(n, 22, 0, e.dataService.hasBuilding(e.city, "granary")), l(n, 24, 0, e.dataService.hasBuilding(e.city, "port")), l(n, 26, 0, e.dataService.hasBuilding(e.city, "mill")), l(n, 28, 0, e.dataService.hasBuilding(e.city, "hanging_gardens")), l(n, 40, 0, "food" == e.city.bonus), l(n, 42, 0, e.dataService.hasPolicy("monopoly") && e.dataService.tradeRoutes(e.city).out.length), l(n, 44, 0, e.dataService.player().powers.serpent), l(n, 46, 0, e.data.spelltime.abundance), l(n, 48, 0, e.dataService.player().powers.thirdeye), l(n, 50, 0, e.data.prestige)
        }), (function (l, n) {
            var e = n.component,
                t = et(n, 12, 0, l(n, 13, 0, ei(n.parent, 0), e.city.citizens.idle * e.conf.citizens.idle.food(e.dataService, e.city), "+.1c"));
            l(n, 12, 0, t), l(n, 16, 0, e.conf.citizens.farmers.name(e.dataService));
            var i = et(n, 17, 0, l(n, 18, 0, ei(n.parent, 0), e.city.citizens.farmers * e.conf.citizens.farmers.food(e.dataService, e.city), "+.1c"));
            l(n, 17, 0, i);
            var s = et(n, 32, 0, l(n, 33, 0, ei(n.parent, 0), e.dataService.foodProduction(e.city), "+.1c"));
            l(n, 32, 0, s);
            var u = et(n, 37, 0, l(n, 38, 0, ei(n.parent, 0), e.dataService.happinessEffect(e.city), "+.0%c"));
            l(n, 37, 0, u);
            var r = et(n, 54, 0, l(n, 55, 0, ei(n.parent, 0), e.dataService.foodDiff(e.city) + e.dataService.pop(e.city), "+.1c"));
            l(n, 54, 0, r);
            var a = et(n, 59, 0, l(n, 60, 0, ei(n.parent, 0), 0 - e.dataService.pop(e.city), "+.1c"));
            l(n, 59, 0, a);
            var o = et(n, 64, 0, l(n, 65, 0, ei(n.parent, 0), e.dataService.foodDiff(e.city), "+.1c"));
            l(n, 64, 0, o)
        }))
    }

    function Uk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Palace"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 2"]))], null, null)
    }

    function Hk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Copper mine"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5"]))], null, null)
    }

    function Vk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Gold mine"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 15"]))], null, null)
    }

    function jk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Coal mine"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 25"]))], null, null)
    }

    function Gk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(2, null, ["", ""])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 10"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.conf.buildings.castle.label(e.dataService.player()))
        }))
    }

    function Wk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-special"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Colossus"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 10"]))], null, null)
    }

    function Kk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Aristocracy"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 25 %"]))], null, null)
    }

    function Zk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Meritocracy"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5 %"]))], null, null)
    }

    function Qk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-special"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Connected to capital"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 25 %"]))], null, null)
    }

    function Yk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-colony"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Colonies"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.colonyTotalGoldBonus()));
            l(n, 4, 0, t)
        }))
    }

    function Xk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["City bonus"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 20 %"]))], null, null)
    }

    function Jk(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Upgrades"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.upgradeGoldMult(0) - 1));
            l(n, 4, 0, t)
        }))
    }

    function lS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Trade"])), (l()(), su(3, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(4, 2)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 3, 0, l(n, 4, 0, ei(n.parent.parent, 0), e.dataService.tradeRouteGains(e.city).gold, "+.1c"));
            l(n, 3, 0, t)
        }))
    }

    function nS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Troop maintenance"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(4, null, ["- ", " "])), yu(5, 2)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 0), e.dataService.maintenanceCost(e.city), ".1"));
            l(n, 4, 0, t)
        }))
    }

    function eS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "b", [["class", "text-center d-block border-bottom bg-dark text-light"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Gold"])), (l()(), su(2, 0, null, null, 54, "table", [["class", "popover-table"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 53, "tbody", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "td", [["class", "text-pop"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Merchants"])), (l()(), su(7, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(8, 2), (l()(), iu(16777216, null, null, 1, null, Uk)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Hk)), gi(12, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Vk)), gi(14, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, jk)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Gk)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Wk)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(21, 0, null, null, 4, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(22, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total production: "])), (l()(), su(24, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(25, 2), (l()(), iu(16777216, null, null, 1, null, Kk)), gi(27, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Zk)), gi(29, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Qk)), gi(31, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(32, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(33, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Happiness"])), (l()(), su(35, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(36, 2), (l()(), iu(16777216, null, null, 1, null, Yk)), gi(38, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Xk)), gi(40, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, Jk)), gi(42, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, lS)), gi(44, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(45, 0, null, null, 4, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(46, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total gains: "])), (l()(), su(48, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(49, 2), (l()(), iu(16777216, null, null, 1, null, nS)), gi(51, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(52, 0, null, null, 4, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(53, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total"])), (l()(), su(55, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(56, 2)], (function (l, n) {
            var e = n.component;
            l(n, 10, 0, e.dataService.hasBuilding(e.city, "palace")), l(n, 12, 0, e.dataService.hasBuilding(e.city, "cop")), l(n, 14, 0, e.dataService.hasBuilding(e.city, "go")), l(n, 16, 0, e.dataService.hasBuilding(e.city, "coa")), l(n, 18, 0, e.dataService.hasBuilding(e.city, "castle") && "french" == e.dataService.player().civ_id), l(n, 20, 0, e.dataService.hasBuilding(e.city, "colossus")), l(n, 27, 0, e.city.capital && e.dataService.hasPolicy("aristocracy")), l(n, 29, 0, e.dataService.hasPolicy("meritocracy")), l(n, 31, 0, e.dataService.cityConnectedToCapital(e.city)), l(n, 38, 0, e.dataService.colonyNb()), l(n, 40, 0, "gold" == e.city.bonus), l(n, 42, 0, e.dataService.upgradeGoldMult(0)), l(n, 44, 0, e.dataService.isUnlocked("trade")), l(n, 51, 0, e.dataService.isUnlocked("troops"))
        }), (function (l, n) {
            var e = n.component,
                t = et(n, 7, 0, l(n, 8, 0, ei(n.parent, 0), e.city.citizens.merchants * e.conf.citizens.merchants.gold(e.dataService, e.city), "+.1c"));
            l(n, 7, 0, t);
            var i = et(n, 24, 0, l(n, 25, 0, ei(n.parent, 0), e.dataService.goldProduction(e.city), "+.1c"));
            l(n, 24, 0, i);
            var s = et(n, 35, 0, l(n, 36, 0, ei(n.parent, 0), e.dataService.happinessEffect(e.city), "+.0%c"));
            l(n, 35, 0, s);
            var u = et(n, 48, 0, l(n, 49, 0, ei(n.parent, 0), e.dataService.goldDiff(e.city) + e.dataService.maintenanceCost(e.city), "+.1c"));
            l(n, 48, 0, u);
            var r = et(n, 55, 0, l(n, 56, 0, ei(n.parent, 0), e.dataService.goldDiff(e.city), "+.1c"));
            l(n, 55, 0, r)
        }))
    }

    function tS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-pop"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Scientists"])), (l()(), su(3, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(4, 2)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 3, 0, l(n, 4, 0, ei(n.parent.parent, 0), e.city.citizens.scientists * e.conf.citizens.scientists.science(e.dataService, e.city), "+.1c"));
            l(n, 3, 0, t)
        }))
    }

    function iS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Palace"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 2"]))], null, null)
    }

    function sS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(2, null, ["", ""])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.conf.buildings.library.label(e.dataService.player())), l(n, 4, 0, e.dataService.buildingBonus("library", 0))
        }))
    }

    function uS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["University"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 15"]))], null, null)
    }

    function rS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Public School"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 25"]))], null, null)
    }

    function aS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Monastery (Reformation)"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 10 %"]))], null, null)
    }

    function oS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["University (Scientific State)"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 10 %"]))], null, null)
    }

    function cS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Wisdom of the Ancients"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 25 %"]))], null, null)
    }

    function dS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-special"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Oxford University"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 50 %"]))], null, null)
    }

    function hS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-colony"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Colonies"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.colonyTotalScienceBonus()));
            l(n, 4, 0, t)
        }))
    }

    function pS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["City bonus"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 20 %"]))], null, null)
    }

    function fS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Trade"])), (l()(), su(3, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(4, 2)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 3, 0, l(n, 4, 0, ei(n.parent.parent, 0), e.dataService.tradeRouteGains(e.city).science, "+.1c"));
            l(n, 3, 0, t)
        }))
    }

    function gS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Clairvoyance"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.clairvoyanceBonus(e.city.ownerid)));
            l(n, 4, 0, t)
        }))
    }

    function mS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Enlightment"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.enlightmentBonus()));
            l(n, 4, 0, t)
        }))
    }

    function yS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Bacchanalia"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.bacchanaliaBonus(e.city.ownerid)));
            l(n, 4, 0, t)
        }))
    }

    function vS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["The Punisher"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.punisherBonus() * e.dataService.plagueNb()));
            l(n, 4, 0, t)
        }))
    }

    function bS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Upgrades"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.upgradeScienceMult(0) - 1));
            l(n, 4, 0, t)
        }))
    }

    function _S(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "b", [["class", "text-center d-block border-bottom bg-dark text-light"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Science"])), (l()(), su(2, 0, null, null, 55, "table", [["class", "popover-table"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 54, "tbody", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "td", [["class", "text-pop"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Population"])), (l()(), su(7, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(8, 2), (l()(), iu(16777216, null, null, 1, null, tS)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, iS)), gi(12, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, sS)), gi(14, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, uS)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, rS)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(19, 0, null, null, 4, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(20, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total production: "])), (l()(), su(22, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(23, 2), (l()(), iu(16777216, null, null, 1, null, aS)), gi(25, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, oS)), gi(27, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, cS)), gi(29, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, dS)), gi(31, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(32, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(33, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Happiness"])), (l()(), su(35, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(36, 2), (l()(), iu(16777216, null, null, 1, null, hS)), gi(38, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, pS)), gi(40, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, fS)), gi(42, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, gS)), gi(44, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, mS)), gi(46, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, yS)), gi(48, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, vS)), gi(50, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, bS)), gi(52, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(53, 0, null, null, 4, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(54, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total"])), (l()(), su(56, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(57, 2)], (function (l, n) {
            var e = n.component;
            l(n, 10, 0, e.dataService.isUnlocked("citizen_scientists")), l(n, 12, 0, e.dataService.hasBuilding(e.city, "palace")), l(n, 14, 0, e.dataService.hasBuilding(e.city, "library")), l(n, 16, 0, e.dataService.hasBuilding(e.city, "uni")), l(n, 18, 0, e.dataService.hasBuilding(e.city, "school")), l(n, 25, 0, e.dataService.hasBuilding(e.city, "monastery") && e.dataService.hasPolicy("reformation")), l(n, 27, 0, e.dataService.hasBuilding(e.city, "uni") && e.dataService.hasPolicy("scientific_state")), l(n, 29, 0, e.city.capital && e.dataService.hasPolicy("wisdom_ancients")), l(n, 31, 0, e.dataService.hasBuilding(e.city, "oxford")), l(n, 38, 0, e.dataService.colonyNb() && e.dataService.hasPolicy("geographical")), l(n, 40, 0, "science" == e.city.bonus), l(n, 42, 0, e.dataService.isUnlocked("trade") && e.dataService.tradeRouteGains(e.city).science), l(n, 44, 0, e.dataService.player().powers.clairvoyance), l(n, 46, 0, e.data.charging.enlightment), l(n, 48, 0, e.data.spelltime.bacchanalia), l(n, 50, 0, e.data.charging.punisher), l(n, 52, 0, e.dataService.upgradeScienceMult(0))
        }), (function (l, n) {
            var e = n.component,
                t = et(n, 7, 0, l(n, 8, 0, ei(n.parent, 0), e.dataService.pop(e.city) * e.dataService.sciencePerPop(), "+.1c"));
            l(n, 7, 0, t);
            var i = et(n, 22, 0, l(n, 23, 0, ei(n.parent, 0), e.dataService.scienceProduction(e.city), "+.1c"));
            l(n, 22, 0, i);
            var s = et(n, 35, 0, l(n, 36, 0, ei(n.parent, 0), e.dataService.happinessEffect(e.city), "+.0%c"));
            l(n, 35, 0, s);
            var u = et(n, 56, 0, l(n, 57, 0, ei(n.parent, 0), e.dataService.scienceDiff(e.city), "+.1c"));
            l(n, 56, 0, u)
        }))
    }

    function wS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-pop"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Idle"])), (l()(), su(3, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(4, 2)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 3, 0, l(n, 4, 0, ei(n.parent.parent, 0), e.city.citizens.idle * e.conf.citizens.idle.culture(e.dataService), "+.1c"));
            l(n, 3, 0, t)
        }))
    }

    function xS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Palace"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 2"]))], null, null)
    }

    function kS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Monument"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 1"]))], null, null)
    }

    function SS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Amphitheatre"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 2"]))], null, null)
    }

    function CS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Opera"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5"]))], null, null)
    }

    function IS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Museum"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 10"]))], null, null)
    }

    function TS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(2, null, ["", ""])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 10"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.conf.buildings.castle.label(e.dataService.player()))
        }))
    }

    function ES(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(2, null, ["", ""])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 10"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.conf.buildings.zoo.label(e.dataService.player()))
        }))
    }

    function AS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-special"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Pyramids"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5"]))], null, null)
    }

    function PS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-special"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Mausoleum"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5"]))], null, null)
    }

    function DS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-special"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Forbidden City"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5"]))], null, null)
    }

    function MS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-special"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Sistine Chapel"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 15"]))], null, null)
    }

    function OS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-special"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Versailles"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 15"]))], null, null)
    }

    function NS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-special"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Hermitage"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""]))], null, (function (l, n) {
            l(n, 4, 0, 5 * n.component.city.relics)
        }))
    }

    function RS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Library (Philosophy)"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5 %"]))], null, null)
    }

    function BS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Traditionalism"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 15 %"]))], null, null)
    }

    function zS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Imperialism"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5 %"]))], null, null)
    }

    function $S(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["City bonus"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 20 %"]))], null, null)
    }

    function LS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Ouroboros"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.ouroborosBonus(e.city.ownerid)));
            l(n, 4, 0, t)
        }))
    }

    function FS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Trade routes"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", " "])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 0), e.dataService.tradeRouteGains(e.city).culture));
            l(n, 4, 0, t)
        }))
    }

    function qS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Dionysia"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.dionysiaBonus(e.city.ownerid)));
            l(n, 4, 0, t)
        }))
    }

    function US(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "b", [["class", "text-center d-block border-bottom bg-dark text-light"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Culture"])), (l()(), su(2, 0, null, null, 63, "table", [["class", "popover-table"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 62, "tbody", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "td", [["class", "text-pop"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Artists"])), (l()(), su(7, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(8, 2), (l()(), iu(16777216, null, null, 1, null, wS)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, xS)), gi(12, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, kS)), gi(14, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, SS)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, CS)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, IS)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, TS)), gi(22, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, ES)), gi(24, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, AS)), gi(26, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, PS)), gi(28, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, DS)), gi(30, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, MS)), gi(32, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, OS)), gi(34, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, NS)), gi(36, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(37, 0, null, null, 4, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(38, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total production: "])), (l()(), su(40, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(41, 2), (l()(), iu(16777216, null, null, 1, null, RS)), gi(43, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, BS)), gi(45, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, zS)), gi(47, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(48, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(49, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Happiness"])), (l()(), su(51, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(52, 2), (l()(), iu(16777216, null, null, 1, null, $S)), gi(54, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, LS)), gi(56, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, FS)), gi(58, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, qS)), gi(60, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(61, 0, null, null, 4, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(62, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total"])), (l()(), su(64, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(65, 2)], (function (l, n) {
            var e = n.component;
            l(n, 10, 0, e.conf.citizens.idle.culture(e.dataService)), l(n, 12, 0, e.dataService.hasBuilding(e.city, "palace")), l(n, 14, 0, e.dataService.hasBuilding(e.city, "monument")), l(n, 16, 0, e.dataService.hasBuilding(e.city, "amphitheatre")), l(n, 18, 0, e.dataService.hasBuilding(e.city, "opera")), l(n, 20, 0, e.dataService.hasBuilding(e.city, "museum")), l(n, 22, 0, e.dataService.hasBuilding(e.city, "castle") && "french" == e.dataService.player().civ_id), l(n, 24, 0, e.dataService.hasBuilding(e.city, "zoo") && "brazilians" == e.dataService.player().civ_id), l(n, 26, 0, e.dataService.hasBuilding(e.city, "pyramid")), l(n, 28, 0, e.dataService.hasBuilding(e.city, "mausoleum")), l(n, 30, 0, e.dataService.hasBuilding(e.city, "forbidden")), l(n, 32, 0, e.dataService.hasBuilding(e.city, "sistine")), l(n, 34, 0, e.dataService.hasBuilding(e.city, "versailles")), l(n, 36, 0, e.dataService.hasWonder(e.city.ownerid, "hermitage") && e.city.relics), l(n, 43, 0, e.dataService.hasBuilding(e.city, "library") && e.dataService.hasPolicy("philosophy")), l(n, 45, 0, e.city.capital && e.dataService.hasPolicyGroup("traditionalism")), l(n, 47, 0, e.dataService.hasPolicyGroup("imperialism")), l(n, 54, 0, "culture" == e.city.bonus), l(n, 56, 0, e.dataService.player().powers.ouroboros), l(n, 58, 0, e.dataService.isUnlocked("trade")), l(n, 60, 0, e.data.spelltime.dionysia)
        }), (function (l, n) {
            var e = n.component,
                t = et(n, 7, 0, l(n, 8, 0, ei(n.parent, 0), e.city.citizens.artists * e.conf.citizens.artists.culture(e.dataService), "+.1c"));
            l(n, 7, 0, t);
            var i = et(n, 40, 0, l(n, 41, 0, ei(n.parent, 0), e.dataService.cultureProduction(e.city), "+.1c"));
            l(n, 40, 0, i);
            var s = et(n, 51, 0, l(n, 52, 0, ei(n.parent, 0), e.dataService.happinessEffect(e.city), "+.0%c"));
            l(n, 51, 0, s);
            var u = et(n, 64, 0, l(n, 65, 0, ei(n.parent, 0), e.dataService.cultureDiff(e.city), "+.1c"));
            l(n, 64, 0, u)
        }))
    }

    function HS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-pop"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Population (Orphic Mysteries)"])), (l()(), su(3, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(4, 2)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 3, 0, l(n, 4, 0, ei(n.parent.parent, 0), e.dataService.pop(e.city) * e.dataService.orphicBonus(0), "+.1c"));
            l(n, 3, 0, t)
        }))
    }

    function VS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Shrine"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""]))], null, (function (l, n) {
            l(n, 4, 0, n.component.dataService.hasPolicyGroup("piety") ? 3 : 1)
        }))
    }

    function jS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Temple"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5"]))], null, null)
    }

    function GS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Monastery"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 15"]))], null, null)
    }

    function WS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Pyramids"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 4, 0, 2 * e.dataService.wondersNbInCity(e.city))
        }))
    }

    function KS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Monastery (Reformation)"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 10 %"]))], null, null)
    }

    function ZS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["University (Scientific State)"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 10 %"]))], null, null)
    }

    function QS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Landed Elite"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 50 %"]))], null, null)
    }

    function YS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["State Religion"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 15 %"]))], null, null)
    }

    function XS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Proselytism"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", " %"]))], null, (function (l, n) {
            l(n, 4, 0, n.component.dataService.player().cities.length)
        }))
    }

    function JS(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Bacchanalia"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.bacchanaliaBonus(e.city.ownerid)));
            l(n, 4, 0, t)
        }))
    }

    function lC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["The Punisher"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.punisherBonus() * e.dataService.plagueNb()));
            l(n, 4, 0, t)
        }))
    }

    function nC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["City bonus"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 20 %"]))], null, null)
    }

    function eC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Trade"])), (l()(), su(3, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(4, 2)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 3, 0, l(n, 4, 0, ei(n.parent.parent, 0), e.dataService.tradeRouteGains(e.city).faith, "+.1c"));
            l(n, 3, 0, t)
        }))
    }

    function tC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-special"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Difficulty"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.difficulty().faith_mult - 1));
            l(n, 4, 0, t)
        }))
    }

    function iC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "b", [["class", "text-center d-block border-bottom bg-dark text-light"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Faith"])), (l()(), su(2, 0, null, null, 51, "table", [["class", "popover-table"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 50, "tbody", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "td", [["class", "text-pop"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Priests"])), (l()(), su(7, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(8, 2), (l()(), iu(16777216, null, null, 1, null, HS)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, VS)), gi(12, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, jS)), gi(14, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, GS)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, WS)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(19, 0, null, null, 4, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(20, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total production: "])), (l()(), su(22, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(23, 2), (l()(), iu(16777216, null, null, 1, null, KS)), gi(25, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, ZS)), gi(27, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, QS)), gi(29, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, YS)), gi(31, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, XS)), gi(33, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, JS)), gi(35, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, lC)), gi(37, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(38, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(39, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Happiness"])), (l()(), su(41, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(42, 2), (l()(), iu(16777216, null, null, 1, null, nC)), gi(44, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, eC)), gi(46, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, tC)), gi(48, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(49, 0, null, null, 4, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(50, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total"])), (l()(), su(52, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(53, 2)], (function (l, n) {
            var e = n.component;
            l(n, 10, 0, e.dataService.player().powers.orphic), l(n, 12, 0, e.dataService.hasBuilding(e.city, "shrine")), l(n, 14, 0, e.dataService.hasBuilding(e.city, "temple")), l(n, 16, 0, e.dataService.hasBuilding(e.city, "monastery")), l(n, 18, 0, e.dataService.hasBuilding(e.city, "pyramid")), l(n, 25, 0, e.dataService.hasBuilding(e.city, "monastery") && e.dataService.hasPolicy("reformation")), l(n, 27, 0, e.dataService.hasBuilding(e.city, "uni") && e.dataService.hasPolicy("scientific_state")), l(n, 29, 0, e.city.capital && e.dataService.hasPolicy("landed_elite")), l(n, 31, 0, e.dataService.hasPolicy("colonialism")), l(n, 33, 0, e.dataService.hasPolicy("proselytism")), l(n, 35, 0, e.data.spelltime.bacchanalia), l(n, 37, 0, e.data.charging.punisher), l(n, 44, 0, "faith" == e.city.bonus), l(n, 46, 0, e.dataService.isUnlocked("trade") && e.dataService.tradeRouteGains(e.city).faith), l(n, 48, 0, e.data.difficulty)
        }), (function (l, n) {
            var e = n.component,
                t = et(n, 7, 0, l(n, 8, 0, ei(n.parent, 0), e.city.citizens.priests * e.conf.citizens.priests.faith(e.dataService), "+.1c"));
            l(n, 7, 0, t);
            var i = et(n, 22, 0, l(n, 23, 0, ei(n.parent, 0), e.dataService.faithProduction(e.city), "+.1c"));
            l(n, 22, 0, i);
            var s = et(n, 41, 0, l(n, 42, 0, ei(n.parent, 0), e.dataService.happinessEffect(e.city), "+.0%c"));
            l(n, 41, 0, s);
            var u = et(n, 52, 0, l(n, 53, 0, ei(n.parent, 0), e.dataService.faithDiff(e.city), "+.1c"));
            l(n, 52, 0, u)
        }))
    }

    function sC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Palace"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 2"]))], null, null)
    }

    function uC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(2, null, ["", ""])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.conf.buildings.workshop.label(e.dataService.player())), l(n, 4, 0, e.dataService.buildingBonus("workshop", 0))
        }))
    }

    function rC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Furnace"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 15"]))], null, null)
    }

    function aC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(2, null, ["", ""])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.conf.buildings.ironworks.label(e.dataService.player())), l(n, 4, 0, e.dataService.buildingBonus("ironworks", 0))
        }))
    }

    function oC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Factory"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 50"]))], null, null)
    }

    function cC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Hydro Plant"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 50"]))], null, null)
    }

    function dC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Administration"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5 %"]))], null, null)
    }

    function hC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Liberalism"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 25 %"]))], null, null)
    }

    function pC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Ruhr Valley"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 25 %"]))], null, null)
    }

    function fC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-special"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Connected to capital"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 25 %"]))], null, null)
    }

    function gC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["City bonus"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 20 %"]))], null, null)
    }

    function mC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Gateway to Eternity"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.eternityBonus(e.city.ownerid)));
            l(n, 4, 0, t)
        }))
    }

    function yC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Third Eye"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.thirdeyeBonus(e.city)));
            l(n, 4, 0, t)
        }))
    }

    function vC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Prestige"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", " %"])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 0), 100 * e.dataService.prestigeBonus(0)));
            l(n, 4, 0, t)
        }))
    }

    function bC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "b", [["class", "text-center d-block border-bottom bg-dark text-light"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Production"])), (l()(), su(2, 0, null, null, 49, "table", [["class", "popover-table"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 48, "tbody", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "td", [["class", "text-pop"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Builders: "])), (l()(), su(7, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(8, 2), (l()(), iu(16777216, null, null, 1, null, sC)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, uC)), gi(12, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, rC)), gi(14, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, aC)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, oC)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, cC)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(21, 0, null, null, 4, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(22, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total production: "])), (l()(), su(24, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(25, 2), (l()(), iu(16777216, null, null, 1, null, dC)), gi(27, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, hC)), gi(29, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, pC)), gi(31, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, fC)), gi(33, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(34, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(35, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Happiness: "])), (l()(), su(37, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(38, 2), (l()(), iu(16777216, null, null, 1, null, gC)), gi(40, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, mC)), gi(42, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, yC)), gi(44, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, vC)), gi(46, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(47, 0, null, null, 4, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(48, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total"])), (l()(), su(50, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(51, 2)], (function (l, n) {
            var e = n.component;
            l(n, 10, 0, e.dataService.hasBuilding(e.city, "palace")), l(n, 12, 0, e.dataService.hasBuilding(e.city, "workshop")), l(n, 14, 0, e.dataService.hasBuilding(e.city, "furnace")), l(n, 16, 0, e.dataService.hasBuilding(e.city, "ironworks")), l(n, 18, 0, e.dataService.hasBuilding(e.city, "factory")), l(n, 20, 0, e.dataService.hasBuilding(e.city, "hydro")), l(n, 27, 0, e.dataService.hasPolicy("administration")), l(n, 29, 0, e.dataService.hasPolicy("liberalism") && e.city.building_queue.length && "progress" == e.city.building_queue[0]), l(n, 31, 0, e.dataService.hasWonder(0, "ruhr") && e.city.building_queue.length && "progress" == e.city.building_queue[0]), l(n, 33, 0, 2 == e.dataService.cityConnectedToCapital(e.city)), l(n, 40, 0, "prod" == e.city.bonus), l(n, 42, 0, e.dataService.player().powers.eternity), l(n, 44, 0, e.dataService.player().powers.thirdeye), l(n, 46, 0, e.data.prestige)
        }), (function (l, n) {
            var e = n.component,
                t = et(n, 7, 0, l(n, 8, 0, ei(n.parent, 0), e.city.citizens.builders * e.conf.citizens.builders.prod(e.dataService, e.city), "+.1c"));
            l(n, 7, 0, t);
            var i = et(n, 24, 0, l(n, 25, 0, ei(n.parent, 0), e.dataService.prodProduction(e.city), "+.1c"));
            l(n, 24, 0, i);
            var s = et(n, 37, 0, l(n, 38, 0, ei(n.parent, 0), e.dataService.happinessEffect(e.city), "+.0%c"));
            l(n, 37, 0, s);
            var u = et(n, 50, 0, l(n, 51, 0, ei(n.parent, 0), e.dataService.prodDiff(e.city), "+.1c"));
            l(n, 50, 0, u)
        }))
    }

    function _C(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-pop"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Scientists"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, [" +", " "])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.city.citizens.scientists * e.conf.citizens.scientists.health(e.dataService)));
            l(n, 4, 0, t)
        }))
    }

    function wC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Plague !"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(-1, null, ["- 30%"]))], null, null)
    }

    function xC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-science"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Pottery"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5 %"]))], null, null)
    }

    function kC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Well"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5 %"]))], null, null)
    }

    function SC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Aqueduct"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 10 %"]))], null, null)
    }

    function CC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Hospital"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", " %"]))], null, (function (l, n) {
            l(n, 4, 0, n.component.dataService.hasPolicy("procedures") ? "20" : "15")
        }))
    }

    function IC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Dispensary"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 20 %"]))], null, null)
    }

    function TC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Quarantine Station"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 10 %"]))], null, null)
    }

    function EC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Temple (Organized Religion)"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5 %"]))], null, null)
    }

    function AC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Isolationism"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 15 %"]))], null, null)
    }

    function PC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["National Institute of Health"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5 %"]))], null, null)
    }

    function DC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Upgrades"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.upgradeHealth(0)));
            l(n, 4, 0, t)
        }))
    }

    function MC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "b", [["class", "text-center d-block border-bottom bg-dark text-light"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Health"])), (l()(), su(2, 0, null, null, 42, "table", [["class", "popover-table"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 41, "tbody", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Base"])), (l()(), su(7, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["100 %"])), (l()(), su(9, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(10, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Population"])), (l()(), su(12, 0, null, null, 2, "td", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(13, null, ["- ", ""])), yu(14, 1), (l()(), iu(16777216, null, null, 1, null, _C)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, wC)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, xC)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, kC)), gi(22, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, SC)), gi(24, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, CC)), gi(26, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, IC)), gi(28, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, TC)), gi(30, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, EC)), gi(32, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, AC)), gi(34, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, PC)), gi(36, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, DC)), gi(38, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(39, 0, null, null, 5, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(40, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total"])), (l()(), su(42, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(43, null, ["", ""])), yu(44, 1)], (function (l, n) {
            var e = n.component;
            l(n, 16, 0, e.conf.citizens.scientists.health(e.dataService)), l(n, 18, 0, e.city.plague && e.city.plague > 0), l(n, 20, 0, e.dataService.hasScience("pottery")), l(n, 22, 0, e.dataService.hasBuilding(e.city, "well")), l(n, 24, 0, e.dataService.hasBuilding(e.city, "aqueduct")), l(n, 26, 0, e.dataService.hasBuilding(e.city, "hospital")), l(n, 28, 0, e.dataService.hasBuilding(e.city, "dispensary")), l(n, 30, 0, e.dataService.hasBuilding(e.city, "quarantine")), l(n, 32, 0, e.dataService.hasPolicy("organized_religion") && e.dataService.hasBuilding(e.city, "temple")), l(n, 34, 0, e.dataService.hasPolicy("isolationism") && e.city.capital), l(n, 36, 0, e.dataService.hasPolicy("nih")), l(n, 38, 0, e.dataService.upgradeHealth(0))
        }), (function (l, n) {
            var e = n.component,
                t = et(n, 13, 0, l(n, 14, 0, ei(n.parent, 1), .05 * e.dataService.pop(e.city)));
            l(n, 13, 0, t);
            var i = et(n, 43, 0, l(n, 44, 0, ei(n.parent, 1), e.dataService.health(e.city)));
            l(n, 43, 0, i)
        }))
    }

    function OC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-pop"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Idle"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.city.citizens.idle * e.conf.citizens.idle.happiness(e.dataService)));
            l(n, 4, 0, t)
        }))
    }

    function NC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Distance from capital"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(4, null, ["- ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.happinessDistance(e.city)));
            l(n, 4, 0, t)
        }))
    }

    function RC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-colony"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Colonies"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.colonyTotalHappinessBonus()));
            l(n, 4, 0, t)
        }))
    }

    function BC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(-1, null, ["(Rightful)"]))], null, null)
    }

    function zC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 7, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 3, "td", [], null, null, null, null, null)), (l()(), _u(2, null, ["Infl. from ", " "])), (l()(), iu(16777216, null, null, 1, null, BC)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(5, 0, null, null, 2, "td", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(6, null, ["- ", ""])), yu(7, 1)], (function (l, n) {
            l(n, 4, 0, n.component.city.rightful_ownerid == n.parent.context.$implicit.id)
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, n.parent.context.$implicit.name);
            var t = et(n, 6, 0, l(n, 7, 0, ei(n.parent.parent.parent, 1), e.dataService.influenceEffectFromPlayer(e.city, n.parent.context.$implicit)));
            l(n, 6, 0, t)
        }))
    }

    function $C(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, zC)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, n.context.$implicit.id > 1 && e.dataService.haveRelation(0, n.context.$implicit.id) && e.dataService.influenceEffectFromPlayer(e.city, n.context.$implicit))
        }), null)
    }

    function LC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Patriotism"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5 %"]))], null, null)
    }

    function FC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(2, null, ["", ""])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", " %"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.conf.buildings.gardens.label(e.dataService.player())), l(n, 4, 0, 100 * e.dataService.buildingBonus("gardens", 0))
        }))
    }

    function qC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Theatre"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 10 %"]))], null, null)
    }

    function UC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Hanging Gardens"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 10 %"]))], null, null)
    }

    function HC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Circus"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 15 %"]))], null, null)
    }

    function VC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(2, null, ["", ""])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 15 %"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.conf.buildings.zoo.label(e.dataService.player()))
        }))
    }

    function jC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Monopoly"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5%"]))], null, null)
    }

    function GC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Monastery (Theocracy)"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5 %"]))], null, null)
    }

    function WC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Shrine (Secularism)"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5 %"]))], null, null)
    }

    function KC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Barracks (Despotism)"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 5 %"]))], null, null)
    }

    function ZC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Bliss"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.blissBonus(e.city.ownerid)));
            l(n, 4, 0, t)
        }))
    }

    function QC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Eye of Horus"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.eyeBonus()));
            l(n, 4, 0, t)
        }))
    }

    function YC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Valhalla"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.valhallaBonus(e.city)));
            l(n, 4, 0, t)
        }))
    }

    function XC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["New Fire"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.newfireBonus()));
            l(n, 4, 0, t)
        }))
    }

    function JC(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Upgrades"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.upgradeHappiness(0)));
            l(n, 4, 0, t)
        }))
    }

    function lI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "b", [["class", "text-center d-block border-bottom bg-dark text-light"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Happiness"])), (l()(), su(2, 0, null, null, 68, "table", [["class", "popover-table"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 67, "tbody", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Base"])), (l()(), su(7, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["100 %"])), (l()(), su(9, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(10, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Population"])), (l()(), su(12, 0, null, null, 2, "td", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(13, null, ["- ", ""])), yu(14, 1), (l()(), su(15, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(16, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Artists"])), (l()(), su(18, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(19, null, ["+ ", ""])), yu(20, 1), (l()(), iu(16777216, null, null, 1, null, OC)), gi(22, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(23, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(24, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Number of Cities"])), (l()(), su(26, 0, null, null, 2, "td", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(27, null, ["- ", ""])), yu(28, 1), (l()(), iu(16777216, null, null, 1, null, NC)), gi(30, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, RC)), gi(32, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, $C)), gi(34, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, LC)), gi(36, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, FC)), gi(38, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, qC)), gi(40, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, UC)), gi(42, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, HC)), gi(44, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, VC)), gi(46, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, jC)), gi(48, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, GC)), gi(50, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, WC)), gi(52, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, KC)), gi(54, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, ZC)), gi(56, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, QC)), gi(58, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, YC)), gi(60, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, XC)), gi(62, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, JC)), gi(64, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(65, 0, null, null, 5, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(66, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total"])), (l()(), su(68, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(69, null, ["", ""])), yu(70, 1)], (function (l, n) {
            var e = n.component;
            l(n, 22, 0, e.conf.citizens.idle.happiness(e.dataService)), l(n, 30, 0, !e.city.capital), l(n, 32, 0, e.dataService.colonyNb()), l(n, 34, 0, e.data.players), l(n, 36, 0, e.dataService.hasPolicy("patriotism")), l(n, 38, 0, e.dataService.hasBuilding(e.city, "gardens")), l(n, 40, 0, e.dataService.hasBuilding(e.city, "theatre")), l(n, 42, 0, e.dataService.hasBuilding(e.city, "hanging_gardens")), l(n, 44, 0, e.dataService.hasBuilding(e.city, "circus")), l(n, 46, 0, e.dataService.hasBuilding(e.city, "zoo")), l(n, 48, 0, e.dataService.hasPolicy("monopoly") && e.dataService.tradeRoutes(e.city).out.length), l(n, 50, 0, e.dataService.hasPolicy("theocracy", e.city.ownerid) && e.dataService.hasBuilding(e.city, "monastery")), l(n, 52, 0, e.dataService.hasPolicy("secularism", e.city.ownerid) && e.dataService.hasBuilding(e.city, "shrine")), l(n, 54, 0, e.dataService.hasPolicy("despotism", e.city.ownerid) && e.dataService.hasBuilding(e.city, "barracks")), l(n, 56, 0, e.dataService.player().powers.bliss), l(n, 58, 0, e.dataService.player().powers.eye), l(n, 60, 0, e.dataService.player().powers.valhalla), l(n, 62, 0, e.data.charging.newfire), l(n, 64, 0, e.dataService.upgradeHappiness(0))
        }), (function (l, n) {
            var e = n.component,
                t = et(n, 13, 0, l(n, 14, 0, ei(n.parent, 1), e.dataService.popNbHappinessEffect(e.city)));
            l(n, 13, 0, t);
            var i = et(n, 19, 0, l(n, 20, 0, ei(n.parent, 1), e.city.citizens.artists * e.conf.citizens.artists.happiness(e.dataService)));
            l(n, 19, 0, i);
            var s = et(n, 27, 0, l(n, 28, 0, ei(n.parent, 1), e.dataService.citiesNbHappinessEffect(e.city.ownerid)));
            l(n, 27, 0, s);
            var u = et(n, 69, 0, l(n, 70, 0, ei(n.parent, 1), e.dataService.happiness(e.city)));
            l(n, 69, 0, u)
        }))
    }

    function nI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Walls"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 50 %"]))], null, null)
    }

    function eI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(2, null, ["", ""])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 50 %"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.conf.buildings.castle.label(e.dataService.player()))
        }))
    }

    function tI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Fortress"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 50 %"]))], null, null)
    }

    function iI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-special"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Temple of Artemis"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 50 %"]))], null, null)
    }

    function sI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-special"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Great Wall"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 50 %"]))], null, null)
    }

    function uI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["City-state"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 20 %"]))], null, null)
    }

    function rI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Stone Skin"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.stoneBonus(e.city.ownerid)));
            l(n, 4, 0, t)
        }))
    }

    function aI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "b", [["class", "text-center d-block border-bottom bg-dark text-light"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Defense"])), (l()(), su(2, 0, null, null, 32, "table", [["class", "popover-table"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 31, "tbody", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Base"])), (l()(), su(7, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["100 %"])), (l()(), su(9, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(10, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Population"])), (l()(), su(12, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(13, null, ["+ ", ""])), yu(14, 1), (l()(), iu(16777216, null, null, 1, null, nI)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, eI)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, tI)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, iI)), gi(22, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, sI)), gi(24, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, uI)), gi(26, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, rI)), gi(28, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(29, 0, null, null, 5, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(30, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total"])), (l()(), su(32, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(33, null, ["", ""])), yu(34, 1)], (function (l, n) {
            var e = n.component;
            l(n, 16, 0, e.dataService.hasBuilding(e.city, "walls")), l(n, 18, 0, e.dataService.hasBuilding(e.city, "castle")), l(n, 20, 0, e.dataService.hasBuilding(e.city, "fortress")), l(n, 22, 0, e.dataService.hasBuilding(e.city, "temple_artemis")), l(n, 24, 0, e.dataService.hasWonder(e.city.ownerid, "great_wall")), l(n, 26, 0, e.city.capital && e.dataService.hasPolicy("city_state", e.city.ownerid)), l(n, 28, 0, e.dataService.player().powers.stone)
        }), (function (l, n) {
            var e = n.component,
                t = et(n, 13, 0, l(n, 14, 0, ei(n.parent, 1), e.dataService.pop(e.city) * e.conf.pop_defense));
            l(n, 13, 0, t);
            var i = et(n, 33, 0, l(n, 34, 0, ei(n.parent, 1), e.dataService.defense(e.city)));
            l(n, 33, 0, i)
        }))
    }

    function oI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Armory"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["- 50 %"]))], null, null)
    }

    function cI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Oligarchy"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["- 50 %"]))], null, null)
    }

    function dI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Professional Army"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["- 50 %"]))], null, null)
    }

    function hI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-magic"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Warpath"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["- ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 1), e.dataService.warpathMaintenanceBonus(0)));
            l(n, 4, 0, t)
        }))
    }

    function pI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "b", [["class", "text-center d-block border-bottom bg-dark text-light"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Troop unitary maintenance cost"])), (l()(), su(2, 0, null, null, 21, "table", [["class", "popover-table"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 20, "tbody", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Base"])), (l()(), su(7, 0, null, null, 2, "td", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(8, null, ["", ""])), yu(9, 2), (l()(), iu(16777216, null, null, 1, null, oI)), gi(11, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, cI)), gi(13, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, dI)), gi(15, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, hI)), gi(17, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(18, 0, null, null, 5, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(19, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total"])), (l()(), su(21, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(22, null, ["", ""])), yu(23, 2)], (function (l, n) {
            var e = n.component;
            l(n, 11, 0, e.dataService.hasBuilding(e.city, "armory")), l(n, 13, 0, e.city.capital && e.dataService.hasPolicy("oligarchy", e.city.ownerid)), l(n, 15, 0, e.dataService.hasPolicy("professional_army", e.city.ownerid)), l(n, 17, 0, e.data.charging.warpath)
        }), (function (l, n) {
            var e = n.component,
                t = et(n, 8, 0, l(n, 9, 0, ei(n.parent, 0), e.conf.troop_maintenance, ".2"));
            l(n, 8, 0, t);
            var i = et(n, 22, 0, l(n, 23, 0, ei(n.parent, 0), e.dataService.maintenanceUnitaryCost(e.city), ".3"));
            l(n, 22, 0, i)
        }))
    }

    function fI(l) {
        return ku(0, [mi(0, zv, []), mi(0, $v, []), mi(0, gv, []), (l()(), su(3, 0, null, null, 69, "nav", [["class", "d-flex bg-dark px-2 py-1 font-weight-bold flex-wrap"], ["style", "margin-top: -1px;"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, uk)), gi(5, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, ok)), gi(7, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, ck)), gi(9, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(10, 16777216, null, null, 3, "div", [["class", "text-pop mr-2"], ["placement", "bottom"]], null, null, null, null, null)), gi(11, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            placement: [1, "placement"]
        }, null), (l()(), su(12, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(13, null, [" ", " "])), (l()(), su(14, 16777216, null, null, 16, "div", [["class", "text-food mr-2"], ["placement", "bottom"]], null, null, null, null, null)), gi(15, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            placement: [1, "placement"]
        }, null), (l()(), su(16, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(17, 0, null, null, 6, "span", [], null, null, null, null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(19, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(20, {
            "text-danger": 0
        }), (l()(), _u(21, null, [" ", " / ", ""])), yu(22, 1), yu(23, 1), (l()(), _u(-1, null, [" ("])), (l()(), su(25, 0, null, null, 5, "span", [], null, null, null, null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(27, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(28, {
            "text-danger": 0
        }), (l()(), _u(29, null, ["", ")"])), yu(30, 2), (l()(), su(31, 16777216, null, null, 4, "div", [["class", "text-health mr-2"], ["placement", "bottom"]], null, null, null, null, null)), gi(32, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            placement: [1, "placement"]
        }, null), (l()(), su(33, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(34, null, [" ", ""])), yu(35, 1), (l()(), iu(16777216, null, null, 1, null, dk)), gi(37, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(38, 16777216, null, null, 14, "div", [["class", "text-gold mr-2"], ["placement", "bottom"]], null, null, null, null, null)), gi(39, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            placement: [1, "placement"]
        }, null), (l()(), su(40, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(41, null, [" ", " / ", " ("])), yu(42, 1), yu(43, 1), (l()(), su(44, 0, null, null, 5, "span", [], null, null, null, null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(46, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(47, {
            "text-danger": 0
        }), (l()(), _u(48, null, ["", ""])), yu(49, 2), (l()(), _u(-1, null, [") "])), (l()(), iu(16777216, null, null, 1, null, hk)), gi(52, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(53, 16777216, null, null, 4, "div", [["class", "text-science mr-2"], ["placement", "bottom"]], null, null, null, null, null)), gi(54, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            placement: [1, "placement"]
        }, null), (l()(), su(55, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(56, null, [" ", ""])), yu(57, 2), (l()(), iu(16777216, null, null, 1, null, pk)), gi(59, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, fk)), gi(61, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(62, 16777216, null, null, 4, "div", [["class", "text-happiness mr-2"], ["placement", "bottom"]], null, null, null, null, null)), gi(63, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            placement: [1, "placement"]
        }, null), (l()(), su(64, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(65, null, [" ", ""])), yu(66, 1), (l()(), iu(16777216, null, null, 1, null, gk)), gi(68, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, mk)), gi(70, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, vk)), gi(72, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, [["popPop", 2]], null, 0, null, wk)), (l()(), iu(0, [["popBonus", 2]], null, 0, null, Ak)), (l()(), iu(0, [["popFood", 2]], null, 0, null, qk)), (l()(), iu(0, [["popGold", 2]], null, 0, null, eS)), (l()(), iu(0, [["popScience", 2]], null, 0, null, _S)), (l()(), iu(0, [["popCulture", 2]], null, 0, null, US)), (l()(), iu(0, [["popFaith", 2]], null, 0, null, iC)), (l()(), iu(0, [["popProd", 2]], null, 0, null, bC)), (l()(), iu(0, [["popHealth", 2]], null, 0, null, MC)), (l()(), iu(0, [["popHappiness", 2]], null, 0, null, lI)), (l()(), iu(0, [["popDefense", 2]], null, 0, null, aI)), (l()(), iu(0, [["popMaintenance", 2]], null, 0, null, pI))], (function (l, n) {
            var e = n.component;
            l(n, 5, 0, e.city.bonus), l(n, 7, 0, !e.edit), l(n, 9, 0, e.edit), l(n, 11, 0, ei(n, 73), "bottom"), l(n, 15, 0, ei(n, 75), "bottom");
            var t = l(n, 20, 0, e.city.autoassign_options && e.city.autoassign_options.nogrowth && e.city.food == e.dataService.foodRequired(e.city));
            l(n, 19, 0, t);
            var i = l(n, 28, 0, e.dataService.foodDiff(e.city) < 0);
            l(n, 27, 0, i), l(n, 32, 0, ei(n, 81), "bottom"), l(n, 37, 0, e.dataService.isUnlocked("buildings")), l(n, 39, 0, ei(n, 76), "bottom");
            var s = l(n, 47, 0, e.dataService.goldDiff(e.city) < 0);
            l(n, 46, 0, s), l(n, 52, 0, e.city.gold == e.dataService.maxGold(e.city)), l(n, 54, 0, ei(n, 77), "bottom"), l(n, 59, 0, e.dataService.hasScience("art")), l(n, 61, 0, e.dataService.hasScience("spirituality")), l(n, 63, 0, ei(n, 82), "bottom"), l(n, 68, 0, e.dataService.isUnlocked("troops")), l(n, 70, 0, e.dataService.isUnlocked("menu_world")), l(n, 72, 0, e.data.dailys.length)
        }), (function (l, n) {
            var e = n.component;
            l(n, 12, 0, e.icons.pop), l(n, 13, 0, e.dataService.pop(e.city)), l(n, 16, 0, e.icons.food);
            var t = et(n, 21, 0, l(n, 22, 0, ei(n, 0), e.city.food)),
                i = et(n, 21, 1, l(n, 23, 0, ei(n, 0), e.dataService.foodRequired(e.city)));
            l(n, 21, 0, t, i);
            var s = et(n, 29, 0, l(n, 30, 0, ei(n, 0), e.dataService.foodDiff(e.city), "+.1"));
            l(n, 29, 0, s), l(n, 33, 0, e.icons.health);
            var u = et(n, 34, 0, l(n, 35, 0, ei(n, 1), e.dataService.health(e.city)));
            l(n, 34, 0, u), l(n, 40, 0, e.icons.gold);
            var r = et(n, 41, 0, l(n, 42, 0, ei(n, 0), e.city.gold)),
                a = et(n, 41, 1, l(n, 43, 0, ei(n, 0), e.dataService.maxGold(e.city)));
            l(n, 41, 0, r, a);
            var o = et(n, 48, 0, l(n, 49, 0, ei(n, 0), e.dataService.goldDiff(e.city), "+.1"));
            l(n, 48, 0, o), l(n, 55, 0, e.icons.science);
            var c = et(n, 56, 0, l(n, 57, 0, ei(n, 0), e.dataService.scienceDiff(e.city), "+.1"));
            l(n, 56, 0, c), l(n, 64, 0, e.icons.happiness);
            var d = et(n, 65, 0, l(n, 66, 0, ei(n, 1), e.dataService.happiness(e.city)));
            l(n, 65, 0, d)
        }))
    }
    class gI {
        constructor(l, n, e) {
            this.conf = l, this.data = n, this.dataService = e, this.ctrl = !1, this.shift = !1, this.icons = ug, this.troopSelection = !1
        }
        handleKeydownEvent(l) {
            this.isCtrl(l.key) && this.dataService.isUnlocked("recruit_x10") ? this.ctrl = !0 : this.isShift(l.key) && this.dataService.isUnlocked("recruit_x100") && (this.shift = !0)
        }
        handleKeyupEvent(l) {
            this.isCtrl(l.key) && (this.ctrl = !1), this.isShift(l.key) && (this.shift = !1)
        }
        ngOnInit() {}
        isCtrl(l) {
            return "Control" == l || "Meta" == l
        }
        isShift(l) {
            return "Shift" == l
        }
        isQueueAllowed() {
            return this.dataService.isUnlocked("queue_troops")
        }
        toggleTroopSelection() {
            this.troopSelection = !this.troopSelection
        }
        isAnythingVisible() {
            return Object.values(this.conf.troops).some(l => this.isVisible(l))
        }
        isVisible(l) {
            return !(l.require.science && !this.dataService.hasScience(l.require.science) || l.obsolete && this.dataService.hasScience(l.obsolete) || l.require.building && !this.dataService.hasBuilding(this.city, l.require.building))
        }
        isAvailable(l) {
            let n = this.anb();
            return "governor" == l.id && (n = 1), !(!this.isQueueAllowed() && this.city.troop_queue.length || l.gold(this.dataService, 0) * n > this.city.gold || "caravan" == l.id && this.dataService.tradeRouteNb() + this.dataService.troopNbById(0, "caravan") >= this.dataService.maxTradeRoute() || l.citizen && this.dataService.pop(this.city) <= n * l.citizen)
        }
        anb() {
            return this.ctrl ? 10 : this.shift ? 100 : 1
        }
        troopsNb(l) {
            let n = this.anb();
            return Math.min(n, this.city.troops[l])
        }
        execute(l, n = !1) {
            let e = this.anb();
            e = Math.min(e, this.city.troops[l]), this.city.troops[l] -= e, this.city.troops[l] <= 0 && delete this.city.troops[l], "worker" != l && "engineer" != l || n || (this.city.citizens.idle += e), "worker" != l && "engineer" != l || !n || (this.city.buildings[this.city.building_queue[0]].progress += this.wonderBuilderGain() * e)
        }
        canBuy(l, n) {
            return this.city.gold >= this.buyCost(l, n)
        }
        nb(l) {
            if ("governor" == this.city.troop_queue[l].id) return 1;
            let n = this.anb();
            return n > this.city.troop_queue[l].nb && (n = this.city.troop_queue[l].nb), n
        }
        buyCost(l, n) {
            return (this.nb(n) - 1) * this.dataService.troopTimeToGoldCost(this.city, l, !1) + this.dataService.troopTimeToGoldCost(this.city, l)
        }
        buy(l, n) {
            if (!this.canBuy(l, n)) return;
            let e = this.nb(n);
            this.city.gold -= this.buyCost(l, n), this.city.troops_progress[l] = 0, this.city.troop_queue[n].nb -= e, this.city.troop_queue[n].nb || this.city.troop_queue.splice(n, 1), this.city.troops[l] ? this.city.troops[l] += e : this.city.troops[l] = e
        }
        remove(l) {
            let n = this.anb();
            n = Math.min(n, this.city.troop_queue[l].nb);
            let e = this.conf.troops[this.city.troop_queue[l].id];
            this.city.gold += "governor" == e.id ? this.dataService.govCost(0, -1) : n * e.gold(this.dataService, 0), this.city.troop_queue[l].nb -= n, this.city.troop_queue[l].nb <= 0 && this.city.troop_queue.splice(l, 1)
        }
        isPopulateAllowed() {
            return this.dataService.pop(this.city) < 20
        }
        selectTroop(l) {
            let n = this.anb();
            "governor" == l.id && (n = 1), this.isAvailable(l) && (this.city.gold -= l.gold(this.dataService, 0) * n, this.city.troops_progress[l.id] || (this.city.troops_progress[l.id] = 0), this.isQueueAllowed() || (this.city.troop_queue = []), this.city.troop_queue.length && this.city.troop_queue[this.city.troop_queue.length - 1].id == l.id ? this.city.troop_queue[this.city.troop_queue.length - 1].nb += n : this.city.troop_queue.push({
                id: l.id,
                nb: n
            }))
        }
        wonderBuilderGain() {
            return Math.max(0, 500 * this.dataService.currentScienceRank() - 1900)
        }
        upgrade(l) {
            this.dataService.upgrade(l, this.city)
        }
        isUpgradable(l) {
            return this.dataService.isUpgradable(l, 0)
        }
        canUpgrade(l, n) {
            return this.dataService.canUpgrade(l, n, this.city)
        }
        upgradeCost(l, n) {
            return this.dataService.upgradeCost(l, n, this.city)
        }
        autorecruit(l) {
            this.city.autorecruit = this.city.autorecruit == l ? void 0 : l
        }
        mouseenter(l, n) {
            let e = this.conf.troops[n];
            l.open({
                title: e.name(this.dataService.player()),
                desc: e.description,
                troop: e,
                time: this.dataService.troopTime(this.city, n)
            })
        }
        mouseenterforbuy(l, n, e) {
            l.open({
                id: n,
                idx: e
            })
        }
        mouseenterforupgrade(l, n, e) {
            l.open({
                upgrade: this.conf.troops[this.conf.troops[n].upgradable].name(this.dataService.player()),
                cost: this.upgradeCost(this.conf.troops[n], e)
            })
        }
        mouseleave(l) {
            l.close()
        }
    }
    var mI = st({
        encapsulation: 0,
        styles: [[""]],
        data: {}
    });

    function yI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(-1, null, [" & Shift for x100"]))], null, null)
    }

    function vI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [["class", "text-primary"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Ctrl for x10 "])), (l()(), iu(16777216, null, null, 1, null, yI)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 4, 0, n.component.dataService.isUnlocked("recruit_x100"))
        }), (function (l, n) {
            l(n, 1, 0, n.component.icons.info)
        }))
    }

    function bI(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 2, "button", [["triggers", "manuel"]], [[8, "className", 0]], [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (t = !1 !== i.upgrade(i.conf.troops[l.parent.parent.context.$implicit.key]) && t), "mouseenter" === n && (t = !1 !== i.mouseenterforupgrade(ei(l, 1), l.parent.parent.context.$implicit.key, l.parent.parent.context.$implicit.value) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 1)) && t), t
        }), null, null)), gi(1, 737280, [["p2", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            triggers: [1, "triggers"]
        }, null), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 1, 0, ei(n.parent.parent.parent, 26), "manuel")
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, Mt(1, "btn btn-sm mr-1 ", e.canUpgrade(e.conf.troops[n.parent.parent.context.$implicit.key], n.parent.parent.context.$implicit.value) ? "btn-primary" : "btn-secondary", "")), l(n, 2, 0, e.icons.chevron_up)
        }))
    }

    function _I(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "button", [["class", "btn btn-sm btn-danger bg-pop mr-1"], ["title", "Populate (only if city population less than 20)"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.execute(l.parent.parent.context.$implicit.key) && t), t
        }), null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" +", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, !e.isPopulateAllowed()), l(n, 1, 0, e.icons.pop), l(n, 2, 0, e.troopsNb(n.parent.parent.context.$implicit.key))
        }))
    }

    function wI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "button", [["class", "btn btn-sm btn-danger bg-pop mr-1"], ["title", "Whip !"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.execute(l.parent.parent.context.$implicit.key, !0) && t), t
        }), null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" +", ""])), yu(3, 1)], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons.prod);
            var t = et(n, 2, 0, l(n, 3, 0, ei(n.parent.parent.parent, 0), e.wonderBuilderGain() * e.troopsNb(n.parent.parent.context.$implicit.key)));
            l(n, 2, 0, t)
        }))
    }

    function xI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-sm btn-danger mr-1"], ["title", "Disband"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.execute(l.parent.parent.context.$implicit.key) && t), t
        }), null, null)), (l()(), _u(1, null, ["- ", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.component.troopsNb(n.parent.parent.context.$implicit.key))
        }))
    }

    function kI(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 11, "div", [["class", "d-flex p-1"], ["placement", "left"], ["triggers", "manual"]], null, [[null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== i.mouseenter(ei(l, 1), l.parent.context.$implicit.key) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 1)) && t), t
        }), null, null)), gi(1, 737280, [["p1", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            popoverTitle: [1, "popoverTitle"],
            placement: [2, "placement"],
            triggers: [3, "triggers"]
        }, null), (l()(), su(2, 0, null, null, 1, "div", [["class", "flex-fill"]], null, null, null, null, null)), (l()(), _u(3, null, ["", ": ", ""])), (l()(), iu(16777216, null, null, 1, null, bI)), gi(5, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, _I)), gi(7, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, wI)), gi(9, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, xI)), gi(11, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, ei(n.parent.parent, 24), ei(n.parent.parent, 23), "left", "manual"), l(n, 5, 0, e.isUpgradable(e.conf.troops[n.parent.context.$implicit.key])), l(n, 7, 0, e.conf.troops[n.parent.context.$implicit.key].citizen), l(n, 9, 0, "worker" == n.parent.context.$implicit.key && e.dataService.hasPolicy("wonder_builder")), l(n, 11, 0, !e.conf.troops[n.parent.context.$implicit.key].citizen)
        }), (function (l, n) {
            var e = n.component;
            l(n, 3, 0, e.conf.troops[n.parent.context.$implicit.key].name(e.dataService.player()), n.parent.context.$implicit.value)
        }))
    }

    function SI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, kI)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, n.context.$implicit.value > 0)
        }), null)
    }

    function CI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, ["Recruiting nothing"]))], null, (function (l, n) {
            l(n, 1, 0, n.component.icons.exclamation)
        }))
    }

    function II(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "span", [], null, null, null, null, null)), (l()(), _u(-1, null, ["("])), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" auto-recruiting)"]))], null, (function (l, n) {
            l(n, 2, 0, n.component.icons.auto + " text-primary")
        }))
    }

    function TI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(1, null, ["(x", ")"]))], null, (function (l, n) {
            l(n, 1, 0, n.parent.context.$implicit.nb)
        }))
    }

    function EI(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 3, "button", [["style", "width:68px"], ["triggers", "manuel"]], [[8, "className", 0]], [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (t = !1 !== i.buy(l.parent.context.$implicit.id, l.parent.context.index) && t), "mouseenter" === n && (t = !1 !== i.mouseenterforbuy(ei(l, 1), l.parent.context.$implicit.id, l.parent.context.index) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 1)) && t), t
        }), null, null)), gi(1, 737280, [["p2", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            triggers: [1, "triggers"]
        }, null), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(3, null, [" x", ""])), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 1, 0, ei(n.parent.parent.parent, 25), "manuel")
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, "btn btn-sm mr-1 " + (e.canBuy(n.parent.context.$implicit.id, n.parent.context.index) ? " btn-dark text-gold" : " btn-secondary text-light")), l(n, 2, 0, e.icons.opt_buy), l(n, 3, 0, e.nb(n.parent.context.index))
        }))
    }

    function AI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-sm btn-danger mr-1"], ["style", "width:40px"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.remove(l.parent.context.index) && t), t
        }), null, null)), (l()(), _u(1, null, ["-", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.component.nb(n.parent.context.index))
        }))
    }

    function PI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 10, "li", [["class", "d-flex align-items-center px-1"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 5, "div", [["class", "flex-fill"], ["style", "height:auto!important"]], null, null, null, null, null)), (l()(), _u(2, null, [" ", " "])), (l()(), iu(16777216, null, null, 1, null, TI)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), _u(5, null, [": ", " "])), yu(6, 1), (l()(), iu(16777216, null, null, 1, null, EI)), gi(8, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, AI)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, n.context.$implicit.nb > 1), l(n, 8, 0, e.dataService.isUnlocked("prod_purchase") && !e.conf.troops[n.context.$implicit.id].citizen), l(n, 10, 0, e.isQueueAllowed())
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.conf.troops[n.context.$implicit.id].name(e.dataService.player()));
            var t = et(n, 5, 0, l(n, 6, 0, ei(n.parent.parent, 1), e.dataService.troopTime(e.city, n.context.$implicit.id, 0 == n.context.index)));
            l(n, 5, 0, t)
        }))
    }

    function DI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "div", [["class", "overflow-auto flex-fill"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Recruiting "])), (l()(), iu(16777216, null, null, 1, null, II)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(4, 0, null, null, 2, "ul", [["class", "list-unstyled"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, PI)), gi(6, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, e.city.autorecruit), l(n, 6, 0, e.city.troop_queue)
        }), null)
    }

    function MI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["title", "Auto-recruit"]], [[8, "className", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.autorecruit(l.parent.parent.context.$implicit.key) && t), t
        }), null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, Mt(1, "btn btn-sm ", e.city.autorecruit == n.parent.parent.context.$implicit.key ? "btn-primary" : "btn-secondary", "")), l(n, 1, 0, e.icons.auto)
        }))
    }

    function OI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [["class", "text-pop"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" ", " "]))], null, (function (l, n) {
            l(n, 1, 0, n.component.icons.pop), l(n, 2, 0, n.parent.parent.context.$implicit.value.citizen)
        }))
    }

    function NI(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 19, "div", [["class", "border px-2"], ["placement", "left-bottom"], ["triggers", "manual"]], null, [[null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== i.mouseenter(ei(l, 1), l.parent.context.$implicit.key) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 1)) && t), t
        }), null, null)), gi(1, 737280, [["p1", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            popoverTitle: [1, "popoverTitle"],
            placement: [2, "placement"],
            triggers: [3, "triggers"]
        }, null), (l()(), su(2, 0, null, null, 6, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 1, "div", [["class", "flex-fill"]], null, null, null, null, null)), (l()(), _u(4, null, ["", ""])), (l()(), su(5, 0, null, null, 1, "button", [["class", "btn btn-sm btn-primary mr-1"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.selectTroop(l.parent.context.$implicit.value) && t), t
        }), null, null)), (l()(), _u(6, null, ["+", ""])), (l()(), iu(16777216, null, null, 1, null, MI)), gi(8, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(9, 0, null, null, 10, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), su(10, 0, null, null, 3, "div", [["class", "text-gold mr-2"]], null, null, null, null, null)), (l()(), _u(11, null, ["", " "])), yu(12, 1), (l()(), su(13, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(14, 0, null, null, 3, "div", [["class", "mr-2"]], null, null, null, null, null)), (l()(), su(15, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(16, null, [" ", " "])), yu(17, 1), (l()(), iu(16777216, null, null, 1, null, OI)), gi(19, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, ei(n.parent.parent.parent, 24), ei(n.parent.parent.parent, 23), "left-bottom", "manual"), l(n, 8, 0, !n.parent.context.$implicit.value.noautorecruit && e.dataService.isUnlocked("recruit_x10")), l(n, 19, 0, n.parent.context.$implicit.value.citizen)
        }), (function (l, n) {
            var e = n.component,
                t = n.parent.context.$implicit.value.name(e.dataService.player());
            l(n, 4, 0, t), l(n, 5, 0, !e.isAvailable(n.parent.context.$implicit.value)), l(n, 6, 0, "governor" == n.parent.context.$implicit.key ? 1 : e.anb());
            var i = et(n, 11, 0, l(n, 12, 0, ei(n.parent.parent.parent, 0), n.parent.context.$implicit.value.gold(e.dataService, 0)));
            l(n, 11, 0, i), l(n, 13, 0, e.icons.gold), l(n, 15, 0, e.icons.time);
            var s = et(n, 16, 0, l(n, 17, 0, ei(n.parent.parent.parent, 1), e.dataService.troopTime(e.city, n.parent.context.$implicit.key, !1)));
            l(n, 16, 0, s)
        }))
    }

    function RI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, NI)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, n.component.isVisible(n.context.$implicit.value))
        }), null)
    }

    function BI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "div", [["class", "overflow-auto flex-fill"], ["style", "height:0"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, RI)), gi(2, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne])], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, et(n, 2, 0, ei(n, 3).transform(e.conf.troops)))
        }), null)
    }

    function zI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, [" There is no troop available for recruit in this city "]))], null, null)
    }

    function $I(l) {
        return ku(0, [(l()(), _u(0, null, ["", ""]))], null, (function (l, n) {
            l(n, 0, 0, n.context.title)
        }))
    }

    function LI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [["class", "border-top mt-1"]], null, null, null, null, null)), (l()(), _u(1, null, [" Range: ", " "]))], null, (function (l, n) {
            l(n, 1, 0, n.component.dataService.tradeRouteMaxDist())
        }))
    }

    function FI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [["class", "mr-2"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 1, 0, n.component.icons.ranged)
        }))
    }

    function qI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [["class", "mr-2"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 1, 0, n.component.icons.siege)
        }))
    }

    function UI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "span", [["class", "text-pop"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" (", ")"]))], null, (function (l, n) {
            l(n, 1, 0, n.component.icons.pop), l(n, 2, 0, n.parent.context.troop.citizen)
        }))
    }

    function HI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "div", [], [[8, "innerHTML", 1]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, LI)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(3, 0, null, null, 16, "div", [["class", "border-top mt-1"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, FI)), gi(5, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, qI)), gi(7, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(8, 0, null, null, 2, "span", [["class", "mr-2"]], null, null, null, null, null)), (l()(), su(9, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(10, null, [" ", ""])), (l()(), su(11, 0, null, null, 2, "span", [["class", "mr-2"]], null, null, null, null, null)), (l()(), su(12, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(13, null, [" ", ""])), (l()(), su(14, 0, null, null, 2, "span", [["class", "mr-2"]], null, null, null, null, null)), (l()(), su(15, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(16, null, [" ", ""])), (l()(), su(17, 0, null, null, 2, "span", [["class", "mr-2"]], null, null, null, null, null)), (l()(), su(18, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(19, null, [" ", ""])), (l()(), su(20, 0, null, null, 10, "div", [["class", "border-top mt-1"]], null, null, null, null, null)), (l()(), su(21, 0, null, null, 3, "span", [["class", "text-gold mr-2"]], null, null, null, null, null)), (l()(), su(22, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(23, null, [" ", ""])), yu(24, 1), (l()(), su(25, 0, null, null, 3, "span", [["class", "text-time mr-2"]], null, null, null, null, null)), (l()(), su(26, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(27, null, [" (", ")"])), yu(28, 1), (l()(), iu(16777216, null, null, 1, null, UI)), gi(30, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, "caravan" == n.context.troop.id);
            var t = n.context.troop.ranged(e.dataService.player());
            l(n, 5, 0, t), l(n, 7, 0, n.context.troop.siege), l(n, 30, 0, n.context.troop.citizen)
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, n.context.desc), l(n, 9, 0, e.icons.attack);
            var t = n.context.troop.attack(e.dataService.player());
            l(n, 10, 0, t), l(n, 12, 0, e.icons.defense);
            var i = n.context.troop.defense(e.dataService.player());
            l(n, 13, 0, i), l(n, 15, 0, e.icons.speed);
            var s = n.context.troop.speed(e.dataService.player());
            l(n, 16, 0, s), l(n, 18, 0, e.icons.capacity), l(n, 19, 0, n.context.troop.capacity), l(n, 22, 0, e.icons.gold);
            var u = et(n, 23, 0, l(n, 24, 0, ei(n.parent, 0), n.context.troop.gold(e.dataService, 0)));
            l(n, 23, 0, u), l(n, 26, 0, e.icons.time);
            var r = et(n, 27, 0, l(n, 28, 0, ei(n.parent, 1), n.context.time));
            l(n, 27, 0, r)
        }))
    }

    function VI(l) {
        return ku(0, [(l()(), _u(0, null, [" Buy ", " for "])), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, ["", "\n"])), yu(3, 1)], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, e.nb(n.context.idx)), l(n, 1, 0, "text-gold " + e.icons.gold);
            var t = et(n, 2, 0, l(n, 3, 0, ei(n.parent, 0), e.buyCost(n.context.id, n.context.idx)));
            l(n, 2, 0, t)
        }))
    }

    function jI(l) {
        return ku(0, [(l()(), _u(-1, null, [" Upgrade to "])), (l()(), su(1, 0, null, null, 1, "span", [["class", "text-troop"]], null, null, null, null, null)), (l()(), _u(2, null, ["", ""])), (l()(), _u(-1, null, [" for "])), (l()(), su(4, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(5, null, ["", "\n"])), yu(6, 1)], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, n.context.upgrade), l(n, 4, 0, "text-gold " + e.icons.gold);
            var t = et(n, 5, 0, l(n, 6, 0, ei(n.parent, 0), n.context.cost));
            l(n, 5, 0, t)
        }))
    }

    function GI(l) {
        return ku(0, [mi(0, zv, []), mi(0, gv, []), (l()(), su(2, 0, null, null, 20, "div", [["class", "border-left h-100 d-flex flex-column"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 8, "div", [["class", "h-40 d-flex flex-column"]], null, null, null, null, null)), (l()(), su(4, 0, null, null, 1, "h3", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Troops"])), (l()(), iu(16777216, null, null, 1, null, vI)), gi(7, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(8, 0, null, null, 3, "div", [["class", "flex-fill overflow-auto"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, SI)), gi(10, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne]), (l()(), su(12, 0, null, null, 10, "div", [["class", "h-60 border-top d-flex flex-column"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, CI)), gi(14, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, DI)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(17, 0, null, null, 1, "button", [["class", "btn btn-primary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.toggleTroopSelection() && t), t
        }), null, null)), (l()(), _u(18, null, ["", ""])), (l()(), iu(16777216, null, null, 1, null, BI)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, zI)), gi(22, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, [["popTitle", 2]], null, 0, null, $I)), (l()(), iu(0, [["popContent", 2]], null, 0, null, HI)), (l()(), iu(0, [["popBuy", 2]], null, 0, null, VI)), (l()(), iu(0, [["popUpgrade", 2]], null, 0, null, jI))], (function (l, n) {
            var e = n.component;
            l(n, 7, 0, e.dataService.isUnlocked("recruit_x10")), l(n, 10, 0, et(n, 10, 0, ei(n, 11).transform(e.city.troops))), l(n, 14, 0, !e.city.troop_queue.length), l(n, 16, 0, e.city.troop_queue.length), l(n, 20, 0, e.troopSelection && e.isAnythingVisible()), l(n, 22, 0, e.troopSelection && !e.isAnythingVisible())
        }), (function (l, n) {
            l(n, 18, 0, n.component.isQueueAllowed() ? "Add to queue" : "Select troop")
        }))
    }
    class WI {
        constructor(l, n, e) {
            this.dataService = l, this.data = n, this.conf = e, this.icons = ug, this.buildingSelection = !1, this.orderByCategoryAndId = (l, n) => {
                let e = this.conf.buildings[l.key],
                    t = this.conf.buildings[n.key];
                return e.category > t.category ? 1 : e.category < t.category ? -1 : 0
            }
        }
        ngOnInit() {}
        isQueueAllowed() {
            return this.dataService.isUnlocked("queue_buildings")
        }
        toggleBuildingSelection() {
            this.buildingSelection = !this.buildingSelection
        }
        isAnythingVisible() {
            return Object.values(this.conf.buildings).some(l => this.isVisible(l))
        }
        isDone(l) {
            return this.dataService.hasBuilding(this.city, l.id)
        }
        isVisible(l) {
            return this.dataService.isBuildingVisible(this.city, l)
        }
        isAvailable(l) {
            return this.dataService.isBuildingAvailable(this.city, l)
        }
        visibleBuildings() {
            return this.dataService.visibleBuildings(this.city)
        }
        remove(l) {
            this.city.building_queue.splice(this.city.building_queue.indexOf(l), 1), delete this.city.buildings[l], this.city.gold += this.dataService.buildingGoldCost(this.conf.buildings[l]), this.city.building_queue.forEach(n => {
                this.conf.buildings[n].require.buildings.includes(l) && this.remove(n)
            })
        }
        selectBuilding(l) {
            this.isAvailable(l) && (this.city.buildings[l.id] || (this.city.gold -= this.dataService.buildingGoldCost(l), this.city.buildings[l.id] = {
                progress: 0,
                done: !1
            }), this.isQueueAllowed() || (this.city.building_queue = []), this.city.building_queue.push(l.id))
        }
        canBuy(l) {
            return !("progress" == l && !this.dataService.hasScience("corporation")) && this.city.gold >= this.dataService.buildingProdToGoldCost(this.city, l)
        }
        buy(l) {
            this.canBuy(l) && this.dataService.buyBuilding(this.city, l)
        }
        mouseenter(l, n) {
            let e = this.conf.buildings[n];
            l.open({
                title: e.label(this.dataService.player()),
                desc: e.description(0, this.dataService),
                cost: this.dataService.buildingGoldCost(e),
                prod: this.dataService.buildingProdCost(e, this.city),
                time: this.dataService.buildingTime(this.city, n),
                req: e.require.buildings.map(l => this.conf.buildings[l].label(this.dataService.player())),
                building: e
            })
        }
        mouseenterforbuy(l, n) {
            l.open({
                id: n
            })
        }
        mouseleave(l) {
            l.close()
        }
    }
    var KI = st({
        encapsulation: 0,
        styles: [[".cursor-forbidden[_ngcontent-%COMP%]   .text-special[_ngcontent-%COMP%]{color:#6c757d!important}"]],
        data: {}
    });

    function ZI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "span", [], [[8, "innerHTML", 1]], null, null, null, null))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, e.conf.buildings[n.parent.parent.context.$implicit.key].desc(0, e.dataService, e.city))
        }))
    }

    function QI(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 8, "div", [["class", "d-flex justify-content-between"], ["placement", "left"], ["triggers", "manuel"]], null, [[null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== i.mouseenter(ei(l, 1), l.parent.context.$implicit.key) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 1)) && t), t
        }), null, null)), gi(1, 737280, [["p1", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            popoverTitle: [1, "popoverTitle"],
            placement: [2, "placement"],
            triggers: [3, "triggers"]
        }, null), (l()(), su(2, 0, null, null, 4, "span", [], null, null, null, null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(4, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(5, {
            "text-special font-weight-bold": 0
        }), (l()(), _u(6, null, ["", ""])), (l()(), iu(16777216, null, null, 1, null, ZI)), gi(8, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, ei(n.parent.parent, 24), ei(n.parent.parent, 23), "left", "manuel");
            var t = l(n, 5, 0, e.conf.buildings[n.parent.context.$implicit.key].wonder);
            l(n, 4, 0, t), l(n, 8, 0, e.conf.buildings[n.parent.context.$implicit.key].desc)
        }), (function (l, n) {
            var e = n.component;
            l(n, 6, 0, e.conf.buildings[n.parent.context.$implicit.key].label(e.dataService.player()))
        }))
    }

    function YI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, QI)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 2, 0, n.context.$implicit.value.done)
        }), null)
    }

    function XI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 8, "div", [["class", "form-group form-check mb-0"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "autobuild"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 2).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 2).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.city.autobuild = e) && t), t
        }), null, null)), gi(2, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(4, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(6, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(7, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "autobuild"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Auto build (cheapest)"]))], (function (l, n) {
            l(n, 4, 0, n.component.city.autobuild)
        }), (function (l, n) {
            l(n, 1, 0, ei(n, 6).ngClassUntouched, ei(n, 6).ngClassTouched, ei(n, 6).ngClassPristine, ei(n, 6).ngClassDirty, ei(n, 6).ngClassValid, ei(n, 6).ngClassInvalid, ei(n, 6).ngClassPending)
        }))
    }

    function JI(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, ["Building nothing"]))], null, (function (l, n) {
            l(n, 1, 0, n.component.icons.exclamation)
        }))
    }

    function lT(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 2, "button", [["triggers", "manuel"]], [[8, "className", 0]], [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (t = !1 !== i.buy(l.parent.context.$implicit) && t), "mouseenter" === n && (t = !1 !== i.mouseenterforbuy(ei(l, 1), l.parent.context.$implicit) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 1)) && t), t
        }), null, null)), gi(1, 737280, [["p2", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            triggers: [1, "triggers"]
        }, null), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 1, 0, ei(n.parent.parent.parent, 25), "manuel")
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, "btn btn-sm mr-1 " + (e.canBuy(n.parent.context.$implicit) ? " btn-dark text-gold" : " btn-secondary text-light")), l(n, 2, 0, e.icons.opt_buy)
        }))
    }

    function nT(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 9, "li", [["class", "d-flex align-items-center px-1"], ["placement", "left"], ["triggers", "manuel"]], null, [[null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== i.mouseenter(ei(l, 1), l.context.$implicit) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 1)) && t), t
        }), null, null)), gi(1, 737280, [["p1", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            popoverTitle: [1, "popoverTitle"],
            placement: [2, "placement"],
            triggers: [3, "triggers"]
        }, null), (l()(), su(2, 0, null, null, 2, "div", [["class", "flex-fill"], ["style", "height:auto!important"]], null, null, null, null, null)), (l()(), _u(3, null, [" ", " : ", " "])), yu(4, 1), (l()(), iu(16777216, null, null, 1, null, lT)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(7, 16777216, null, null, 2, "button", [["class", "btn btn-sm btn-danger mr-1"], ["ngbPopover", "Remove from queue"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.remove(l.context.$implicit) && t), t
        }), null, null)), gi(8, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"]
        }, null), (l()(), su(9, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, ei(n.parent.parent, 24), ei(n.parent.parent, 23), "left", "manuel"), l(n, 6, 0, !e.conf.buildings[n.context.$implicit].wonder && e.dataService.isUnlocked("prod_purchase")), l(n, 8, 0, "Remove from queue")
        }), (function (l, n) {
            var e = n.component,
                t = e.conf.buildings[n.context.$implicit].label(e.dataService.player()),
                i = et(n, 3, 1, l(n, 4, 0, ei(n.parent.parent, 0), e.dataService.buildingTime(e.city, n.context.$implicit)));
            l(n, 3, 0, t, i), l(n, 9, 0, e.icons.minus)
        }))
    }

    function eT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [["class", "overflow-auto flex-fill"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Building: "])), (l()(), su(2, 0, null, null, 2, "ul", [["class", "list-unstyled"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, nT)), gi(4, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            l(n, 4, 0, n.component.city.building_queue)
        }), null)
    }

    function tT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 19, "div", [], null, null, null, null, null)), (l()(), su(1, 16777216, null, null, 18, "div", [["placement", "left-bottom"], ["triggers", "manual"]], null, [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (t = !1 !== i.selectBuilding(l.context.$implicit) && t), "mouseenter" === n && (t = !1 !== i.mouseenter(ei(l, 5), l.context.$implicit.id) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 5)) && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(3, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(4, {
            "cursor-pointer list-group-item": 0,
            "text-secondary cursor-forbidden": 1
        }), gi(5, 737280, [["p1", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            popoverTitle: [1, "popoverTitle"],
            placement: [2, "placement"],
            triggers: [3, "triggers"]
        }, null), (l()(), su(6, 0, null, null, 4, "span", [], null, null, null, null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(8, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(9, {
            "text-special font-weight-bold": 0
        }), (l()(), _u(10, null, ["", ""])), (l()(), _u(-1, null, [" - "])), (l()(), su(12, 0, null, null, 3, "span", [["class", "text-gold"]], null, null, null, null, null)), (l()(), su(13, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(14, null, [" ", ""])), yu(15, 1), (l()(), _u(-1, null, [" - "])), (l()(), su(17, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(18, null, [" ", " "])), yu(19, 1)], (function (l, n) {
            var e = l(n, 4, 0, !0, !n.component.isAvailable(n.context.$implicit));
            l(n, 3, 0, e), l(n, 5, 0, ei(n.parent.parent, 24), ei(n.parent.parent, 23), "left-bottom", "manual");
            var t = l(n, 9, 0, n.context.$implicit.wonder);
            l(n, 8, 0, t)
        }), (function (l, n) {
            var e = n.component,
                t = n.context.$implicit.label(e.dataService.player());
            l(n, 10, 0, t), l(n, 13, 0, e.icons.gold);
            var i = et(n, 14, 0, l(n, 15, 0, ei(n.parent.parent, 1), e.dataService.buildingGoldCost(n.context.$implicit, 0)));
            l(n, 14, 0, i), l(n, 17, 0, e.icons.time);
            var s = et(n, 18, 0, l(n, 19, 0, ei(n.parent.parent, 0), e.dataService.buildingTime(e.city, n.context.$implicit.id)));
            l(n, 18, 0, s)
        }))
    }

    function iT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [["class", "list-group overflow-auto flex-fill"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, tT)), gi(2, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            l(n, 2, 0, n.component.visibleBuildings())
        }), null)
    }

    function sT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, [" There is nothing we can build in this city "]))], null, null)
    }

    function uT(l) {
        return ku(0, [(l()(), _u(0, null, ["", ""]))], null, (function (l, n) {
            l(n, 0, 0, n.context.title)
        }))
    }

    function rT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "span", [["class", "text-time"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" (", ")"])), yu(3, 1)], null, (function (l, n) {
            l(n, 1, 0, n.component.icons.time);
            var e = et(n, 2, 0, l(n, 3, 0, ei(n.parent.parent, 0), n.parent.context.time));
            l(n, 2, 0, e)
        }))
    }

    function aT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(1, null, [" ", " "]))], null, (function (l, n) {
            l(n, 1, 0, n.context.$implicit)
        }))
    }

    function oT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "div", [["class", "border-top mt-1"]], null, null, null, null, null)), (l()(), _u(-1, null, [" Required: "])), (l()(), iu(16777216, null, null, 1, null, aT)), gi(3, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            l(n, 3, 0, n.parent.context.req)
        }), null)
    }

    function cT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Required: "])), (l()(), su(2, 0, null, null, 2, "span", [["class", "text-tech"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" +75"]))], null, (function (l, n) {
            l(n, 3, 0, n.component.icons.tech)
        }))
    }

    function dT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Required: "])), (l()(), su(2, 0, null, null, 2, "span", [["class", "text-tech"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" +25"]))], null, (function (l, n) {
            l(n, 3, 0, n.component.icons.tech)
        }))
    }

    function hT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "div", [], [[8, "innerHTML", 1]], null, null, null, null)), (l()(), su(1, 0, null, null, 10, "div", [["class", "border-top mt-1"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 3, "span", [["class", "text-gold mr-2"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(4, null, [" ", ""])), yu(5, 1), (l()(), su(6, 0, null, null, 3, "span", [["class", "text-prod mr-2"]], null, null, null, null, null)), (l()(), su(7, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(8, null, [" ", ""])), yu(9, 1), (l()(), iu(16777216, null, null, 1, null, rT)), gi(11, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, oT)), gi(13, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, cT)), gi(15, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, dT)), gi(17, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 11, 0, !n.component.isDone(n.context.building)), l(n, 13, 0, n.context.req.length), l(n, 15, 0, n.context.building.industrial && n.context.building.wonder), l(n, 17, 0, n.context.building.industrial && !n.context.building.wonder)
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, n.context.desc), l(n, 3, 0, e.icons.gold);
            var t = et(n, 4, 0, l(n, 5, 0, ei(n.parent, 1), n.context.cost));
            l(n, 4, 0, t), l(n, 7, 0, e.icons.prod);
            var i = et(n, 8, 0, l(n, 9, 0, ei(n.parent, 1), n.context.prod));
            l(n, 8, 0, i)
        }))
    }

    function pT(l) {
        return ku(0, [(l()(), _u(-1, null, [" Buy for "])), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, ["", "\n"])), yu(3, 1)], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, "text-gold " + e.icons.gold);
            var t = et(n, 2, 0, l(n, 3, 0, ei(n.parent, 1), e.dataService.buildingProdToGoldCost(e.city, n.context.id)));
            l(n, 2, 0, t)
        }))
    }

    function fT(l) {
        return ku(0, [mi(0, gv, []), mi(0, zv, []), (l()(), su(2, 0, null, null, 20, "div", [["class", "border-left h-100 d-flex flex-column"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 6, "div", [["class", "h-40 d-flex flex-column"]], null, null, null, null, null)), (l()(), su(4, 0, null, null, 1, "h3", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Buildings"])), (l()(), su(6, 0, null, null, 3, "div", [["class", "flex-fill overflow-auto"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, YI)), gi(8, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, La, [Ne]), (l()(), su(10, 0, null, null, 12, "div", [["class", "h-60 border-top d-flex flex-column"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, XI)), gi(12, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, JI)), gi(14, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, eT)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(17, 0, null, null, 1, "button", [["class", "btn btn-primary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.toggleBuildingSelection() && t), t
        }), null, null)), (l()(), _u(18, null, ["", ""])), (l()(), iu(16777216, null, null, 1, null, iT)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, sT)), gi(22, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, [["popTitle", 2]], null, 0, null, uT)), (l()(), iu(0, [["popContent", 2]], null, 0, null, hT)), (l()(), iu(0, [["popBuy", 2]], null, 0, null, pT))], (function (l, n) {
            var e = n.component;
            l(n, 8, 0, et(n, 8, 0, ei(n, 9).transform(e.city.buildings, e.orderByCategoryAndId))), l(n, 12, 0, e.dataService.isUnlocked("auto_building")), l(n, 14, 0, !e.city.building_queue.length), l(n, 16, 0, e.city.building_queue.length), l(n, 20, 0, e.buildingSelection && e.isAnythingVisible()), l(n, 22, 0, e.buildingSelection && !e.isAnythingVisible())
        }), (function (l, n) {
            l(n, 18, 0, n.component.isQueueAllowed() ? "Add to queue" : "Select building")
        }))
    }
    class gT {
        constructor() {
            this.icons = ug
        }
        ngOnInit() {}
    }
    var mT = st({
        encapsulation: 0,
        styles: [[".bgicon[_ngcontent-%COMP%]{position:absolute;left:50%;z-index:-9}.bgicon[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{position:relative;top:15px;left:-50%;font-size:75vh;opacity:.05}"]],
        data: {}
    });

    function yT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [["class", "bgicon"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons[e.icon])
        }))
    }
    class vT {
        constructor(l, n, e, t, i) {
            this.data = l, this.dataService = n, this.conf = e, this.activatedRoute = t, this.modalService = i, this.icons = ug, this.cityId = this.dataService.player().cities[0].id
        }
        handleKeydownEvent(l) {
            "INPUT" != l.target.tagName.toUpperCase() && (39 == l.keyCode ? this.goNext() : 37 == l.keyCode && this.goNext(!0))
        }
        ngOnInit() {
            this.activatedRoute.paramMap.subscribe(l => {
                l.has("id") ? this.cityId = +l.get("id") : this.data.sel_cityid && (this.cityId = this.data.sel_cityid), this.city = this.dataService.player().cities.find(l => l.id == this.cityId), this.city || (this.cityId = this.dataService.player().cities[0].id, this.city = this.dataService.player().cities.find(l => l.id == this.cityId)), this.updateId()
            }), this.timer = setInterval(() => {
                this.city && 0 != this.city.ownerid && (this.city = this.dataService.player().cities[0], this.updateId())
            }, 100)
        }
        ngOnDestroy() {
            this.timer && clearInterval(this.timer)
        }
        capitalCost() {
            return Math.floor(500 * Math.pow(this.dataService.currentScienceRank(), 4))
        }
        relocate() {
            if (!this.isRelocateAllowed()) return;
            this.city.gold -= this.capitalCost(), this.data.capitalchange_cooldown = this.conf.capital_cooldown;
            let l = this.dataService.capital();
            delete l.buildings.palace, l.capital = !1, this.city.capital = !0
        }
        isRelocateAllowed() {
            return !(this.city.capital || !this.dataService.hasScience("state") || this.city.gold < this.capitalCost() || this.data.capitalchange_cooldown)
        }
        updateId() {
            this.data.sel_cityid = this.city.id, this.nextCity = this.next(), this.prevCity = this.next(!0)
        }
        autoAssign() {
            this.data.pause && this.city.autoassign && this.conf.autoassign.balanced.sort(this.city, this.dataService)
        }
        isAvailable(l) {
            return "farmers" == l || "idle" == l || this.dataService.isUnlocked("citizen_" + l)
        }
        next(l = !1) {
            let n = this.dataService.player().cities.indexOf(this.city) + (l ? -1 : 1);
            return n >= this.dataService.player().cities.length && (n = 0), n < 0 && (n = this.dataService.player().cities.length - 1), this.dataService.player().cities[n]
        }
        goNext(l = !1) {
            this.city = l ? this.prevCity : this.nextCity, this.updateId()
        }
        increaseCitizen(l, n = 1) {
            this.city.citizens.idle && (n = Math.min(n, this.city.citizens.idle), this.city.citizens[l] += n, this.city.citizens.idle -= n)
        }
        decreaseCitizen(l, n = 1) {
            this.city.citizens[l] && (n = Math.min(n, this.city.citizens[l]), this.city.citizens[l] -= n, this.city.citizens.idle += n)
        }
        abandon(l = 1) {
            if (!l) return;
            this.dataService.transferCity(this.city.id, l, !1, !1);
            let n = this.dataService.player(l);
            l > 1 && n.appreciation[0] && (n.appreciation[0] += 20, n.appreciation[0] > 100 && (n.appreciation[0] = 100)), this.goNext(!0)
        }
    }
    var bT = st({
        encapsulation: 0,
        styles: [[""]],
        data: {}
    });

    function _T(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-citytopmenu", [], null, null, null, fI, sk)), gi(1, 114688, null, 0, ik, [zg, Tg, Pg], {
            city: [0, "city"]
        }, null)], (function (l, n) {
            l(n, 1, 0, n.component.city)
        }), null)
    }

    function wT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [["class", "text-plague"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 1, 0, n.component.icons.plague)
        }))
    }

    function xT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "a", [["class", "btn btn-link text-primary"], ["routerLink", "/game/world"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(1, 671744, null, 0, xp, [_p, oh, Rr], {
            queryParams: [0, "queryParams"],
            routerLink: [1, "routerLink"]
        }, null), vu(2, {
            x: 0,
            y: 1
        }), (l()(), _u(-1, null, ["Show on map"]))], (function (l, n) {
            var e = n.component,
                t = l(n, 2, 0, e.city.x, e.city.y);
            l(n, 1, 0, t, "/game/world")
        }), (function (l, n) {
            l(n, 0, 0, ei(n, 1).target, ei(n, 1).href)
        }))
    }

    function kT(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 2, "button", [], [[8, "className", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (t = !1 !== (i.isRelocateAllowed() ? i.modalService.open(ei(l.parent.parent, 14)) : null) && t), t
        }), null, null)), gi(1, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"]
        }, null), (l()(), _u(-1, null, ["Relocate capital"])), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 1, 0, ei(n.parent.parent, 15))
        }), (function (l, n) {
            l(n, 0, 0, Mt(1, "btn btn-link ", n.component.isRelocateAllowed() ? "text-primary" : "text-secondary cursor-forbidden", ""))
        }))
    }

    function ST(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-link text-primary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.modalService.open(ei(l.parent.parent, 13)) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Liberate the city"]))], null, null)
    }

    function CT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-link text-danger"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.modalService.open(ei(l.parent.parent, 12)) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Abandon the city"]))], null, null)
    }

    function IT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "span", [["class", "text-food mr-2"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" +", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons.food);
            var t = n.parent.parent.context.$implicit.value.food(e.dataService, e.city);
            l(n, 2, 0, t)
        }))
    }

    function TT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "span", [["class", "text-prod mr-2"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" +", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons.prod);
            var t = n.parent.parent.context.$implicit.value.prod(e.dataService, e.city);
            l(n, 2, 0, t)
        }))
    }

    function ET(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "span", [["class", "text-gold mr-2"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" +", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons.gold);
            var t = n.parent.parent.context.$implicit.value.gold(e.dataService, e.city);
            l(n, 2, 0, t)
        }))
    }

    function AT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "span", [["class", "text-science mr-2"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" +", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons.science);
            var t = n.parent.parent.context.$implicit.value.science(e.dataService, e.city);
            l(n, 2, 0, t)
        }))
    }

    function PT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "span", [["class", "text-culture mr-2"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" +", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons.culture);
            var t = n.parent.parent.context.$implicit.value.culture(e.dataService);
            l(n, 2, 0, t)
        }))
    }

    function DT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "span", [["class", "text-faith mr-2"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" +", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons.faith);
            var t = n.parent.parent.context.$implicit.value.faith && n.parent.parent.context.$implicit.value.faith(e.dataService);
            l(n, 2, 0, t)
        }))
    }

    function MT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "span", [["class", "text-happiness"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" +", ""])), yu(3, 1)], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons.happiness);
            var t = et(n, 2, 0, l(n, 3, 0, ei(n.parent.parent.parent.parent, 0), n.parent.parent.context.$implicit.value.happiness(e.dataService)));
            l(n, 2, 0, t)
        }))
    }

    function OT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "span", [["class", "text-health"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" +", ""])), yu(3, 1)], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons.health);
            var t = et(n, 2, 0, l(n, 3, 0, ei(n.parent.parent.parent.parent, 0), n.parent.parent.context.$implicit.value.health(e.dataService)));
            l(n, 2, 0, t)
        }))
    }

    function NT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-primary btn-sm line-height-1 font-weight-bold mr-1"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.decreaseCitizen(l.parent.parent.context.$implicit.key, 5) && t), t
        }), null, null)), (l()(), _u(-1, null, ["-5"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, !e.city.citizens[n.parent.parent.context.$implicit.key] || e.city.autoassign)
        }))
    }

    function RT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-primary btn-sm line-height-1 font-weight-bold"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.decreaseCitizen(l.parent.parent.context.$implicit.key) && t), t
        }), null, null)), (l()(), _u(-1, null, ["-"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, !e.city.citizens[n.parent.parent.context.$implicit.key] || e.city.autoassign)
        }))
    }

    function BT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-primary btn-sm line-height-1 font-weight-bold"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.increaseCitizen(l.parent.parent.context.$implicit.key) && t), t
        }), null, null)), (l()(), _u(-1, null, ["+"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, !e.city.citizens.idle || e.city.autoassign)
        }))
    }

    function zT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-primary btn-sm line-height-1 font-weight-bold ml-1"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.increaseCitizen(l.parent.parent.context.$implicit.key, 5) && t), t
        }), null, null)), (l()(), _u(-1, null, ["+5"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, !e.city.citizens.idle || e.city.autoassign)
        }))
    }

    function $T(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 32, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(3, null, ["", ""])), (l()(), su(4, 0, null, null, 16, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, IT)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, TT)), gi(8, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, ET)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, AT)), gi(12, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, PT)), gi(14, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, DT)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, MT)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, OT)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(21, 0, null, null, 4, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, NT)), gi(23, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, RT)), gi(25, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(26, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(27, null, ["", ""])), (l()(), su(28, 0, null, null, 4, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, BT)), gi(30, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, zT)), gi(32, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 6, 0, n.parent.context.$implicit.value.food), l(n, 8, 0, n.parent.context.$implicit.value.prod), l(n, 10, 0, n.parent.context.$implicit.value.gold), l(n, 12, 0, n.parent.context.$implicit.value.science);
            var t = n.parent.context.$implicit.value.culture && n.parent.context.$implicit.value.culture(e.dataService);
            l(n, 14, 0, t);
            var i = n.parent.context.$implicit.value.faith && n.parent.context.$implicit.value.faith(e.dataService);
            l(n, 16, 0, i);
            var s = n.parent.context.$implicit.value.happiness && n.parent.context.$implicit.value.happiness(e.dataService);
            l(n, 18, 0, s);
            var u = n.parent.context.$implicit.value.health && n.parent.context.$implicit.value.health(e.dataService);
            l(n, 20, 0, u), l(n, 23, 0, "idle" != n.parent.context.$implicit.key && e.dataService.pop(e.city) >= 5), l(n, 25, 0, "idle" != n.parent.context.$implicit.key), l(n, 30, 0, "idle" != n.parent.context.$implicit.key), l(n, 32, 0, "idle" != n.parent.context.$implicit.key && e.dataService.pop(e.city) >= 5)
        }), (function (l, n) {
            var e = n.component,
                t = n.parent.context.$implicit.value.name(e.dataService);
            l(n, 3, 0, t), l(n, 27, 0, e.city.citizens[n.parent.context.$implicit.key])
        }))
    }

    function LT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, $T)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, n.component.isAvailable(n.context.$implicit.key))
        }), null)
    }

    function FT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "option", [["value", "builders"]], null, null, null, null, null)), gi(1, 147456, null, 0, If, [fe, be, [2, Cf]], {
            value: [0, "value"]
        }, null), gi(2, 147456, null, 0, Ef, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), (l()(), _u(-1, null, ["Production"]))], (function (l, n) {
            l(n, 1, 0, "builders"), l(n, 2, 0, "builders")
        }), null)
    }

    function qT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "option", [["value", "merchants"]], null, null, null, null, null)), gi(1, 147456, null, 0, If, [fe, be, [2, Cf]], {
            value: [0, "value"]
        }, null), gi(2, 147456, null, 0, Ef, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), (l()(), _u(-1, null, ["Gold"]))], (function (l, n) {
            l(n, 1, 0, "merchants"), l(n, 2, 0, "merchants")
        }), null)
    }

    function UT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "option", [["value", "scientists"]], null, null, null, null, null)), gi(1, 147456, null, 0, If, [fe, be, [2, Cf]], {
            value: [0, "value"]
        }, null), gi(2, 147456, null, 0, Ef, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), (l()(), _u(-1, null, ["Science"]))], (function (l, n) {
            l(n, 1, 0, "scientists"), l(n, 2, 0, "scientists")
        }), null)
    }

    function HT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "option", [["value", "artists"]], null, null, null, null, null)), gi(1, 147456, null, 0, If, [fe, be, [2, Cf]], {
            value: [0, "value"]
        }, null), gi(2, 147456, null, 0, Ef, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), (l()(), _u(-1, null, ["Culture"]))], (function (l, n) {
            l(n, 1, 0, "artists"), l(n, 2, 0, "artists")
        }), null)
    }

    function VT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "option", [["value", "priests"]], null, null, null, null, null)), gi(1, 147456, null, 0, If, [fe, be, [2, Cf]], {
            value: [0, "value"]
        }, null), gi(2, 147456, null, 0, Ef, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), (l()(), _u(-1, null, ["Faith"]))], (function (l, n) {
            l(n, 1, 0, "priests"), l(n, 2, 0, "priests")
        }), null)
    }

    function jT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 26, "div", [["class", "form-group form-check mb-0"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "autoassign_priority"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Priority"])), (l()(), su(3, 0, null, null, 23, "select", [["id", "autoassign_priority"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 4).onChange(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 4).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.city.autoassign_options.priority = e) && t), "change" === n && (t = !1 !== i.autoAssign() && t), t
        }), null, null)), gi(4, 16384, null, 0, Cf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [Cf]), gi(6, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(8, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(9, 0, null, null, 3, "option", [["value", ""]], null, null, null, null, null)), gi(10, 147456, null, 0, If, [fe, be, [2, Cf]], {
            value: [0, "value"]
        }, null), gi(11, 147456, null, 0, Ef, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), (l()(), _u(-1, null, ["None"])), (l()(), su(13, 0, null, null, 3, "option", [["value", "farmers"]], null, null, null, null, null)), gi(14, 147456, null, 0, If, [fe, be, [2, Cf]], {
            value: [0, "value"]
        }, null), gi(15, 147456, null, 0, Ef, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), (l()(), _u(-1, null, ["Food"])), (l()(), iu(16777216, null, null, 1, null, FT)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, qT)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, UT)), gi(22, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, HT)), gi(24, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, VT)), gi(26, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 6, 0, e.city.autoassign_options.priority), l(n, 10, 0, ""), l(n, 11, 0, ""), l(n, 14, 0, "farmers"), l(n, 15, 0, "farmers"), l(n, 18, 0, e.isAvailable("builders")), l(n, 20, 0, e.isAvailable("merchants")), l(n, 22, 0, e.isAvailable("scientists")), l(n, 24, 0, e.isAvailable("artists")), l(n, 26, 0, e.isAvailable("priests"))
        }), (function (l, n) {
            l(n, 3, 0, ei(n, 8).ngClassUntouched, ei(n, 8).ngClassTouched, ei(n, 8).ngClassPristine, ei(n, 8).ngClassDirty, ei(n, 8).ngClassValid, ei(n, 8).ngClassInvalid, ei(n, 8).ngClassPending)
        }))
    }

    function GT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 8, "div", [["class", "form-group form-check mb-0"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "autoassign_strong"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 2).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 2).onTouched() && t), "change" === n && (t = !1 !== i.autoAssign() && t), "ngModelChange" === n && (t = !1 !== (i.city.autoassign_options.strong = e) && t), t
        }), null, null)), gi(2, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(4, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            isDisabled: [0, "isDisabled"],
            model: [1, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(6, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(7, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "autoassign_strong"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Strong priority"]))], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, !e.city.autoassign_options.priority, e.city.autoassign_options.strong)
        }), (function (l, n) {
            l(n, 1, 0, ei(n, 6).ngClassUntouched, ei(n, 6).ngClassTouched, ei(n, 6).ngClassPristine, ei(n, 6).ngClassDirty, ei(n, 6).ngClassValid, ei(n, 6).ngClassInvalid, ei(n, 6).ngClassPending)
        }))
    }

    function WT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [["class", "col-3"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "app-citytroops", [], null, [["document", "keydown"], ["document", "keyup"]], (function (l, n, e) {
            var t = !0;
            return "document:keydown" === n && (t = !1 !== ei(l, 2).handleKeydownEvent(e) && t), "document:keyup" === n && (t = !1 !== ei(l, 2).handleKeyupEvent(e) && t), t
        }), GI, mI)), gi(2, 114688, null, 0, gI, [Tg, Pg, zg], {
            city: [0, "city"]
        }, null)], (function (l, n) {
            l(n, 2, 0, n.component.city)
        }), null)
    }

    function KT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [["class", "col-3"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "app-citybuildings", [], null, null, null, fT, KI)), gi(2, 114688, null, 0, WI, [zg, Pg, Tg], {
            city: [0, "city"]
        }, null)], (function (l, n) {
            l(n, 2, 0, n.component.city)
        }), null)
    }

    function ZT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 43, "div", [["class", "row flex-fill no-gutters pl-2"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 38, "div", [["class", "col-6"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 10, "div", [["class", "d-flex border-bottom border-secondary"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, wT)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, xT)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, kT)), gi(8, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, ST)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, CT)), gi(12, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(13, 0, null, null, 4, "table", [["class", "table table-borderless w-auto table-sm mr-5"]], null, null, null, null, null)), (l()(), su(14, 0, null, null, 3, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, LT)), gi(16, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne]), (l()(), su(18, 0, null, null, 8, "div", [["class", "form-group form-check mb-0"]], null, null, null, null, null)), (l()(), su(19, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "autoassign_nogrowth"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 20).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 20).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.city.autoassign_options.nogrowth = e) && t), "change" === n && (t = !1 !== i.autoAssign() && t), t
        }), null, null)), gi(20, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(22, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(24, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(25, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "autoassign_nogrowth"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Prevent growth"])), (l()(), su(27, 0, null, null, 8, "div", [["class", "form-group form-check mb-0"]], null, null, null, null, null)), (l()(), su(28, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "autoassign"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 29).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 29).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.city.autoassign = e) && t), "change" === n && (t = !1 !== i.autoAssign() && t), t
        }), null, null)), gi(29, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(31, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(33, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(34, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "autoassign"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Auto-assign"])), (l()(), iu(16777216, null, null, 1, null, jT)), gi(37, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, GT)), gi(39, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, WT)), gi(41, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, KT)), gi(43, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, e.city.plague && e.city.plague > 0), l(n, 6, 0, e.dataService.isUnlocked("menu_world")), l(n, 8, 0, !e.city.capital && e.dataService.hasScience("state")), l(n, 10, 0, !e.city.capital && e.city.rightful_ownerid > 1 && e.dataService.player(e.city.rightful_ownerid)), l(n, 12, 0, !e.city.capital), l(n, 16, 0, et(n, 16, 0, ei(n, 17).transform(e.conf.citizens))), l(n, 22, 0, e.city.autoassign_options.nogrowth), l(n, 31, 0, e.city.autoassign), l(n, 37, 0, e.city.autoassign), l(n, 39, 0, e.city.autoassign), l(n, 41, 0, e.dataService.isUnlocked("troops")), l(n, 43, 0, e.dataService.isUnlocked("buildings"))
        }), (function (l, n) {
            l(n, 19, 0, ei(n, 24).ngClassUntouched, ei(n, 24).ngClassTouched, ei(n, 24).ngClassPristine, ei(n, 24).ngClassDirty, ei(n, 24).ngClassValid, ei(n, 24).ngClassInvalid, ei(n, 24).ngClassPending), l(n, 28, 0, ei(n, 33).ngClassUntouched, ei(n, 33).ngClassTouched, ei(n, 33).ngClassPristine, ei(n, 33).ngClassDirty, ei(n, 33).ngClassValid, ei(n, 33).ngClassInvalid, ei(n, 33).ngClassPending)
        }))
    }

    function QT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 9, "div", [["class", "row border-top"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "div", [["class", "col-4"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "button", [["class", "btn btn-link"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.goNext(!0) && t), t
        }), null, null)), (l()(), _u(3, null, [" < ", ""])), (l()(), su(4, 0, null, null, 2, "div", [["class", "col-4"]], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "b", [["class", "text-150"]], null, null, null, null, null)), (l()(), _u(6, null, ["", ""])), (l()(), su(7, 0, null, null, 2, "div", [["class", "col-4"]], null, null, null, null, null)), (l()(), su(8, 0, null, null, 1, "button", [["class", "btn btn-link"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.goNext() && t), t
        }), null, null)), (l()(), _u(9, null, ["", " >"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 3, 0, e.prevCity.name), l(n, 6, 0, e.city.name), l(n, 9, 0, e.nextCity.name)
        }))
    }

    function YT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "modal-header"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "h4", [["class", "modal-title"]], null, null, null, null, null)), (l()(), _u(2, null, ["Abandon ", ""])), (l()(), su(3, 0, null, null, 2, "button", [["class", "close"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.context.$implicit.dismiss() && t), t
        }), null, null)), (l()(), su(4, 0, null, null, 1, "span", [["aria-hidden", "true"]], null, null, null, null, null)), (l()(), _u(-1, null, ["\xd7"])), (l()(), su(6, 0, null, null, 3, "div", [["class", "modal-body"]], null, null, null, null, null)), (l()(), su(7, 0, null, null, 2, "div", [["class", "text-danger"]], null, null, null, null, null)), (l()(), su(8, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(9, null, ["Are you sure you want to abandon the city of ", " to barbarians ?"])), (l()(), su(10, 0, null, null, 4, "div", [["class", "modal-footer"]], null, null, null, null, null)), (l()(), su(11, 0, null, null, 1, "button", [["class", "btn btn-secondary"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.context.$implicit.close() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Cancel"])), (l()(), su(13, 0, null, null, 1, "button", [["class", "btn btn-danger"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (l.context.$implicit.close(), t = !1 !== i.abandon() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Abandon"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.city.name), l(n, 9, 0, e.city.name)
        }))
    }

    function XT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "modal-header"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "h4", [["class", "modal-title"]], null, null, null, null, null)), (l()(), _u(2, null, ["Liberate ", ""])), (l()(), su(3, 0, null, null, 2, "button", [["class", "close"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.context.$implicit.dismiss() && t), t
        }), null, null)), (l()(), su(4, 0, null, null, 1, "span", [["aria-hidden", "true"]], null, null, null, null, null)), (l()(), _u(-1, null, ["\xd7"])), (l()(), su(6, 0, null, null, 3, "div", [["class", "modal-body"]], null, null, null, null, null)), (l()(), su(7, 0, null, null, 2, "div", [["class", "text-danger"]], null, null, null, null, null)), (l()(), su(8, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(9, null, ["Are you sure you want to liberate the city of ", " and give it to ", " ?"])), (l()(), su(10, 0, null, null, 4, "div", [["class", "modal-footer"]], null, null, null, null, null)), (l()(), su(11, 0, null, null, 1, "button", [["class", "btn btn-secondary"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.context.$implicit.close() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Cancel"])), (l()(), su(13, 0, null, null, 1, "button", [["class", "btn btn-primary"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (l.context.$implicit.close(), t = !1 !== i.abandon(i.city.rightful_ownerid) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Liberate"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.city.name), l(n, 9, 0, e.city.name, e.dataService.player(e.city.rightful_ownerid).name)
        }))
    }

    function JT(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "modal-header"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "h4", [["class", "modal-title"]], null, null, null, null, null)), (l()(), _u(2, null, ["Relocate capital to ", ""])), (l()(), su(3, 0, null, null, 2, "button", [["class", "close"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.context.$implicit.dismiss() && t), t
        }), null, null)), (l()(), su(4, 0, null, null, 1, "span", [["aria-hidden", "true"]], null, null, null, null, null)), (l()(), _u(-1, null, ["\xd7"])), (l()(), su(6, 0, null, null, 16, "div", [["class", "modal-body"]], null, null, null, null, null)), (l()(), su(7, 0, null, null, 2, "div", [["class", "text-danger"]], null, null, null, null, null)), (l()(), su(8, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(9, null, ["Are you sure you want to relocate your capital to ", " ?"])), (l()(), su(10, 0, null, null, 3, "div", [], null, null, null, null, null)), (l()(), su(11, 0, null, null, 1, "span", [["class", "text-prod"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Palace"])), (l()(), _u(-1, null, [" will be destroyed if the current capital has one."])), (l()(), su(14, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), _u(15, null, ["You will not be able to relocate again before ", "."])), yu(16, 1), (l()(), su(17, 0, null, null, 5, "div", [], null, null, null, null, null)), (l()(), su(18, 0, null, null, 1, "b", [["class", "mr-1"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Cost :"])), (l()(), su(20, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(21, null, [" ", ""])), yu(22, 1), (l()(), su(23, 0, null, null, 4, "div", [["class", "modal-footer"]], null, null, null, null, null)), (l()(), su(24, 0, null, null, 1, "button", [["class", "btn btn-secondary"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.context.$implicit.close() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Cancel"])), (l()(), su(26, 0, null, null, 1, "button", [["class", "btn btn-primary"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (l.context.$implicit.close(), t = !1 !== i.relocate() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Relocate"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.city.name), l(n, 9, 0, e.city.name);
            var t = et(n, 15, 0, l(n, 16, 0, ei(n.parent, 1), e.conf.capital_cooldown / 1e3));
            l(n, 15, 0, t), l(n, 20, 0, "text-gold " + e.icons.gold);
            var i = et(n, 21, 0, l(n, 22, 0, ei(n.parent, 2), e.capitalCost()));
            l(n, 21, 0, i)
        }))
    }

    function lE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(-1, null, ["A town hall is required"]))], null, null)
    }

    function nE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), _u(1, null, ["Capital Relocation allowed in ", " "])), yu(2, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 1, 0, l(n, 2, 0, ei(n.parent.parent, 1), e.data.capitalchange_cooldown));
            l(n, 1, 0, t)
        }))
    }

    function eE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(1, null, ["Relocate ", " as capital"])), (l()(), su(2, 0, null, null, 0, "br", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, lE)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(5, 0, null, null, 4, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Cost: "])), (l()(), su(7, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(8, null, [" ", ""])), yu(9, 1), (l()(), iu(16777216, null, null, 1, null, nE)), gi(11, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, !e.dataService.hasBuilding(e.city, "town_hall")), l(n, 11, 0, e.data.capitalchange_cooldown)
        }), (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.city.name), l(n, 7, 0, "text-gold " + e.icons.gold);
            var t = et(n, 8, 0, l(n, 9, 0, ei(n.parent, 2), e.capitalCost()));
            l(n, 8, 0, t)
        }))
    }

    function tE(l) {
        return ku(0, [mi(0, $v, []), mi(0, gv, []), mi(0, zv, []), (l()(), su(3, 0, null, null, 8, "div", [["class", "h-100 d-flex flex-column p-relative"]], null, null, null, null, null)), (l()(), su(4, 0, null, null, 1, "bgicon", [["icon", "city"]], null, null, null, yT, mT)), gi(5, 114688, null, 0, gT, [], {
            icon: [0, "icon"]
        }, null), (l()(), iu(16777216, null, null, 1, null, _T)), gi(7, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, ZT)), gi(9, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, QT)), gi(11, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, [["content", 2]], null, 0, null, YT)), (l()(), iu(0, [["contentl", 2]], null, 0, null, XT)), (l()(), iu(0, [["popRelocate", 2]], null, 0, null, JT)), (l()(), iu(0, [["popCapital", 2]], null, 0, null, eE))], (function (l, n) {
            var e = n.component;
            l(n, 5, 0, "city"), l(n, 7, 0, e.city), l(n, 9, 0, e.city), l(n, 11, 0, e.city && e.dataService.isUnlocked("menu_empire"))
        }), null)
    }

    function iE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-citycontainer", [], null, [["document", "keydown"]], (function (l, n, e) {
            var t = !0;
            return "document:keydown" === n && (t = !1 !== ei(l, 1).handleKeydownEvent(e) && t), t
        }), tE, bT)), gi(1, 245760, null, 0, vT, [Pg, zg, Tg, oh, Fy], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var sE = jt("app-citycontainer", vT, iE, {}, {}, []); class uE {
        constructor(l, n, e) {
            this.data = l, this.dataService = n, this.conf = e, this.icons = ug, this.ranks_nb = 0, this.max_nodes = 5, this.era_height = 28, this.node_width = 150, this.node_height = 40, this.rank_sep = 100, this.node_sep = 20, this.curve = 20, this.link_color = "black", this.era_color = "url(#black)", this.node_colors = {
                current: "url(#blue)",
                inqueue: "url(#lightblue)",
                done: "url(#gold)",
                available: "url(#green)",
                locked: "url(#black)"
            }, this.svg_data = {
                nodes: [],
                links: []
            }, this.ctrl = !1
        }
        handleKeydownEvent(l) {
            this.isCtrl(l.key) && (this.ctrl = !0)
        }
        handleKeyupEvent(l) {
            this.isCtrl(l.key) && (this.ctrl = !1)
        }
        ngOnInit() {
            this.player = this.dataService.player(), this.init()
        }
        isCtrl(l) {
            return "Control" == l || "Meta" == l
        }
        init() {
            this.svg_data.nodes = [], this.svg_data.links = [], Object.values(this.conf.sciences).forEach(l => {
                this.isScienceUnlocked(l) && (this.svg_data.nodes.push({
                    id: l.id,
                    rank: l.rank
                }), l.require.forEach(n => {
                    this.svg_data.links.push({
                        origin: n,
                        end: l.id
                    })
                }), this.ranks_nb = l.rank)
            }), this.initChart(), setTimeout(this.scroll.bind(this), 10)
        }
        label(l) {
            let n = this.conf.sciences[l],
                e = this.player.science_queue.indexOf(l);
            return n.label + (e > 0 ? " (" + e + ")" : "")
        }
        scroll() {
            this.container.nativeElement.scrollLeft = (this.dataService.currentScienceRank() - 2) * (this.node_width + this.rank_sep)
        }
        isScienceUnlocked(l) {
            return this.isEraUnlocked(this.dataService.era(0, l.rank))
        }
        isEraUnlocked(l) {
            return "prehistory" == l || this.dataService.isUnlocked("era_" + l)
        }
        color(l) {
            return this.player.science_queue[0] == l ? this.node_colors.current : this.player.science_queue.some(n => n == l) ? this.node_colors.inqueue : this.player.sciences[l] && this.player.sciences[l].done ? this.node_colors.done : this.dataService.isScienceAvailable(l) ? this.node_colors.available : this.node_colors.locked
        }
        clearQueue() {
            this.dataService.player().science_queue = []
        }
        mouseenter(l, n) {
            let e = this.conf.sciences[n];
            l.open({
                title: e.label,
                desc: e.description,
                cost: this.dataService.scienceCost(e),
                time: this.dataService.scienceTime(n)
            })
        }
        mouseleave(l) {
            l.close()
        }
        select(l) {
            if (!this.player.sciences[l] || !this.player.sciences[l].done) {
                if (this.dataService.isUnlocked("queue_science")) {
                    let n = this.getReqs(l);
                    n.sort((l, n) => {
                        let e = this.conf.sciences[l],
                            t = this.conf.sciences[n];
                        return e.rank > t.rank ? 1 : e.rank < t.rank ? -1 : 0
                    }), n.push(l), this.ctrl ? (this.player.science_queue.push(...n), this.player.science_queue = [...new Set(this.player.science_queue)]) : this.player.science_queue = n
                } else {
                    if (!this.dataService.isScienceAvailable(l)) return;
                    this.player.science_queue = [l]
                }
                this.player.sciences[this.player.science_queue[0]] || (this.player.sciences[this.player.science_queue[0]] = {
                    progress: 0,
                    done: !1
                })
            }
        }
        getReqs(l) {
            let n = [];
            return this.conf.sciences[l].require.forEach(l => {
                this.dataService.hasScience(l) || (n.push(l), n.push(...this.getReqs(l)))
            }), [...new Set(n)]
        }
        initChart() {
            this.svg_data.width = 3 * Object.keys(this.conf.eras).length * (this.node_width + this.rank_sep - 1), this.svg_data.height = this.max_nodes * this.node_height + (this.max_nodes - 1) * this.node_sep;
            for (let l = 1; l <= this.ranks_nb; l++) this.svg_data.nodes.filter(n => n.rank == l).forEach((l, n, e) => {
                let t = e.length,
                    i = (this.svg_data.height - t * this.node_height - (t - 1) * this.node_sep) / 2 + this.era_height + this.node_sep;
                l.x = (this.node_width + this.rank_sep) * (l.rank - 1), l.y = (this.node_height + this.node_sep) * n + i
            });
            this.svg_data.links.forEach(l => {
                let n = this.node(l.origin),
                    e = this.node(l.end);
                l.points = [[n.x + this.node_width, n.y + this.node_height / 2], [e.x - 4, e.y + this.node_height / 2]];
                let t = l.points[0],
                    i = l.points[1];
                l.d = `M${t[0]} ${t[1]} C ${t[0]+this.curve} ${t[1]}, ${i[0]-this.curve-(e.rank-n.rank-1)*(1.5*this.rank_sep+this.node_width)} ${i[1]}, ${i[0]} ${i[1]}`
            })
        }
        node(l) {
            return this.svg_data.nodes.find(n => n.id == l)
        }
        eraWidth(l) {
            return (l.rank_end - l.rank_start + 1) * (this.rank_sep + this.node_width) - (1 == l.rank_start ? this.rank_sep / 2 : 0)
        }
        eraX(l) {
            return (l.rank_start - 1) * (this.node_width + this.rank_sep) - (1 == l.rank_start ? 0 : this.rank_sep / 2)
        }
    }
    var rE = st({
        encapsulation: 0,
        styles: [["g[_ngcontent-%COMP%], rect[_ngcontent-%COMP%], text[_ngcontent-%COMP%]{cursor:pointer}"]],
        data: {}
    });

    function aE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, ":svg:text", [["fill", "#888"], ["font-size", "400"], ["font-weight", "bold"], ["text-anchor", "middle"]], [[1, "x", 0], [1, "y", 0]], null, null, null, null)), (l()(), _u(-1, null, ["?"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, e.eraX(n.parent.context.$implicit.value) + e.eraWidth(n.parent.context.$implicit.value) / 2, e.svg_data.height + e.era_height + e.node_height)
        }))
    }

    function oE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, null, null, null, null, null, null, null)), (l()(), su(1, 0, null, null, 3, ":svg:g", [], [[1, "width", 0], [1, "height", 0]], null, null, null, null)), (l()(), su(2, 0, null, null, 0, ":svg:rect", [["rx", "5"], ["ry", "5"], ["stroke", "black"]], [[1, "width", 0], [1, "height", 0], [1, "x", 0], [1, "y", 0], [1, "fill", 0]], null, null, null, null)), (l()(), su(3, 0, null, null, 1, ":svg:text", [["dominant-baseline", "middle"], ["fill", "white"], ["font-size", "14"], ["font-weight", "bold"], ["text-anchor", "middle"]], [[1, "x", 0], [1, "y", 0]], null, null, null, null)), (l()(), _u(4, null, ["", ""])), (l()(), iu(16777216, null, null, 1, null, aE)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 6, 0, !n.component.isEraUnlocked(n.context.$implicit.key))
        }), (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.eraWidth(n.context.$implicit.value), e.era_height), l(n, 2, 0, e.eraWidth(n.context.$implicit.value), e.era_height, e.eraX(n.context.$implicit.value), 0, e.era_color), l(n, 3, 0, e.eraX(n.context.$implicit.value) + e.eraWidth(n.context.$implicit.value) / 2, e.era_height / 2), l(n, 4, 0, n.context.$implicit.value.name)
        }))
    }

    function cE(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 4, ":svg:g", [["container", "body"], ["triggers", "manuel"]], [[1, "width", 0], [1, "height", 0]], [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (t = !1 !== i.select(l.context.$implicit.id) && t), "mouseenter" === n && (t = !1 !== i.mouseenter(ei(l, 1), l.context.$implicit.id) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 1)) && t), t
        }), null, null)), gi(1, 737280, [["p1", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            popoverTitle: [1, "popoverTitle"],
            triggers: [2, "triggers"],
            container: [3, "container"]
        }, null), (l()(), su(2, 0, null, null, 0, ":svg:rect", [["rx", "5"], ["ry", "5"], ["stroke", "black"]], [[1, "width", 0], [1, "height", 0], [1, "x", 0], [1, "y", 0], [1, "fill", 0]], null, null, null, null)), (l()(), su(3, 0, null, null, 1, ":svg:text", [["dominant-baseline", "middle"], ["fill", "white"], ["font-size", "16"], ["font-weight", "bold"], ["text-anchor", "middle"]], [[1, "x", 0], [1, "y", 0]], null, null, null, null)), (l()(), _u(4, null, ["", ""])), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 1, 0, ei(n.parent, 53), ei(n.parent, 52), "manuel", "body")
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, e.node_width, e.node_height), l(n, 2, 0, e.node_width, e.node_height, n.context.$implicit.x, n.context.$implicit.y, e.color(n.context.$implicit.id)), l(n, 3, 0, n.context.$implicit.x + e.node_width / 2, n.context.$implicit.y + e.node_height / 2), l(n, 4, 0, e.label(n.context.$implicit.id))
        }))
    }

    function dE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, ":svg:path", [["fill", "transparent"], ["marker-end", "url(#head)"]], [[1, "d", 0], [1, "stroke", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.context.$implicit.d, n.component.link_color)
        }))
    }

    function hE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, ":svg:g", [], [[1, "width", 0], [1, "height", 0]], null, null, null, null)), (l()(), su(1, 0, null, null, 0, ":svg:rect", [["rx", "5"], ["ry", "5"], ["stroke", "black"]], [[1, "width", 0], [1, "height", 0], [1, "x", 0], [1, "y", 0], [1, "fill", 0]], null, null, null, null)), (l()(), su(2, 0, null, null, 1, ":svg:text", [["dominant-baseline", "middle"], ["fill", "white"], ["font-size", "16"], ["font-weight", "bold"], ["text-anchor", "middle"]], [[1, "x", 0], [1, "y", 0]], null, null, null, null)), (l()(), _u(-1, null, ["In queue"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, e.node_width, e.node_height), l(n, 1, 0, e.node_width, e.node_height, 4 * (e.node_width + e.node_sep), e.svg_data.height + 2 * e.node_sep + e.era_height, e.node_colors.inqueue), l(n, 2, 0, 4 * (e.node_width + e.node_sep) + e.node_width / 2, e.svg_data.height + e.node_height / 2 + 2 * e.node_sep + e.era_height)
        }))
    }

    function pE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Use ctrl + click to add to queue"]))], null, (function (l, n) {
            l(n, 1, 0, n.component.icons.info)
        }))
    }

    function fE(l) {
        return ku(0, [(l()(), _u(0, null, ["", ""]))], null, (function (l, n) {
            l(n, 0, 0, n.context.title)
        }))
    }

    function gE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "div", [], [[8, "innerHTML", 1]], null, null, null, null)), (l()(), su(1, 0, null, null, 6, "div", [["class", "border-top mt-1"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 3, "span", [["class", "text-science"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(4, null, [" ", ""])), yu(5, 1), (l()(), _u(6, null, [" (", ")"])), yu(7, 1)], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, n.context.desc), l(n, 3, 0, e.icons.science);
            var t = et(n, 4, 0, l(n, 5, 0, ei(n.parent, 0), n.context.cost));
            l(n, 4, 0, t);
            var i = et(n, 6, 0, l(n, 7, 0, ei(n.parent, 1), n.context.time));
            l(n, 6, 0, i)
        }))
    }

    function mE(l) {
        return ku(0, [mi(0, zv, []), mi(0, gv, []), cu(402653184, 1, {
            container: 0
        }), (l()(), su(3, 0, [[1, 0], ["container", 1]], null, 44, "div", [["class", "bg-dark p-4"], ["style", "overflow:auto"]], null, null, null, null, null)), (l()(), su(4, 0, null, null, 43, ":svg:svg", [], [[1, "width", 0], [1, "height", 0]], null, null, null, null)), (l()(), su(5, 0, null, null, 17, ":svg:defs", [], null, null, null, null, null)), (l()(), su(6, 0, null, null, 1, ":svg:marker", [["id", "head"], ["markerHeight", "8"], ["markerWidth", "4"], ["orient", "auto"], ["refX", "0"], ["refY", "4"]], null, null, null, null, null)), (l()(), su(7, 0, null, null, 0, ":svg:path", [["d", "M0,0 V8 L4,4 Z"]], [[1, "fill", 0]], null, null, null, null)), (l()(), su(8, 0, null, null, 2, ":svg:linearGradient", [["id", "blue"], ["x1", "0%"], ["x2", "100%"], ["y1", "100%"], ["y2", "0%"]], null, null, null, null, null)), (l()(), su(9, 0, null, null, 0, ":svg:stop", [["offset", "0%"], ["style", "stop-color:#2E86C1;stop-opacity:1"]], null, null, null, null, null)), (l()(), su(10, 0, null, null, 0, ":svg:stop", [["offset", "100%"], ["style", "stop-color:#5DADE2;stop-opacity:1"]], null, null, null, null, null)), (l()(), su(11, 0, null, null, 2, ":svg:linearGradient", [["id", "gold"], ["x1", "0%"], ["x2", "100%"], ["y1", "100%"], ["y2", "0%"]], null, null, null, null, null)), (l()(), su(12, 0, null, null, 0, ":svg:stop", [["offset", "0%"], ["style", "stop-color:#D4AC0D;stop-opacity:1"]], null, null, null, null, null)), (l()(), su(13, 0, null, null, 0, ":svg:stop", [["offset", "100%"], ["style", "stop-color:#F4D03F;stop-opacity:1"]], null, null, null, null, null)), (l()(), su(14, 0, null, null, 2, ":svg:linearGradient", [["id", "green"], ["x1", "0%"], ["x2", "100%"], ["y1", "100%"], ["y2", "0%"]], null, null, null, null, null)), (l()(), su(15, 0, null, null, 0, ":svg:stop", [["offset", "0%"], ["style", "stop-color:#196F3D;stop-opacity:1"]], null, null, null, null, null)), (l()(), su(16, 0, null, null, 0, ":svg:stop", [["offset", "100%"], ["style", "stop-color:#27AE60;stop-opacity:1"]], null, null, null, null, null)), (l()(), su(17, 0, null, null, 2, ":svg:linearGradient", [["id", "black"], ["x1", "0%"], ["x2", "100%"], ["y1", "100%"], ["y2", "0%"]], null, null, null, null, null)), (l()(), su(18, 0, null, null, 0, ":svg:stop", [["offset", "0%"], ["style", "stop-color:#17202A;stop-opacity:1"]], null, null, null, null, null)), (l()(), su(19, 0, null, null, 0, ":svg:stop", [["offset", "100%"], ["style", "stop-color:#34495E;stop-opacity:1"]], null, null, null, null, null)), (l()(), su(20, 0, null, null, 2, ":svg:linearGradient", [["id", "lightblue"], ["x1", "0%"], ["x2", "100%"], ["y1", "100%"], ["y2", "0%"]], null, null, null, null, null)), (l()(), su(21, 0, null, null, 0, ":svg:stop", [["offset", "0%"], ["style", "stop-color:#17202A;stop-opacity:1"]], null, null, null, null, null)), (l()(), su(22, 0, null, null, 0, ":svg:stop", [["offset", "100%"], ["style", "stop-color:#2E86C1;stop-opacity:1"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, oE)), gi(24, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne]), (l()(), iu(16777216, null, null, 1, null, cE)), gi(27, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, dE)), gi(29, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(30, 0, null, null, 3, ":svg:g", [], [[1, "width", 0], [1, "height", 0]], null, null, null, null)), (l()(), su(31, 0, null, null, 0, ":svg:rect", [["rx", "5"], ["ry", "5"], ["stroke", "black"], ["x", "0"]], [[1, "width", 0], [1, "height", 0], [1, "y", 0], [1, "fill", 0]], null, null, null, null)), (l()(), su(32, 0, null, null, 1, ":svg:text", [["dominant-baseline", "middle"], ["fill", "white"], ["font-size", "16"], ["font-weight", "bold"], ["text-anchor", "middle"]], [[1, "x", 0], [1, "y", 0]], null, null, null, null)), (l()(), _u(-1, null, ["Current"])), (l()(), su(34, 0, null, null, 3, ":svg:g", [], [[1, "width", 0], [1, "height", 0]], null, null, null, null)), (l()(), su(35, 0, null, null, 0, ":svg:rect", [["rx", "5"], ["ry", "5"], ["stroke", "black"]], [[1, "width", 0], [1, "height", 0], [1, "x", 0], [1, "y", 0], [1, "fill", 0]], null, null, null, null)), (l()(), su(36, 0, null, null, 1, ":svg:text", [["dominant-baseline", "middle"], ["fill", "white"], ["font-size", "16"], ["font-weight", "bold"], ["text-anchor", "middle"]], [[1, "x", 0], [1, "y", 0]], null, null, null, null)), (l()(), _u(-1, null, ["Locked"])), (l()(), su(38, 0, null, null, 3, ":svg:g", [], [[1, "width", 0], [1, "height", 0]], null, null, null, null)), (l()(), su(39, 0, null, null, 0, ":svg:rect", [["rx", "5"], ["ry", "5"], ["stroke", "black"]], [[1, "width", 0], [1, "height", 0], [1, "x", 0], [1, "y", 0], [1, "fill", 0]], null, null, null, null)), (l()(), su(40, 0, null, null, 1, ":svg:text", [["dominant-baseline", "middle"], ["fill", "white"], ["font-size", "16"], ["font-weight", "bold"], ["text-anchor", "middle"]], [[1, "x", 0], [1, "y", 0]], null, null, null, null)), (l()(), _u(-1, null, ["Available"])), (l()(), su(42, 0, null, null, 3, ":svg:g", [], [[1, "width", 0], [1, "height", 0]], null, null, null, null)), (l()(), su(43, 0, null, null, 0, ":svg:rect", [["rx", "5"], ["ry", "5"], ["stroke", "black"]], [[1, "width", 0], [1, "height", 0], [1, "x", 0], [1, "y", 0], [1, "fill", 0]], null, null, null, null)), (l()(), su(44, 0, null, null, 1, ":svg:text", [["dominant-baseline", "middle"], ["fill", "white"], ["font-size", "16"], ["font-weight", "bold"], ["text-anchor", "middle"]], [[1, "x", 0], [1, "y", 0]], null, null, null, null)), (l()(), _u(-1, null, ["Done"])), (l()(), iu(16777216, null, null, 1, null, hE)), gi(47, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, pE)), gi(49, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(50, 0, null, null, 1, "button", [["class", "btn btn-secondary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.clearQueue() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Clear queue"])), (l()(), iu(0, [["popTitle", 2]], null, 0, null, fE)), (l()(), iu(0, [["popContent", 2]], null, 0, null, gE))], (function (l, n) {
            var e = n.component;
            l(n, 24, 0, et(n, 24, 0, ei(n, 25).transform(e.conf.eras))), l(n, 27, 0, e.svg_data.nodes), l(n, 29, 0, e.svg_data.links), l(n, 47, 0, e.dataService.isUnlocked("queue_science")), l(n, 49, 0, e.dataService.isUnlocked("queue_science"))
        }), (function (l, n) {
            var e = n.component;
            l(n, 4, 0, e.svg_data.width + e.rank_sep, e.svg_data.height + e.node_height + 2 * e.node_sep + e.era_height), l(n, 7, 0, e.link_color), l(n, 30, 0, e.node_width, e.node_height), l(n, 31, 0, e.node_width, e.node_height, e.svg_data.height + 2 * e.node_sep + e.era_height, e.node_colors.current), l(n, 32, 0, e.node_width / 2, e.svg_data.height + e.node_height / 2 + 2 * e.node_sep + e.era_height), l(n, 34, 0, e.node_width, e.node_height), l(n, 35, 0, e.node_width, e.node_height, e.node_width + e.node_sep, e.svg_data.height + 2 * e.node_sep + e.era_height, e.node_colors.locked), l(n, 36, 0, e.node_width + e.node_sep + e.node_width / 2, e.svg_data.height + e.node_height / 2 + 2 * e.node_sep + e.era_height), l(n, 38, 0, e.node_width, e.node_height), l(n, 39, 0, e.node_width, e.node_height, 2 * (e.node_width + e.node_sep), e.svg_data.height + 2 * e.node_sep + e.era_height, e.node_colors.available), l(n, 40, 0, 2 * (e.node_width + e.node_sep) + e.node_width / 2, e.svg_data.height + e.node_height / 2 + 2 * e.node_sep + e.era_height), l(n, 42, 0, e.node_width, e.node_height), l(n, 43, 0, e.node_width, e.node_height, 3 * (e.node_width + e.node_sep), e.svg_data.height + 2 * e.node_sep + e.era_height, e.node_colors.done), l(n, 44, 0, 3 * (e.node_width + e.node_sep) + e.node_width / 2, e.svg_data.height + e.node_height / 2 + 2 * e.node_sep + e.era_height)
        }))
    }

    function yE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-science", [], null, [["document", "keydown"], ["document", "keyup"]], (function (l, n, e) {
            var t = !0;
            return "document:keydown" === n && (t = !1 !== ei(l, 1).handleKeydownEvent(e) && t), "document:keyup" === n && (t = !1 !== ei(l, 1).handleKeyupEvent(e) && t), t
        }), mE, rE)), gi(1, 114688, null, 0, uE, [Pg, zg, Tg], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var vE = jt("app-science", uE, yE, {}, {}, []); class bE {
        constructor(l) {
            this.dataService = l, this.icons = ug
        }
        ngOnInit() {
            this.player = -1 == this.id ? new Eg(-1, "Unknown civilization") : this.dataService.player(this.id)
        }
        style() {
            return {
                color: this.dataService.color(this.player.id),
                "-webkit-text-fill-color": this.dataService.color2(this.player.id),
                "-webkit-text-stroke-width": "1px",
                "-webkit-text-stroke-color": this.dataService.color(this.player.id)
            }
        }
    }
    var _E = st({
        encapsulation: 0,
        styles: [[""]],
        data: {}
    });

    function wE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, null, null, null, null, null, null, null)), (l()(), su(1, 0, null, null, 3, "span", [], null, null, null, null, null)), yi(512, null, Oa, Na, [fe, Ne, be]), gi(3, 278528, null, 0, Ba, [Oa], {
            ngStyle: [0, "ngStyle"]
        }, null), (l()(), su(4, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(5, null, [" ", "\n"]))], (function (l, n) {
            l(n, 3, 0, n.component.style())
        }), (function (l, n) {
            var e = n.component;
            l(n, 4, 0, e.icons.player), l(n, 5, 0, e.player.name)
        }))
    }

    function xE(l) {
        return ku(0, [(l()(), iu(16777216, null, null, 1, null, wE)), gi(1, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 1, 0, n.component.player)
        }), null)
    }
    class kE {
        constructor(l, n, e, t, i) {
            this.conf = l, this.data = n, this.activatedRoute = e, this.dataService = t, this.router = i, this.ctrl = !1, this.icons = ug, this.unicode = {
                pop: "\uf0c0",
                flag: "\uf024",
                star: "\uf005",
                food: "\uf6d7",
                gold: "\uf51e",
                prod: "\uf6e3",
                culture: "\uf630",
                science: "\uf0c3",
                faith: "\uf683",
                recruitment: "\uf505",
                plague: "\uf714",
                connected: "\uf1b8"
            }, this.img_src = ["vil1", "vil2", "vil3", "vil4", "vil5", "vil1i", "vil2i", "vil3i", "vil4i", "vil5i", "troop", "troop1", "cart", "scout", "spy", "worker", "archeologist", "imp1", "imp2", "imp3", "imp4", "imp5", "imp6", "imp7", "imp8", "imp52", "imp62", "ruins", "road_0", "road_tbr", "road_tbl", "road_tlr", "road_blr", "road_4", "road_lr", "road_td", "road_tl", "road_tr", "road_br", "road_bl", "rail_0", "rail_tbr", "rail_tbl", "rail_tlr", "rail_blr", "rail_4", "rail_lr", "rail_td", "rail_tl", "rail_tr", "rail_br", "rail_bl"], this.img = {}, this.menu = {
                show: !1,
                desc: "",
                x: 0,
                y: 0,
                city: void 0,
                ownerId: 0
            }, this.attack = void 0, this.spy = void 0, this.gold = void 0, this.scout = void 0, this.archeologist = void 0, this.trade = void 0, this.worker = void 0, this.highlight = void 0, this.view = {
                x: -320,
                y: -240,
                zoom: 16,
                width: 640,
                height: 480,
                font_size: 2,
                zoom_min: 4,
                zoom_max: 16,
                zoom_step: 2,
                base_size: 8
            }
        }
        handleKeydownEvent(l) {
            this.isCtrl(l.key) ? this.ctrl = !0 : 27 == l.keyCode && (this.scout || this.worker) ? (this.escape(), l.preventDefault()) : 27 == l.keyCode ? this.escape() : 37 == l.keyCode && "INPUT" != l.target.tagName.toUpperCase() ? (this.view.x -= 20, this.data.world_pos.x = this.view.x, l.preventDefault()) : 38 == l.keyCode && "INPUT" != l.target.tagName.toUpperCase() ? (this.view.y -= 20, this.data.world_pos.y = this.view.y, l.preventDefault()) : 39 == l.keyCode && "INPUT" != l.target.tagName.toUpperCase() ? (this.view.x += 20, this.data.world_pos.x = this.view.x, l.preventDefault()) : 40 == l.keyCode && "INPUT" != l.target.tagName.toUpperCase() && (this.view.y += 20, this.data.world_pos.y = this.view.y, l.preventDefault())
        }
        handleKeyupEvent(l) {
            this.isCtrl(l.key) && (this.ctrl = !1)
        }
        ngOnInit() {
            this.data.world_zoom && (this.view.zoom = this.data.world_zoom), this.activatedRoute.queryParams.subscribe(l => {
                if (this.view.width = this.container.nativeElement.offsetWidth, this.view.height = this.container.nativeElement.offsetHeight, l.x && l.y) {
                    let n = l.y;
                    this.view.x = l.x * this.tileSize() - this.view.width / 2, this.view.y = n * this.tileSize() - this.view.height / 2
                } else this.data.world_pos ? (this.view.x = this.data.world_pos.x, this.view.y = this.data.world_pos.y) : (this.view.x = this.view.width / 2, this.view.y = this.view.height / 2);
                this.data.world_pos = {
                    x: this.view.x,
                    y: this.view.y
                }, this.data.world_pos.x = this.view.x, this.data.world_pos.y = this.view.y;
                let n = 0,
                    e = this.img_src.length;
                this.img_src.forEach(l => {
                    this.img[l] = new Image, this.img[l].src = "assets/img/" + l + ".png", this.img[l].onload = () => {
                        ++n == e && this.initCanvas()
                    }
                })
            })
        }
        escape() {
            this.selectTile && this.container.nativeElement.removeEventListener("mousemove", this.selectTile), this.selectTileDone && this.container.nativeElement.removeEventListener("mousedown", this.selectTileDone), this.scout = void 0, this.archeologist = void 0, this.worker = void 0, this.highlight = void 0, this.label = void 0, this.menu.show = !1
        }
        isCtrl(l) {
            return "Control" == l || "Meta" == l
        }
        ngOnDestroy() {
            cancelAnimationFrame(this.animationFrame)
        }
        initCanvas() {
            this.canvas.nativeElement.width = this.view.width, this.canvas.nativeElement.height = this.view.height, this.ctx = this.canvas.nativeElement.getContext("2d"), this.canvast.nativeElement.width = this.view.width, this.canvast.nativeElement.height = this.view.height, this.ctxt = this.canvast.nativeElement.getContext("2d"), this.container.nativeElement.addEventListener("mousedown", l => {
                let n = this.view.x + l.clientX,
                    e = this.view.y + l.clientY,
                    t = l => {
                        this.view.x = n - l.clientX, this.view.y = e - l.clientY
                    };
                this.container.nativeElement.addEventListener("mousemove", t), window.addEventListener("mouseup", l => {
                    this.container.nativeElement.removeEventListener("mousemove", t), this.data.world_pos.x = this.view.x, this.data.world_pos.y = this.view.y
                })
            }), this.container.nativeElement.addEventListener("click", l => {
                let n = Math.floor((this.view.x + l.offsetX) / this.tileSize()),
                    e = Math.floor((this.view.y + l.offsetY) / this.tileSize()),
                    t = this.dataService.city(n, e);
                if (this.dataService.isDiscovered(0, n, e))
                    if (t && !this.worker) this.label = t.name, this.menu = Object.assign({}, this.menu, {
                        show: !0,
                        city: t,
                        x: t.x * this.tileSize() - this.view.x - (t.ownerid ? 66 : 122) + this.tileSize() / 2,
                        y: t.y * this.tileSize() - this.view.y,
                        ownerId: t.ownerid
                    }), this.highlight = {
                        x: n,
                        y: e
                    };
                    else {
                        let l = this.dataService.getTerrain(n, e),
                            t = this.dataService.getImprovement(n, e),
                            i = this.dataService.getRoad(n, e),
                            s = this.dataService.hasRuin(n, e);
                        this.label = this.conf.terrains[l].name, i && (this.label += " - " + this.conf.improvements[i].name), s && (this.label += " - Ruins"), t ? (this.label += " - " + this.conf.improvements[t].name + "<br/>" + this.conf.improvements[t].description, this.highlight = {
                            x: n,
                            y: e
                        }) : this.highlight = void 0, this.menu.show = !1
                    }
                else this.menu.show = !1, this.label = void 0, this.highlight = void 0
            }), this.container.nativeElement.addEventListener("wheel", l => {
                l.preventDefault(), l.deltaY < 0 ? this.zoomIn(l.offsetX, l.offsetY) : this.zoomOut(l.offsetX, l.offsetY), this.menu.show = !1
            }), this.animationFrame = requestAnimationFrame(this.drawAll.bind(this))
        }
        createWorker() {
            let l = this.isWorkerAvailable();
            l && (this.menu.show = !1, this.worker = {
                x: 0,
                y: 0,
                type: 0,
                level: l
            })
        }
        createArcheologist() {
            this.isArcheologistAvailable() && (this.menu.show = !1, this.archeologist = {
                x: this.menu.city.x,
                y: this.menu.city.y
            }, this.selectTile = l => {
                this.archeologist.x = Math.floor((this.view.x + l.offsetX) / this.tileSize()), this.archeologist.y = Math.floor((this.view.y + l.offsetY) / this.tileSize()), this.archeologist.x < -this.conf.init.map_size && (this.archeologist.x = -this.conf.init.map_size), this.archeologist.x > this.conf.init.map_size && (this.archeologist.x = this.conf.init.map_size), this.archeologist.y < -this.conf.init.map_size && (this.archeologist.y = -this.conf.init.map_size), this.archeologist.y > this.conf.init.map_size && (this.archeologist.y = this.conf.init.map_size)
            }, this.selectTileDone = l => {
                0 == l.button ? this.dataService.hasRuin(this.archeologist.x, this.archeologist.y) && (this.menu.show = !1, this.container.nativeElement.removeEventListener("mousemove", this.selectTile), this.container.nativeElement.removeEventListener("mousedown", this.selectTileDone), this.data.archeologists.push({
                    from: {
                        x: this.menu.city.x,
                        y: this.menu.city.y
                    },
                    to: {
                        x: this.archeologist.x,
                        y: this.archeologist.y
                    },
                    ownerid: 0,
                    destid: 0,
                    dist: this.dataService.distance(this.menu.city.x, this.menu.city.y, this.archeologist.x, this.archeologist.y),
                    progress: 0,
                    speed: this.dataService.speedNoCity("archeologist", 0, this.menu.city, this.archeologist),
                    returning: !1
                }), this.menu.city.troops.archeologist--, this.menu.city.troops.archeologist || delete this.menu.city.troops.archeologist, this.archeologist = void 0) : this.escape()
            }, this.container.nativeElement.addEventListener("mousemove", this.selectTile), this.container.nativeElement.addEventListener("mousedown", this.selectTileDone))
        }
        workerSelect(l, n = !1) {
            this.dataService.isImprovementAvailable(l, this.worker.level, this.menu.city) && (this.worker.type = l.id, this.worker.roadto = n, this.selectTile = l => {
                this.worker.x = Ng.constraint(Math.floor((this.view.x + l.offsetX) / this.tileSize()), this.conf.init.map_size, -this.conf.init.map_size), this.worker.y = Ng.constraint(Math.floor((this.view.y + l.offsetY) / this.tileSize()), this.conf.init.map_size, -this.conf.init.map_size)
            }, this.selectTileDone = l => {
                0 == l.button ? this.isImprovementAllowed(this.worker.x, this.worker.y, this.worker.type) && (this.menu.show = !1, this.container.nativeElement.removeEventListener("mousemove", this.selectTile), this.container.nativeElement.removeEventListener("mousedown", this.selectTileDone), this.isWorkerAvailable() && this.dataService.createWorker(this.menu.city, this.worker.type, this.worker.x, this.worker.y, this.worker.level, this.worker.roadto), this.worker = void 0) : this.escape()
            }, this.container.nativeElement.addEventListener("mousemove", this.selectTile), this.container.nativeElement.addEventListener("mousedown", this.selectTileDone))
        }
        sendScout(l = !1) {
            this.isScoutAvailable() && (this.menu.show = !1, this.scout = {
                x: this.menu.city.x,
                y: this.menu.city.y,
                route: []
            }, l ? (this.scout.x = this.menu.city.x, this.scout.y = this.menu.city.y, this.createScout(!0)) : (this.selectTile = l => {
                this.scout.x = Math.floor((this.view.x + l.offsetX) / this.tileSize()), this.scout.y = Math.floor((this.view.y + l.offsetY) / this.tileSize()), this.scout.x < -this.conf.init.map_size && (this.scout.x = -this.conf.init.map_size), this.scout.x > this.conf.init.map_size && (this.scout.x = this.conf.init.map_size), this.scout.y < -this.conf.init.map_size && (this.scout.y = -this.conf.init.map_size), this.scout.y > this.conf.init.map_size && (this.scout.y = this.conf.init.map_size)
            }, this.selectTileDone = l => {
                0 == l.button ? this.ctrl ? this.scout.route.push({
                    x: this.scout.x,
                    y: this.scout.y
                }) : (this.scout.route.length && (this.scout.route.push({
                    x: this.scout.x,
                    y: this.scout.y
                }), this.scout.route.push({
                    x: this.menu.city.x,
                    y: this.menu.city.y
                }), this.scout.x = this.scout.route[0].x, this.scout.y = this.scout.route[0].y), this.menu.show = !1, this.container.nativeElement.removeEventListener("mousemove", this.selectTile), this.container.nativeElement.removeEventListener("mousedown", this.selectTileDone), this.createScout(!1)) : this.escape()
            }, this.container.nativeElement.addEventListener("mousemove", this.selectTile), this.container.nativeElement.addEventListener("mousedown", this.selectTileDone)))
        }
        createScout(l) {
            this.isScoutAvailable() && this.dataService.createScout(this.menu.city, l, this.scout.x, this.scout.y, this.scout.route), this.scout = void 0
        }
        viewCity() {
            this.router.navigate(["/game/city/" + this.menu.city.id])
        }
        spyCity() {
            if (!this.isSpyAvailable()) return;
            this.menu.show = !1;
            let l = this.dataService.closestCity(this.menu.city.x, this.menu.city.y);
            this.spy = {
                from: l ? l.id : void 0,
                to: this.menu.city.id,
                spies: {}
            }
        }
        canAttack() {
            return this.menu.city.ownerid <= 1 || ("string" == typeof this.menu.city.ownerid && (this.menu.city.ownerid = parseInt(this.menu.city.ownerid)), this.dataService.atWar(0, this.menu.city.ownerid))
        }
        isSpyAvailable() {
            return this.dataService.troopNbById(0, "spy", !1, !1) > 0
        }
        isScoutAvailable() {
            return !(!this.menu.city.troops.scout && !this.menu.city.troops.explorer)
        }
        isCaravanAvailable() {
            return !(!this.menu.city.troops.caravan || this.dataService.tradeRouteNb() >= this.dataService.maxTradeRoute())
        }
        isCaravelAvailable() {
            return !(!this.menu.city.troops.caravel || this.dataService.coloniesAvailable() <= 0)
        }
        isWorkerAvailable() {
            return this.menu.city.troops.engineer ? 2 : this.menu.city.troops.worker ? 1 : 0
        }
        isArcheologistAvailable() {
            return !!this.menu.city.troops.archeologist
        }
        createColony() {
            this.isCaravelAvailable() && (this.menu.city.troops.caravel--, this.data.colonies.push(this.menu.city.id), this.menu.show = !1)
        }
        createTrade() {
            this.isCaravanAvailable() && (this.menu.show = !1, this.trade = {
                from: this.menu.city,
                cities: this.dataService.availableCitiesForTrade(this.menu.city),
                values: []
            }, this.trade.values = this.trade.cities.map(l => this.dataService.tradeRouteValue(this.menu.city, l)))
        }
        doCreateTrade(l) {
            if (!this.isCaravanAvailable()) return;
            let n = this.trade.cities[l];
            this.data.trades.push({
                ownerid: 0,
                destid: n.ownerid,
                from: {
                    x: this.trade.from.x,
                    y: this.trade.from.y
                },
                to: {
                    x: n.x,
                    y: n.y
                }
            }), this.trade.from.troops.caravan--, this.trade = void 0
        }
        isGiftAvailable() {
            return !!this.dataService.haveRelation(0, this.menu.ownerId) && !this.dataService.atWar(0, this.menu.ownerId)
        }
        orderedCities(l) {
            return this.dataService.player().cities.filter(n => n.id != l).sort((n, e) => {
                let t = this.dataService.cityDistance(n.id, l),
                    i = this.dataService.cityDistance(e.id, l);
                return t < i ? -1 : t > i ? 1 : 0
            })
        }
        sendGold() {
            if (0 != this.menu.ownerId && !this.isGiftAvailable()) return;
            let l = this.dataService.closestCity(this.menu.city.x, this.menu.city.y);
            this.gold = {
                from: l ? l.id : void 0,
                to: this.menu.city.id,
                gold: {}
            }
        }
        doSpy(l) {
            if (!this.isSpyAvailable()) return;
            let n = this.dataService.city(this.spy.to);
            !l.troops.spy || this.spy.spies[l.id] > l.troops.spy || this.spy.spies[l.id] < 0 || (this.data.spies.push({
                ownerid: 0,
                destid: n.ownerid,
                from: {
                    x: l.x,
                    y: l.y
                },
                to: {
                    x: n.x,
                    y: n.y
                },
                dist: this.dataService.distance(l.x, l.y, n.x, n.y),
                speed: this.dataService.speed("spy", 0, l, n),
                progress: 0,
                spies: this.spy.spies[l.id],
                returning: !1
            }), l.troops.spy -= this.spy.spies[l.id], delete this.spy.spies[l.id])
        }
        setMaxGold(l) {
            this.gold.gold[l.id] = Math.floor(l.gold)
        }
        doSendGold(l) {
            if (this.gold && this.gold.gold[l.id]) {
                let n = this.dataService.city(this.gold.to);
                if (this.gold.gold[l.id] > l.gold || this.gold.gold[l.id] < 0) return;
                this.dataService.createGold(l, n, this.gold.gold[l.id]), delete this.gold.gold[l.id]
            }
        }
        attackCity() {
            if (!this.canAttack()) return;
            let l = this.dataService.closestCity(this.menu.city.x, this.menu.city.y);
            this.attack = {
                from: l ? l.id : void 0,
                to: this.menu.city.id,
                troops: {},
                noreturn: !1,
                burn: !1
            }, this.dataService.player().cities.filter(l => l.id != this.menu.city.id).forEach(l => this.attack.troops[l.id] = {})
        }
        isTroopSelectable(l) {
            return 0 == this.menu.city.ownerid ? "caravel" != l : !this.conf.troops[l].special
        }
        doAttack(l) {
            if (this.troopNb(l) > 0) {
                let n = this.dataService.city(this.attack.to);
                for (let i in this.attack.troops[l.id])
                    if (!l.troops[i] || this.attack.troops[l.id][i] > l.troops[i] || this.attack.troops[l.id][i] < 0) return;
                let e = this.attack.noreturn,
                    t = this.attack.burn;
                this.attack.troops[l.id].governor || (e = !1), this.attack.troops[l.id].governor || (t = !1), this.attack.burn && (this.attack.noreturn = !1), this.data.attacks.push({
                    ownerid: 0,
                    destid: n.ownerid,
                    from: {
                        x: l.x,
                        y: l.y
                    },
                    to: {
                        x: n.x,
                        y: n.y
                    },
                    dist: this.dataService.distance(l.x, l.y, n.x, n.y),
                    speed: this.attackSpeed(l, n),
                    progress: 0,
                    troops: Object.assign({}, this.attack.troops[l.id]),
                    returning: !1,
                    agressive: l.ownerid != n.ownerid,
                    noreturn: e,
                    burn: t
                }), Object.keys(this.attack.troops[l.id]).forEach(n => {
                    l.troops[n] -= this.attack.troops[l.id][n], l.troops[n] || delete l.troops[n]
                }), this.attack.troops[l.id] = {}
            }
        }
        troopNb(l) {
            return Object.keys(this.attack.troops[l.id]).length ? Object.values(this.attack.troops[l.id]).reduce((l, n) => l + n) : 0
        }
        troops(l) {
            return Object.values(this.conf.troops).filter(n => (l || !n.special) && this.dataService.troopNbById(0, n.id, !1, !1))
        }
        attackSpeed(l, n) {
            return this.dataService.attackSpeed(this.attack.troops[l.id], 0, l, n)
        }
        fillTroops(l, n) {
            this.attack.troops[l.id][n] = l.troops[n]
        }
        drawAll() {
            this.attack || this.spy || this.gold || this.trade ? setTimeout(this.drawAll.bind(this), 100) : (this.draw(), this.drawTroops(), this.animationFrame = requestAnimationFrame(this.drawAll.bind(this)))
        }
        draw() {
            let l = this.tileSize();
            this.ctx.clearRect(0, 0, this.view.width, this.view.height), this.ctx.strokeStyle = "rgba(0,0,0,.6)";
            let n = .2 * l;
            if (this.dataService.player().discovered.forEach((e, t) => {
                    if (e) {
                        let e = this.dataService.indexToCoords(t),
                            i = e[0] * l - this.view.x,
                            s = e[1] * l - this.view.y;
                        if (this.isVisible(i, s, l)) {
                            let t = this.dataService.getTerrain(e[0], e[1]);
                            this.ctx.fillStyle = this.data.world_hide_ter ? 0 == t ? this.conf.terrains[0].color : this.conf.terrains[1].color : this.conf.terrains[t].color, this.ctx.globalCompositeOperation = "destination-over", this.ctx.fillRect(i, s, l + 1, l + 1), this.ctx.globalCompositeOperation = "source-over";
                            let u = this.dataService.city(e[0], e[1]),
                                r = this.dataService.getRoad(e[0], e[1]);
                            if (!r && u && (r = 1), r) {
                                let n = 6 == r ? "rail" : "road";
                                s += l / 5;
                                let t = this.dataService.getRoad(e[0], e[1] + 1) || this.dataService.city(e[0], e[1] + 1),
                                    a = this.dataService.getRoad(e[0], e[1] - 1) || this.dataService.city(e[0], e[1] - 1),
                                    o = this.dataService.getRoad(e[0] - 1, e[1]) || this.dataService.city(e[0] - 1, e[1]),
                                    c = this.dataService.getRoad(e[0] + 1, e[1]) || this.dataService.city(e[0] + 1, e[1]);
                                a && t && o && c ? this.ctx.drawImage(this.img[n + "_4"], i, s, l + 1, l + 1) : a && t && c ? this.ctx.drawImage(this.img[n + "_tbr"], i, s, l + 1, l + 1) : a && t && o ? this.ctx.drawImage(this.img[n + "_tbl"], i, s, l + 1, l + 1) : a && o && c ? this.ctx.drawImage(this.img[n + "_tlr"], i, s, l + 1, l + 1) : t && o && c ? this.ctx.drawImage(this.img[n + "_blr"], i, s, l + 1, l + 1) : a && c ? this.ctx.drawImage(this.img[n + "_tr"], i, s, l + 1, l + 1) : a && o ? this.ctx.drawImage(this.img[n + "_tl"], i, s, l + 1, l + 1) : t && c ? this.ctx.drawImage(this.img[n + "_br"], i, s, l + 1, l + 1) : t && o ? this.ctx.drawImage(this.img[n + "_bl"], i, s, l + 1, l + 1) : t || a ? this.ctx.drawImage(this.img[n + "_td"], i - 1, s - 1, l + 2, l + 2) : o || c ? this.ctx.drawImage(this.img[n + "_lr"], i, s, l + 1, l + 1) : u || this.ctx.drawImage(this.img[n + "_0"], i, s, l + 1, l + 1), s = e[1] * l - this.view.y
                            }
                            if (!this.data.world_hide_ter && (2 == t || 4 == t)) {
                                this.ctx.lineWidth = 2, this.ctx.strokeStyle = "rgba(0,0,0,.4)";
                                let n = .2,
                                    e = .7,
                                    t = .3,
                                    u = .4;
                                this.ctx.beginPath(), this.ctx.moveTo(i + l * n, s + l * e), this.ctx.bezierCurveTo(i + l * n, s + l * (e - t), i + l * (n + u), s + l * (e - t), i + l * (n + u), s + l * e), this.ctx.stroke(), n = .4, e = .45, this.ctx.beginPath(), this.ctx.moveTo(i + l * n, s + l * e), this.ctx.bezierCurveTo(i + l * n, s + l * (e - t), i + l * (n + u), s + l * (e - t), i + l * (n + u), s + l * e), this.ctx.stroke()
                            }
                            let a = this.dataService.getImprovement(e[0], e[1]);
                            if (a) {
                                let e = .6 * l;
                                this.ctx.drawImage(this.img["imp" + a], i + n, s + n, e, e)
                            }
                            if (this.dataService.hasRuin(e[0], e[1]) && this.dataService.player().orientation >= 100) {
                                let e = .6 * l;
                                this.ctx.drawImage(this.img.ruins, i + n, s + n, e, e)
                            }
                            if (u) {
                                this.ctx.lineWidth = 1;
                                let n = 1;
                                this.dataService.hasBuilding(u, "palace") ? n = 5 : this.dataService.hasBuilding(u, "police") ? n = 4 : this.dataService.hasBuilding(u, "town_hall") ? n = 3 : this.dataService.hasBuilding(u, "lo") && (n = 2);
                                let e = .8 * l * Math.pow(.8, 3 - n),
                                    t = l - e,
                                    r = l - e - this.fontSize(),
                                    a = "";
                                if (this.dataService.currentScienceRank(u.ownerid) >= 16 && (a = "i"), this.ctx.drawImage(this.img["vil" + n + a], i + t / 2, s + r, e, e), this.cityName(u, i, s), this.ctx.font = "bold " + this.fontSize() + 'px "Font Awesome 5 Free"', u.plague && u.plague > 0) {
                                    this.ctx.fillStyle = "#000";
                                    let l = Math.floor(this.view.zoom);
                                    this.ctx.fillText(this.unicode.plague, i + l, s + l)
                                }
                            }
                        }
                    }
                }), this.ctx.lineWidth = 2, this.highlight) {
                let n = this.highlight.x * l - this.view.x,
                    e = this.highlight.y * l - this.view.y;
                this.ctx.fillStyle = "rgba(51,168,255,.2)", this.ctx.strokeStyle = "rgba(51,168,255,1)", this.ctx.fillRect(n - l, e - l, 3 * l + 1, 3 * l + 1), this.ctx.strokeRect(n - l, e - l, 3 * l + 1, 3 * l + 1)
            }
            if (this.scout) {
                this.ctx.strokeStyle = "#000";
                let n = this.realPos(this.menu.city.x, this.menu.city.y),
                    e = this.realPos(this.scout.x, this.scout.y);
                if (this.scout.route.length) {
                    let l = {
                        x: n.x,
                        y: n.y
                    };
                    this.scout.route.forEach(n => {
                        let e = this.realPos(n.x, n.y);
                        this.drawLine(this.ctx, l.x, l.y, e.x, e.y), l = e
                    }), this.drawLine(this.ctx, l.x, l.y, e.x, e.y)
                } else this.drawLine(this.ctx, n.x, n.y, e.x, e.y);
                this.ctx.rect(this.scout.x * l - this.view.x, this.scout.y * l - this.view.y, l, l), this.ctx.stroke()
            }
            if (this.archeologist) {
                this.ctx.strokeStyle = "#000";
                let n = this.realPos(this.menu.city.x, this.menu.city.y),
                    e = this.realPos(this.archeologist.x, this.archeologist.y);
                this.drawLine(this.ctx, n.x, n.y, e.x, e.y), this.ctx.rect(this.archeologist.x * l - this.view.x, this.archeologist.y * l - this.view.y, l, l), this.ctx.stroke()
            }
            if (this.worker && this.worker.type) {
                this.ctx.strokeStyle = "#000";
                let n = this.realPos(this.menu.city.x, this.menu.city.y, !1),
                    e = this.realPos(this.worker.x, this.worker.y, !1);
                this.drawLine(this.ctx, n.x + l / 2, n.y + l / 2, e.x + l / 2, e.y + l / 2), this.ctx.rect(this.worker.x * l - this.view.x, this.worker.y * l - this.view.y, l, l), this.ctx.stroke();
                let t = .6 * l,
                    i = .2 * l;
                this.ctx.drawImage(this.img["imp" + this.worker.type], e.x + i, e.y + i, t, t), this.isImprovementAllowed(this.worker.x, this.worker.y, this.worker.type) || (this.ctx.fillStyle = "rgba(255,0,0,0.2)", this.ctx.fillRect(e.x, e.y, l, l))
            }
        }
        isImprovementAllowed(l, n, e) {
            return this.dataService.isImprovementAllowed(l, n, e, this.menu.city, this.worker.roadto)
        }
        cityName(l, n, e) {
            let t = .75 * this.fontSize() / 2,
                i = .75 * this.fontSize() / 2,
                s = .75 * this.fontSize() / 2,
                u = this.data.players.find(n => n.id == l.ownerid);
            this.ctx.font = "bold " + this.fontSize() + "px Arial";
            let r = this.ctx.measureText(l.name).width;
            this.ctx.font = "bold " + this.fontSize() + 'px "Font Awesome 5 Free"';
            let a = "",
                o = "",
                c = "";
            4 != this.view.zoom && (a += l.capital ? this.unicode.star : this.unicode.flag, l.bonus && (a += " " + this.unicode[l.bonus]), a += " ", this.dataService.cityConnectedToCapital(l) && (o = " " + this.unicode.connected)), 16 == this.view.zoom && (o += " " + this.unicode.pop + " ", c = "" + this.dataService.pop(l));
            let d = this.ctx.measureText(a).width,
                h = this.ctx.measureText(o).width,
                p = r + d + h + this.ctx.measureText(c).width + 2 * i,
                f = .75 * this.fontSize() + 2 * s;
            this.ctx.fillStyle = this.dataService.color2(u.id), this.ctx.strokeStyle = this.dataService.color(u.id), n = n + this.tileSize() / 2 - p / 2, e = e + this.tileSize() - f + 2 * s, this.ctx.beginPath(), this.ctx.moveTo(n + t, e), this.ctx.lineTo(n + p - t, e), this.ctx.quadraticCurveTo(n + p, e, n + p, e + t), this.ctx.lineTo(n + p, e + f - t), this.ctx.quadraticCurveTo(n + p, e + f, n + p - t, e + f), this.ctx.lineTo(n + t, e + f), this.ctx.quadraticCurveTo(n, e + f, n, e + f - t), this.ctx.lineTo(n, e + t), this.ctx.quadraticCurveTo(n, e, n + t, e), this.ctx.closePath(), this.ctx.fill(), this.ctx.stroke(), this.ctx.fillStyle = this.dataService.color(u.id), 4 != this.view.zoom && this.ctx.fillText(a, n + i, e + f - s), this.ctx.font = "bold " + this.fontSize() + "px Arial", this.ctx.fillText(l.name, n + i + d, e + f - s), this.ctx.font = "bold " + this.fontSize() + 'px "Font Awesome 5 Free"', this.ctx.fillText(o, n + i + d + r, e + f - s), this.ctx.font = "bold " + this.fontSize() + "px Arial", this.ctx.fillText(c, n + i + d + r + h, e + f - s)
        }
        drawTroops() {
            this.ctxt.clearRect(0, 0, this.view.width, this.view.height), this.ctxt.font = "bold " + this.fontSize() + 'px "Font Awesome 5 Free"', this.data.world_hide_tr || (this.ctxt.lineWidth = this.view.zoom > 4 ? 2 : 1, this.ctxt.setLineDash([2, 2]), this.data.trades.forEach(l => {
                if (0 == l.ownerid || 0 == l.destid) {
                    this.ctxt.strokeStyle = this.dataService.color2(l.ownerid);
                    let n = this.realPos(l.from.x, l.from.y),
                        e = this.realPos(l.to.x, l.to.y);
                    this.drawLine(this.ctxt, n.x, n.y, e.x, e.y)
                }
            })), this.data.world_hide_un || (this.ctxt.setLineDash([5, 10]), this.data.goldtransfers.forEach(l => {
                this.drawMov(l, "cart")
            }), this.data.scouts.forEach(l => {
                this.drawMov(l, "scout")
            }), this.data.attacks.forEach(l => {
                this.dataService.currentScienceRank(l.ownerid) >= 13 ? this.drawMov(l, "troop1") : this.drawMov(l, "troop")
            }), this.data.spies.forEach(l => {
                this.drawMov(l, "spy")
            }), this.data.workers.forEach(l => {
                this.drawMov(l, "worker")
            }), this.data.archeologists.forEach(l => {
                this.drawMov(l, "archeologist")
            }))
        }
        drawMov(l, n) {
            let e = this.movPos(l),
                t = this.dataService.city(l.to.x, l.to.y) ? this.dataService.city(l.to.x, l.to.y).ownerid : l.destid,
                i = 0 == l.ownerid || 0 == t && !l.returning && "scout" != n;
            if (i || this.dataService.minDistFromCity(e) <= 1.5) {
                if (i) {
                    let n = this.realPos(l.from.x, l.from.y),
                        e = this.realPos(l.to.x, l.to.y);
                    this.ctxt.strokeStyle = 0 == l.ownerid ? "#000" : "#F00", this.drawLine(this.ctxt, n.x, n.y, e.x, e.y)
                }
                this.isVisible(e.x, e.y, this.tileSize() / 3) && (this.ctxt.drawImage(this.img[n], e.x - this.tileSize() / 6, e.y - this.tileSize() / 6, this.tileSize() / 3, this.tileSize() / 3), this.ctxt.fillStyle = this.dataService.color2(l.ownerid), this.ctxt.fillText(this.unicode.flag, e.x + this.tileSize() / 6, e.y))
            }
        }
        isVisible(l, n, e) {
            return l + e >= 0 && l <= this.view.width && n + e >= 0 && n <= this.view.height
        }
        movPos(l) {
            let n = this.realPos(l.from.x, l.from.y),
                e = this.realPos(l.to.x, l.to.y);
            return l.progress <= l.dist ? {
                x: n.x + (e.x - n.x) * l.progress / l.dist,
                y: n.y + (e.y - n.y) * l.progress / l.dist
            } : {
                x: n.x + (e.x - n.x) * (2 - l.progress / l.dist),
                y: n.y + (e.y - n.y) * (2 - l.progress / l.dist)
            }
        }
        realPos(l, n, e = !0) {
            return {
                x: l * this.tileSize() - this.view.x + (e ? this.tileSize() / 2 : 0),
                y: n * this.tileSize() - this.view.y + (e ? this.tileSize() / 2 : 0)
            }
        }
        drawLine(l, n, e, t, i, s = !1) {
            if (l.beginPath(), l.moveTo(n, e), l.lineTo(t, i), s) {
                let s = 10,
                    u = Math.atan2(i - e, t - n);
                l.lineTo(t - s * Math.cos(u - Math.PI / 6), i - s * Math.sin(u - Math.PI / 6)), l.moveTo(t, i), l.lineTo(t - s * Math.cos(u + Math.PI / 6), i - s * Math.sin(u + Math.PI / 6))
            }
            l.stroke()
        }
        fontSize() {
            switch (this.view.zoom) {
                case 16:
                    return 10 * this.view.font_size;
                case 8:
                    return 7 * this.view.font_size;
                case 4:
                    return 6 * this.view.font_size
            }
        }
        tileSize() {
            return this.view.base_size * this.view.zoom
        }
        zoomOut(l = -1, n = -1) {
            return this.view.zoom > this.view.zoom_min && (-1 != l && -1 != n || (l = this.view.width / 2, n = this.view.height / 2), this.view.x = (this.view.x + l) / this.view.zoom_step - l, this.view.y = (this.view.y + n) / this.view.zoom_step - n, this.view.zoom = this.view.zoom / this.view.zoom_step, this.data.world_pos.x = this.view.x, this.data.world_pos.y = this.view.y, this.data.world_zoom = this.view.zoom, !0)
        }
        zoomIn(l = -1, n = -1) {
            return this.view.zoom < this.view.zoom_max && (-1 != l && -1 != n || (l = this.view.width / 2, n = this.view.height / 2), this.view.x = (this.view.x + l) * this.view.zoom_step - l, this.view.y = (this.view.y + n) * this.view.zoom_step - n, this.view.zoom = this.view.zoom * this.view.zoom_step, this.data.world_zoom = this.view.zoom, this.data.world_pos.x = this.view.x, this.data.world_pos.y = this.view.y, !0)
        }
        center() {
            this.view.x = -this.view.width / 2, this.view.y = -this.view.height / 2
        }
        mouseenter(l, n, e = !1) {
            let t = n.description;
            n.description2 && (t += "<br/>" + n.description2), n.road || (t += "<br/>Worker will be consumed."), l.open({
                title: n.name + (e ? " To" : ""),
                desc: t,
                cost: n.cost,
                time: n.time
            })
        }
        mouseleave(l) {
            l.close()
        }
    }
    var SE = st({
        encapsulation: 0,
        styles: [[".map-menu[_ngcontent-%COMP%]{background:rgba(0,0,0,.6);border-radius:5px;padding:2px 8px}.menu-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:50%;width:24px;height:24px;color:#fff;font-size:18px;text-align:center;cursor:pointer;margin:2px}.menu-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover{background:#fff;color:#000}.menu-list[_ngcontent-%COMP%] > div.disabled[_ngcontent-%COMP%]{background:0 0!important;color:#aaa!important;cursor:forbidden!important}.menu-desc[_ngcontent-%COMP%]{color:#fff;text-align:center;font-size:16px}.imp-menu[_ngcontent-%COMP%]{background:rgba(52,58,64,.8)!important}.imp-menu[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px;height:48px}"]],
        data: {}
    });

    function CE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [["class", "position-absolute d-flex bg-dark p-2 text-light"], ["style", "left:10px;bottom:10px;z-index:5"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "span", [], [[8, "innerHTML", 1]], null, null, null, null))], null, (function (l, n) {
            l(n, 1, 0, n.component.label)
        }))
    }

    function IE(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 6, "div", [["container", "body"], ["hover-class", "bg-light"], ["placement", "right"], ["triggers", "manuel"]], null, [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== ei(l, 5).onMouseEnter() && t), "mouseleave" === n && (t = !1 !== ei(l, 5).onMouseLeave() && t), "click" === n && (t = !1 !== i.workerSelect(l.parent.context.$implicit.value) && t), "mouseenter" === n && (t = !1 !== i.mouseenter(ei(l, 4), l.parent.context.$implicit.value) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 4)) && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(2, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(3, {
            "rounded-circle p-2 cursor-pointer my-1": 0,
            "bg-warning": 1,
            "opacity-60 cursor-forbidden": 2
        }), gi(4, 737280, [["p1", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            popoverTitle: [1, "popoverTitle"],
            placement: [2, "placement"],
            triggers: [3, "triggers"],
            container: [4, "container"]
        }, null), gi(5, 16384, null, 0, sg, [fe], {
            hoverClass: [0, "hoverClass"]
        }, null), (l()(), su(6, 0, null, null, 0, "img", [], [[8, "src", 4], [8, "title", 0]], null, null, null, null)), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component,
                t = l(n, 3, 0, !0, e.worker.type == n.parent.context.$implicit.key, !e.dataService.isImprovementAvailable(n.parent.context.$implicit.value, e.worker.level, e.menu.city));
            l(n, 2, 0, t), l(n, 4, 0, ei(n.parent.parent.parent, 60), ei(n.parent.parent.parent, 59), "right", "manuel", "body"), l(n, 5, 0, "bg-light")
        }), (function (l, n) {
            l(n, 6, 0, Mt(1, "assets/img/imp", n.parent.context.$implicit.key, ".png"), Mt(1, "", n.parent.context.$implicit.value.name, ""))
        }))
    }

    function TE(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 6, "div", [["container", "body"], ["hover-class", "bg-light"], ["placement", "right"], ["triggers", "manuel"]], null, [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== ei(l, 5).onMouseEnter() && t), "mouseleave" === n && (t = !1 !== ei(l, 5).onMouseLeave() && t), "click" === n && (t = !1 !== i.workerSelect(l.parent.context.$implicit.value, !0) && t), "mouseenter" === n && (t = !1 !== i.mouseenter(ei(l, 4), l.parent.context.$implicit.value, !0) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 4)) && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(2, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(3, {
            "rounded-circle p-2 cursor-pointer my-1": 0,
            "bg-warning": 1,
            "opacity-60 cursor-forbidden": 2
        }), gi(4, 737280, [["p1", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            popoverTitle: [1, "popoverTitle"],
            placement: [2, "placement"],
            triggers: [3, "triggers"],
            container: [4, "container"]
        }, null), gi(5, 16384, null, 0, sg, [fe], {
            hoverClass: [0, "hoverClass"]
        }, null), (l()(), su(6, 0, null, null, 0, "img", [], [[8, "src", 4], [8, "title", 0]], null, null, null, null)), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component,
                t = l(n, 3, 0, !0, e.worker.type == n.parent.context.$implicit.key, !e.dataService.isImprovementAvailable(n.parent.context.$implicit.value, e.worker.level, e.menu.city));
            l(n, 2, 0, t), l(n, 4, 0, ei(n.parent.parent.parent, 60), ei(n.parent.parent.parent, 59), "right", "manuel", "body"), l(n, 5, 0, "bg-light")
        }), (function (l, n) {
            l(n, 6, 0, Mt(1, "assets/img/imp", n.parent.context.$implicit.key, "2.png"), Mt(1, "", n.parent.context.$implicit.value.name, ""))
        }))
    }

    function EE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, IE)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, TE)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.dataService.isImprovementVisible(n.context.$implicit.value, e.worker.level, 0)), l(n, 4, 0, e.dataService.isImprovementVisible(n.context.$implicit.value, e.worker.level, 0) && n.context.$implicit.value.road)
        }), null)
    }

    function AE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "div", [["class", "position-absolute d-flex d-flex flex-column justify-content-center p-1 rounded imp-menu"], ["style", "left:10px;top:10%;z-index:5"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, EE)), gi(2, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne])], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, et(n, 2, 0, ei(n, 3).transform(e.conf.improvements)))
        }), null)
    }

    function PE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [["class", "bg-dark text-warning px-1 position-absolute d-flex"], ["style", "left:40%;top:10px;z-index:5"]], null, null, null, null, null)), (l()(), _u(-1, null, [" Keep Ctrl or Command to create a waypoint "]))], null, null)
    }

    function DE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [], null, [[null, "mouseenter"], [null, "mouseleave"], [null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== (i.menu.desc = "Move troops here") && t), "mouseleave" === n && (t = !1 !== (i.menu.desc = "") && t), "click" === n && (t = !1 !== i.attackCity() && t), t
        }), null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 1, 0, n.component.icons.act_move)
        }))
    }

    function ME(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [], null, [[null, "mouseenter"], [null, "mouseleave"], [null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== (i.menu.desc = "Send gold here") && t), "mouseleave" === n && (t = !1 !== (i.menu.desc = "") && t), "click" === n && (t = !1 !== i.sendGold() && t), t
        }), null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 1, 0, n.component.icons.act_transfer)
        }))
    }

    function OE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [], null, [[null, "mouseenter"], [null, "mouseleave"], [null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== (i.menu.desc = "Trade Route") && t), "mouseleave" === n && (t = !1 !== (i.menu.desc = "") && t), "click" === n && (t = !1 !== i.createTrade() && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(2, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(3, {
            disabled: 0
        }), (l()(), su(4, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            var e = l(n, 3, 0, !n.component.isCaravanAvailable());
            l(n, 2, 0, e)
        }), (function (l, n) {
            l(n, 4, 0, n.component.icons.act_trade)
        }))
    }

    function NE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [], null, [[null, "mouseenter"], [null, "mouseleave"], [null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== (i.menu.desc = "Send worker") && t), "mouseleave" === n && (t = !1 !== (i.menu.desc = "") && t), "click" === n && (t = !1 !== i.createWorker() && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(2, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(3, {
            disabled: 0
        }), (l()(), su(4, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            var e = l(n, 3, 0, !n.component.isWorkerAvailable());
            l(n, 2, 0, e)
        }), (function (l, n) {
            l(n, 4, 0, n.component.icons.act_worker)
        }))
    }

    function RE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [], null, [[null, "mouseenter"], [null, "mouseleave"], [null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== (i.menu.desc = "Send archeologist") && t), "mouseleave" === n && (t = !1 !== (i.menu.desc = "") && t), "click" === n && (t = !1 !== i.createArcheologist() && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(2, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(3, {
            disabled: 0
        }), (l()(), su(4, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            var e = l(n, 3, 0, !n.component.isArcheologistAvailable());
            l(n, 2, 0, e)
        }), (function (l, n) {
            l(n, 4, 0, n.component.icons.relics)
        }))
    }

    function BE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [], null, [[null, "mouseenter"], [null, "mouseleave"], [null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== (i.menu.desc = "Create Colony") && t), "mouseleave" === n && (t = !1 !== (i.menu.desc = "") && t), "click" === n && (t = !1 !== i.createColony() && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(2, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(3, {
            disabled: 0
        }), (l()(), su(4, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            var e = l(n, 3, 0, !n.component.isCaravelAvailable());
            l(n, 2, 0, e)
        }), (function (l, n) {
            l(n, 4, 0, n.component.icons.act_colony)
        }))
    }

    function zE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 25, null, null, null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "div", [], null, [[null, "mouseenter"], [null, "mouseleave"], [null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== (i.menu.desc = "View") && t), "mouseleave" === n && (t = !1 !== (i.menu.desc = "") && t), "click" === n && (t = !1 !== i.viewCity() && t), t
        }), null, null)), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, DE)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, ME)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(7, 0, null, null, 4, "div", [], null, [[null, "mouseenter"], [null, "mouseleave"], [null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== (i.menu.desc = "Send scout") && t), "mouseleave" === n && (t = !1 !== (i.menu.desc = "") && t), "click" === n && (t = !1 !== i.sendScout() && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(9, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(10, {
            disabled: 0
        }), (l()(), su(11, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(12, 0, null, null, 5, "div", [["style", "font-size: 90%;height: 90%;"]], null, [[null, "mouseenter"], [null, "mouseleave"], [null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== (i.menu.desc = "Send scout (auto)") && t), "mouseleave" === n && (t = !1 !== (i.menu.desc = "") && t), "click" === n && (t = !1 !== i.sendScout(!0) && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(14, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(15, {
            disabled: 0
        }), (l()(), su(16, 0, null, null, 1, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, ["A"])), (l()(), iu(16777216, null, null, 1, null, OE)), gi(19, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, NE)), gi(21, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, RE)), gi(23, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, BE)), gi(25, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, e.dataService.player().cities.length > 1), l(n, 6, 0, e.dataService.player().cities.length > 1);
            var t = l(n, 10, 0, !e.isScoutAvailable());
            l(n, 9, 0, t);
            var i = l(n, 15, 0, !e.isScoutAvailable());
            l(n, 14, 0, i), l(n, 19, 0, e.dataService.isUnlocked("trade")), l(n, 21, 0, e.dataService.isUnlocked("trade")), l(n, 23, 0, e.dataService.isUnlocked("archeology") && e.dataService.player().orientation >= 100), l(n, 25, 0, e.dataService.isUnlocked("colonization") && e.dataService.isCoastal(e.menu.city))
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.icons.act_view), l(n, 11, 0, e.icons.act_scout), l(n, 16, 0, e.icons.act_scout)
        }))
    }

    function $E(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [], null, [[null, "mouseenter"], [null, "mouseleave"], [null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== (i.menu.desc = "Attack") && t), "mouseleave" === n && (t = !1 !== (i.menu.desc = "") && t), "click" === n && (t = !1 !== i.attackCity() && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(2, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(3, {
            disabled: 0
        }), (l()(), su(4, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            var e = l(n, 3, 0, !n.component.canAttack());
            l(n, 2, 0, e)
        }), (function (l, n) {
            l(n, 4, 0, n.component.icons.act_attack)
        }))
    }

    function LE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [], null, [[null, "mouseenter"], [null, "mouseleave"], [null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== (i.menu.desc = "Spy") && t), "mouseleave" === n && (t = !1 !== (i.menu.desc = "") && t), "click" === n && (t = !1 !== i.spyCity() && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(2, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(3, {
            disabled: 0
        }), (l()(), su(4, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            var e = l(n, 3, 0, !n.component.isSpyAvailable());
            l(n, 2, 0, e)
        }), (function (l, n) {
            l(n, 4, 0, n.component.icons.act_spy)
        }))
    }

    function FE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [], null, [[null, "mouseenter"], [null, "mouseleave"], [null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== (i.menu.desc = "Send gift here") && t), "mouseleave" === n && (t = !1 !== (i.menu.desc = "") && t), "click" === n && (t = !1 !== i.sendGold() && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(2, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(3, {
            disabled: 0
        }), (l()(), su(4, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            var e = l(n, 3, 0, !n.component.isGiftAvailable());
            l(n, 2, 0, e)
        }), (function (l, n) {
            l(n, 4, 0, n.component.icons.act_transfer)
        }))
    }

    function qE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 15, "div", [["class", "map-menu position-absolute"]], null, [[null, "mousedown"]], (function (l, n, e) {
            var t = !0;
            return "mousedown" === n && (t = !1 !== e.stopPropagation() && t), t
        }), null, null)), yi(512, null, Oa, Na, [fe, Ne, be]), gi(2, 278528, null, 0, Ba, [Oa], {
            ngStyle: [0, "ngStyle"]
        }, null), vu(3, {
            "left.px": 0,
            "top.px": 1,
            "z-index": 2
        }), (l()(), su(4, 0, null, null, 8, "div", [["class", "menu-list d-flex mx-3"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, zE)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, $E)), gi(8, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, LE)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, FE)), gi(12, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(13, 0, null, null, 2, "div", [["class", "menu-desc"]], null, null, null, null, null)), (l()(), su(14, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(15, null, ["", ""]))], (function (l, n) {
            var e = n.component,
                t = l(n, 3, 0, e.menu.x, e.menu.y, "10");
            l(n, 2, 0, t), l(n, 6, 0, 0 == e.menu.ownerId), l(n, 8, 0, 0 != e.menu.ownerId), l(n, 10, 0, 0 != e.menu.ownerId && e.dataService.isUnlocked("spy")), l(n, 12, 0, e.menu.city.ownerid > 1)
        }), (function (l, n) {
            l(n, 15, 0, n.component.menu.desc)
        }))
    }

    function UE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(1, null, ["Attacking ", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.dataService.city(e.attack.to).name)
        }))
    }

    function HE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(1, null, ["Transfer to ", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.dataService.city(e.attack.to).name)
        }))
    }

    function VE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 8, "div", [["class", "form-group form-check mb-1"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "burn"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 2).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 2).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.attack.burn = e) && t), t
        }), null, null)), gi(2, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(4, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(6, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(7, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "burn"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Burn down on conquest ! (requires a governor, will not be consumed)"]))], (function (l, n) {
            l(n, 4, 0, n.component.attack.burn)
        }), (function (l, n) {
            l(n, 1, 0, ei(n, 6).ngClassUntouched, ei(n, 6).ngClassTouched, ei(n, 6).ngClassPristine, ei(n, 6).ngClassDirty, ei(n, 6).ngClassValid, ei(n, 6).ngClassInvalid, ei(n, 6).ngClassPending)
        }))
    }

    function jE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 8, "div", [["class", "form-group form-check mb-1"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "noreturn"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 2).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 2).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.attack.noreturn = e) && t), t
        }), null, null)), gi(2, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(4, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            isDisabled: [0, "isDisabled"],
            model: [1, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(6, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(7, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "noreturn"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Do not return troops if city is conquered (be careful about maintenance!)"]))], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, e.attack.burn, e.attack.noreturn)
        }), (function (l, n) {
            l(n, 1, 0, ei(n, 6).ngClassUntouched, ei(n, 6).ngClassTouched, ei(n, 6).ngClassPristine, ei(n, 6).ngClassDirty, ei(n, 6).ngClassValid, ei(n, 6).ngClassInvalid, ei(n, 6).ngClassPending)
        }))
    }

    function GE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(1, null, [" ", " "]))], null, (function (l, n) {
            var e = n.context.$implicit.name(n.component.dataService.player());
            l(n, 1, 0, e)
        }))
    }

    function WE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(1, null, [" ", " "]))], null, (function (l, n) {
            var e = n.context.$implicit.name(n.component.dataService.player());
            l(n, 1, 0, e)
        }))
    }

    function KE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 9, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["City"])), (l()(), iu(16777216, null, null, 1, null, WE)), gi(4, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(5, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Distance"])), (l()(), su(7, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Time"])), (l()(), su(9, 0, null, null, 0, "th", [], null, null, null, null, null))], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, e.troops(0 == e.menu.ownerId))
        }), null)
    }

    function ZE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 9, "td", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 6, "input", [["class", "d-inline"], ["min", "0"], ["style", "width:64px"], ["type", "number"]], [[1, "max", 0], [2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "input" === n && (t = !1 !== ei(l, 2)._handleInput(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 2).onTouched() && t), "compositionstart" === n && (t = !1 !== ei(l, 2)._compositionStart() && t), "compositionend" === n && (t = !1 !== ei(l, 2)._compositionEnd(e.target.value) && t), "change" === n && (t = !1 !== ei(l, 3).onChange(e.target.value) && t), "input" === n && (t = !1 !== ei(l, 3).onChange(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 3).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.attack.troops[l.parent.context.$implicit.id][l.context.$implicit.id] = e) && t), t
        }), null, null)), gi(2, 16384, null, 0, tf, [be, fe, [2, ef]], null, null), gi(3, 16384, null, 0, _f, [be, fe], null, null), yi(1024, null, lf, (function (l, n) {
            return [l, n]
        }), [tf, _f]), gi(5, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(7, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(8, 0, null, null, 1, "span", [], [[8, "className", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.fillTroops(l.parent.context.$implicit, l.context.$implicit.id) && t), t
        }), null, null)), (l()(), _u(9, null, ["(", ")"]))], (function (l, n) {
            l(n, 5, 0, n.component.attack.troops[n.parent.context.$implicit.id][n.context.$implicit.id])
        }), (function (l, n) {
            l(n, 1, 0, n.parent.context.$implicit.troops[n.context.$implicit.id] || 0, ei(n, 7).ngClassUntouched, ei(n, 7).ngClassTouched, ei(n, 7).ngClassPristine, ei(n, 7).ngClassDirty, ei(n, 7).ngClassValid, ei(n, 7).ngClassInvalid, ei(n, 7).ngClassPending), l(n, 8, 0, "cursor-pointer " + (n.parent.context.$implicit.troops[n.context.$implicit.id] ? "text-primary" : "text-secondary")), l(n, 9, 0, n.parent.context.$implicit.troops[n.context.$implicit.id] || 0)
        }))
    }

    function QE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "span", [], null, null, null, null, null)), (l()(), _u(1, null, [" ", " "])), yu(2, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 1, 0, l(n, 2, 0, ei(n.parent.parent.parent, 1), e.dataService.cityDistance(n.parent.context.$implicit.id, e.attack.to) / (e.attackSpeed(n.parent.context.$implicit, e.dataService.city(e.attack.to)) * e.conf.troop_speed_ratio)));
            l(n, 1, 0, t)
        }))
    }

    function YE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-danger btn-sm"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.doAttack(l.parent.context.$implicit) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Attack"]))], null, (function (l, n) {
            l(n, 0, 0, 0 == n.component.troopNb(n.parent.context.$implicit))
        }))
    }

    function XE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-primary btn-sm"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.doAttack(l.parent.context.$implicit) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Transfer"]))], null, (function (l, n) {
            l(n, 0, 0, 0 == n.component.troopNb(n.parent.context.$implicit))
        }))
    }

    function JE(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 18, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, KE)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(3, 0, null, null, 15, "tr", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(5, null, ["", ""])), (l()(), iu(16777216, null, null, 1, null, ZE)), gi(7, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(8, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(9, null, ["", ""])), yu(10, 2), (l()(), su(11, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, QE)), gi(13, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(14, 0, null, null, 4, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, YE)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, XE)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, (n.context.index + 1) % 8 == 0), l(n, 7, 0, e.troops(0 == e.menu.ownerId)), l(n, 13, 0, e.attack.troops[n.context.$implicit.id]), l(n, 16, 0, 0 != e.menu.ownerId), l(n, 18, 0, 0 == e.menu.ownerId)
        }), (function (l, n) {
            var e = n.component;
            l(n, 5, 0, n.context.$implicit.name);
            var t = et(n, 9, 0, l(n, 10, 0, ei(n.parent.parent, 0), e.dataService.cityDistance(n.context.$implicit.id, e.attack.to), ".1"));
            l(n, 9, 0, t)
        }))
    }

    function lA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 28, "div", [["class", "pl-2 overflow-auto h-100 pb-4"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, UE)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, HE)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(5, 0, null, null, 1, "button", [["class", "btn btn-sm btn-secondary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.attack = void 0) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Return"])), (l()(), su(7, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(8, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Click on a troop number to select all."])), (l()(), iu(16777216, null, null, 1, null, VE)), gi(11, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, jE)), gi(13, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(14, 0, null, null, 14, "table", [["class", "table-sm"]], null, null, null, null, null)), (l()(), su(15, 0, null, null, 10, "thead", [], null, null, null, null, null)), (l()(), su(16, 0, null, null, 9, "tr", [], null, null, null, null, null)), (l()(), su(17, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["City"])), (l()(), iu(16777216, null, null, 1, null, GE)), gi(20, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(21, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Distance"])), (l()(), su(23, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Time"])), (l()(), su(25, 0, null, null, 0, "th", [], null, null, null, null, null)), (l()(), su(26, 0, null, null, 2, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, JE)), gi(28, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, 0 != e.menu.ownerId), l(n, 4, 0, 0 == e.menu.ownerId), l(n, 11, 0, 0 != e.menu.city.ownerid), l(n, 13, 0, 0 != e.menu.city.ownerid), l(n, 20, 0, e.troops(0 == e.menu.ownerId)), l(n, 28, 0, e.orderedCities(e.attack.to))
        }), (function (l, n) {
            l(n, 8, 0, n.component.icons.info)
        }))
    }

    function nA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 21, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(2, null, ["", ""])), (l()(), su(3, 0, null, null, 9, "td", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 6, "input", [["class", "d-inline"], ["min", "0"], ["style", "width:64px"], ["type", "number"]], [[1, "max", 0], [2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "input" === n && (t = !1 !== ei(l, 5)._handleInput(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 5).onTouched() && t), "compositionstart" === n && (t = !1 !== ei(l, 5)._compositionStart() && t), "compositionend" === n && (t = !1 !== ei(l, 5)._compositionEnd(e.target.value) && t), "change" === n && (t = !1 !== ei(l, 6).onChange(e.target.value) && t), "input" === n && (t = !1 !== ei(l, 6).onChange(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 6).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.spy.spies[l.parent.context.$implicit.id] = e) && t), t
        }), null, null)), gi(5, 16384, null, 0, tf, [be, fe, [2, ef]], null, null), gi(6, 16384, null, 0, _f, [be, fe], null, null), yi(1024, null, lf, (function (l, n) {
            return [l, n]
        }), [tf, _f]), gi(8, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(10, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(11, 0, null, null, 1, "span", [], [[8, "className", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.spy.spies[l.parent.context.$implicit.id] = l.parent.context.$implicit.troops.spy) && t), t
        }), null, null)), (l()(), _u(12, null, ["(", ")"])), (l()(), su(13, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(14, null, ["", ""])), yu(15, 2), (l()(), su(16, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(17, null, [" ", " "])), yu(18, 1), (l()(), su(19, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(20, 0, null, null, 1, "button", [["class", "btn btn-primary btn-sm"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.doSpy(l.parent.context.$implicit) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Send"]))], (function (l, n) {
            l(n, 8, 0, n.component.spy.spies[n.parent.context.$implicit.id])
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, n.parent.context.$implicit.name), l(n, 4, 0, n.parent.context.$implicit.troops.spy || 0, ei(n, 10).ngClassUntouched, ei(n, 10).ngClassTouched, ei(n, 10).ngClassPristine, ei(n, 10).ngClassDirty, ei(n, 10).ngClassValid, ei(n, 10).ngClassInvalid, ei(n, 10).ngClassPending), l(n, 11, 0, "cursor-pointer " + (n.parent.context.$implicit.troops.spy ? "text-primary" : "text-secondary")), l(n, 12, 0, n.parent.context.$implicit.troops.spy || 0);
            var t = et(n, 14, 0, l(n, 15, 0, ei(n.parent.parent.parent, 0), e.dataService.cityDistance(n.parent.context.$implicit.id, e.spy.to), ".1"));
            l(n, 14, 0, t);
            var i = et(n, 17, 0, l(n, 18, 0, ei(n.parent.parent.parent, 1), e.dataService.cityDistance(n.parent.context.$implicit.id, e.spy.to) / (e.dataService.speed("spy", 0, n.parent.context.$implicit, e.dataService.city(e.spy.to)) * e.conf.troop_speed_ratio)));
            l(n, 17, 0, i), l(n, 20, 0, !e.spy.spies[n.parent.context.$implicit.id])
        }))
    }

    function eA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, nA)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, n.context.$implicit.troops.spy)
        }), null)
    }

    function tA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 22, "div", [["class", "pl-2 overflow-auto h-100 pb-4"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(2, null, ["Spying ", ""])), (l()(), su(3, 0, null, null, 1, "button", [["class", "btn btn-sm btn-secondary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.spy = void 0) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Return"])), (l()(), su(5, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(6, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Click on a spy nb to send all."])), (l()(), su(8, 0, null, null, 14, "table", [["class", "table-sm"]], null, null, null, null, null)), (l()(), su(9, 0, null, null, 10, "thead", [], null, null, null, null, null)), (l()(), su(10, 0, null, null, 9, "tr", [], null, null, null, null, null)), (l()(), su(11, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["City"])), (l()(), su(13, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Spy"])), (l()(), su(15, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Distance"])), (l()(), su(17, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Time"])), (l()(), su(19, 0, null, null, 0, "th", [], null, null, null, null, null)), (l()(), su(20, 0, null, null, 2, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, eA)), gi(22, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 22, 0, e.orderedCities(e.spy.to))
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.dataService.city(e.spy.to).name), l(n, 6, 0, e.icons.info)
        }))
    }

    function iA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "th", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Relations gains (est.)"]))], null, (function (l, n) {
            l(n, 1, 0, n.component.icons.diplomacy + " text-diplomacy")
        }))
    }

    function sA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "span", [["class", "text-diplomacy"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" +", " "])), yu(3, 2)], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons.diplomacy);
            var t = et(n, 2, 0, l(n, 3, 0, ei(n.parent.parent.parent.parent, 0), e.dataService.giftValue(e.gold.gold[n.parent.parent.context.$implicit.id]), ".1"));
            l(n, 2, 0, t)
        }))
    }

    function uA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, sA)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 2, 0, n.component.gold.gold[n.parent.context.$implicit.id])
        }), null)
    }

    function rA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 25, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(2, null, ["", ""])), (l()(), su(3, 0, null, null, 3, "td", [["class", "cursor-pointer"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.setMaxGold(l.context.$implicit) && t), t
        }), null, null)), (l()(), su(4, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(5, null, [" ", ""])), yu(6, 1), (l()(), su(7, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(8, null, ["", ""])), yu(9, 2), (l()(), su(10, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(11, null, [" ", " "])), yu(12, 1), (l()(), iu(16777216, null, null, 1, null, uA)), gi(14, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(15, 0, null, null, 7, "td", [], null, null, null, null, null)), (l()(), su(16, 0, null, null, 6, "input", [["min", "0"], ["style", "width:180px"], ["type", "number"]], [[1, "max", 0], [2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "input" === n && (t = !1 !== ei(l, 17)._handleInput(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 17).onTouched() && t), "compositionstart" === n && (t = !1 !== ei(l, 17)._compositionStart() && t), "compositionend" === n && (t = !1 !== ei(l, 17)._compositionEnd(e.target.value) && t), "change" === n && (t = !1 !== ei(l, 18).onChange(e.target.value) && t), "input" === n && (t = !1 !== ei(l, 18).onChange(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 18).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.gold.gold[l.context.$implicit.id] = e) && t), t
        }), null, null)), gi(17, 16384, null, 0, tf, [be, fe, [2, ef]], null, null), gi(18, 16384, null, 0, _f, [be, fe], null, null), yi(1024, null, lf, (function (l, n) {
            return [l, n]
        }), [tf, _f]), gi(20, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(22, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(23, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(24, 0, null, null, 1, "button", [["class", "btn btn-primary btn-sm"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.doSendGold(l.context.$implicit) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Send"]))], (function (l, n) {
            var e = n.component;
            l(n, 14, 0, 0 != e.dataService.city(e.gold.to).ownerid), l(n, 20, 0, e.gold.gold[n.context.$implicit.id])
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, n.context.$implicit.name), l(n, 4, 0, e.icons.gold + " text-gold");
            var t = et(n, 5, 0, l(n, 6, 0, ei(n.parent.parent, 0), n.context.$implicit.gold));
            l(n, 5, 0, t);
            var i = et(n, 8, 0, l(n, 9, 0, ei(n.parent.parent, 0), e.dataService.cityDistance(n.context.$implicit.id, e.gold.to), ".1"));
            l(n, 8, 0, i);
            var s = et(n, 11, 0, l(n, 12, 0, ei(n.parent.parent, 1), e.dataService.cityDistance(n.context.$implicit.id, e.gold.to) / (e.dataService.speed("gold", 0, n.context.$implicit, e.dataService.city(e.gold.to)) * e.conf.troop_speed_ratio)));
            l(n, 11, 0, s), l(n, 16, 0, n.context.$implicit.gold, ei(n, 22).ngClassUntouched, ei(n, 22).ngClassTouched, ei(n, 22).ngClassPristine, ei(n, 22).ngClassDirty, ei(n, 22).ngClassValid, ei(n, 22).ngClassInvalid, ei(n, 22).ngClassPending), l(n, 24, 0, !e.gold.gold[n.context.$implicit.id])
        }))
    }

    function aA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 26, "div", [["class", "pl-2 overflow-auto h-100 pb-4"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(2, null, ["Sending gold to ", ""])), (l()(), su(3, 0, null, null, 1, "button", [["class", "btn btn-sm btn-secondary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.gold = void 0) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Return"])), (l()(), su(5, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(6, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Click on a gold value to send all."])), (l()(), su(8, 0, null, null, 18, "table", [["class", "table-sm"]], null, null, null, null, null)), (l()(), su(9, 0, null, null, 14, "thead", [], null, null, null, null, null)), (l()(), su(10, 0, null, null, 13, "tr", [], null, null, null, null, null)), (l()(), su(11, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["City"])), (l()(), su(13, 0, null, null, 2, "th", [], null, null, null, null, null)), (l()(), su(14, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Gold"])), (l()(), su(16, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Distance"])), (l()(), su(18, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Time"])), (l()(), iu(16777216, null, null, 1, null, iA)), gi(21, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(22, 0, null, null, 0, "th", [], null, null, null, null, null)), (l()(), su(23, 0, null, null, 0, "th", [], null, null, null, null, null)), (l()(), su(24, 0, null, null, 2, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, rA)), gi(26, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 21, 0, 0 != e.dataService.city(e.gold.to).ownerid), l(n, 26, 0, e.orderedCities(e.gold.to))
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.dataService.city(e.gold.to).name), l(n, 6, 0, e.icons.info), l(n, 14, 0, e.icons.gold + " text-gold")
        }))
    }

    function oA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "div", [["class", "text-science"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" +", ""])), yu(3, 1)], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons.science);
            var t = et(n, 2, 0, l(n, 3, 0, ei(n.parent.parent.parent.parent, 0), e.trade.values[n.parent.context.index].science));
            l(n, 2, 0, t)
        }))
    }

    function cA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "div", [["class", "text-faith"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" +", ""])), yu(3, 1)], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons.faith);
            var t = et(n, 2, 0, l(n, 3, 0, ei(n.parent.parent.parent.parent, 0), e.trade.values[n.parent.context.index].faith));
            l(n, 2, 0, t)
        }))
    }

    function dA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 43, "div", [["class", "card cursor-pointer"], ["hover-class", "bg-dark text-light"], ["style", "width:500px"]], null, [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== ei(l, 1).onMouseEnter() && t), "mouseleave" === n && (t = !1 !== ei(l, 1).onMouseLeave() && t), "click" === n && (t = !1 !== i.doCreateTrade(l.context.index) && t), t
        }), null, null)), gi(1, 16384, null, 0, sg, [fe], {
            hoverClass: [0, "hoverClass"]
        }, null), (l()(), su(2, 0, null, null, 41, "div", [["class", "card-body p-2"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 40, "div", [["class", "card-text d-flex align-items-center"]], null, null, null, null, null)), (l()(), su(4, 0, null, null, 16, "div", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 3, "div", [["class", "text-gold"]], null, null, null, null, null)), (l()(), su(6, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(7, null, [" +", ""])), yu(8, 1), (l()(), su(9, 0, null, null, 3, "div", [["class", "text-culture"]], null, null, null, null, null)), (l()(), su(10, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(11, null, [" +", " "])), yu(12, 1), (l()(), su(13, 0, null, null, 3, "div", [["class", "text-diplomacy"]], null, null, null, null, null)), (l()(), su(14, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(15, null, [" +", ""])), yu(16, 2), (l()(), iu(16777216, null, null, 1, null, oA)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, cA)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(21, 0, null, null, 1, "div", [["class", "mx-4 text-200 text-secondary"]], null, null, null, null, null)), (l()(), su(22, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(23, 0, null, null, 5, "div", [["class", "mx-3 flex-fill text-center"], ["style", "height:auto!important"]], null, null, null, null, null)), (l()(), su(24, 0, null, null, 1, "div", [["class", "text-120"]], null, null, null, null, null)), (l()(), _u(25, null, ["", ""])), (l()(), su(26, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(27, 0, null, null, 1, "player", [], null, null, null, xE, _E)), gi(28, 114688, null, 0, bE, [zg], {
            id: [0, "id"]
        }, null), (l()(), su(29, 0, null, null, 1, "div", [["class", "mx-4 text-200 text-secondary"]], null, null, null, null, null)), (l()(), su(30, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(31, 0, null, null, 12, "div", [], null, null, null, null, null)), (l()(), su(32, 0, null, null, 3, "div", [["class", "text-gold"]], null, null, null, null, null)), (l()(), su(33, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(34, null, [" +", ""])), yu(35, 1), (l()(), su(36, 0, null, null, 3, "div", [["class", "text-culture"]], null, null, null, null, null)), (l()(), su(37, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(38, null, [" +", ""])), yu(39, 1), (l()(), su(40, 0, null, null, 3, "div", [["class", "text-diplomacy"]], null, null, null, null, null)), (l()(), su(41, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(42, null, [" +", ""])), yu(43, 1)], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, "bg-dark text-light"), l(n, 18, 0, e.trade.values[n.context.index].science), l(n, 20, 0, e.trade.values[n.context.index].faith), l(n, 28, 0, n.context.$implicit.ownerid)
        }), (function (l, n) {
            var e = n.component;
            l(n, 6, 0, e.icons.gold);
            var t = et(n, 7, 0, l(n, 8, 0, ei(n.parent.parent.parent, 0), e.trade.values[n.context.index].gold));
            l(n, 7, 0, t), l(n, 10, 0, e.icons.culture);
            var i = et(n, 11, 0, l(n, 12, 0, ei(n.parent.parent.parent, 0), e.trade.values[n.context.index].culture));
            l(n, 11, 0, i), l(n, 14, 0, e.icons.diplomacy);
            var s = et(n, 15, 0, l(n, 16, 0, ei(n.parent.parent.parent, 0), e.trade.values[n.context.index].diplomacy, ".1"));
            l(n, 15, 0, s), l(n, 22, 0, e.icons.arrow_left), l(n, 25, 0, n.context.$implicit.name), l(n, 30, 0, e.icons.arrow_right), l(n, 33, 0, e.icons.gold);
            var u = et(n, 34, 0, l(n, 35, 0, ei(n.parent.parent.parent, 0), e.trade.values[n.context.index].gold * e.conf.trade_route_ratio));
            l(n, 34, 0, u), l(n, 37, 0, e.icons.culture);
            var r = et(n, 38, 0, l(n, 39, 0, ei(n.parent.parent.parent, 0), e.trade.values[n.context.index].culture * e.conf.trade_route_ratio));
            l(n, 38, 0, r), l(n, 41, 0, e.icons.culture);
            var a = et(n, 42, 0, l(n, 43, 0, ei(n.parent.parent.parent, 0), e.trade.values[n.context.index].diplomacy));
            l(n, 42, 0, a)
        }))
    }

    function hA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [["class", ""]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "div", [], null, null, null, null, null)), (l()(), _u(2, null, ["Maximum distance allowed: ", ""])), (l()(), iu(16777216, null, null, 1, null, dA)), gi(4, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            l(n, 4, 0, n.component.trade.cities)
        }), (function (l, n) {
            l(n, 2, 0, n.component.dataService.tradeRouteMaxDist())
        }))
    }

    function pA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, [" There is no available trade routes at the moment. "]))], null, null)
    }

    function fA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 9, "div", [["class", "h-100 overflow-auto pl-2"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "h2", [], null, null, null, null, null)), (l()(), _u(2, null, ["Create trade route from ", ""])), (l()(), iu(16777216, null, null, 1, null, hA)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, pA)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(7, 0, null, null, 2, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), su(8, 0, null, null, 1, "button", [["class", "btn btn-secondary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.trade = void 0) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Cancel"]))], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, e.trade.cities.length), l(n, 6, 0, !e.trade.cities.length)
        }), (function (l, n) {
            l(n, 2, 0, n.component.trade.from.name)
        }))
    }

    function gA(l) {
        return ku(0, [(l()(), _u(0, null, ["", ""]))], null, (function (l, n) {
            l(n, 0, 0, n.context.title)
        }))
    }

    function mA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "div", [], [[8, "innerHTML", 1]], null, null, null, null)), (l()(), su(1, 0, null, null, 7, "div", [["class", "border-top mt-1"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 3, "span", [["class", "text-gold mr-2"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(4, null, [" ", ""])), yu(5, 1), (l()(), su(6, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(7, null, [" ", " "])), yu(8, 1)], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, n.context.desc), l(n, 3, 0, e.icons.gold);
            var t = et(n, 4, 0, l(n, 5, 0, ei(n.parent, 0), n.context.cost));
            l(n, 4, 0, t), l(n, 6, 0, e.icons.time);
            var i = et(n, 7, 0, l(n, 8, 0, ei(n.parent, 1), n.context.time));
            l(n, 7, 0, i)
        }))
    }

    function yA(l) {
        return ku(0, [mi(0, zv, []), mi(0, gv, []), cu(402653184, 1, {
            container: 0
        }), cu(402653184, 2, {
            canvas: 0
        }), cu(402653184, 3, {
            canvast: 0
        }), (l()(), su(5, 0, [[1, 0], ["container", 1]], null, 45, "div", [["class", "position-relative h-100 bg-dark"]], [[8, "hidden", 0]], null, null, null, null)), (l()(), su(6, 0, [[2, 0], ["canvas", 1]], null, 0, "canvas", [["style", "position:absolute;z-index:1;"]], [[8, "className", 0]], null, null, null, null)), (l()(), su(7, 0, [[3, 0], ["canvast", 1]], null, 0, "canvas", [["style", "position:absolute;z-index:2;"]], null, null, null, null, null)), (l()(), su(8, 0, null, null, 6, "div", [["class", "position-absolute d-flex flex-column"], ["style", "right:10px;top:10px;z-index:5"]], null, null, null, null, null)), (l()(), su(9, 0, null, null, 1, "button", [["class", "btn btn-sm btn-light mb-1"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.center() && t), t
        }), null, null)), (l()(), su(10, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(11, 0, null, null, 1, "button", [["class", "btn btn-sm btn-light mb-1"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.zoomIn() && t), t
        }), null, null)), (l()(), su(12, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(13, 0, null, null, 1, "button", [["class", "btn btn-sm btn-light"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.zoomOut() && t), t
        }), null, null)), (l()(), su(14, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(15, 0, null, null, 27, "div", [["class", "position-absolute d-flex"], ["style", "right:10px;bottom:10px;z-index:5"]], null, null, null, null, null)), (l()(), su(16, 0, null, null, 8, "div", [["class", "bg-dark text-light px-1"]], null, null, null, null, null)), (l()(), su(17, 0, null, null, 5, "input", [["id", "showtraderoutes"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 18).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 18).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.data.world_hide_tr = e) && t), t
        }), null, null)), gi(18, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(20, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(22, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(23, 0, null, null, 1, "label", [["class", "m-0"], ["for", "showtraderoutes"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Hide Trade Routes"])), (l()(), su(25, 0, null, null, 8, "div", [["class", "bg-dark text-light px-1"]], null, null, null, null, null)), (l()(), su(26, 0, null, null, 5, "input", [["id", "showtroops"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 27).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 27).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.data.world_hide_un = e) && t), t
        }), null, null)), gi(27, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(29, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(31, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(32, 0, null, null, 1, "label", [["class", "m-0"], ["for", "showtroops"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Hide Troops"])), (l()(), su(34, 0, null, null, 8, "div", [["class", "bg-dark text-light px-1"]], null, null, null, null, null)), (l()(), su(35, 0, null, null, 5, "input", [["id", "showter"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 36).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 36).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.data.world_hide_ter = e) && t), t
        }), null, null)), gi(36, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(38, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(40, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(41, 0, null, null, 1, "label", [["class", "m-0"], ["for", "showter"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Hide Terrain"])), (l()(), iu(16777216, null, null, 1, null, CE)), gi(44, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, AE)), gi(46, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, PE)), gi(48, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, qE)), gi(50, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, lA)), gi(52, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, tA)), gi(54, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, aA)), gi(56, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, fA)), gi(58, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, [["popTitle", 2]], null, 0, null, gA)), (l()(), iu(0, [["popContent", 2]], null, 0, null, mA))], (function (l, n) {
            var e = n.component;
            l(n, 20, 0, e.data.world_hide_tr), l(n, 29, 0, e.data.world_hide_un), l(n, 38, 0, e.data.world_hide_ter), l(n, 44, 0, e.label), l(n, 46, 0, e.worker), l(n, 48, 0, e.scout), l(n, 50, 0, e.menu.show), l(n, 52, 0, e.attack), l(n, 54, 0, e.spy), l(n, 56, 0, e.gold), l(n, 58, 0, e.trade)
        }), (function (l, n) {
            var e = n.component;
            l(n, 5, 0, e.attack || e.spy || e.gold || e.trade), l(n, 6, 0, e.scout ? "cursor-crosshair" : ""), l(n, 10, 0, e.icons.center), l(n, 11, 0, e.view.zoom == e.view.zoom_max), l(n, 12, 0, e.icons.plus), l(n, 13, 0, e.view.zoom == e.view.zoom_min), l(n, 14, 0, e.icons.minus), l(n, 17, 0, ei(n, 22).ngClassUntouched, ei(n, 22).ngClassTouched, ei(n, 22).ngClassPristine, ei(n, 22).ngClassDirty, ei(n, 22).ngClassValid, ei(n, 22).ngClassInvalid, ei(n, 22).ngClassPending), l(n, 26, 0, ei(n, 31).ngClassUntouched, ei(n, 31).ngClassTouched, ei(n, 31).ngClassPristine, ei(n, 31).ngClassDirty, ei(n, 31).ngClassValid, ei(n, 31).ngClassInvalid, ei(n, 31).ngClassPending), l(n, 35, 0, ei(n, 40).ngClassUntouched, ei(n, 40).ngClassTouched, ei(n, 40).ngClassPristine, ei(n, 40).ngClassDirty, ei(n, 40).ngClassValid, ei(n, 40).ngClassInvalid, ei(n, 40).ngClassPending)
        }))
    }

    function vA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-world", [], null, [["document", "keydown"], ["document", "keyup"]], (function (l, n, e) {
            var t = !0;
            return "document:keydown" === n && (t = !1 !== ei(l, 1).handleKeydownEvent(e) && t), "document:keyup" === n && (t = !1 !== ei(l, 1).handleKeyupEvent(e) && t), t
        }), yA, SE)), gi(1, 245760, null, 0, kE, [Tg, Pg, oh, zg, _p], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var bA = jt("app-world", kE, vA, {}, {}, []); class _A {
        constructor(l, n, e) {
            this.data = l, this.dataService = n, this.conf = e, this.icons = ug
        }
        ngOnInit() {
            this.attacks = this.data.attacks.filter(l => 0 == l.ownerid || 0 == l.destid)
        }
        timeRemaining(l) {
            return l.returning ? (2 * l.dist - l.progress) / (l.speed * this.conf.troop_speed_ratio) : (l.dist - l.progress) / (l.speed * this.conf.troop_speed_ratio)
        }
        workerTimeRemaining(l) {
            return l.construction_progress ? (this.conf.improvements[l.type].time - l.construction_progress) / l.speed : this.timeRemaining(l)
        }
        cancel(l) {
            this.dataService.cancelMove(l)
        }
        cancelWorker(l) {
            l.route.length && (l.auto = !0), this.dataService.cancelMove(l)
        }
        cancelScout(l) {
            l.route.length && (l.auto = !0), this.dataService.cancelMove(l)
        }
        coords(l) {
            return "(" + Math.abs(l.y) + (l.y < 0 ? "N" : "S") + "," + Math.abs(l.x) + (l.x < 0 ? "W" : "E") + ")"
        }
    }
    var wA = st({
        encapsulation: 0,
        styles: [[""]],
        data: {}
    });

    function xA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [["class", "badge badge-pill badge-danger mr-2"]], null, null, null, null, null)), (l()(), _u(-1, null, ["!"]))], null, null)
    }

    function kA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [["class", "mr-2"]], null, null, null, null, null)), (l()(), _u(1, null, ["", ": ", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.conf.troops[n.parent.context.$implicit.key].name(e.dataService.player(n.parent.parent.parent.parent.context.$implicit.ownerid)), n.parent.context.$implicit.value)
        }))
    }

    function SA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, kA)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, n.context.$implicit.value)
        }), null)
    }

    function CA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, SA)), gi(2, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, La, [Ne])], (function (l, n) {
            l(n, 2, 0, et(n, 2, 0, ei(n, 3).transform(n.parent.parent.context.$implicit.troops)))
        }), null)
    }

    function IA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["?"]))], null, null)
    }

    function TA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-danger"], ["title", "Cancel"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.cancel(l.parent.parent.context.$implicit) && t), t
        }), null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, n.parent.parent.context.$implicit.returning), l(n, 1, 0, e.icons.cancel)
        }))
    }

    function EA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 25, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 4, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, xA)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(4, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(5, 114688, null, 0, nx, [Pg, zg], {
            x: [0, "x"],
            y: [1, "y"]
        }, null), (l()(), su(6, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(7, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(8, 114688, null, 0, nx, [Pg, zg], {
            x: [0, "x"],
            y: [1, "y"]
        }, null), (l()(), su(9, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(10, null, ["", ""])), (l()(), su(11, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(12, null, ["", ""])), (l()(), su(13, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(14, null, ["", ""])), yu(15, 1), (l()(), su(16, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(17, null, ["", ""])), yu(18, 1), (l()(), iu(16777216, null, null, 1, null, CA)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, IA)), gi(22, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(23, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, TA)), gi(25, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 3, 0, 0 != n.parent.context.$implicit.ownerid), l(n, 5, 0, n.parent.context.$implicit.from.x, n.parent.context.$implicit.from.y), l(n, 8, 0, n.parent.context.$implicit.to.x, n.parent.context.$implicit.to.y), l(n, 20, 0, 0 == n.parent.context.$implicit.ownerid), l(n, 22, 0, 0 != n.parent.context.$implicit.ownerid), l(n, 25, 0, 0 == n.parent.context.$implicit.ownerid)
        }), (function (l, n) {
            var e = n.component;
            l(n, 10, 0, n.parent.context.$implicit.speed), l(n, 12, 0, n.parent.context.$implicit.returning ? "Returning" : n.parent.context.$implicit.agressive ? "Attacking" : "Moving");
            var t = et(n, 14, 0, l(n, 15, 0, ei(n.parent.parent, 0), n.parent.context.$implicit.gold));
            l(n, 14, 0, t);
            var i = et(n, 17, 0, l(n, 18, 0, ei(n.parent.parent, 1), e.timeRemaining(n.parent.context.$implicit)));
            l(n, 17, 0, i)
        }))
    }

    function AA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, EA)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, 0 == n.context.$implicit.ownerid || 0 == n.context.$implicit.destid && !n.context.$implicit.returning)
        }), null)
    }

    function PA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(1, null, ["Spy: ", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.parent.context.$implicit.spies)
        }))
    }

    function DA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["?"]))], null, null)
    }

    function MA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-danger"], ["title", "Cancel"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.cancel(l.parent.context.$implicit) && t), t
        }), null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, n.parent.context.$implicit.returning), l(n, 1, 0, e.icons.cancel)
        }))
    }

    function OA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 21, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(3, 114688, null, 0, nx, [Pg, zg], {
            x: [0, "x"],
            y: [1, "y"]
        }, null), (l()(), su(4, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(6, 114688, null, 0, nx, [Pg, zg], {
            x: [0, "x"],
            y: [1, "y"]
        }, null), (l()(), su(7, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(8, null, ["", ""])), (l()(), su(9, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(10, null, ["", ""])), (l()(), su(11, 0, null, null, 0, "td", [], null, null, null, null, null)), (l()(), su(12, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(13, null, ["", ""])), yu(14, 1), (l()(), iu(16777216, null, null, 1, null, PA)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, DA)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(19, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, MA)), gi(21, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 3, 0, n.context.$implicit.from.x, n.context.$implicit.from.y), l(n, 6, 0, n.context.$implicit.to.x, n.context.$implicit.to.y), l(n, 16, 0, 0 == n.context.$implicit.ownerid), l(n, 18, 0, 0 != n.context.$implicit.ownerid), l(n, 21, 0, 0 == n.context.$implicit.ownerid)
        }), (function (l, n) {
            var e = n.component;
            l(n, 8, 0, n.context.$implicit.speed), l(n, 10, 0, n.context.$implicit.returning ? "Returning" : "Spying");
            var t = et(n, 13, 0, l(n, 14, 0, ei(n.parent, 1), e.timeRemaining(n.context.$implicit)));
            l(n, 13, 0, t)
        }))
    }

    function NA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-danger"], ["title", "Cancel"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.cancelScout(l.parent.parent.context.$implicit) && t), t
        }), null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, n.parent.parent.context.$implicit.returning), l(n, 1, 0, e.icons.cancel)
        }))
    }

    function RA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 21, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(3, 114688, null, 0, nx, [Pg, zg], {
            x: [0, "x"],
            y: [1, "y"]
        }, null), (l()(), su(4, 0, null, null, 4, "td", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 3, "a", [["routerLink", "/game/world"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 6).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(6, 671744, null, 0, xp, [_p, oh, Rr], {
            queryParams: [0, "queryParams"],
            routerLink: [1, "routerLink"]
        }, null), vu(7, {
            x: 0,
            y: 1
        }), (l()(), _u(8, null, ["", ""])), (l()(), su(9, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(10, null, ["", ""])), (l()(), su(11, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(12, null, ["", ""])), (l()(), su(13, 0, null, null, 0, "td", [], null, null, null, null, null)), (l()(), su(14, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(15, null, ["", ""])), yu(16, 1), (l()(), su(17, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(18, null, ["", ": 1"])), (l()(), su(19, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, NA)), gi(21, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 3, 0, n.parent.context.$implicit.from.x, n.parent.context.$implicit.from.y);
            var e = l(n, 7, 0, n.parent.context.$implicit.to.x, n.parent.context.$implicit.to.y);
            l(n, 6, 0, e, "/game/world"), l(n, 21, 0, 0 == n.parent.context.$implicit.ownerid)
        }), (function (l, n) {
            var e = n.component;
            l(n, 5, 0, ei(n, 6).target, ei(n, 6).href), l(n, 8, 0, e.coords(n.parent.context.$implicit.to)), l(n, 10, 0, n.parent.context.$implicit.speed), l(n, 12, 0, n.parent.context.$implicit.returning ? "Returning" : "Scouting");
            var t = et(n, 15, 0, l(n, 16, 0, ei(n.parent.parent, 1), e.timeRemaining(n.parent.context.$implicit)));
            l(n, 15, 0, t), l(n, 18, 0, n.parent.context.$implicit.explorer ? "Explorer" : "Scout")
        }))
    }

    function BA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, RA)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, 0 == n.context.$implicit.ownerid)
        }), null)
    }

    function zA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-danger"], ["title", "Cancel"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.cancelWorker(l.parent.parent.context.$implicit) && t), t
        }), null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, n.parent.parent.context.$implicit.returning), l(n, 1, 0, e.icons.cancel)
        }))
    }

    function $A(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 20, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(3, 114688, null, 0, nx, [Pg, zg], {
            x: [0, "x"],
            y: [1, "y"]
        }, null), (l()(), su(4, 0, null, null, 4, "td", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 3, "a", [["routerLink", "/game/world"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 6).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(6, 671744, null, 0, xp, [_p, oh, Rr], {
            queryParams: [0, "queryParams"],
            routerLink: [1, "routerLink"]
        }, null), vu(7, {
            x: 0,
            y: 1
        }), (l()(), _u(8, null, ["", ""])), (l()(), su(9, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(10, null, ["", ""])), (l()(), su(11, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(12, null, ["", ""])), (l()(), su(13, 0, null, null, 0, "td", [], null, null, null, null, null)), (l()(), su(14, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(15, null, ["", ""])), yu(16, 1), (l()(), su(17, 0, null, null, 0, "td", [], null, null, null, null, null)), (l()(), su(18, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, zA)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 3, 0, n.parent.context.$implicit.from.x, n.parent.context.$implicit.from.y);
            var e = l(n, 7, 0, n.parent.context.$implicit.to.x, n.parent.context.$implicit.to.y);
            l(n, 6, 0, e, "/game/world"), l(n, 20, 0, 0 == n.parent.context.$implicit.ownerid)
        }), (function (l, n) {
            var e = n.component;
            l(n, 5, 0, ei(n, 6).target, ei(n, 6).href), l(n, 8, 0, e.coords(n.parent.context.$implicit.to)), l(n, 10, 0, n.parent.context.$implicit.speed), l(n, 12, 0, n.parent.context.$implicit.construction_progress ? "Constructing" : "Moving");
            var t = et(n, 15, 0, l(n, 16, 0, ei(n.parent.parent, 1), e.workerTimeRemaining(n.parent.context.$implicit)));
            l(n, 15, 0, t)
        }))
    }

    function LA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, $A)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, 0 == n.context.$implicit.ownerid)
        }), null)
    }

    function FA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-danger"], ["title", "Cancel"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.cancel(l.parent.parent.context.$implicit) && t), t
        }), null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, n.parent.parent.context.$implicit.returning), l(n, 1, 0, e.icons.cancel)
        }))
    }

    function qA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 20, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(3, 114688, null, 0, nx, [Pg, zg], {
            x: [0, "x"],
            y: [1, "y"]
        }, null), (l()(), su(4, 0, null, null, 4, "td", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 3, "a", [["routerLink", "/game/world"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 6).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(6, 671744, null, 0, xp, [_p, oh, Rr], {
            queryParams: [0, "queryParams"],
            routerLink: [1, "routerLink"]
        }, null), vu(7, {
            x: 0,
            y: 1
        }), (l()(), _u(8, null, ["", ""])), (l()(), su(9, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(10, null, ["", ""])), (l()(), su(11, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Moving"])), (l()(), su(13, 0, null, null, 0, "td", [], null, null, null, null, null)), (l()(), su(14, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(15, null, ["", ""])), yu(16, 1), (l()(), su(17, 0, null, null, 0, "td", [], null, null, null, null, null)), (l()(), su(18, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, FA)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 3, 0, n.parent.context.$implicit.from.x, n.parent.context.$implicit.from.y);
            var e = l(n, 7, 0, n.parent.context.$implicit.to.x, n.parent.context.$implicit.to.y);
            l(n, 6, 0, e, "/game/world"), l(n, 20, 0, 0 == n.parent.context.$implicit.ownerid)
        }), (function (l, n) {
            var e = n.component;
            l(n, 5, 0, ei(n, 6).target, ei(n, 6).href), l(n, 8, 0, e.coords(n.parent.context.$implicit.to)), l(n, 10, 0, n.parent.context.$implicit.speed);
            var t = et(n, 15, 0, l(n, 16, 0, ei(n.parent.parent, 1), e.timeRemaining(n.parent.context.$implicit)));
            l(n, 15, 0, t)
        }))
    }

    function UA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, qA)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, 0 == n.context.$implicit.ownerid)
        }), null)
    }

    function HA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-danger"], ["title", "Cancel"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.cancel(l.parent.parent.context.$implicit) && t), t
        }), null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, n.parent.parent.context.$implicit.returning), l(n, 1, 0, e.icons.cancel)
        }))
    }

    function VA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 20, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(3, 114688, null, 0, nx, [Pg, zg], {
            x: [0, "x"],
            y: [1, "y"]
        }, null), (l()(), su(4, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(6, 114688, null, 0, nx, [Pg, zg], {
            x: [0, "x"],
            y: [1, "y"]
        }, null), (l()(), su(7, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(8, null, ["", ""])), (l()(), su(9, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Gold transfer"])), (l()(), su(11, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(12, null, ["", ""])), yu(13, 1), (l()(), su(14, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(15, null, ["", ""])), yu(16, 1), (l()(), su(17, 0, null, null, 0, "td", [], null, null, null, null, null)), (l()(), su(18, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, HA)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 3, 0, n.parent.context.$implicit.from.x, n.parent.context.$implicit.from.y), l(n, 6, 0, n.parent.context.$implicit.to.x, n.parent.context.$implicit.to.y), l(n, 20, 0, 0 == n.parent.context.$implicit.ownerid)
        }), (function (l, n) {
            var e = n.component;
            l(n, 8, 0, n.parent.context.$implicit.speed);
            var t = et(n, 12, 0, l(n, 13, 0, ei(n.parent.parent, 0), n.parent.context.$implicit.gold));
            l(n, 12, 0, t);
            var i = et(n, 15, 0, l(n, 16, 0, ei(n.parent.parent, 1), e.timeRemaining(n.parent.context.$implicit)));
            l(n, 15, 0, i)
        }))
    }

    function jA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, VA)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, 0 == n.context.$implicit.ownerid || 0 == n.context.$implicit.destid)
        }), null)
    }

    function GA(l) {
        return ku(0, [mi(0, zv, []), mi(0, gv, []), (l()(), su(2, 0, null, null, 29, "div", [["class", "overflow-auto h-100"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 28, "table", [["class", "table"]], null, null, null, null, null)), (l()(), su(4, 0, null, null, 14, "thead", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Origin"])), (l()(), su(7, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Destination"])), (l()(), su(9, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Speed"])), (l()(), su(11, 0, null, null, 0, "th", [], null, null, null, null, null)), (l()(), su(12, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Gold"])), (l()(), su(14, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Remaining Time"])), (l()(), su(16, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Troops"])), (l()(), su(18, 0, null, null, 0, "th", [], null, null, null, null, null)), (l()(), su(19, 0, null, null, 12, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, AA)), gi(21, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, OA)), gi(23, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, BA)), gi(25, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, LA)), gi(27, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, UA)), gi(29, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, jA)), gi(31, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 21, 0, e.attacks), l(n, 23, 0, e.data.spies), l(n, 25, 0, e.data.scouts), l(n, 27, 0, e.data.workers), l(n, 29, 0, e.data.archeologists), l(n, 31, 0, e.data.goldtransfers)
        }), null)
    }

    function WA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-attacks", [], null, null, null, GA, wA)), gi(1, 114688, null, 0, _A, [Pg, zg, Tg], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var KA = jt("app-attacks", _A, WA, {}, {}, []); class ZA {
        constructor(l, n, e, t) {
            this.dataService = l, this.conf = n, this.data = e, this.messageService = t, this.icons = ug, this.attacking = {}, this.defending = {}, this.attacking_results = {}, this.defending_results = {}, this.walls = !1, this.walls_result = !1, this.castle = !1, this.castle_result = !1, this.fortress = !1, this.fortress_result = !1, this.pop = 5, this.def = 0
        }
        ngOnInit() {
            Object.values(this.conf.troops).forEach(l => {
                l.special || (this.attacking[l.id] = 0)
            }), this.defending = Object.assign({}, this.attacking), this.attacking_results = Object.assign({}, this.attacking), this.defending_results = Object.assign({}, this.attacking);
            let l = this.messageService.getMessage();
            !l || l.defeat && l.isAttacker || (Object.keys(l.troops.remaining.attacker).forEach(n => {
                this.conf.troops[n].special || (this.attacking[n] = l.troops.remaining.attacker[n])
            }), l.spyTroops ? Object.keys(l.spyTroops).forEach(n => {
                this.conf.troops[n].special || (this.defending[n] = l.spyTroops[n])
            }) : Object.keys(l.troops.remaining.defender).forEach(n => {
                this.conf.troops[n].special || (this.defending[n] = l.troops.remaining.defender[n])
            }), this.def = 1, l.to_pid && 1 == l.to_pid && (this.def = 0), l.spyBuildings && (l.spyBuildings.walls && l.spyBuildings.walls.done && (this.walls = !0), l.spyBuildings.castle && l.spyBuildings.castle.done && (this.walls = !0), l.spyBuildings.fortress && l.spyBuildings.fortress.done && (this.walls = !0)), l.spyPop && (this.pop = +l.spyPop), this.messageService.clearMessage())
        }
        simulate() {
            let l = 1;
            1 == this.def && this.data.players.length > 2 && (l = this.data.players[2].id);
            let n = new Ag(-1, "", 1, 0, l, !1, !1);
            n.citizens.idle = Ng.constraint(this.pop, 100, 1), this.walls && (n.buildings.walls = {
                done: !0,
                progress: 0
            }), this.castle && (n.buildings.castle = {
                done: !0,
                progress: 0
            }), this.fortress && (n.buildings.fortress = {
                done: !0,
                progress: 0
            });
            let e = this.dataService.fight(this.attacking, this.defending, n, 0);
            [this.attacking_results, this.defending_results] = e.troops, [this.walls_result, this.castle_result, this.fortress_result] = [e.walls, e.castle, e.fortress]
        }
        trackByFn(l, n) {
            return l
        }
    }
    let QA = (() => {
        class l {
            storeMessage(l) {
                this.message = l
            }
            getMessage() {
                return this.message
            }
            clearMessage() {
                this.message = void 0
            }
        }
        return l.ngInjectableDef = gl({
            factory: function () {
                return new l
            },
            token: l,
            providedIn: "root"
        }), l
    })();
    var YA = st({
        encapsulation: 0,
        styles: [[""]],
        data: {}
    });

    function XA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 13, "tr", [["class", "form-group"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "label", [], [[8, "htmlFor", 0]], null, null, null, null)), (l()(), _u(3, null, ["", ""])), (l()(), su(4, 0, null, null, 7, "td", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 6, "input", [["class", "form-control form-control-sm"], ["min", "0"], ["type", "number"]], [[8, "id", 0], [2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "input" === n && (t = !1 !== ei(l, 6)._handleInput(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 6).onTouched() && t), "compositionstart" === n && (t = !1 !== ei(l, 6)._compositionStart() && t), "compositionend" === n && (t = !1 !== ei(l, 6)._compositionEnd(e.target.value) && t), "change" === n && (t = !1 !== ei(l, 7).onChange(e.target.value) && t), "input" === n && (t = !1 !== ei(l, 7).onChange(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 7).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.attacking[l.context.$implicit.key] = e) && t), t
        }), null, null)), gi(6, 16384, null, 0, tf, [be, fe, [2, ef]], null, null), gi(7, 16384, null, 0, _f, [be, fe], null, null), yi(1024, null, lf, (function (l, n) {
            return [l, n]
        }), [tf, _f]), gi(9, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(11, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(12, 0, null, null, 1, "td", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(13, null, ["", ""]))], (function (l, n) {
            l(n, 9, 0, n.component.attacking[n.context.$implicit.key])
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, Mt(1, "a-troop-", n.context.$implicit.key, "")), l(n, 3, 0, e.conf.troops[n.context.$implicit.key].name(e.dataService.player())), l(n, 5, 0, Mt(1, "a-troop-", n.context.$implicit.key, ""), ei(n, 11).ngClassUntouched, ei(n, 11).ngClassTouched, ei(n, 11).ngClassPristine, ei(n, 11).ngClassDirty, ei(n, 11).ngClassValid, ei(n, 11).ngClassInvalid, ei(n, 11).ngClassPending), l(n, 13, 0, e.attacking_results[n.context.$implicit.key])
        }))
    }

    function JA(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 13, "tr", [["class", "form-group"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "label", [], [[8, "htmlFor", 0]], null, null, null, null)), (l()(), _u(3, null, ["", ""])), (l()(), su(4, 0, null, null, 7, "td", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 6, "input", [["class", "form-control form-control-sm"], ["min", "0"], ["type", "number"]], [[8, "id", 0], [2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "input" === n && (t = !1 !== ei(l, 6)._handleInput(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 6).onTouched() && t), "compositionstart" === n && (t = !1 !== ei(l, 6)._compositionStart() && t), "compositionend" === n && (t = !1 !== ei(l, 6)._compositionEnd(e.target.value) && t), "change" === n && (t = !1 !== ei(l, 7).onChange(e.target.value) && t), "input" === n && (t = !1 !== ei(l, 7).onChange(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 7).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.defending[l.context.$implicit.key] = e) && t), t
        }), null, null)), gi(6, 16384, null, 0, tf, [be, fe, [2, ef]], null, null), gi(7, 16384, null, 0, _f, [be, fe], null, null), yi(1024, null, lf, (function (l, n) {
            return [l, n]
        }), [tf, _f]), gi(9, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(11, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(12, 0, null, null, 1, "td", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(13, null, ["", ""]))], (function (l, n) {
            l(n, 9, 0, n.component.defending[n.context.$implicit.key])
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, Mt(1, "d-troop-", n.context.$implicit.key, "")), l(n, 3, 0, n.context.$implicit.key), l(n, 5, 0, Mt(1, "d-troop-", n.context.$implicit.key, ""), ei(n, 11).ngClassUntouched, ei(n, 11).ngClassTouched, ei(n, 11).ngClassPristine, ei(n, 11).ngClassDirty, ei(n, 11).ngClassValid, ei(n, 11).ngClassInvalid, ei(n, 11).ngClassPending), l(n, 13, 0, e.defending_results[n.context.$implicit.key])
        }))
    }

    function lP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 123, "div", [["class", "h-100 overflow-auto"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Civilizations might have various bonuses that are not included in this simulation. Results might be different in a real situation."])), (l()(), su(4, 0, null, null, 22, "div", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Defender: "])), (l()(), su(7, 0, null, null, 9, "div", [["class", "form-group form-check d-inline-block mr-1"]], null, null, null, null, null)), (l()(), su(8, 0, null, null, 6, "input", [["class", "form-check-input"], ["id", "type-0"], ["name", "def"], ["type", "radio"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "input" === n && (t = !1 !== ei(l, 9)._handleInput(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 9).onTouched() && t), "compositionstart" === n && (t = !1 !== ei(l, 9)._compositionStart() && t), "compositionend" === n && (t = !1 !== ei(l, 9)._compositionEnd(e.target.value) && t), "change" === n && (t = !1 !== ei(l, 10).onChange() && t), "blur" === n && (t = !1 !== ei(l, 10).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.def = e) && t), t
        }), null, null)), gi(9, 16384, null, 0, tf, [be, fe, [2, ef]], null, null), gi(10, 212992, null, 0, xf, [be, fe, wf, Ln], {
            name: [0, "name"],
            value: [1, "value"]
        }, null), yi(1024, null, lf, (function (l, n) {
            return [l, n]
        }), [tf, xf]), gi(12, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            name: [0, "name"],
            model: [1, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(14, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(15, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "type-0"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Barbarian"])), (l()(), su(17, 0, null, null, 9, "div", [["class", "form-group form-check d-inline-block mr-1"]], null, null, null, null, null)), (l()(), su(18, 0, null, null, 6, "input", [["class", "form-check-input"], ["id", "type-1"], ["name", "def"], ["type", "radio"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "input" === n && (t = !1 !== ei(l, 19)._handleInput(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 19).onTouched() && t), "compositionstart" === n && (t = !1 !== ei(l, 19)._compositionStart() && t), "compositionend" === n && (t = !1 !== ei(l, 19)._compositionEnd(e.target.value) && t), "change" === n && (t = !1 !== ei(l, 20).onChange() && t), "blur" === n && (t = !1 !== ei(l, 20).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.def = e) && t), t
        }), null, null)), gi(19, 16384, null, 0, tf, [be, fe, [2, ef]], null, null), gi(20, 212992, null, 0, xf, [be, fe, wf, Ln], {
            name: [0, "name"],
            value: [1, "value"]
        }, null), yi(1024, null, lf, (function (l, n) {
            return [l, n]
        }), [tf, xf]), gi(22, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            name: [0, "name"],
            model: [1, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(24, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(25, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "type-1"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Civilization"])), (l()(), su(27, 0, null, null, 94, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), su(28, 0, null, null, 14, "div", [], null, null, null, null, null)), (l()(), su(29, 0, null, null, 1, "h4", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Attacker"])), (l()(), su(31, 0, null, null, 11, "table", [["class", "table table-sm"]], null, null, null, null, null)), (l()(), su(32, 0, null, null, 6, "thead", [], null, null, null, null, null)), (l()(), su(33, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Troop"])), (l()(), su(35, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Number"])), (l()(), su(37, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Remaining"])), (l()(), su(39, 0, null, null, 3, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, XA)), gi(41, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"],
            ngForTrackBy: [1, "ngForTrackBy"]
        }, null), mi(0, ig, [Ne]), (l()(), su(43, 0, null, null, 78, "div", [["class", "ml-2 pl-2 border-left"]], null, null, null, null, null)), (l()(), su(44, 0, null, null, 1, "h4", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Defender"])), (l()(), su(46, 0, null, null, 75, "table", [["class", "table table-sm"]], null, null, null, null, null)), (l()(), su(47, 0, null, null, 6, "thead", [], null, null, null, null, null)), (l()(), su(48, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Troop"])), (l()(), su(50, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Number"])), (l()(), su(52, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Remaining"])), (l()(), su(54, 0, null, null, 67, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, JA)), gi(56, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"],
            ngForTrackBy: [1, "ngForTrackBy"]
        }, null), mi(0, ig, [Ne]), (l()(), su(58, 0, null, null, 12, "tr", [], null, null, null, null, null)), (l()(), su(59, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(60, 0, null, null, 1, "label", [["for", "d-pop"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Population"])), (l()(), su(62, 0, null, null, 7, "td", [], null, null, null, null, null)), (l()(), su(63, 0, null, null, 6, "input", [["class", "form-control form-control-sm"], ["min", "0"], ["name", "d-pop"], ["type", "number"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "input" === n && (t = !1 !== ei(l, 64)._handleInput(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 64).onTouched() && t), "compositionstart" === n && (t = !1 !== ei(l, 64)._compositionStart() && t), "compositionend" === n && (t = !1 !== ei(l, 64)._compositionEnd(e.target.value) && t), "change" === n && (t = !1 !== ei(l, 65).onChange(e.target.value) && t), "input" === n && (t = !1 !== ei(l, 65).onChange(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 65).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.pop = e) && t), t
        }), null, null)), gi(64, 16384, null, 0, tf, [be, fe, [2, ef]], null, null), gi(65, 16384, null, 0, _f, [be, fe], null, null), yi(1024, null, lf, (function (l, n) {
            return [l, n]
        }), [tf, _f]), gi(67, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            name: [0, "name"],
            model: [1, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(69, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(70, 0, null, null, 0, "td", [], null, null, null, null, null)), (l()(), su(71, 0, null, null, 16, "tr", [], null, null, null, null, null)), (l()(), su(72, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Walls"])), (l()(), su(74, 0, null, null, 6, "td", [], null, null, null, null, null)), (l()(), su(75, 0, null, null, 5, "input", [["id", "walls"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 76).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 76).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.walls = e) && t), t
        }), null, null)), gi(76, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(78, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(80, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(81, 0, null, null, 6, "td", [], null, null, null, null, null)), (l()(), su(82, 0, null, null, 5, "input", [["disabled", ""], ["id", "walls_result"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 83).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 83).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.walls_result = e) && t), t
        }), null, null)), gi(83, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(85, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            isDisabled: [0, "isDisabled"],
            model: [1, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(87, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(88, 0, null, null, 16, "tr", [], null, null, null, null, null)), (l()(), su(89, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Castle"])), (l()(), su(91, 0, null, null, 6, "td", [], null, null, null, null, null)), (l()(), su(92, 0, null, null, 5, "input", [["id", "castle"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 93).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 93).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.castle = e) && t), t
        }), null, null)), gi(93, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(95, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(97, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(98, 0, null, null, 6, "td", [], null, null, null, null, null)), (l()(), su(99, 0, null, null, 5, "input", [["disabled", ""], ["id", "castle_result"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 100).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 100).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.castle_result = e) && t), t
        }), null, null)), gi(100, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(102, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            isDisabled: [0, "isDisabled"],
            model: [1, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(104, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(105, 0, null, null, 16, "tr", [], null, null, null, null, null)), (l()(), su(106, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Fortress"])), (l()(), su(108, 0, null, null, 6, "td", [], null, null, null, null, null)), (l()(), su(109, 0, null, null, 5, "input", [["id", "fortress"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 110).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 110).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.fortress = e) && t), t
        }), null, null)), gi(110, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(112, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(114, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(115, 0, null, null, 6, "td", [], null, null, null, null, null)), (l()(), su(116, 0, null, null, 5, "input", [["disabled", ""], ["id", "fortress_result"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 117).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 117).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.fortress_result = e) && t), t
        }), null, null)), gi(117, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(119, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            isDisabled: [0, "isDisabled"],
            model: [1, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(121, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(122, 0, null, null, 1, "button", [["class", "btn btn-primary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.simulate() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Simulate"]))], (function (l, n) {
            var e = n.component;
            l(n, 10, 0, "def", 0), l(n, 12, 0, "def", e.def), l(n, 20, 0, "def", 1), l(n, 22, 0, "def", e.def), l(n, 41, 0, et(n, 41, 0, ei(n, 42).transform(e.attacking)), e.trackByFn), l(n, 56, 0, et(n, 56, 0, ei(n, 57).transform(e.defending)), e.trackByFn), l(n, 67, 0, "d-pop", e.pop), l(n, 78, 0, e.walls), l(n, 85, 0, "", e.walls_result), l(n, 95, 0, e.castle), l(n, 102, 0, "", e.castle_result), l(n, 112, 0, e.fortress), l(n, 119, 0, "", e.fortress_result)
        }), (function (l, n) {
            l(n, 2, 0, n.component.icons.warning), l(n, 8, 0, ei(n, 14).ngClassUntouched, ei(n, 14).ngClassTouched, ei(n, 14).ngClassPristine, ei(n, 14).ngClassDirty, ei(n, 14).ngClassValid, ei(n, 14).ngClassInvalid, ei(n, 14).ngClassPending), l(n, 18, 0, ei(n, 24).ngClassUntouched, ei(n, 24).ngClassTouched, ei(n, 24).ngClassPristine, ei(n, 24).ngClassDirty, ei(n, 24).ngClassValid, ei(n, 24).ngClassInvalid, ei(n, 24).ngClassPending), l(n, 63, 0, ei(n, 69).ngClassUntouched, ei(n, 69).ngClassTouched, ei(n, 69).ngClassPristine, ei(n, 69).ngClassDirty, ei(n, 69).ngClassValid, ei(n, 69).ngClassInvalid, ei(n, 69).ngClassPending), l(n, 75, 0, ei(n, 80).ngClassUntouched, ei(n, 80).ngClassTouched, ei(n, 80).ngClassPristine, ei(n, 80).ngClassDirty, ei(n, 80).ngClassValid, ei(n, 80).ngClassInvalid, ei(n, 80).ngClassPending), l(n, 82, 0, ei(n, 87).ngClassUntouched, ei(n, 87).ngClassTouched, ei(n, 87).ngClassPristine, ei(n, 87).ngClassDirty, ei(n, 87).ngClassValid, ei(n, 87).ngClassInvalid, ei(n, 87).ngClassPending), l(n, 92, 0, ei(n, 97).ngClassUntouched, ei(n, 97).ngClassTouched, ei(n, 97).ngClassPristine, ei(n, 97).ngClassDirty, ei(n, 97).ngClassValid, ei(n, 97).ngClassInvalid, ei(n, 97).ngClassPending), l(n, 99, 0, ei(n, 104).ngClassUntouched, ei(n, 104).ngClassTouched, ei(n, 104).ngClassPristine, ei(n, 104).ngClassDirty, ei(n, 104).ngClassValid, ei(n, 104).ngClassInvalid, ei(n, 104).ngClassPending), l(n, 109, 0, ei(n, 114).ngClassUntouched, ei(n, 114).ngClassTouched, ei(n, 114).ngClassPristine, ei(n, 114).ngClassDirty, ei(n, 114).ngClassValid, ei(n, 114).ngClassInvalid, ei(n, 114).ngClassPending), l(n, 116, 0, ei(n, 121).ngClassUntouched, ei(n, 121).ngClassTouched, ei(n, 121).ngClassPristine, ei(n, 121).ngClassDirty, ei(n, 121).ngClassValid, ei(n, 121).ngClassInvalid, ei(n, 121).ngClassPending)
        }))
    }

    function nP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-simulator", [], null, null, null, lP, YA)), gi(1, 114688, null, 0, ZA, [zg, Tg, Pg, QA], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var eP = jt("app-simulator", ZA, nP, {}, {}, []); class tP {
        constructor(l, n, e, t, i, s) {
            this.conf = l, this.data = n, this.dataService = e, this.activatedRoute = t, this.messageService = i, this.router = s, this.icons = ug
        }
        ngOnInit() {
            this.activatedRoute.paramMap.subscribe(l => {
                l.has("id") && this.showDetails(this.data.reports.find(n => n.id == +l.get("id")))
            })
        }
        isEmpty(l) {
            return 0 == Object.keys(l).length
        }
        showDetails(l) {
            l && (this.report = l, this.from = this.dataService.city(l.from_id), this.to = this.dataService.city(l.to_id), l.read = !0)
        }
        reportStatus(l) {
            return l.victory && l.cityBurned ? "City burned down !" : l.victory && l.cityTaken ? "City conquered !" : l.victory ? "Victory" : l.defeat && l.cityTaken ? "City lost !" : l.defeat ? "Defeat" : "Draw"
        }
        readAll() {
            this.data.reports.forEach(l => l.read = !0)
        }
        nb(l) {
            return this.report.defeat && this.report.isAttacker ? "?" : "" + l
        }
        toSim() {
            this.messageService.storeMessage(this.report), this.router.navigate(["/game/simulator"])
        }
    }
    var iP = st({
        encapsulation: 0,
        styles: [[""]],
        data: {}
    });

    function sP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-sm btn-danger"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.readAll() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Mark all as read"]))], null, null)
    }

    function uP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.component.icons.exclamation)
        }))
    }

    function rP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(1, 114688, null, 0, nx, [Pg, zg], {
            id: [0, "id"]
        }, null)], (function (l, n) {
            l(n, 1, 0, n.parent.context.$implicit.to_id)
        }), null)
    }

    function aP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(1, null, ["", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.parent.context.$implicit.name)
        }))
    }

    function oP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 20, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 3, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, uP)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(4, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(5, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), _u(6, null, ["", ""])), yu(7, 2), (l()(), su(8, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(9, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(10, 114688, null, 0, nx, [Pg, zg], {
            id: [0, "id"]
        }, null), (l()(), su(11, 0, null, null, 4, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, rP)), gi(13, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, aP)), gi(15, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(16, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(17, null, ["", ""])), (l()(), su(18, 0, null, null, 2, "td", [["class", "btn-link cursor-pointer"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.showDetails(l.context.$implicit) && t), t
        }), null, null)), (l()(), su(19, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Details "]))], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, !n.context.$implicit.read), l(n, 10, 0, n.context.$implicit.from_id), l(n, 13, 0, e.dataService.city(n.context.$implicit.to_id)), l(n, 15, 0, n.context.$implicit.name && !e.dataService.city(n.context.$implicit.to_id))
        }), (function (l, n) {
            var e = n.component;
            l(n, 4, 0, n.context.$implicit.spy ? e.icons.details : e.icons.attack);
            var t = et(n, 6, 0, l(n, 7, 0, ei(n.parent.parent, 0), n.context.$implicit.date, "dd/MM/yyyy HH:mm"));
            l(n, 6, 0, t), l(n, 17, 0, e.reportStatus(n.context.$implicit)), l(n, 19, 0, e.icons.details)
        }))
    }

    function cP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 16, "div", [["class", "d-flex flex-column h-100"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 15, "div", [["class", "flex-fill"], ["style", "height:0"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 14, "table", [["class", "table table-sm"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 10, "thead", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 0, "th", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Date"])), (l()(), su(7, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["From"])), (l()(), su(9, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["To"])), (l()(), su(11, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Status"])), (l()(), su(13, 0, null, null, 0, "th", [], null, null, null, null, null)), (l()(), su(14, 0, null, null, 2, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, oP)), gi(16, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            l(n, 16, 0, n.component.data.reports.slice().reverse())
        }), null)
    }

    function dP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(1, null, ["of ", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.component.to.name)
        }))
    }

    function hP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(1, null, ["of ", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.component.report.name)
        }))
    }

    function pP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Walls have been destroyed"]))], null, null)
    }

    function fP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Castle has been destroyed"]))], null, null)
    }

    function gP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), _u(1, null, ["Defense: ", ""])), yu(2, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 1, 0, l(n, 2, 0, ei(n.parent.parent, 1), e.report.defense));
            l(n, 1, 0, t)
        }))
    }

    function mP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), _u(1, null, ["Influence: -", " defense"])), yu(2, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 1, 0, l(n, 2, 0, ei(n.parent.parent, 1), e.report.influence));
            l(n, 1, 0, t)
        }))
    }

    function yP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 3, "b", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(3, null, [" ", " stolen !"])), yu(4, 1)], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.icons.science + " text-science");
            var t = et(n, 3, 0, l(n, 4, 0, ei(n.parent.parent, 2), e.report.spyScience));
            l(n, 3, 0, t)
        }))
    }

    function vP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 8, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(2, null, ["", ""])), (l()(), su(3, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(4, null, ["", ""])), (l()(), su(5, 0, null, null, 1, "td", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(6, null, ["- ", " "])), (l()(), su(7, 0, null, null, 1, "td", [["class", "text-info"]], null, null, null, null, null)), (l()(), _u(8, null, ["", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.conf.troops[n.parent.context.$implicit.key].name(e.dataService.player(e.from.ownerid))), l(n, 4, 0, n.parent.context.$implicit.value), l(n, 6, 0, n.parent.context.$implicit.value - e.report.troops.remaining.attacker[n.parent.context.$implicit.key]), l(n, 8, 0, e.report.troops.remaining.attacker[n.parent.context.$implicit.key])
        }))
    }

    function bP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, vP)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, n.context.$implicit.value)
        }), null)
    }

    function _P(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "player", [], null, null, null, xE, _E)), gi(1, 114688, null, 0, bE, [zg], {
            id: [0, "id"]
        }, null)], (function (l, n) {
            l(n, 1, 0, n.component.report.to_pid)
        }), null)
    }

    function wP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "player", [], null, null, null, xE, _E)), gi(1, 114688, null, 0, bE, [zg], {
            id: [0, "id"]
        }, null)], (function (l, n) {
            l(n, 1, 0, n.component.to.ownerid)
        }), null)
    }

    function xP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(1, 114688, null, 0, nx, [Pg, zg], {
            id: [0, "id"]
        }, null)], (function (l, n) {
            l(n, 1, 0, n.component.report.to_id)
        }), null)
    }

    function kP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(1, null, ["", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.component.report.name)
        }))
    }

    function SP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 8, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(2, null, ["", ""])), (l()(), su(3, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(4, null, ["", ""])), (l()(), su(5, 0, null, null, 1, "td", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(6, null, ["- ", " "])), (l()(), su(7, 0, null, null, 1, "td", [["class", "text-info"]], null, null, null, null, null)), (l()(), _u(8, null, ["", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.conf.troops[n.parent.context.$implicit.key].name(e.dataService.player(e.to.ownerid))), l(n, 4, 0, e.nb(n.parent.context.$implicit.value)), l(n, 6, 0, e.nb(n.parent.context.$implicit.value - e.report.troops.remaining.defender[n.parent.context.$implicit.key])), l(n, 8, 0, e.nb(e.report.troops.remaining.defender[n.parent.context.$implicit.key]))
        }))
    }

    function CP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, SP)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, n.context.$implicit.value)
        }), null)
    }

    function IP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "tr", [], null, null, null, null, null)), (l()(), _u(-1, null, [" Empty "]))], null, null)
    }

    function TP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "table", [["class", "table table-sm"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 5, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, CP)), gi(3, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne]), (l()(), iu(16777216, null, null, 1, null, IP)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, et(n, 3, 0, ei(n, 4).transform(e.report.troops.initial.defender))), l(n, 6, 0, e.isEmpty(e.report.troops.initial.defender))
        }), null)
    }

    function EP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (l()(), _u(1, null, [" ", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.conf.buildings[n.parent.context.$implicit.key].label(e.dataService.player(e.to.ownerid)))
        }))
    }

    function AP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, EP)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, n.context.$implicit.value.done)
        }), null)
    }

    function PP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "border p-2 m-2"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Buildings"])), (l()(), iu(16777216, null, null, 2, null, AP)), gi(4, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne])], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, et(n, 4, 0, ei(n, 5).transform(e.report.spyBuildings)))
        }), null)
    }

    function DP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (l()(), _u(1, null, ["", " : ", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.conf.troops[n.parent.context.$implicit.key].name(e.dataService.player(e.to.ownerid)), n.parent.context.$implicit.value)
        }))
    }

    function MP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, DP)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, n.context.$implicit.value)
        }), null)
    }

    function OP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "border p-2 m-2"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Troops"])), (l()(), iu(16777216, null, null, 2, null, MP)), gi(4, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne])], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, et(n, 4, 0, ei(n, 5).transform(e.report.spyTroops)))
        }), null)
    }

    function NP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 10, "div", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "div", [], null, null, null, null, null)), (l()(), _u(2, null, ["Population: ", ""])), (l()(), su(3, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), _u(4, null, ["Gold: ", ""])), yu(5, 1), (l()(), su(6, 0, null, null, 4, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, PP)), gi(8, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, OP)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 8, 0, e.report.spyData.buildings), l(n, 10, 0, e.report.spyData.troops)
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.report.spyPop ? e.report.spyPop : "?");
            var t = e.report.spyData.gold ? et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 2), e.report.gold)) : "?";
            l(n, 4, 0, t)
        }))
    }

    function RP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-primary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.toSim() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Send to Battle Simulator"]))], null, null)
    }

    function BP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 54, "div", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 8, "h4", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Battle "])), (l()(), iu(16777216, null, null, 1, null, dP)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, hP)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(7, 0, null, null, 2, "small", [["class", "text-muted ml-2"]], null, null, null, null, null)), (l()(), _u(8, null, ["", ""])), yu(9, 2), (l()(), su(10, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(11, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(12, null, ["", " ", ""])), (l()(), iu(16777216, null, null, 1, null, pP)), gi(14, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, fP)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, gP)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, mP)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, yP)), gi(22, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(23, 0, null, null, 27, "div", [["class", "d-flex text-center"]], null, null, null, null, null)), (l()(), su(24, 0, null, null, 11, "div", [["class", "mr-3"]], null, null, null, null, null)), (l()(), su(25, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(26, 0, null, null, 1, "player", [], null, null, null, xE, _E)), gi(27, 114688, null, 0, bE, [zg], {
            id: [0, "id"]
        }, null), (l()(), su(28, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(29, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(30, 114688, null, 0, nx, [Pg, zg], {
            id: [0, "id"]
        }, null), (l()(), su(31, 0, null, null, 4, "table", [["class", "table table-sm"]], null, null, null, null, null)), (l()(), su(32, 0, null, null, 3, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, bP)), gi(34, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne]), (l()(), su(36, 0, null, null, 14, "div", [], null, null, null, null, null)), (l()(), su(37, 0, null, null, 4, "div", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, _P)), gi(39, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, wP)), gi(41, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(42, 0, null, null, 4, "div", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, xP)), gi(44, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, kP)), gi(46, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, TP)), gi(48, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, NP)), gi(50, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(51, 0, null, null, 1, "button", [["class", "btn btn-secondary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.report = void 0) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Back to list"])), (l()(), iu(16777216, null, null, 1, null, RP)), gi(54, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, e.to), l(n, 6, 0, !e.to && e.report.name), l(n, 14, 0, e.report.walls_destroyed), l(n, 16, 0, e.report.castle_destroyed), l(n, 18, 0, e.report.defense), l(n, 20, 0, e.report.influence), l(n, 22, 0, e.report.spyScience), l(n, 27, 0, e.from.ownerid), l(n, 30, 0, e.report.from_id), l(n, 34, 0, et(n, 34, 0, ei(n, 35).transform(e.report.troops.initial.attacker))), l(n, 39, 0, e.report.to_pid), l(n, 41, 0, !e.report.to_pid && e.to), l(n, 44, 0, e.to), l(n, 46, 0, !e.to && e.report.name), l(n, 48, 0, !e.report.spy), l(n, 50, 0, e.report.spy), l(n, 54, 0, e.dataService.isUnlocked("menu_simulator"))
        }), (function (l, n) {
            var e = n.component,
                t = et(n, 8, 0, l(n, 9, 0, ei(n.parent, 0), e.report.date, "dd/MM/yyyy HH:mm"));
            l(n, 8, 0, t), l(n, 12, 0, e.reportStatus(e.report), e.report.spy ? "" : "(" + e.report.gold + " gold pillaged)")
        }))
    }

    function zP(l) {
        return ku(0, [mi(0, $a, [Ji]), mi(0, $v, []), mi(0, zv, []), (l()(), su(3, 0, null, null, 8, "div", [["class", "h-100 overflow-auto"]], null, null, null, null, null)), (l()(), su(4, 0, null, null, 1, "h2", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Battle reports"])), (l()(), iu(16777216, null, null, 1, null, sP)), gi(7, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, cP)), gi(9, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, BP)), gi(11, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 7, 0, !e.report), l(n, 9, 0, !e.report), l(n, 11, 0, e.report)
        }), null)
    }

    function $P(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-reports", [], null, null, null, zP, iP)), gi(1, 114688, null, 0, tP, [Tg, Pg, zg, oh, QA, _p], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var LP = jt("app-reports", tP, $P, {}, {}, []); class FP {
        constructor(l, n, e) {
            this.data = l, this.conf = n, this.dataService = e, this.icons = ug
        }
        ngOnInit() {
            this.player = this.dataService.player()
        }
        mouseenter(l, n) {
            l.open({
                title: n.name,
                desc: n.description,
                require: n.require.science || n.require,
                groups: n.groups
            })
        }
        mouseleave(l) {
            l.close()
        }
        containerClass(l) {
            let n = "policy-container border m-2 rounded-lg";
            return this.isGroupDone(l) ? n + " policy-unlocked" : this.isGroupLocked(l) ? n + " policy-locked" : n
        }
        groupClass(l) {
            return this.isGroupDone(l) ? "p-3 text-primary" : this.isGroupLocked(l) ? "p-3 text-danger cursor-forbidden" : this.isGroupAvailable(l) ? "text-success p-3 cursor-pointer" : "p-3 text-secondary cursor-forbidden"
        }
        policyClass(l) {
            return this.isPolicyDone(l) ? "list-group-item text-primary" : this.isPolicyAvailable(l) ? "list-group-item text-success cursor-pointer" : "list-group-item text-secondary cursor-forbidden"
        }
        isPolicyDone(l) {
            return this.dataService.hasPolicy(l.id)
        }
        isGroupDone(l) {
            return this.dataService.hasPolicyGroup(l.id)
        }
        isPolicyAvailable(l) {
            return this.dataService.isPolicyAvailable(l)
        }
        isGroupAvailable(l) {
            return this.dataService.isPolicyGroupAvailable(l)
        }
        isGroupLocked(l) {
            return !l.lockedBy || this.dataService.hasPolicyGroup(l.lockedBy)
        }
        selectGroup(l) {
            !this.isGroupAvailable(l) || this.isGroupLocked(l) || this.isGroupDone(l) || (this.player.culture -= this.dataService.cultureCost(), this.player.policies.groups.push(l.id))
        }
        selectPolicy(l) {
            this.isPolicyAvailable(l) && !this.isPolicyDone(l) && (this.player.culture -= this.dataService.cultureCost(), this.player.policies.policies.push(l.id))
        }
        reset() {
            !this.data.favors[0].dionysus || this.data.favors[0].dionysus < this.dataService.cultureResetCost() || (this.data.favors[0].dionysus -= this.dataService.cultureResetCost(), this.doReset())
        }
        reset2() {
            !this.data.prestige || this.data.prestige < 5 * this.dataService.cultureResetCost() || (this.data.prestige -= 5 * this.dataService.cultureResetCost(), this.doReset())
        }
        doReset() {
            let l = this.dataService.player();
            l.culture += this.dataService.totalCultureUsed(l, l.cities.length), l.policies.policies = [], l.policies.groups = [], this.data.culture_reset ? this.data.culture_reset += 1 : this.data.culture_reset = 1
        }
        policies(l = "") {
            return l ? Object.values(this.conf.policies.policies).filter(n => 1 == n.groups.length && n.groups[0] == l) : Object.values(this.conf.policies.policies).filter(l => 2 == l.groups.length)
        }
    }
    var qP = st({
        encapsulation: 0,
        styles: [[".policy-unlocked[_ngcontent-%COMP%]{background-color:#d6eaf8}.policy-locked[_ngcontent-%COMP%]{background-color:#fadbd8}.list-group-item[_ngcontent-%COMP%]{background-color:transparent!important;padding:.5rem .75rem!important}"]],
        data: {}
    });

    function UP(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 2, "div", [["container", "body"], ["triggers", "manual"]], [[8, "className", 0]], [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (t = !1 !== i.selectPolicy(l.context.$implicit) && t), "mouseenter" === n && (t = !1 !== i.mouseenter(ei(l, 1), l.context.$implicit) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 1)) && t), t
        }), null, null)), gi(1, 737280, [["p1", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            popoverTitle: [1, "popoverTitle"],
            triggers: [2, "triggers"],
            container: [3, "container"]
        }, null), (l()(), _u(2, null, [" ", " "])), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 1, 0, ei(n.parent.parent, 37), ei(n.parent.parent, 36), "manual", "body")
        }), (function (l, n) {
            l(n, 0, 0, n.component.policyClass(n.context.$implicit)), l(n, 2, 0, n.context.$implicit.name)
        }))
    }

    function HP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "div", [["style", "width:225px"]], [[8, "className", 0]], null, null, null, null)), (l()(), su(1, 16777216, null, null, 2, "h4", [["triggers", "manual"]], [[8, "className", 0]], [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (t = !1 !== i.selectGroup(l.context.$implicit.value) && t), "mouseenter" === n && (t = !1 !== i.mouseenter(ei(l, 2), l.context.$implicit.value) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 2)) && t), t
        }), null, null)), gi(2, 737280, [["p1", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            popoverTitle: [1, "popoverTitle"],
            triggers: [2, "triggers"]
        }, null), (l()(), _u(3, null, [" ", " "])), (l()(), su(4, 0, null, null, 2, "div", [["class", "list-group"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, UP)), gi(6, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, ei(n.parent, 37), ei(n.parent, 36), "manual"), l(n, 6, 0, e.policies(n.context.$implicit.key))
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, e.containerClass(n.context.$implicit.value)), l(n, 1, 0, e.groupClass(n.context.$implicit.value)), l(n, 3, 0, n.context.$implicit.value.name)
        }))
    }

    function VP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "br", [], null, null, null, null, null))], null, null)
    }

    function jP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, null, null, null, null, null, null, null)), (l()(), su(1, 16777216, null, null, 2, "span", [["container", "body"], ["style", "width:236px"], ["triggers", "manual"]], [[8, "className", 0]], [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (t = !1 !== i.selectPolicy(l.context.$implicit) && t), "mouseenter" === n && (t = !1 !== i.mouseenter(ei(l, 2), l.context.$implicit) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 2)) && t), t
        }), null, null)), gi(2, 737280, [["p1", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            popoverTitle: [1, "popoverTitle"],
            triggers: [2, "triggers"],
            container: [3, "container"]
        }, null), (l()(), _u(3, null, [" ", " "])), (l()(), iu(16777216, null, null, 1, null, VP)), gi(5, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, ei(n.parent, 37), ei(n.parent, 36), "manual", "body"), l(n, 5, 0, n.context.index % 6 == 5)
        }), (function (l, n) {
            l(n, 1, 0, n.component.policyClass(n.context.$implicit) + " d-inline-block border"), l(n, 3, 0, n.context.$implicit.name)
        }))
    }

    function GP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "button", [["class", "btn btn-success ml-4"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.reset() && t), t
        }), null, null)), (l()(), _u(-1, null, [" Reset Policies ("])), (l()(), su(2, 0, null, null, 3, "i", [], [[8, "className", 0]], null, null, null, null)), yi(512, null, Oa, Na, [fe, Ne, be]), gi(4, 278528, null, 0, Ba, [Oa], {
            ngStyle: [0, "ngStyle"]
        }, null), vu(5, {
            color: 0
        }), (l()(), _u(6, null, [" ", ")"]))], (function (l, n) {
            var e = l(n, 5, 0, n.component.conf.deities.dionysus.color);
            l(n, 4, 0, e)
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, !e.data.favors[0].dionysus || e.data.favors[0].dionysus < e.dataService.cultureResetCost()), l(n, 2, 0, e.icons.favor), l(n, 6, 0, e.dataService.cultureResetCost())
        }))
    }

    function WP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "button", [["class", "btn btn-success ml-4"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.reset2() && t), t
        }), null, null)), (l()(), _u(-1, null, [" Reset Policies ("])), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(3, null, [" ", ")"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, e.data.prestige < 5 * e.dataService.cultureResetCost()), l(n, 2, 0, e.icons.prestige + " text-prestige"), l(n, 3, 0, 5 * e.dataService.cultureResetCost())
        }))
    }

    function KP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 8, "div", [["class", "form-group form-check mb-0"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "emp_noconscription"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 2).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 2).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.data.emp_noconscription = e) && t), t
        }), null, null)), gi(2, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(4, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(6, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(7, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "emp_noconscription"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Disable conscription"]))], (function (l, n) {
            l(n, 4, 0, n.component.data.emp_noconscription)
        }), (function (l, n) {
            l(n, 1, 0, ei(n, 6).ngClassUntouched, ei(n, 6).ngClassTouched, ei(n, 6).ngClassPristine, ei(n, 6).ngClassDirty, ei(n, 6).ngClassValid, ei(n, 6).ngClassInvalid, ei(n, 6).ngClassPending)
        }))
    }

    function ZP(l) {
        return ku(0, [(l()(), _u(0, null, ["", ""]))], null, (function (l, n) {
            l(n, 0, 0, n.context.title)
        }))
    }

    function QP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(1, null, ["", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.component.conf.policies.groups[n.context.$implicit].name + (0 == n.context.index ? " and " : ""))
        }))
    }

    function YP(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "div", [["class", "border-top font-weight-bold"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Required: "])), (l()(), iu(16777216, null, null, 1, null, QP)), gi(3, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            l(n, 3, 0, n.parent.context.groups)
        }), null)
    }

    function XP(l) {
        return ku(0, [(l()(), iu(16777216, null, null, 1, null, YP)), gi(1, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(2, 0, null, null, 0, "div", [], [[8, "innerHTML", 1]], null, null, null, null)), (l()(), su(3, 0, null, null, 3, "div", [["class", "border-top"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Required: "])), (l()(), su(5, 0, null, null, 1, "span", [["class", "text-science"]], null, null, null, null, null)), (l()(), _u(6, null, ["", ""]))], (function (l, n) {
            l(n, 1, 0, n.context.groups && n.context.groups.length > 1)
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, n.context.desc), l(n, 6, 0, e.conf.sciences[n.context.require].label)
        }))
    }

    function JP(l) {
        return ku(0, [mi(0, zv, []), (l()(), su(1, 0, null, null, 34, "div", [["class", "h-100 overflow-auto"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 5, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Policy cost: "])), (l()(), su(4, 0, null, null, 3, "span", [["class", "text-culture"]], null, null, null, null, null)), (l()(), su(5, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(6, null, [" ", ""])), yu(7, 1), (l()(), su(8, 0, null, null, 12, "div", [["class", "d-flex flex-wrap p-relative"]], null, null, null, null, null)), (l()(), su(9, 0, null, null, 1, "bgicon", [["icon", "culture"]], null, null, null, yT, mT)), gi(10, 114688, null, 0, gT, [], {
            icon: [0, "icon"]
        }, null), (l()(), iu(16777216, null, null, 2, null, HP)), gi(12, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne]), (l()(), su(14, 0, null, null, 6, "div", [["class", "policy-container border m-2 rounded-lg policy-unlocked"], ["style", "max-width:1430px"]], null, null, null, null, null)), (l()(), su(15, 0, null, null, 3, "h4", [["class", "px-3 py-2 m-0 text-dark"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Mixed policies "])), (l()(), su(17, 0, null, null, 1, "span", [["class", "text-70 text-secondary"]], null, null, null, null, null)), (l()(), _u(-1, null, ["(Policies that require 2 groups)"])), (l()(), iu(16777216, null, null, 1, null, jP)), gi(20, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(21, 0, null, null, 12, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), su(22, 0, null, null, 1, "div", [["class", "border p-3 text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Available for purchase"])), (l()(), su(24, 0, null, null, 1, "div", [["class", "border p-3 text-primary"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Purchased"])), (l()(), su(26, 0, null, null, 1, "div", [["class", "border p-3 text-secondary"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Unavailable"])), (l()(), su(28, 0, null, null, 1, "div", [["class", "border p-3 policy-locked text-danger"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Locked"])), (l()(), iu(16777216, null, null, 1, null, GP)), gi(31, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, WP)), gi(33, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, KP)), gi(35, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, [["popTitle", 2]], null, 0, null, ZP)), (l()(), iu(0, [["popContent", 2]], null, 0, null, XP))], (function (l, n) {
            var e = n.component;
            l(n, 10, 0, "culture"), l(n, 12, 0, et(n, 12, 0, ei(n, 13).transform(e.conf.policies.groups))), l(n, 20, 0, e.policies()), l(n, 31, 0, e.data.rebirths > 0), l(n, 33, 0, e.data.prestige), l(n, 35, 0, e.dataService.hasPolicy("conscription"))
        }), (function (l, n) {
            var e = n.component;
            l(n, 5, 0, e.icons.culture);
            var t = et(n, 6, 0, l(n, 7, 0, ei(n, 0), e.dataService.cultureCost()));
            l(n, 6, 0, t)
        }))
    }

    function lD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-policies", [], null, null, null, JP, qP)), gi(1, 114688, null, 0, FP, [Pg, Tg, zg], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var nD = jt("app-policies", FP, lD, {}, {}, []); class eD {
        constructor(l) {
            this.data = l
        }
        ngOnInit() {}
    }
    var tD = st({
        encapsulation: 0,
        styles: [[""]],
        data: {}
    });

    function iD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.parent.context.$implicit.icon)
        }))
    }

    function sD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 7, "div", [], null, null, null, null, null)), (l()(), _u(1, null, [" ", " "])), yu(2, 2), (l()(), su(3, 0, null, null, 4, "a", [], [[8, "className", 0], [1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 4).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(4, 671744, null, 0, xp, [_p, oh, Rr], {
            routerLink: [0, "routerLink"]
        }, null), (l()(), iu(16777216, null, null, 1, null, iD)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), _u(7, null, [" ", ""]))], (function (l, n) {
            l(n, 4, 0, n.context.$implicit.link), l(n, 6, 0, n.context.$implicit.icon)
        }), (function (l, n) {
            var e = et(n, 1, 0, l(n, 2, 0, ei(n.parent, 0), n.context.$implicit.date, "dd/MM/yyyy HH:mm"));
            l(n, 1, 0, e), l(n, 3, 0, n.context.$implicit.classname + " p-1 m-1 d-inline-block", ei(n, 4).target, ei(n, 4).href), l(n, 7, 0, n.context.$implicit.text)
        }))
    }

    function uD(l) {
        return ku(0, [mi(0, $a, [Ji]), (l()(), su(1, 0, null, null, 1, "h3", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Notifications"])), (l()(), su(3, 0, null, null, 2, "div", [["class", "overflow-auto vh-100"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, sD)), gi(5, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            l(n, 5, 0, n.component.data.notifications.slice().reverse())
        }), null)
    }

    function rD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-notifications", [], null, null, null, uD, tD)), gi(1, 114688, null, 0, eD, [Pg], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var aD = jt("app-notifications", eD, rD, {}, {}, []);
    const oD = {
        home: {
            id: "home",
            name: "Cividlization II",
            html: () => '<p>Welcome to the Cividlization II Help pages !</p><p>Here you will find answers to all of your questions about this Game.</p><p><b class="text-danger">Spoiler alert !</b> While the help sections are a great way to learn more about the mechanics of this game, it might reveal some features that are locked in the early stage of the game.</p><p>You can find the meaning of all the icons used in this game <a href="/game/help#icons">in this section</a>.</p><p>In the footer of this page, you will see links to different pages related to your current page.</p><div class="text-center w-100"><i class="text-500 fas fa-arrow-down"></i></div>'
        },
        citizens: {
            id: "citizens",
            name: "Citizens & Improvements",
            html: () => '<p>Theres is different type of citizens which all contribute to your empire in a specific way:<ul><li>Idle citizens don\'t produce only what is needed to keep them alive. It is the default role of new citizens</li><li><b>Hunter-gatherers</b> and <b>Farmers</b> are specialized in <span class="text-food"><i class="' + ug.food + '"></i> food</span> production</li><li><b>Builders</b> are specialized in <span class="text-prod"><i class="' + ug.prod + '"></i> industrial</span> production</li><li><b>Merchants</b> are specialized in <span class="text-gold"><i class="' + ug.gold + '"></i> gold</span> production</li><li><b>Scientists</b> are specialized in <span class="text-science"><i class="' + ug.science + '"></i> science</span> production</li><li><b>Artists</b> are specialized in <span class="text-culture"><i class="' + ug.culture + '"></i> culture</span> and <span class="text-happiness"><i class="' + ug.happiness + '"></i> happiness</span> production</li><li><b>Priests</b> are specialized in <span class="text-faith"><i class="' + ug.faith + '"></i> faith</span> production</li></ul></p><p>All citizens provide a small contribution to the <span class="text-science"><i class="' + ug.science + '"></i>scientific</span> progress of your civilization.</p><p>Citizens production can be improved by building <a href="/game/help#improvements">improvements</a></p><p>You can either allocate your population to specific roles or let the game do it for you by checking the auto-assign option.<br/>Auto-assign will always make sure that :<ul><li>your people have enough <span class="text-food"><i class="' + ug.food + '"></i> food</span> (as much as possible)</li><li>you don\t run out of <span class="text-gold"><i class="' + ug.gold + '"></i> gold</span> (as much as possible)</li><li>your <span class="text-happiness"><i class="' + ug.happiness + '"></i> happiness</span> don\'t drop under 20% (as much as possible)</li><li>you don\t waste workforce in production/culture/science that can\'t be used</li></ul></p><p>You can set priorities for each type of production.<br/>Default priority will still allocate other types of citizens. You can check the <i>strong</i> auto-allocation option to prevent the algorithm to allocate other type of population (except from Farmers & Merchants that will keep your city running.)</p><p>You can also ask the algorithm to prevent growth by checking the <i>Prevent growth</i> option. your city will still grow but just so that your people don\'t die of starvation.</p><p>Some cities have bonuses which make them more productive in a certain domain: <span class="text-food"><i class="' + ug.food + '"></i> food</span>, <span class="text-prod"><i class="' + ug.prod + '"></i> industrial production</span>, <span class="text-science"><i class="' + ug.science + '"></i> science</span>, <span class="text-gold"><i class="' + ug.gold + '"></i> gold</span>, <span class="text-culture"><i class="' + ug.culture + '"></i> culture</span>, <span class="text-faith"><i class="' + ug.faith + '"></i> faith</span> or <span class="text-dark"><i class="' + ug.recruitment + '"></i> recruitment speed</span>',
            parent: "home"
        },
        "food-health-happiness": {
            id: "food-health-happiness",
            name: "Food, Health & Happiness",
            html: () => '<p><a href="/game/help#food" class="text-food"><i class="' + ug.food + '"></i> Food</a> is the most important resource in this game. Without it, your cities will not grow and you will not be able to produce anything else.</p><p><a href="/game/help#health" class="text-health"><i class="' + ug.health + '"></i> Health</a> is vital to sustain the growth of your cities.</p><p><a href="/game/help#happiness" class="text-happiness"><i class="' + ug.happiness + '"></i> Happiness</a> is essential to an healthy empire. Without it, you will not be able to produce anything and your cities might even revolt.</p>',
            parent: "home"
        },
        buildings: {
            id: "buildings",
            name: "Production & Buildings",
            html: () => '<p><span class="text-prod"><i class="' + ug.prod + '"></i> Industrial production</span> is the way to construct buildings in your cities.<br/>Buildings provide great bonuses for your cities and might even be required to recruit troops.</p><p><span class="text-special">Wonders</span> are special buildings that provides a great bonus but can only exist in one city. If someone finishes it before you do, you will not be able to finish it !</p><p>A detailed list of buildings is available in <a href="/game/help#buildings_list">this help section</a></p><p><span class="text-prod"><i class="' + ug.prod + '"></i> Industrial</span> production is provided by <a href="/game/help#citizens">builders</a>, buildings and can be increased in several ways, including <a href="/game/help#policies">Social Policies</a>.</p><p><span class="text-prod"><i class="' + ug.prod + '"></i> Industrial</span> production is impacted by <a href="/game/help#happiness" class="text-happiness"><i class="' + ug.happiness + '"></i> Happiness</a></p>',
            parent: "home"
        },
        science: {
            id: "science",
            name: "Science",
            html: () => '<p><span class="text-science"><i class="' + ug.science + '"></i> Science production</span> is required to acquire new technologies.<br/>Technologies are required to unlock buildings, troops, social policies and many more.</p><p>Technologies are grouped in Eras that can only be visible right before you can access it.<br/>There are 4 eras available in this game so far: Prehistoric, Ancient, Classical and Medieval Eras</p><p>After your first <a href="/game/help#reincarnation">reincarnation</a>, you will be able to queue tech research.</p><p><span class="text-science"><i class="' + ug.science + '"></i> Science</span> production is provided by all of your citizens in a small amount, but much more efficiently by <a href="/game/help#citizens">scientists</a>, buildings and can be increased in several ways, including <a href="/game/help#policies">Social Policies</a>.</p><p><span class="text-science"><i class="' + ug.science + '"></i> Science</span> production is impacted by <a href="/game/help#happiness" class="text-happiness"><i class="' + ug.happiness + '"></i> Happiness</a></p>',
            parent: "home"
        },
        culture: {
            id: "culture",
            name: "Culture & Social Policies",
            html: () => '<p><span class="text-culture"><i class="' + ug.culture + '"></i> Culture production</span> is required to acquire new social policies.<br/>Social Policies provide great bonuses for your Empire.<br/>They are divided in 6 groups: Traditionalism, Imperialism, Piety, Rationalism, Pacifism and Militarism.<br/>Some groups are exclusing. Be careful before choosing one !</p><p>A detailed list of policies is available in <a href="/game/help#policies">this help section</a></p><p><span class="text-culture"><i class="' + ug.culture + '"></i> Culture</span> production is provided by <a href="/game/help#citizens">artists</a>, buildings, <a href="/game/help#trade">trade routes</a> and can be increased in several ways, including <a href="/game/help#policies">Social Policies</a>.</p><p><span class="text-culture"><i class="' + ug.culture + '"></i> Culture</span> production is impacted by <a href="/game/help#happiness" class="text-happiness"><i class="' + ug.happiness + '"></i> Happiness</a></p><p>Once you meet other civilizations, culture will help you gain <a href="/game/help#influence"><i class="text-influence ' + ug.influence + '"></i> influence over them.</a></p>',
            parent: "home"
        },
        religion: {
            id: "religion",
            name: "Religion & Tech",
            html: () => '<h5>Religion</h5><p>What\'s the point of <span class="text-faith"><i class="' + ug.faith + '"></i> Faith</span> ?<br/>To ensure a great afterlife of course !<br/>Once you discovered Religion, you will be able to choose a <a href="/game/help#deities">Deity</a><br/>Each deity will grant you powerful <i class="' + ug.spells + '"></i> <a href="/game/help#spells">Spells</a>.</p><p>Once you discover Theology, you will be able <a href="/game/help#reincarnation">Reincarnate</a>.<br/>Upon reincarnation, you will gain favors that can be used to acquire <a href="/game/help#powers">powers</a>.<p><span class="text-faith"><i class="' + ug.faith + '"></i> Faith</span> production is provided by <a href="/game/help#citizens">priests</a>, buildings and can be increased in several ways, including <a href="/game/help#policies">Social Policies</a>.</p><p><span class="text-faith"><i class="' + ug.faith + '"></i> Faith</span> production is impacted by <a href="/game/help#happiness" class="text-happiness"><i class="' + ug.happiness + '"></i> Happiness</a></p><h5>Technology</h5><p>When you reach the Industrial Era, you will be able to choose between Magic and Technology</p><p>While the Magic way allows you to use <i class="' + ug.spells + ' text-magic"></i> <a href="/game/help#spells">Spells</a> and to gain <a href="/game/help#powers">powers</a> when you <a href="/game/help#reincarnation">Reincarnate</a>,<br/>the Tech way allows you to build industrial buildings, improvements, wonders and to gain progress either from gatheric precious <i class="' + ug.relics + ' text-relics"></i> <a href="/game/help#archeology">Relics</a> or by using your <i class="' + ug.prod + ' text-prod"></i> <a href="/game/help#buildings">industrial production</a> and gain upgrades from <i class="' + ug.prestige + ' text-prestige"></i> <a href="/game/help#timetravel">Time Travel</a>.</p><p>You can progress toward Magic by casting spells or toward technology by producing <span class="text-progress"><i class="' + ug.progress + '"></i> progress</span></p><p>You can gain <span class="text-progress"><i class="' + ug.progress + '"></i> progress</span> from building it (or buying it if you are rich enough) or by researching Technologies of the Future.</p><p>Be careful, there is no way back to Magic once you get far enough into technology</p>',
            parent: "home"
        },
        gold: {
            id: "gold",
            name: "Gold",
            html: () => '<p><span class="text-gold"><i class="' + ug.gold + '"></i> Gold production</span> is essential to your empire.<br/>You will need it to construct buildings, to recruit troops and to pay for your troops maintenance.<br/><p><span class="text-gold"><i class="' + ug.gold + '"></i> Gold</span> production is provided by <a href="/game/help#citizens">merchants</a>, buildings, <a href="/game/help#trade">trade routes</a> and can be increased in several ways, including <a href="/game/help#policies">Social Policies</a>.</p><p><span class="text-gold"><i class="' + ug.gold + '"></i> Gold</span> production is impacted by <a href="/game/help#happiness" class="text-happiness"><i class="' + ug.happiness + '"></i> Happiness</a></p><p>Upon discovery of writing, you will be able to use gold to speed up troop recruitment and building production.</p><p>You will not be able to store an infinite amount of gold. There is a limit to it which can be increased by constructing various buildings.<br/>Except in a special situation, you do not want to reach that limit, all the gold gained after that will be lost.<br/>If you choose <a href="/game/help#citizens">auto-assignment of your citizens</a>, the gold production will drop when you reach the limit, allowing your citizens to work on more useful tasks.</p><p>An effective way to gain gold is by raiding other cities. If you clear an enemy city without bringing a governor, your troops will pillage it and bring the gold back in their city of origin.<br/><a href="/game/help#military">Troops</a> have a carry capacity which means you will not be able to pilllage a lot if you don\'t bring enough troops</p><p>Your cities can be pillaged too, so be careful about it !</p>',
            parent: "home"
        },
        diplomacy: {
            id: "diplomacy",
            name: "Diplomacy & Trade",
            html: () => '<p>Once you discover <i>Exploration</i> you will be able to meet new <a href="/game/help#civilizations">Civilizations</a>. Once you discover <i>diplomacy</i>, you will be able to interact with them furthermore.</p>You will never be able to interact with <a href="/game/help#barbarians">Barbarians</a>. Those beasts need to be pacified.<p>Once you discover <i>Navigation</i>, you will be able to create <a href="/game/help#trade"><i class="text-trade ' + ug.trade + '"></i>Trade routes</a> which is a greate way to keep good relations with them while producing gold and culture</p><p>A defensive pact between two civilizations means that they will be both at war if one of them is attacked.</p><p>Relations with other civilizations are important since it determine how they will behave with you. Relations are determined by the trade, proximity, religion and by the characteristics of the civilization.</p><p>Civilizations can exert <a href="/game/help#influence"><i class="text-influence ' + ug.influence + '"></i> influence</a> over other civilizations.</p><p>If you are lost and you are looking for info about <span class="text-colony"><i class="' + ug.colony + '"></i> colonies</span>, <a href="/game/help#caravel">click here</a></p>',
            parent: "home"
        },
        war: {
            id: "war",
            name: "War & Troops",
            html: () => '<p>War can be an essential part of your game or not. It depends on how you like to play.</p><b>Attacking</b><p>You will want to attack a city for 2 reasons: To pillage it and gain gold or to conquer it.</p><p>You troops will automatically pillage a city when they attack it. The amount of gold they can take from the city is determined from their <i class="' + ug.capacity + '"></i> capacity.</p><div>You can capture cities from barbarians or other civilizations the same way.<br/>To <b>capture</b> a city, you need:<ul><li>To completly clear the city from ALL troops</li><li>To bring a <a href="/game/help#governor">governor</a> within your attack.</li></ul></div><p>For a succesful war, or for a succesful defense, you will need to recruit <a href="/game/help#military">Military Troops</a>.<br/>A battle is fought in multiple assault:</p><ul><li>Siege units attack first. Siege attack points are used against all defending units defense points. No one fights back.</li><li>At this point, the defense buildings can be crushed if there was enough siege units.</li><li>Ranges units attack second. Defending ranged units can fight back, which means their attack points are used against attackers defense points</li><li>Finally, melee units attack. Only melee units can fight back</li></ul><p>To be able to recruit units, you usually have to construct the necessary building.<br/>There is a few ways to increase your troops attacking power, including <a href="/game/help#policies">Social Policies</a><br/>Also, do not forget that barbarians are weaker than other civilizations.</p><div>There is also a few special units who are not made to fight<ul><li><a href="/game/help#scout">Scouts & explorers</a></li><li><a href="/game/help#improvements">Workers & engineers</a></li><li><a href="/game/help#slaver">Slavers</a></li><li><a href="/game/help#governor">Governors</a></li><li><a href="/game/help#caravan">Caravans</a></li><li><a href="/game/help#spy">Spies</a></li><li><a href="/game/help#caravel">Caravels</a></li><li><a href="/game/help#archeology">Archeologists</a></li></ul></div><p class="text-danger">You are protected from attacks until you get to the Ancient Era, so make sure to recruit enough to defend yourself before entering this era !</p><b>Defending</b><p>It is also very important to be able to defend your cities. While you will never be attacked during the Prehistoric Era, barbarians and other civilizations will not hesitate to attack you if you appear weak.</p><p>Your cities defense will increase with its population, a few buildings and a few policies</p><p>Also, keep in mind that troops require <span class="text-gold"><i class="' + ug.gold + '"></i> Gold</span> to maintain so be careful that your economy is strong enough to sustain your army!</p>',
            parent: "home"
        },
        misc: {
            id: "misc",
            name: "Miscellaneous",
            html: () => 'Here you will find the help sections that wouldn\'t fit anywhere else:<ul><li><a href="/game/help#icons">A list of icons used in this game</a></li><li><a href="/game/help#difficulties">Difficulty Levels</a></li><li><a href="/game/help#daily_bonus">Daily Bonus</a></li></ul>',
            parent: "home"
        },
        improvements: {
            id: "improvements",
            name: "Improvements",
            html: () => '<p>Improvements greatly improve your citizens production</p><p>To build an improvement, you need to recruit a worker or an engineer and allocate them to the task by clicking on your city in the world menu.</p><p>Improvements (other than roads & railroads) only affect the cities right next to them.</p><p>All tasks, appart from building a road or a railroad, will consume the worker or the engineer.</p><p>When a city is connected to the capital, an icon will be displayed : <i class="' + ug.connected + ' text-connected1"></i> when connected by road and <i class="' + ug.connected + ' text-connected2"></i> when connected by railroad</p>Here is a list of all improvements available in this game:<table class="table table-sm"><tbody><tr><th></th><th>Improvement</th><th>Description</th><th>Cost</th><th>Terrains</th><th>Worker required</th></tr>' + Object.values(Ig).reduce((l, n) => l + '<tr><td><img src="assets/img/imp' + n.id + '.png" width="48"/></td><td>' + n.name + "</td><td>" + n.description + '</td><td><span class="text-gold"><i class="' + ug.gold + '"></i> ' + mg.format(n.cost) + '</span><br/><span class="text-time"><i class="' + ug.time + '"></i> ' + mg.formatTime(n.time) + "</span></td><td>" + Object.values(n.terrains).reduce((l, e, t) => l + Cg[e].name + (t != n.terrains.length - 1 ? ", " : ""), "") + "</td><td>" + (1 == n.level ? "Worker" : "Engineer") + "</td></tr>", "") + "</tbody></table>",
            parent: "citizens"
        },
        food: {
            id: "food",
            name: "Food",
            html: () => '<p><span class="text-food"><i class="' + ug.food + '"></i> Food production</span> is essential to the growth of your cities.<br/>A new citizen will be available every time you reach the required amount of food for growth. This amount depends on the city\'s current population<br/>Once your city grow, all food will be consumed in the process but there is a few buildings that allows you to keep a portion of it.<br/><p><span class="text-food"><i class="' + ug.food + '"></i> Food</span> production is provided by <a href="/game/help#citizens">hunter-gatherers or farmers</a>, buildings and can be increased in several ways.</p><p><span class="text-food"><i class="' + ug.food + '"></i> Food</span> production is impacted by <a href="/game/help#happiness" class="text-happiness"><i class="' + ug.happiness + '"></i> Happiness</a></p>',
            parent: "food-health-happiness"
        },
        health: {
            id: "health",
            name: "Health & Plague",
            html: () => '<h5>Health</h5><p><span class="text-health"><i class="' + ug.health + '"></i> Health</span> is essential to the growth of your cities.<br/>You must be careful to not let health drop too low or your citizens will begin to die from disease.</p><p><span class="text-health"><i class="' + ug.health + '"></i> Health</span> will go down depending on the population of a city and can be increased by constructing a few buildings.</p><h5><i class="' + ug.plague + '"></i> Plague</h5><b>Plague outbreak</b><br/><p>An outbreak can happen once you reach the Classical Era. An outbreak can happen in a city depending on time since last outbreak, difficulty level and health of that city. There wont be any outbreak in peaceful difficulty.</p><b>Plague propagation</b><br/><p>Once there is a plague outbreak, it can propagate from an infected city to cities in short distance or cities linked with <span class="text-trade"><i class="' + ug.trade + '"></i> trade route</span>.<br/>Propagation depends on health and population of a city.<br/>The city will remain infected for a random time that will decrease with health and increase with population.<br/><b>Plague doctors</b> garrisoned in the city help clearing the city from the plague. The more doctors you have, the faster it will be cleared. They also help the city resist infection. Some buildings can improve Plague Doctors efficiency<br/>Once a city is cleared, it cannot be infected for 10min.</p><b>Plague Effect</b><br/><p><i class="' + ug.plague + '"></i> Plague have 3 effect: Reduction of <span class="text-health"><i class="' + ug.health + '"></i> health</span> (-30%), risk of troops death depending on city health, minor risk of <span class="text-trade"><i class="' + ug.trade + '"></i> trade route</span> loss depending on city health.</p>',
            parent: "food-health-happiness"
        },
        happiness: {
            id: "happiness",
            name: "Happiness",
            html: () => '<p><span class="text-happiness"><i class="' + ug.happiness + '"></i> Happiness</span> affects almost everything from food to culture.<br/>Your people will be more efficient when they are happy and not so much when they get sad. Be carfeul to keep it not too low or they will revolt and rebel against you!</p><p><span class="text-happiness"><i class="' + ug.happiness + '"></i> Happiness</span> will go down depending on the population of a city, the distance from your capital and can be increased with artists, buildings or policies.</p>',
            parent: "food-health-happiness"
        },
        buildings_list: {
            id: "buildings_list",
            name: "Buildings List",
            html: l => 'Here is a list of all buildings available in this game:<table class="table table-sm"><tbody><tr><th>Building</th><th>Effect</th></tr>' + Object.values(og).reduce((n, e) => n + "<tr><td>" + e.label(l.player(0)) + "</td><td>" + e.description(0, l) + "</td></tr>", "") + "</tbody></table>",
            parent: "buildings"
        },
        policies: {
            id: "policies",
            name: "Policies",
            html: () => 'Here is a list of all policies available in this game:<table class="table table-sm"><tbody><tr><th>Policy</th><th>Effect</th></tr>' + Object.values(hg.groups).reduce((l, n) => l + "<tr><td><b>" + n.name + "</b></td><td>" + n.description + "</td></tr>", "") + Object.values(hg.policies).reduce((l, n) => l + "<tr><td>" + n.name + "</td><td>" + n.description + "</td></tr>", "") + "</tbody></table>",
            parent: "culture"
        },
        reincarnation: {
            id: "reincarnation",
            name: "Reincarnation",
            html: () => '<p>Reincarnation is the way to get a better start by learning from your mistakes and get some new <a href="/game/help#powers">powers</a>.</p><p>When you die or when you decide to reincarnate, you will lose <u>everything</u> but you will gain some divine <span class="text-favor"><i class="' + ug.favor + '"></i> favor</span> depending of your devotion in this life.<br/>The more <span class="text-faith"><i class="' + ug.faith + '"></i> faith</span> produced, the more <span class="text-favor"><i class="' + ug.favor + '"></i> favor</span> you will receive. There are different types of favor. A neutral favor and one special for each <a href="/game/help#deities">deity</a>.</p><p>Favor allows you to gain special <a href="/game/help#powers">powers</a> which should make your new life easier!<br/>AI will also gain favor on reincarnation but usually less than you.</p>',
            parent: "religion"
        },
        deities: {
            id: "deities",
            name: "Deities",
            html: () => '<p>Once you discover <i>Religion</i>, you will be able to chose a deity to worship. Each deity will grant you specific <i class="' + ug.spells + '"></i> <a href="/game/help#spells">Spells</a>.</p><p>Choose wisely, you will not be able to change your deity before you reincarnate !</p><p>When you <a href="/game/help#reincarnation">reincarnate</a>, they will grant you special favor that you can spend on <a href="/game/help#powers">powers</a>.</p><div>Here is a list of available deities:<table class="table table-sm"><tbody><tr><th>Deity</th><th>Favor type</th><th>Description</th></tr>' + Object.values(vg).reduce((l, n) => l + '<tr><td nowrap><i class="' + n.icon + '" style="color:' + n.color + '"></i> ' + n.name + '</td><td><i class="' + ug.favor + '" style="color:' + n.color + '"></i></td><td>' + n.description + "</td></tr>", "") + "</tbody></table></div>",
            parent: "religion"
        },
        spells: {
            id: "spells",
            name: "Spells",
            html: () => '<p>Once you choose a <a href="/game/help#deities">Deity</a>, you will receive the ability to cast <span class="text-special"><i class="' + ug.spells + '"></i> Spells</span>!</p><div>There is 3 kind of spells:<ul><li>Active spells that stay <span class="text-success">active</span> for a specific duration. Bonuses gained from those spells are active only when the spell is <span class="text-success">active</span></li><li>"Burst" spells that give you a large bonus upon use</li><li>Charging / incremental spells that give you passive bonuses that accumulate each time you use it</li></ul></div><p>Each spell has a <span class="text-primary">cooldown</span> duration, which is the time you will have to wait before being able to use that spell again. Spell will appear <span class="text-warning">Yellow</span> when ready to use.</p><p>Some spells will be <span class="text-danger">locked</span> at first and you will have to fullfill the required conditions to unlock them. Those locks are permanent, which means that once you unlock a spell, it will be available even after reincarnation.</p><div>Here is a list of available spells:<table class="table table-sm"><tbody><tr><th>Deity</th><th>Spell</th><th>Description</th></tr>' + Object.values(bg).reduce((l, n) => l + '<tr><td nowrap><i class="' + vg[n.deity].icon + '" style="color:' + vg[n.deity].color + '"></i> ' + vg[n.deity].name + "</td><td>" + n.name + "</td><td>" + n.help + "</td></tr>", "") + "</tbody></table></div>",
            parent: "religion"
        },
        powers: {
            id: "powers",
            name: "Powers",
            html: () => '<p>Once you acquired some divine favor, you can spend it to gain powers.</p><div>Here is a list of available powers:<table class="table table-sm"><tbody><tr><th>Power</th><th>Description</th><th>Favor required</th></tr>' + Object.values(_g).reduce((l, n) => l + "<tr><td>" + n.name + "</td><td>" + n.description(null, null) + "</td><td>" + Object.keys(n.cost).reduce((l, n) => l + '<i class="' + ug.favor + '" style="color:' + (vg[n] ? vg[n].color : "#000") + '"></i> ', "") + "</td></tr>", "") + "</tbody></table></div>",
            parent: "religion"
        },
        timetravel: {
            id: "timetravel",
            name: "Time Travel",
            html: () => '<p>Time Travel is only available for the Technological orientation.</p><p>Time Travel is similar to <a href="/game/help#reincarnation">Reincarnation</a> but you don not gain <span class="text-favor"><i class="' + ug.favor + '"></i> favor</span>.<br/>Instead, you gain <span class="text-prestige"><i class="' + ug.prestige + '"></i> prestige points</span>, depending on your accumulated <span class="text-progress"><i class="' + ug.progress + '"></i> progress</span>.</p><p>Each <i class="' + ug.prestige + ' text-prestige"></i> gives you a +1% bonus in <i class="' + ug.food + ' text-food"></i> & <i class="' + ug.prod + ' text-prod"></i></p><p>You can also spend those <i class="' + ug.prestige + ' text-prestige"></i> to buy upgrades</p><p>AI players do not gain any <i class="' + ug.prestige + ' text-prestige"></i> or upgrades</p>',
            parent: "religion"
        },
        archeology: {
            id: "archeology",
            name: "Archeology",
            html: () => '<p>Once your orientation gets to <span class="text-tech"><i class="' + ug.tech + '"></i> +100</span>, <b>Archeologists</b> will be available to retrieve <span class="text-relics"><i class="' + ug.relics + '"></i> relics</span>. Once a relic is retrieved, the archeologist is consumed.</p><p>Each <span class="text-relics"><i class="' + ug.relics + '"></i> relic</span> is then stored in the hosting city and provides <span class="text-progress"><i class="' + ug.progress + '"></i> +1 / min</span>.',
            parent: "religion"
        },
        trade: {
            id: "trade",
            name: "Trade",
            html: () => '<p>Once you discover <i>Navigation</i>, you will be able to create <span class="text-trade"><i class="' + ug.trade + '"></i> trade routes</span> with other <a href="/game/help#civilizations">civilizations</a> you are not at war with<br/>A <span class="text-trade"><i class="' + ug.trade + '"></i> trade route</span>  provides <span class="text-gold"><i class="' + ug.gold + '"></i> gold</span>  and <span class="text-culture"><i class="' + ug.culture + '"></i> culture</span> to the city of origin and a smaller gain for the city of destination. It also improve the diplomatic relations with between the 2 civilizations.</p><p>To create a <span class="text-trade"><i class="' + ug.trade + '"></i> trade route</span>, you need to recruit a <a href="/game/help#caravan">caravan</a> first, then send it to another city by clicking on your city on the world map and selecting "Trade route".</p><p>There is a maximum number of trade routes allowed by civilization. This maximum can be increased with science or policies.<br/>A trade route has a maximum distance allowed. This maximum distance can be increase by discovering some technologies.<br/>A trade route will automatically be erased if the civilizations are at war or if one of the 2 cities changes ownership.</p>',
            parent: "diplomacy"
        },
        influence: {
            id: "influence",
            name: "Influence",
            html: () => '<p>Once you meet another civilization, you will both start to exert <span class="text-influence"><i class="' + ug.influence + '"></i> influence</span> on each other</p><p>Influence is determined by the amount of <span class="text-culture"><i class="' + ug.culture + '"></i> culture</span> produced and can be increase in several ways, including Wonders and Policies.</p><p>Influence has an effect on cities, depending on distance between the city being influenced and the influencial civilization.</p><p>The influenced city have an penalty on <i class="text-happiness ' + ug.happiness + '"></i> and <i class="text-defense ' + ug.defense + '"></i></p><p>Once you discover <i>Printing Press</i>, you will be able to promote your culture to other civilizations. Promoting culture convert some of your culture into influence.</p>',
            parent: "diplomacy"
        },
        civilizations: {
            id: "civilizations",
            name: "Civilizations",
            html: () => '<p>You are not alone in the world. Other civilizations are present and trying to extend too.</p><p>They will recruit troops, attack, take cities, create trade routes, select special powers, etc...<br/>Each civilization is different and they will behave differently. Each of them have a specific agressivity, diplomacy, resource production, troop recruitment, attack / defense.</p><p>They will declare war depending on several factors: their own agressivity, the relations you have with them, how close are your cities. Agressive civilizations will also be more interested in a war if you own many wonders or many colonies.<br/>To improve relations with one civilization, you can create <a href="/game/help#trade">trade routes</a> or offer gifts.</p><p>Here is the complete list of existing civilizations at the beginning of a game:<table class="table table-sm"><tbody><tr><th>Name</th><th>Description</th><th>Golden era</th><th>Agressivity</th><th>Starting relation</th><th>Relation drop</th><th>War Fatigue</th><th><i class="text-food ' + ug.food + '"></i></th><th><i class="text-gold ' + ug.gold + '"></i></th><th><i class="text-science ' + ug.science + '"></i></th><th><i class="text-prod ' + ug.prod + '"></i></th><th><i class="text-culture ' + ug.culture + '"></i></th><th><i class="text-recruitment ' + ug.recruitment + '"></i></th><th><i class="text-attack ' + ug.attack + '"></i></th><th><i class="text-defense ' + ug.defense + '"></i></th></tr>' + Object.values(xg).reduce((l, n) => l + '<tr><td><i class="' + ug.player + '" style="' + function (l) {
                return "color: " + l.color + ";-webkit-text-fill-color:" + l.color2 + ";-webkit-text-stroke-width:1px;-webkit-text-stroke-color:" + l.color
            }(n) + '" ></i> ' + n.name + "</td><td>" + n.description + "</td><td>" + cg[n.golden].name + "</td><td>" + function (l) {
                return 12 == l ? "--" : 13 == l ? "-" : 14 == l ? "+" : 15 == l ? "++" : void 0
            }(n.agressivity) + "</td><td>" + n.starting_relations + "</td><td>" + n.relation_decrease + "</td><td>" + function (l) {
                return l >= 6e8 ? "--" : l > 1e8 ? "-" : l > 1e7 ? "+" : "++"
            }(n.war_fatigue_ratio) + "</td><td>" + cD(n.mult.food) + "</td><td>" + cD(n.mult.gold) + "</td><td>" + cD(n.mult.science) + "</td><td>" + cD(n.mult.prod) + "</td><td>" + cD(n.mult.culture) + "</td><td>" + cD(n.mult.recruitment) + "</td><td>" + cD(n.mult.attack) + "</td><td>" + cD(n.mult.defense) + "</td></tr>", "") + "</tbody></table>",
            parent: "diplomacy"
        },
        barbarians: {
            id: "barbarians",
            name: "Barbarians",
            html: () => '<p>Barbarians will behave differently from other civilizations. The only way to interact with them is on the battlefield.</p><p>They are constantly at war with everyone, they do not have access to <span class="text-culture"><i class="' + ug.culture + '"></i> culture</span>, <span class="text-faith"><i class="' + ug.faith + '"></i> faith</span> or powers but they do have access to <span class="text-science"><i class="' + ug.science + '"></i> science</span> (with a major penality of 50%)<br/>They also have a penality of 20% while attacking ot defending</p>',
            parent: "diplomacy"
        },
        military: {
            id: "military",
            name: "Military Troops",
            html: l => 'Here is a list of all military troops available in this game:<table class="table table-sm"><tbody><tr><th>Name</th><th>Attack</th><th>Defense</th><th>Speed</th><th>Capacity</th><th>Ranged?</th><th>Siege?</th><th>Gold cost</th><th>Time to recruit (s)</th></tr>' + Object.values(pg).reduce((n, e) => n + (e.special ? "" : "<tr><td>" + e.name(l.player()) + "</td><td>" + e.attack(l.player()) + "</td><td>" + e.defense(l.player()) + "</td><td>" + e.speed(l.player()) + "</td><td>" + e.capacity + "</td><td>" + (e.ranged(l.player()) ? "x" : "") + "</td><td>" + (e.siege ? "x" : "") + "</td><td>" + e.gold(l, 0) + "</td><td>" + e.time(l, 0) + "</td></tr>"), "") + "</tbody></table>",
            parent: "war"
        },
        scout: {
            id: "scout",
            name: "Scouting",
            html: () => "<p><b>Scouts</b> are used to explore the world. Discovering the world is very important since it allows you to discover other civilizations, or to discover cities to pillage or to conquer.</p><p>To use it, you need to click on the city where the scout is located in the world panel.</p><p>You can also send them to explore automatically. In that case they will walk around the map, discovering lands in random directions.</p><p>Scouts have a chance to be ambushed by marauders, depending on the distance between them and the city of provenance. If that happen, you will lose your scout.</p><p>Explorers are upgraded scouts that move faster and are much more resistant to marauders.</p>",
            parent: "war"
        },
        slaver: {
            id: "slaver",
            name: "Slavery",
            html: () => "<p><b>Slavers</b> are used to capture workers.</p><p>To capture slaves, you just need to recruit slavers and send them along with an attack on an enemy city.<br/>If the attack is a success and if the city has enough population, you have a chance to gain a worker. Chances increase with your number of slavers and the enemy city population.<br/>This worker will be brought back with the attacking army.</p><p>Be careful, enemies will recruit slavers too !</p>",
            parent: "war"
        },
        spy: {
            id: "spy",
            name: "Spying",
            html: () => '<p><b>Spies</b> allow you to reveal the details of a city: troops, buildings, treasury etc...</p><p>When a spy execute a mission, he has a chance to steal some <span class="text-science"><i class="' + ug.science + '"></i> science</span> (depending on science production of the city spied).</p><p>Success of the operation will depend on the amount of spies you bring and the amount of spies present in the spied city. It does not depend on the amount of military troops.</p><p>To use it, you need to click on the city you want to spy in the world panel.</p>',
            parent: "war"
        },
        caravel: {
            id: "caravel",
            name: "Caravels & Colonies",
            html: () => '<p><b>Caravels</b> allow you to create <span class="text-colony"><i class="' + ug.colony + '"></i> colonies</span></p><p>Caravels can only be constructed in coastal cities (cities right next to that blue thing around the map) which have a seaport. Once you have a caravel, you need to send it to create a <span class="text-colony"><i class="' + ug.colony + '"></i> colony</span> by clicking on the hosting city on the world map.</p><p><span class="text-colony"><i class="' + ug.colony + '"></i> Colonies</span> offer great bonus for the civilization that created it: <i class="text-happiness ' + ug.happiness + '"></i> (empire), <i class="text-gold ' + ug.gold + '"></i> (empire) and <i class="text-gold ' + ug.gold + '"></i>/<i class="text-trade ' + ug.trade + "\"></i> (city only).</p><p>There is a limited amount of available colonies in the world so don't wait before sending your caravels !</p>",
            parent: "war"
        },
        governor: {
            id: "governor",
            name: "Governor",
            html: () => '<p>If you want to conquer a city, you will need to clear the city and to bring a <b>governor</b> with you (only 1 is needed to take a city).</p><p>The <span class="text-gold"><i class="' + ug.gold + '"></i> gold</span> cost of governors will increase with the number of cities you own and the number of governor you currently have.</p>',
            parent: "war"
        },
        caravan: {
            id: "caravan",
            name: "Caravan",
            html: () => '<p>A <b>caravan</b> is required to create a <a href="/game/help#trade" class="text-trade"><i class="' + ug.trade + '"></i> trade route</a>.</p><p>There is a limited amount of trade routes allowed.</p><p>To use a caravan, you need to click on the city where the caravan is located in the world panel.</p>',
            parent: "war"
        },
        daily_bonus: {
            id: "daily_bonus",
            name: "Daily Bonus",
            html: () => '<p>Once you discover <i>Spirituality</i>, you will be receive one random gift every 24h.</p><p>Gifts include <span class="text-science"><i class="' + ug.science + '"></i> science</span>, <span class="text-gold"><i class="' + ug.gold + '"></i> gold</span>, <span class="text-food"><i class="' + ug.food + '"></i> food</span>, <span class="text-culture"><i class="' + ug.culture + '"></i> culture</span> or troops</p><p>There is 3 level of gift: <span class="text-primary">Common</span>, <span class="text-warning">Rare</span> and <span class="text-success">Epic</span></p><p>To use a gift, you need to select it in the top menu of the City Screen.</p><p><i class="' + ug.exclamation + '"></i> Make sure to use it at the right time! For ex. do not use a gold gift if you treasury is full !</p>',
            parent: "misc"
        },
        difficulties: {
            id: "difficulties",
            name: "Difficulty Levels",
            html: () => '<div>Here is a list of available difficulty levels:<table class="table table-sm"><tbody><tr><th>Difficulty</th><th>Faith</th><th>Civ prod. bonus</th><th>Civ recr. bonus</th><th>Barb. prod. penalty</th><th>Barb. sci. penalty</th><th>Barb. battle penalty</th></tr>' + Object.values(gg).reduce((l, n) => l + "<tr><td>" + n.name + "</td><td>x" + n.faith_mult + "</td><td>" + n.ai_bonus + "</td><td>" + n.ai_recruit_bonus + "</td><td>" + n.barbarian_gold_prod_mult + "</td><td>" + n.barbarian_science_mult + "</td><td>" + n.barbarian_battle_mult + "</td></tr>", "") + "</tbody></table>All the bonuses/penalties are used as multiplier.</div>",
            parent: "misc"
        },
        icons: {
            id: "icons",
            name: "Icons",
            html: () => 'This is a list of all icons used in this game.<ul><li><i class="' + ug.player + '"></i> Player / City</li><li><i class="' + ug.capital + '"></i> Capital</li><li><i class="' + ug.pop + ' text-pop"></i> Population</li><li><i class="' + ug.food + ' text-food"></i> Food</li><li><i class="' + ug.health + ' text-health"></i> Health</li><li><i class="' + ug.happiness + ' text-happiness"></i> Happiness</li><li><i class="' + ug.prod + ' text-prod"></i> Production / Industry</li><li><i class="' + ug.science + ' text-science"></i> Science</li><li><i class="' + ug.diplomacy + ' text-diplomacy"></i> Diplomacy</li><li><i class="' + ug.gold + ' text-gold"></i> Gold</li><li><i class="' + ug.culture + ' text-culture"></i> Culture</li><li><i class="' + ug.faith + ' text-faith"></i> Faith</li><li><i class="' + ug.favor + ' text-favor"></i> Favor</li><li><i class="' + ug.time + '"></i> Time / Delay</li><li><i class="' + ug.trade + ' text-trade"></i> Trade Route</li><li><i class="' + ug.troops + '"></i> Troops</li><li><i class="' + ug.recruitment + '"></i> Recruitment</li><li><i class="' + ug.attack + '"></i> Attack</li><li><i class="' + ug.defense + '"></i> Defense</li><li><i class="' + ug.capacity + '"></i> Gold Capacity</li><li><i class="' + ug.ranged + '"></i> Ranged attack</li><li><i class="' + ug.siege + '"></i> Siege attack</li><li><i class="' + ug.speed + '"></i> Speed</li></ul>',
            parent: "misc"
        }
    };

    function cD(l) {
        return l >= 1.2 ? "++" : l >= 1.1 ? "+" : l >= 1 ? "-" : "--"
    }
    class dD {
        constructor(l, n, e) {
            this.activatedRoute = l, this.dataService = n, this.sanitizer = e, this.helpData = oD
        }
        isAvailable(l) {
            return !l.lock || this.dataService.isUnlocked(l.lock)
        }
        ngOnInit() {
            this.activatedRoute.fragment.subscribe(l => {
                this.id = l || "home", this.help = oD[this.id], this.html = this.sanitizer.bypassSecurityTrustHtml(this.help.html(this.dataService)), this.parent = this.help.parent ? oD[this.help.parent] : void 0, this.siblings = Object.values(this.helpData).filter(l => l.parent == this.help.parent), this.children = Object.values(this.helpData).filter(l => l.parent == this.id)
            })
        }
    }
    var hD = st({
        encapsulation: 0,
        styles: [[""]],
        data: {}
    });

    function pD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "nav", [["class", "border-top d-flex"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "div", [["class", "bg-dark text-light p-2"], ["style", "width:95px"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Parent"])), (l()(), su(3, 0, null, null, 3, "div", [["class", "nav"]], null, null, null, null, null)), (l()(), su(4, 0, null, null, 2, "a", [["class", "nav-link"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 5).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(5, 671744, null, 0, xp, [_p, oh, Rr], {
            fragment: [0, "fragment"]
        }, null), (l()(), _u(6, null, ["", ""]))], (function (l, n) {
            l(n, 5, 0, n.component.parent.id)
        }), (function (l, n) {
            var e = n.component;
            l(n, 4, 0, ei(n, 5).target, ei(n, 5).href), l(n, 6, 0, e.parent.name)
        }))
    }

    function fD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "a", [["class", "nav-link"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 1).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), gi(1, 671744, null, 0, xp, [_p, oh, Rr], {
            fragment: [0, "fragment"]
        }, null), (l()(), _u(2, null, ["", ""]))], (function (l, n) {
            l(n, 1, 0, n.parent.context.$implicit.id)
        }), (function (l, n) {
            l(n, 0, 0, ei(n, 1).target, ei(n, 1).href), l(n, 2, 0, n.parent.context.$implicit.name)
        }))
    }

    function gD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, fD)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, n.component.isAvailable(n.context.$implicit))
        }), null)
    }

    function mD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "nav", [["class", "border-top d-flex"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "div", [["class", "bg-dark text-light p-2"], ["style", "width:95px"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Children"])), (l()(), su(3, 0, null, null, 2, "div", [["class", "nav"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, gD)), gi(5, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            l(n, 5, 0, n.component.children)
        }), null)
    }

    function yD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "a", [], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== ei(l, 4).onClick(e.button, e.ctrlKey, e.metaKey, e.shiftKey) && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(2, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(3, {
            "nav-link": 0,
            "active disabled": 1
        }), gi(4, 671744, null, 0, xp, [_p, oh, Rr], {
            fragment: [0, "fragment"]
        }, null), (l()(), _u(5, null, ["", ""]))], (function (l, n) {
            var e = l(n, 3, 0, !0, n.parent.context.$implicit.id == n.component.id);
            l(n, 2, 0, e), l(n, 4, 0, n.parent.context.$implicit.id)
        }), (function (l, n) {
            l(n, 0, 0, ei(n, 4).target, ei(n, 4).href), l(n, 5, 0, n.parent.context.$implicit.name)
        }))
    }

    function vD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, yD)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, n.component.isAvailable(n.context.$implicit))
        }), null)
    }

    function bD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "nav", [["class", "border-top d-flex"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "div", [["class", "bg-dark text-light p-2"], ["style", "width:95px"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Related"])), (l()(), su(3, 0, null, null, 2, "div", [["class", "nav"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, vD)), gi(5, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            l(n, 5, 0, n.component.siblings)
        }), null)
    }

    function _D(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 10, "div", [["class", "d-flex flex-column h-100"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 3, "div", [["class", "flex-fill overflow-auto"], ["style", "height:0"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "h3", [], null, null, null, null, null)), (l()(), _u(3, null, ["", ""])), (l()(), su(4, 0, null, null, 0, "div", [], [[8, "innerHTML", 1]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, pD)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, mD)), gi(8, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, bD)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 6, 0, e.parent && e.isAvailable(e.parent)), l(n, 8, 0, e.children.length), l(n, 10, 0, e.siblings.length)
        }), (function (l, n) {
            var e = n.component;
            l(n, 3, 0, e.help.name), l(n, 4, 0, e.html)
        }))
    }

    function wD(l) {
        return ku(0, [(l()(), iu(16777216, null, null, 1, null, _D)), gi(1, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 1, 0, n.component.id)
        }), null)
    }

    function xD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-help", [], null, null, null, wD, hD)), gi(1, 114688, null, 0, dD, [oh, zg, Vc], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var kD = jt("app-help", dD, xD, {}, {}, []); class SD {
        constructor(l, n) {
            this.kongService = l, this.dataService = n, this.thanks = !1, this.icons = ug
        }
        ngOnInit() {}
        buy(l) {
            this.kongService.buy(l, this.onPurchaseResult.bind(this))
        }
        onPurchaseResult(l) {
            l.success && (this.thanks = !0)
        }
    }
    var CD = st({
        encapsulation: 0,
        styles: [[".bg[_ngcontent-%COMP%]{position:fixed;width:100%;height:100vh;background-color:rgba(0,0,0,.85);padding:10px;top:0;left:0;z-index:500;font-size:800%}@-webkit-keyframes bounce{0%,10%,100%,20%,50%,80%{-webkit-transform:translateY(0);transform:translateY(0)}40%,60%{-webkit-transform:translateY(-15px);transform:translateY(-15px)}}@keyframes bounce{0%,10%,100%,20%,50%,80%{-webkit-transform:translateY(0);transform:translateY(0)}40%,60%{-webkit-transform:translateY(-15px);transform:translateY(-15px)}}.bg[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{-webkit-animation:2s infinite bounce;animation:2s infinite bounce}"]],
        data: {}
    });

    function ID(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [["class", "bg d-flex flex-column justify-content-center align-items-center text-light"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = 0 != (l.component.thanks = !1) && t), t
        }), null, null)), (l()(), su(1, 0, null, null, 0, "i", [["class", "fas fa-thumbs-up"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(3, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Thanks !"]))], null, null)
    }

    function TD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "h3", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Support"])), (l()(), su(2, 0, null, null, 9, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["This game is "])), (l()(), su(4, 0, null, null, 1, "u", [], null, null, null, null, null)), (l()(), _u(-1, null, ["completly free"])), (l()(), _u(-1, null, [" and provided "])), (l()(), su(7, 0, null, null, 1, "u", [], null, null, null, null, null)), (l()(), _u(-1, null, ["without ads"])), (l()(), _u(-1, null, ["."])), (l()(), su(10, 0, null, null, 0, "br", [], null, null, null, null, null)), (l()(), _u(-1, null, [" However, if you wish to support it, you can still offer a gift !"])), (l()(), su(12, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Buy those useless items"])), (l()(), su(14, 0, null, null, 2, "button", [["class", "btn btn-outline-info"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.buy(10) && t), t
        }), null, null)), (l()(), su(15, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Give 10 Kreds"])), (l()(), su(17, 0, null, null, 2, "button", [["class", "btn btn-outline-primary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.buy(20) && t), t
        }), null, null)), (l()(), su(18, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Give 20 Kreds"])), (l()(), su(20, 0, null, null, 2, "button", [["class", "btn btn-outline-primary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.buy(50) && t), t
        }), null, null)), (l()(), su(21, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Give 50 Kreds"])), (l()(), su(23, 0, null, null, 2, "button", [["class", "btn btn-outline-warning"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.buy(100) && t), t
        }), null, null)), (l()(), su(24, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Give 100 Kreds"])), (l()(), su(26, 0, null, null, 2, "button", [["class", "btn btn-outline-warning"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.buy(200) && t), t
        }), null, null)), (l()(), su(27, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Give 200 Kreds"])), (l()(), su(29, 0, null, null, 2, "button", [["class", "btn btn-outline-danger"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.buy(500) && t), t
        }), null, null)), (l()(), su(30, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Give 500 Kreds"])), (l()(), su(32, 0, null, null, 2, "button", [["class", "btn btn-outline-danger"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.buy(1e3) && t), t
        }), null, null)), (l()(), su(33, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Give 1000 Kreds"])), (l()(), su(35, 0, null, null, 1, "h3", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Thanks"])), (l()(), _u(-1, null, ["\nMany thanks to "])), (l()(), su(38, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(-1, null, ["henkekalmar"])), (l()(), _u(-1, null, [", "])), (l()(), su(41, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Wicia777"])), (l()(), _u(-1, null, [", "])), (l()(), su(44, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(-1, null, ["aussy8"])), (l()(), _u(-1, null, [", "])), (l()(), su(47, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Rekaniso"])), (l()(), _u(-1, null, [", "])), (l()(), su(50, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Sieker"])), (l()(), _u(-1, null, [", "])), (l()(), su(53, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(-1, null, ["WLBjork"])), (l()(), _u(-1, null, [" and\n"])), (l()(), su(56, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(-1, null, ["cbianco8808"])), (l()(), _u(-1, null, [" for\nhelping with beta-testing this game ! "])), (l()(), su(59, 0, null, null, 1, "h3", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Credits"])), (l()(), su(61, 0, null, null, 9, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Icons made by "])), (l()(), su(63, 0, null, null, 1, "a", [["href", "https://www.flaticon.com/authors/freepik"], ["title", "Freepik"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Freepik"])), (l()(), _u(-1, null, [", "])), (l()(), su(66, 0, null, null, 1, "a", [["href", "https://www.flaticon.com/authors/eucalyp"], ["title", "Eucalyp"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Eucalyp"])), (l()(), _u(-1, null, [" from "])), (l()(), su(69, 0, null, null, 1, "a", [["href", "https://www.flaticon.com/"], ["title", "Flaticon"]], null, null, null, null, null)), (l()(), _u(-1, null, ["www.flaticon.com"])), (l()(), iu(16777216, null, null, 1, null, ID)), gi(72, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(73, 0, null, null, 1, "div", [["class", "position-absolute text-secondary"], ["style", "bottom:5px;right:5px"]], null, null, null, null, null)), (l()(), _u(74, null, ["Version: ", "\n"])), (l()(), su(75, 0, null, null, 1, "h3", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Changelog"])), (l()(), su(77, 0, null, null, 1, "a", [["class", "btn btn-primary"], ["href", "https://festive-perlman-5fad70.netlify.com/changelog"], ["target", "_blank"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Complete Changelog"]))], (function (l, n) {
            l(n, 72, 0, n.component.thanks)
        }), (function (l, n) {
            var e = n.component;
            l(n, 15, 0, e.icons.gold + " text-warning"), l(n, 18, 0, e.icons.gold + " text-warning"), l(n, 21, 0, e.icons.gold + " text-warning"), l(n, 24, 0, e.icons.gold + " text-warning"), l(n, 27, 0, e.icons.gold + " text-warning"), l(n, 30, 0, e.icons.gold + " text-warning"), l(n, 33, 0, e.icons.gold + " text-warning"), l(n, 74, 0, e.dataService.getStrVersion())
        }))
    }

    function ED(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-support", [], null, null, null, TD, CD)), gi(1, 114688, null, 0, SD, [Bg, zg], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var AD = jt("app-support", SD, ED, {}, {}, []); class PD {
        constructor(l, n, e, t) {
            this.data = l, this.conf = n, this.dataService = e, this.modalService = t, this.icons = ug
        }
        ngOnInit() {
            this.saved = !1, this.difficulty = this.data.difficulty, this.darktheme = this.data.darktheme, this.nostats = this.data.nostats, this.autopause = Object.assign({}, this.data.autopause), this.max_rpt = this.data.max_rpt, this.max_notif = this.data.max_notif, this.no_respawn = this.data.no_respawn, this.notif_pop = this.data.notif_pop, this.notif_building = this.data.notif_building
        }
        save() {
            this.data.difficulty = this.difficulty, this.data.darktheme = this.darktheme, this.data.nostats = this.nostats, this.data.autopause = Object.assign({}, this.autopause), this.max_rpt < 5 && (this.max_rpt = 5), this.data.max_rpt = this.max_rpt, this.max_notif < 5 && (this.max_notif = 5), this.data.max_notif = this.max_notif, this.data.no_respawn = this.no_respawn, this.data.notif_pop = this.notif_pop, this.data.notif_building = this.notif_building, this.saved = !0
        }
        restart() {
            this.dataService.reincarnation(!0)
        }
    }
    var DD = st({
        encapsulation: 0,
        styles: [[".card-body[_ngcontent-%COMP%]{height:auto!important}"]],
        data: {}
    });

    function MD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "div", [], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.difficulty = l.context.$implicit.key) && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(2, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(3, {
            "flex-fill card card-body cursor-pointer m-2 p-2": 0,
            "border-primary": 1
        }), (l()(), su(4, 0, null, null, 1, "b", [["class", "text-center"]], null, null, null, null, null)), (l()(), _u(5, null, ["", ""])), (l()(), su(6, 0, null, null, 0, "p", [["class", "mb-1"]], [[8, "innerHTML", 1]], null, null, null, null))], (function (l, n) {
            var e = l(n, 3, 0, !0, n.component.difficulty == n.context.$implicit.key);
            l(n, 2, 0, e)
        }), (function (l, n) {
            l(n, 5, 0, n.context.$implicit.value.name), l(n, 6, 0, n.context.$implicit.value.description)
        }))
    }

    function OD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Changes saved succesfully !"]))], null, null)
    }

    function ND(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "h2", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Game options"])), (l()(), su(2, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Difficulty"])), (l()(), su(4, 0, null, null, 3, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, MD)), gi(6, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne]), (l()(), su(8, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Offline"])), (l()(), su(10, 0, null, null, 8, "div", [["class", "form-group form-check d-inline-block mr-1"]], null, null, null, null, null)), (l()(), su(11, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "a-save"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 12).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 12).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.autopause.save = e) && t), t
        }), null, null)), gi(12, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(14, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(16, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(17, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "a-save"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Prevent progress when offline"])), (l()(), su(19, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Barbarians"])), (l()(), su(21, 0, null, null, 8, "div", [["class", "form-group form-check d-inline-block mr-1"]], null, null, null, null, null)), (l()(), su(22, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "no_respawn"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 23).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 23).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.no_respawn = e) && t), t
        }), null, null)), gi(23, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(25, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(27, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(28, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "no_respawn"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Prevent city respawn"])), (l()(), su(30, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Stats & highscore"])), (l()(), su(32, 0, null, null, 8, "div", [["class", "form-group form-check"]], null, null, null, null, null)), (l()(), su(33, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "nostats"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 34).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 34).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.nostats = e) && t), t
        }), null, null)), gi(34, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(36, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(38, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(39, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "nostats"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Do not send stats & highscores"])), (l()(), su(41, 0, null, null, 1, "button", [["class", "btn btn-primary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.save() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Save"])), (l()(), iu(16777216, null, null, 1, null, OD)), gi(44, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(45, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Restart this run"])), (l()(), su(47, 0, null, null, 1, "p", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Like a reincarnation but without any gain from this run !"])), (l()(), su(49, 0, null, null, 1, "button", [["class", "btn btn-danger"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.modalService.open(ei(l.parent, 15)) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Restart this run"]))], (function (l, n) {
            var e = n.component;
            l(n, 6, 0, et(n, 6, 0, ei(n, 7).transform(e.conf.difficulties))), l(n, 14, 0, e.autopause.save), l(n, 25, 0, e.no_respawn), l(n, 36, 0, e.nostats), l(n, 44, 0, e.saved)
        }), (function (l, n) {
            l(n, 11, 0, ei(n, 16).ngClassUntouched, ei(n, 16).ngClassTouched, ei(n, 16).ngClassPristine, ei(n, 16).ngClassDirty, ei(n, 16).ngClassValid, ei(n, 16).ngClassInvalid, ei(n, 16).ngClassPending), l(n, 22, 0, ei(n, 27).ngClassUntouched, ei(n, 27).ngClassTouched, ei(n, 27).ngClassPristine, ei(n, 27).ngClassDirty, ei(n, 27).ngClassValid, ei(n, 27).ngClassInvalid, ei(n, 27).ngClassPending), l(n, 33, 0, ei(n, 38).ngClassUntouched, ei(n, 38).ngClassTouched, ei(n, 38).ngClassPristine, ei(n, 38).ngClassDirty, ei(n, 38).ngClassValid, ei(n, 38).ngClassInvalid, ei(n, 38).ngClassPending)
        }))
    }

    function RD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Changes saved succesfully !"]))], null, null)
    }

    function BD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "h2", [], null, null, null, null, null)), (l()(), _u(-1, null, ["UI options"])), (l()(), su(2, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Theme"])), (l()(), su(4, 0, null, null, 8, "div", [["class", "form-group form-check"]], null, null, null, null, null)), (l()(), su(5, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "darktheme"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 6).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 6).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.darktheme = e) && t), t
        }), null, null)), gi(6, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(8, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(10, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(11, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "darktheme"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Dark theme (experimental)"])), (l()(), su(13, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Auto-pause"])), (l()(), su(15, 0, null, null, 8, "div", [["class", "form-group form-check d-inline-block mr-1"]], null, null, null, null, null)), (l()(), su(16, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "a-citizen"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 17).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 17).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.autopause.citizen = e) && t), t
        }), null, null)), gi(17, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(19, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(21, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(22, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "a-citizen"]], null, null, null, null, null)), (l()(), _u(-1, null, ["New citizen"])), (l()(), su(24, 0, null, null, 8, "div", [["class", "form-group form-check d-inline-block mr-1"]], null, null, null, null, null)), (l()(), su(25, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "a-building"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 26).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 26).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.autopause.building = e) && t), t
        }), null, null)), gi(26, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(28, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(30, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(31, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "a-building"]], null, null, null, null, null)), (l()(), _u(-1, null, ["New building"])), (l()(), su(33, 0, null, null, 8, "div", [["class", "form-group form-check d-inline-block mr-1"]], null, null, null, null, null)), (l()(), su(34, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "a-science"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 35).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 35).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.autopause.science = e) && t), t
        }), null, null)), gi(35, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(37, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(39, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(40, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "a-science"]], null, null, null, null, null)), (l()(), _u(-1, null, ["New science"])), (l()(), su(42, 0, null, null, 8, "div", [["class", "form-group form-check d-inline-block mr-1"]], null, null, null, null, null)), (l()(), su(43, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "a-incoming"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 44).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 44).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.autopause.incoming = e) && t), t
        }), null, null)), gi(44, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(46, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(48, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(49, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "a-incoming"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Incoming attack"])), (l()(), su(51, 0, null, null, 8, "div", [["class", "form-group form-check d-inline-block mr-1"]], null, null, null, null, null)), (l()(), su(52, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "a-city_captured"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 53).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 53).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.autopause.city_captured = e) && t), t
        }), null, null)), gi(53, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(55, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(57, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(58, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "a-city_captured"]], null, null, null, null, null)), (l()(), _u(-1, null, ["City captured"])), (l()(), su(60, 0, null, null, 8, "div", [["class", "form-group form-check d-inline-block mr-1"]], null, null, null, null, null)), (l()(), su(61, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "a-city_lost"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 62).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 62).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.autopause.city_lost = e) && t), t
        }), null, null)), gi(62, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(64, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(66, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(67, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "a-city_lost"]], null, null, null, null, null)), (l()(), _u(-1, null, ["City lost"])), (l()(), su(69, 0, null, null, 8, "div", [["class", "form-group form-check d-inline-block mr-1"]], null, null, null, null, null)), (l()(), su(70, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "a-city_joined"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 71).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 71).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.autopause.city_joined = e) && t), t
        }), null, null)), gi(71, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(73, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(75, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(76, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "a-city_joined"]], null, null, null, null, null)), (l()(), _u(-1, null, ["City joined"])), (l()(), su(78, 0, null, null, 8, "div", [["class", "form-group form-check d-inline-block mr-1"]], null, null, null, null, null)), (l()(), su(79, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "a-plague"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 80).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 80).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.autopause.plague = e) && t), t
        }), null, null)), gi(80, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(82, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(84, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(85, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "a-plague"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Plague"])), (l()(), su(87, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Notifications"])), (l()(), su(89, 0, null, null, 8, "div", [["class", "form-group form-check d-inline-block mr-1"]], null, null, null, null, null)), (l()(), su(90, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "notif_pop"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 91).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 91).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.notif_pop = e) && t), t
        }), null, null)), gi(91, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(93, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(95, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(96, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "notif_pop"]], null, null, null, null, null)), (l()(), _u(-1, null, ["New Citizen"])), (l()(), su(98, 0, null, null, 8, "div", [["class", "form-group form-check d-inline-block mr-1"]], null, null, null, null, null)), (l()(), su(99, 0, null, null, 5, "input", [["class", "form-check-input"], ["id", "notif_building"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 100).onChange(e.target.checked) && t), "blur" === n && (t = !1 !== ei(l, 100).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.notif_building = e) && t), t
        }), null, null)), gi(100, 16384, null, 0, nf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [nf]), gi(102, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(104, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(105, 0, null, null, 1, "label", [["class", "form-check-label"], ["for", "notif_building"]], null, null, null, null, null)), (l()(), _u(-1, null, ["New Building"])), (l()(), su(107, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["History"])), (l()(), su(109, 0, null, null, 18, "div", [], null, null, null, null, null)), (l()(), su(110, 0, null, null, 1, "label", [["class", "form-label"], ["for", "max_rpt"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Battle Report History"])), (l()(), su(112, 0, null, null, 6, "input", [["class", "form-input"], ["id", "max_rpt"], ["min", "5"], ["type", "number"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "input" === n && (t = !1 !== ei(l, 113)._handleInput(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 113).onTouched() && t), "compositionstart" === n && (t = !1 !== ei(l, 113)._compositionStart() && t), "compositionend" === n && (t = !1 !== ei(l, 113)._compositionEnd(e.target.value) && t), "change" === n && (t = !1 !== ei(l, 114).onChange(e.target.value) && t), "input" === n && (t = !1 !== ei(l, 114).onChange(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 114).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.max_rpt = e) && t), t
        }), null, null)), gi(113, 16384, null, 0, tf, [be, fe, [2, ef]], null, null), gi(114, 16384, null, 0, _f, [be, fe], null, null), yi(1024, null, lf, (function (l, n) {
            return [l, n]
        }), [tf, _f]), gi(116, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(118, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(119, 0, null, null, 1, "label", [["class", "form-label ml-2"], ["for", "max_notif"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Notification History"])), (l()(), su(121, 0, null, null, 6, "input", [["class", "form-input"], ["id", "max_notif"], ["min", "5"], ["type", "number"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "input" === n && (t = !1 !== ei(l, 122)._handleInput(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 122).onTouched() && t), "compositionstart" === n && (t = !1 !== ei(l, 122)._compositionStart() && t), "compositionend" === n && (t = !1 !== ei(l, 122)._compositionEnd(e.target.value) && t), "change" === n && (t = !1 !== ei(l, 123).onChange(e.target.value) && t), "input" === n && (t = !1 !== ei(l, 123).onChange(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 123).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.max_notif = e) && t), t
        }), null, null)), gi(122, 16384, null, 0, tf, [be, fe, [2, ef]], null, null), gi(123, 16384, null, 0, _f, [be, fe], null, null), yi(1024, null, lf, (function (l, n) {
            return [l, n]
        }), [tf, _f]), gi(125, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(127, 16384, null, 0, cf, [[4, af]], null, null), (l()(), su(128, 0, null, null, 1, "button", [["class", "btn btn-primary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.save() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Save"])), (l()(), iu(16777216, null, null, 1, null, RD)), gi(131, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 8, 0, e.darktheme), l(n, 19, 0, e.autopause.citizen), l(n, 28, 0, e.autopause.building), l(n, 37, 0, e.autopause.science), l(n, 46, 0, e.autopause.incoming), l(n, 55, 0, e.autopause.city_captured), l(n, 64, 0, e.autopause.city_lost), l(n, 73, 0, e.autopause.city_joined), l(n, 82, 0, e.autopause.plague), l(n, 93, 0, e.notif_pop), l(n, 102, 0, e.notif_building), l(n, 116, 0, e.max_rpt), l(n, 125, 0, e.max_notif), l(n, 131, 0, e.saved)
        }), (function (l, n) {
            l(n, 5, 0, ei(n, 10).ngClassUntouched, ei(n, 10).ngClassTouched, ei(n, 10).ngClassPristine, ei(n, 10).ngClassDirty, ei(n, 10).ngClassValid, ei(n, 10).ngClassInvalid, ei(n, 10).ngClassPending), l(n, 16, 0, ei(n, 21).ngClassUntouched, ei(n, 21).ngClassTouched, ei(n, 21).ngClassPristine, ei(n, 21).ngClassDirty, ei(n, 21).ngClassValid, ei(n, 21).ngClassInvalid, ei(n, 21).ngClassPending), l(n, 25, 0, ei(n, 30).ngClassUntouched, ei(n, 30).ngClassTouched, ei(n, 30).ngClassPristine, ei(n, 30).ngClassDirty, ei(n, 30).ngClassValid, ei(n, 30).ngClassInvalid, ei(n, 30).ngClassPending), l(n, 34, 0, ei(n, 39).ngClassUntouched, ei(n, 39).ngClassTouched, ei(n, 39).ngClassPristine, ei(n, 39).ngClassDirty, ei(n, 39).ngClassValid, ei(n, 39).ngClassInvalid, ei(n, 39).ngClassPending), l(n, 43, 0, ei(n, 48).ngClassUntouched, ei(n, 48).ngClassTouched, ei(n, 48).ngClassPristine, ei(n, 48).ngClassDirty, ei(n, 48).ngClassValid, ei(n, 48).ngClassInvalid, ei(n, 48).ngClassPending), l(n, 52, 0, ei(n, 57).ngClassUntouched, ei(n, 57).ngClassTouched, ei(n, 57).ngClassPristine, ei(n, 57).ngClassDirty, ei(n, 57).ngClassValid, ei(n, 57).ngClassInvalid, ei(n, 57).ngClassPending), l(n, 61, 0, ei(n, 66).ngClassUntouched, ei(n, 66).ngClassTouched, ei(n, 66).ngClassPristine, ei(n, 66).ngClassDirty, ei(n, 66).ngClassValid, ei(n, 66).ngClassInvalid, ei(n, 66).ngClassPending), l(n, 70, 0, ei(n, 75).ngClassUntouched, ei(n, 75).ngClassTouched, ei(n, 75).ngClassPristine, ei(n, 75).ngClassDirty, ei(n, 75).ngClassValid, ei(n, 75).ngClassInvalid, ei(n, 75).ngClassPending), l(n, 79, 0, ei(n, 84).ngClassUntouched, ei(n, 84).ngClassTouched, ei(n, 84).ngClassPristine, ei(n, 84).ngClassDirty, ei(n, 84).ngClassValid, ei(n, 84).ngClassInvalid, ei(n, 84).ngClassPending), l(n, 90, 0, ei(n, 95).ngClassUntouched, ei(n, 95).ngClassTouched, ei(n, 95).ngClassPristine, ei(n, 95).ngClassDirty, ei(n, 95).ngClassValid, ei(n, 95).ngClassInvalid, ei(n, 95).ngClassPending), l(n, 99, 0, ei(n, 104).ngClassUntouched, ei(n, 104).ngClassTouched, ei(n, 104).ngClassPristine, ei(n, 104).ngClassDirty, ei(n, 104).ngClassValid, ei(n, 104).ngClassInvalid, ei(n, 104).ngClassPending), l(n, 112, 0, ei(n, 118).ngClassUntouched, ei(n, 118).ngClassTouched, ei(n, 118).ngClassPristine, ei(n, 118).ngClassDirty, ei(n, 118).ngClassValid, ei(n, 118).ngClassInvalid, ei(n, 118).ngClassPending), l(n, 121, 0, ei(n, 127).ngClassUntouched, ei(n, 127).ngClassTouched, ei(n, 127).ngClassPristine, ei(n, 127).ngClassDirty, ei(n, 127).ngClassValid, ei(n, 127).ngClassInvalid, ei(n, 127).ngClassPending)
        }))
    }

    function zD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "modal-header"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "h4", [["class", "modal-title"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Restart this run"])), (l()(), su(3, 0, null, null, 2, "button", [["class", "close"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.context.$implicit.dismiss() && t), t
        }), null, null)), (l()(), su(4, 0, null, null, 1, "span", [["aria-hidden", "true"]], null, null, null, null, null)), (l()(), _u(-1, null, ["\xd7"])), (l()(), su(6, 0, null, null, 5, "div", [["class", "modal-body"]], null, null, null, null, null)), (l()(), su(7, 0, null, null, 4, "div", [["class", "text-danger"]], null, null, null, null, null)), (l()(), su(8, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Are you sure you want to restart ?"])), (l()(), su(10, 0, null, null, 0, "br", [], null, null, null, null, null)), (l()(), _u(-1, null, [" All progress from this run will be lost !"])), (l()(), su(12, 0, null, null, 4, "div", [["class", "modal-footer"]], null, null, null, null, null)), (l()(), su(13, 0, null, null, 1, "button", [["class", "btn btn-secondary"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.context.$implicit.close() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Cancel"])), (l()(), su(15, 0, null, null, 1, "button", [["class", "btn btn-danger"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (l.context.$implicit.close(), t = !1 !== i.restart() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Restart"]))], null, null)
    }

    function $D(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 14, "ngb-tabset", [], null, null, null, K_, U_)), gi(1, 2146304, null, 1, tv, [Jy], null, null), cu(603979776, 1, {
            tabs: 1
        }), (l()(), su(3, 0, null, null, 5, "ngb-tab", [["title", "Game Options"]], null, null, null, null, null)), gi(4, 2113536, [[1, 4]], 2, ev, [], {
            title: [0, "title"]
        }, null), cu(603979776, 2, {
            titleTpls: 1
        }), cu(603979776, 3, {
            contentTpls: 1
        }), (l()(), iu(0, null, null, 1, null, ND)), gi(8, 16384, [[3, 4]], 0, nv, [$e], null, null), (l()(), su(9, 0, null, null, 5, "ngb-tab", [["title", "UI Options"]], null, null, null, null, null)), gi(10, 2113536, [[1, 4]], 2, ev, [], {
            title: [0, "title"]
        }, null), cu(603979776, 4, {
            titleTpls: 1
        }), cu(603979776, 5, {
            contentTpls: 1
        }), (l()(), iu(0, null, null, 1, null, BD)), gi(14, 16384, [[5, 4]], 0, nv, [$e], null, null), (l()(), iu(0, [["content", 2]], null, 0, null, zD))], (function (l, n) {
            l(n, 4, 0, "Game Options"), l(n, 10, 0, "UI Options")
        }), null)
    }

    function LD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-options", [], null, null, null, $D, DD)), gi(1, 114688, null, 0, PD, [Pg, Tg, zg, Fy], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var FD = jt("app-options", PD, LD, {}, {}, []); class qD {
        constructor(l, n, e, t) {
            this.activatedRoute = l, this.data = n, this.conf = e, this.dataService = t, this.icons = ug
        }
        ngOnInit() {
            this.activatedRoute.fragment.subscribe(l => {
                l && (this.activetabeid = l), "tab_trade" === l ? this.initTabTrade() : "tab_global" === l && this.initTabGlobal()
            }), this.hasDiplo = this.dataService.getRelations(0).length > 0
        }
        beforeChange(l) {
            "tab_trade" === l.nextId ? this.initTabTrade() : "tab_global" === l.nextId ? this.initTabGlobal() : "tab_stats" === l.nextId && this.initTabStats()
        }
        initTabStats() {
            this.popRanks = this.getPopRanks(), this.scienceRanks = this.getScienceRanks(), this.goldRanks = this.getGoldRanks(), this.wonderRanks = this.getWonderRanks(), this.troopRanks = this.getTroopRanks(), this.cityRanks = this.getCityRanks(), this.tradeRanks = this.getTradeRanks(), this.globalGold = this.getGlobalGold(), this.globalPop = this.getGlobalPop(), this.globalTroops = this.getGlobalTroops(), this.globalCities = this.getGlobalCities(), this.globalWonders = this.getGlobalWonders(), this.globalTrade = this.getGlobalTrade()
        }
        initTabTrade() {
            this.trades = this.data.trades.filter(l => 0 == l.ownerid || 0 == l.destid), this.values = this.trades.map(l => this.dataService.tradeRouteValue(this.dataService.city(l.from.x, l.from.y), this.dataService.city(l.to.x, l.to.y)))
        }
        initTabGlobal() {
            this.svg = {
                width: 610,
                height: 610,
                selected: 0,
                nodes: [],
                relations: []
            };
            let l = this.data.players.length - 1;
            for (let n = 0; n <= l; n++)
                if (1 != this.data.players[n].id) {
                    let e = (0 == n ? 0 : n - 1) / (l / 2) * Math.PI,
                        t = 250 * Math.cos(e) + this.svg.width / 2,
                        i = 250 * Math.sin(e) + this.svg.width / 2;
                    this.svg.nodes.push({
                        id: this.data.players[n].id,
                        name: this.dataService.haveRelation(0, this.data.players[n].id) ? this.data.players[n].name : "?",
                        x: t,
                        y: i,
                        color: this.dataService.color(this.data.players[n].id),
                        color2: this.dataService.color2(this.data.players[n].id)
                    })
                } this.selectPlayer(0)
        }
        influence(l) {
            return 100 * this.dataService.influence(0, l)
        }
        influenceDiff(l) {
            return this.dataService.influenceDiff(0, l) - this.dataService.influenceDiff(l, 0)
        }
        isPromotionAllowed(l) {
            return this.dataService.isPromotionAllowed(0, l)
        }
        promoteCooldown(l) {
            return this.dataService.player().promotion_cooldown[l] ? this.dataService.player().promotion_cooldown[l] : 0
        }
        promote(l) {
            this.dataService.promotionCost(0) > this.dataService.player().culture || !this.isPromotionAllowed(l) || this.dataService.promote(0, l)
        }
        selectPlayer(l) {
            this.svg.selected = l, this.svg.relations = [], this.dataService.getRelations(l).forEach(l => {
                let n = l.playersid[0],
                    e = l.playersid[1],
                    t = this.svg.nodes.find(l => l.id == n),
                    i = this.svg.nodes.find(l => l.id == e);
                t && i && this.svg.relations.push({
                    x1: t.x,
                    y1: t.y,
                    x2: i.x,
                    y2: i.y,
                    color: this.relColor(l)
                })
            })
        }
        relColor(l) {
            return 3 == l.status ? "#28a745" : 2 == l.status ? "#6c757d" : 1 == l.status ? "#dc3545" : "#007bff"
        }
        p(l) {
            return this.dataService.player(l.playersid[1])
        }
        negociate(l) {
            this.nego = {
                player: {
                    available: this.dataService.player().cities.map(l => l.id),
                    giving: []
                },
                ai: {
                    id: l,
                    available: this.dataService.player(l).cities.map(l => l.id),
                    giving: []
                }
            }
        }
        isAcceptable() {
            return !(this.dataService.getRelation(0, this.nego.ai.id).war_rating < 0 && this.nego.ai.giving.length > 0) && !(this.nego.ai.giving.length > this.dataService.troopNbById(0, "governor", !1, !1)) && this.dataService.peaceCost(this.dataService.player(), this.nego.ai.id) + this.offerValue() >= 0
        }
        offerResponse() {
            let l = this.dataService.getRelation(0, this.nego.ai.id),
                n = this.dataService.peaceCost(this.dataService.player(), this.nego.ai.id);
            return l.war_rating < 0 && this.nego.ai.giving.length > 0 ? "You are not in a position to make such demand" : n + this.offerValue() > .75 ? "If you are stupid enough to accept this, i will take it." : n + this.offerValue() > .5 ? "I would gladly accept that offer." : n + this.offerValue() >= 0 ? "This proposition is fair." : n + this.offerValue() > -.1 ? "Almost there..." : n + this.offerValue() > -.25 ? "That offer is not acceptable" : n + this.offerValue() > -.5 ? "This is outrageous" : "This offer is an insult."
        }
        offerPeace() {
            if (this.isAcceptable()) {
                this.dataService.truce(0, this.nego.ai.id);
                let l = this.nego.ai.giving.length;
                this.dataService.player().cities.forEach(n => {
                    for (; n.troops.governor && l > 0;) n.troops.governor--, n.troops.governor <= 0 && delete n.troops.governor, l--
                }), this.nego.player.giving.forEach(l => {
                    this.dataService.transferCity(l, this.nego.ai.id), this.dataService.city(l).troops = {}
                }), this.nego.ai.giving.forEach(l => {
                    this.dataService.transferCity(l, 0), this.dataService.city(l).troops = {}
                }), this.nego = void 0
            }
        }
        move(l, n, e) {
            e.push(l), n.splice(n.indexOf(l), 1)
        }
        offerValue() {
            let l = this.nego.ai.giving.reduce((l, n) => l + this.dataService.cityValue(this.dataService.city(n)), 0) / this.dataService.playerValue(this.nego.ai.id);
            return this.nego.player.giving.reduce((l, n) => l + this.dataService.cityValue(this.dataService.city(n)), 0) / this.dataService.playerValue(0) - l
        }
        relation(l) {
            let n = this.dataService.player(l).appreciation[0];
            return n < 25 ? '<span class="text-danger">Hostile</span>' : n < 50 ? '<span class="text-warning">Guarded</span>' : n < 75 ? '<span class="text-primary">Neutral</span>' : n < 95 ? '<span class="text-success">Friendly</span>' : '<span class="text-success">Gracious</span>'
        }
        status(l) {
            return 0 == l.status ? '<span class="text-primary">Peace</span>' : 2 == l.status ? "Truce" : 3 == l.status ? '<span class="text-success">Alliance</span>' : '<b class="text-danger">WAR !</b> (Fatigue: ' + Math.floor(100 - 100 * this.dataService.fatigueRatio(this.dataService.player(), l.playersid[1])) + "%)"
        }
        alliance(l) {
            l.status = 3, l.cooldown = this.conf.alliance_min_length
        }
        leaveAlliance(l) {
            l.status = 0, l.cooldown = 0
        }
        isAllianceAllowed(l) {
            return l.appreciation[0] >= 95
        }
        isWarAllowed(l) {
            return 0 == l.status
        }
        capital(l) {
            return this.dataService.player(l).cities.find(l => l.capital).id
        }
        religion(l) {
            let n = this.conf.deities[this.dataService.player(l).deity];
            return n ? '<span style="color:' + n.color + '">' + n.name + "</span>" : ""
        }
        tradeRoutesNumber(l, n = !1) {
            return n ? this.data.trades.filter(n => n.destid == l && 0 == n.ownerid).length : this.data.trades.filter(n => n.ownerid == l && 0 == n.destid).length
        }
        deleteRoute(l) {
            this.dataService.supprTradeRoute(this.dataService.city(l.from.x, l.from.y), this.dataService.city(l.to.x, l.to.y)), this.initTabTrade()
        }
        war(l) {
            this.dataService.war(0, l.playersid[1])
        }
        wonders() {
            let l = [];
            return Object.values(this.conf.buildings).filter(l => l.wonder && this.dataService.isWonderDone(l.id)).forEach(n => {
                let e = this.dataService.cityForWonder(n.id),
                    t = e.ownerid;
                !this.dataService.haveRelation(0, e.ownerid) && t > 1 && (t = -1);
                let i = e.id;
                this.dataService.isDiscovered(0, e.x, e.y) || (i = -1), l.push({
                    label: n.label(null),
                    playerid: t,
                    cityid: i
                })
            }), l
        }
        colonies() {
            let l = [],
                n = {};
            return this.data.colonies.forEach(l => {
                n[l] ? n[l]++ : n[l] = 1
            }), Object.keys(n).forEach(e => {
                let t = this.dataService.city(+e),
                    i = t.ownerid;
                !this.dataService.haveRelation(0, t.ownerid) && i > 1 && (i = -1);
                let s = t.id;
                this.dataService.isDiscovered(0, t.x, t.y) || (s = -1), l.push({
                    nb: n[e],
                    playerid: i,
                    cityid: s
                })
            }), l
        }
        trackItem(l, n) {
            return l
        }
        getPopRanks() {
            return this.data.players.map(l => ({
                id: l.id <= 1 || this.dataService.haveRelation(0, l.id) ? l.id : -1,
                pop: l.cities.reduce((l, n) => l + this.dataService.pop(n), 0)
            })).sort((l, n) => l.pop > n.pop ? -1 : l.pop < n.pop ? 1 : 0)
        }
        getScienceRanks() {
            return this.data.players.map(l => ({
                id: l.id <= 1 || this.dataService.haveRelation(0, l.id) ? l.id : -1,
                sciences: Object.values(l.sciences).filter(l => l.done).length
            })).sort((l, n) => l.sciences > n.sciences ? -1 : l.sciences < n.sciences ? 1 : 0)
        }
        getGoldRanks() {
            return this.data.players.map(l => ({
                id: l.id <= 1 || this.dataService.haveRelation(0, l.id) ? l.id : -1,
                gold: this.dataService.goldTotal(l.id)
            })).sort((l, n) => l.gold > n.gold ? -1 : l.gold < n.gold ? 1 : 0)
        }
        getWonderRanks() {
            return this.data.players.map(l => ({
                id: l.id <= 1 || this.dataService.haveRelation(0, l.id) ? l.id : -1,
                nb: this.dataService.wondersNb(l.id)
            })).sort((l, n) => l.nb > n.nb ? -1 : l.nb < n.nb ? 1 : 0)
        }
        getTroopRanks() {
            return this.data.players.map(l => ({
                id: l.id <= 1 || this.dataService.haveRelation(0, l.id) ? l.id : -1,
                troops: l.cities.reduce((l, n) => l + (this.dataService.troopNb(n, !0) || 0), 0)
            })).sort((l, n) => l.troops > n.troops ? -1 : l.troops < n.troops ? 1 : 0)
        }
        getCityRanks() {
            return this.data.players.map(l => ({
                id: l.id <= 1 || this.dataService.haveRelation(0, l.id) ? l.id : -1,
                cities: l.cities.length
            })).sort((l, n) => l.cities > n.cities ? -1 : l.cities < n.cities ? 1 : 0)
        }
        getTradeRanks() {
            return this.data.players.map(l => ({
                id: l.id <= 1 || this.dataService.haveRelation(0, l.id) ? l.id : -1,
                nb: this.dataService.tradeRouteNb(l)
            })).sort((l, n) => l.nb > n.nb ? -1 : l.nb < n.nb ? 1 : 0)
        }
        getGlobalGold() {
            return this.dataService.allCities().reduce((l, n) => l + n.gold, 0)
        }
        getGlobalPop() {
            return this.dataService.allCities().reduce((l, n) => l + this.dataService.pop(n), 0)
        }
        getGlobalTroops() {
            return this.dataService.allCities().reduce((l, n) => l + (this.dataService.troopNb(n, !0) || 0), 0)
        }
        getGlobalCities() {
            return this.dataService.allCities().length
        }
        getGlobalWonders() {
            let l = 0;
            return Object.values(this.conf.buildings).filter(l => l.wonder).forEach(n => {
                this.dataService.isWonderDone(n.id) && l++
            }), l
        }
        getGlobalTrade() {
            return this.data.trades.length
        }
        mouseenter(l, n) {
            let e = this.dataService.player(n);
            l.open({
                id: n,
                civid: e.civ_id
            })
        }
        mouseleave(l) {
            l.close()
        }
    }
    var UD = st({
        encapsulation: 0,
        styles: [["g[_ngcontent-%COMP%]{cursor:pointer}g[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%], line[_ngcontent-%COMP%]{stroke-width:3px}text[_ngcontent-%COMP%]{font-size:90%;font-weight:700}g.selected[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%], g[_ngcontent-%COMP%]:hover   circle[_ngcontent-%COMP%]{stroke-width:5px}.progress[_ngcontent-%COMP%]{height:20px}.progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000}.line[_ngcontent-%COMP%]{width:20px;height:4px;display:inline-block;margin-bottom:4px}"]],
        data: {}
    });

    function HD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "div", [["class", "bg-info text-light p-3"]], null, null, null, null, null)), (l()(), _u(-1, null, [" You haven't discovered any civilization yet ! "]))], null, null)
    }

    function VD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "span", [], null, null, null, null, null)), yi(512, null, Oa, Na, [fe, Ne, be]), gi(2, 278528, null, 0, Ba, [Oa], {
            ngStyle: [0, "ngStyle"]
        }, null), vu(3, {
            color: 0
        }), (l()(), _u(4, null, [" ", " "]))], (function (l, n) {
            var e = n.component,
                t = l(n, 3, 0, e.conf.deities[e.p(n.parent.context.$implicit).deity].color);
            l(n, 2, 0, t)
        }), (function (l, n) {
            var e = n.component;
            l(n, 4, 0, e.conf.deities[e.p(n.parent.context.$implicit).deity].name)
        }))
    }

    function jD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "td", [["class", "text-colony"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(2, null, [" ", " "]))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons.colony), l(n, 2, 0, e.dataService.colonyNb(e.p(n.parent.context.$implicit).id))
        }))
    }

    function GD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "span", [], null, null, null, null, null)), (l()(), _u(1, null, ["(Allowed in ", ")"])), yu(2, 1)], null, (function (l, n) {
            var e = et(n, 1, 0, l(n, 2, 0, ei(n.parent.parent.parent.parent.parent, 1), n.parent.parent.context.$implicit.cooldown));
            l(n, 1, 0, e)
        }))
    }

    function WD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "button", [["class", "btn btn-danger mr-1"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.war(l.parent.context.$implicit) && t), t
        }), null, null)), (l()(), _u(-1, null, [" Declare war ! "])), (l()(), iu(16777216, null, null, 1, null, GD)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 3, 0, !n.component.isWarAllowed(n.parent.context.$implicit))
        }), (function (l, n) {
            l(n, 0, 0, !n.component.isWarAllowed(n.parent.context.$implicit))
        }))
    }

    function KD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "span", [], null, null, null, null, null)), (l()(), _u(1, null, ["(Allowed in ", ")"])), yu(2, 1)], null, (function (l, n) {
            var e = et(n, 1, 0, l(n, 2, 0, ei(n.parent.parent.parent.parent.parent, 1), n.parent.parent.context.$implicit.cooldown));
            l(n, 1, 0, e)
        }))
    }

    function ZD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "button", [["class", "btn btn-primary mr-1"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (t = !1 !== i.negociate(i.p(l.parent.context.$implicit).id) && t), t
        }), null, null)), (l()(), _u(-1, null, [" Negociate peace "])), (l()(), iu(16777216, null, null, 1, null, KD)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 3, 0, n.parent.context.$implicit.cooldown)
        }), (function (l, n) {
            l(n, 0, 0, n.parent.context.$implicit.cooldown)
        }))
    }

    function QD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-success mr-1"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.alliance(l.parent.context.$implicit) && t), t
        }), null, null)), (l()(), _u(-1, null, [" Offer Defensive Pact "]))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, !e.isAllianceAllowed(e.p(n.parent.context.$implicit)))
        }))
    }

    function YD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "span", [], null, null, null, null, null)), (l()(), _u(1, null, ["(Allowed in ", ")"])), yu(2, 1)], null, (function (l, n) {
            var e = et(n, 1, 0, l(n, 2, 0, ei(n.parent.parent.parent.parent.parent, 1), n.parent.parent.context.$implicit.cooldown));
            l(n, 1, 0, e)
        }))
    }

    function XD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "button", [["class", "btn btn-primary"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.leaveAlliance(l.parent.context.$implicit) && t), t
        }), null, null)), (l()(), _u(-1, null, [" Leave Defensive Pact "])), (l()(), iu(16777216, null, null, 1, null, YD)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 3, 0, n.parent.context.$implicit.cooldown)
        }), (function (l, n) {
            l(n, 0, 0, n.parent.context.$implicit.cooldown)
        }))
    }

    function JD(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 37, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 3, "td", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 2, "b", [], null, null, null, null, null)), (l()(), su(3, 0, null, null, 1, "player", [], null, null, null, xE, _E)), gi(4, 114688, null, 0, bE, [zg], {
            id: [0, "id"]
        }, null), (l()(), su(5, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(6, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(7, 114688, null, 0, nx, [Pg, zg], {
            id: [0, "id"]
        }, null), (l()(), su(8, 16777216, null, null, 6, "td", [["container", "body"], ["triggers", "manuel"]], null, [[null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== i.mouseenter(ei(l, 9), i.p(l.context.$implicit).id) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 9)) && t), t
        }), null, null)), gi(9, 737280, [["p1", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            triggers: [1, "triggers"],
            container: [2, "container"]
        }, null), (l()(), su(10, 0, null, null, 0, "span", [], [[8, "innerHTML", 1]], null, null, null, null)), (l()(), _u(-1, null, [" ("])), (l()(), su(12, 0, null, null, 1, "span", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(13, 2), (l()(), _u(-1, null, [")"])), (l()(), su(15, 0, null, null, 0, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), (l()(), su(16, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, VD)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(19, 0, null, null, 3, "td", [["class", "text-trade"]], null, null, null, null, null)), (l()(), su(20, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(21, null, [" ", " "])), (l()(), su(22, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(23, 0, null, null, 3, "td", [["class", "text-trade"]], null, null, null, null, null)), (l()(), su(24, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(25, null, [" ", " "])), (l()(), su(26, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, jD)), gi(28, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(29, 0, null, null, 8, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, WD)), gi(31, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, ZD)), gi(33, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, QD)), gi(35, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, XD)), gi(37, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, e.p(n.context.$implicit).id), l(n, 7, 0, e.capital(e.p(n.context.$implicit).id)), l(n, 9, 0, ei(n.parent.parent.parent, 31), "manuel", "body"), l(n, 18, 0, e.dataService.isUnlocked("deity_selection") && e.conf.deities[e.p(n.context.$implicit).deity]), l(n, 28, 0, e.dataService.isUnlocked("colonization")), l(n, 31, 0, 0 == n.context.$implicit.status || 2 == n.context.$implicit.status), l(n, 33, 0, 1 == n.context.$implicit.status), l(n, 35, 0, 0 == n.context.$implicit.status && e.dataService.isUnlocked("alliance") && e.dataService.hasScience("diplomacy", e.p(n.context.$implicit))), l(n, 37, 0, 3 == n.context.$implicit.status)
        }), (function (l, n) {
            var e = n.component;
            l(n, 10, 0, e.relation(e.p(n.context.$implicit).id));
            var t = et(n, 12, 0, l(n, 13, 0, ei(n.parent.parent.parent, 0), e.dataService.diploDiff(e.p(n.context.$implicit).id, 0), "+.1c"));
            l(n, 12, 0, t), l(n, 15, 0, e.status(n.context.$implicit)), l(n, 20, 0, e.icons.trade), l(n, 21, 0, e.tradeRoutesNumber(e.p(n.context.$implicit).id, !0)), l(n, 22, 0, e.icons.arrow_right), l(n, 24, 0, e.icons.trade), l(n, 25, 0, e.tradeRoutesNumber(e.p(n.context.$implicit).id, !1)), l(n, 26, 0, e.icons.arrow_left)
        }))
    }

    function lM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "table", [["class", "table"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, JD)), gi(3, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            l(n, 3, 0, n.component.dataService.getRelations(0))
        }), null)
    }

    function nM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, null, null, null, null, null, null, null))], null, null)
    }

    function eM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [["class", "p-2 p-2 cursor-pointer"], ["hover-class", "bg-dark text-light"]], null, [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== ei(l, 1).onMouseEnter() && t), "mouseleave" === n && (t = !1 !== ei(l, 1).onMouseLeave() && t), "click" === n && (t = !1 !== i.move(l.context.$implicit, i.nego.player.available, i.nego.player.giving) && t), t
        }), null, null)), gi(1, 16384, null, 0, sg, [fe], {
            hoverClass: [0, "hoverClass"]
        }, null), (l()(), iu(16777216, null, null, 2, null, nM)), gi(3, 540672, null, 0, za, [Fe], {
            ngTemplateOutletContext: [0, "ngTemplateOutletContext"],
            ngTemplateOutlet: [1, "ngTemplateOutlet"]
        }, null), vu(4, {
            id: 0
        })], (function (l, n) {
            l(n, 1, 0, "bg-dark text-light");
            var e = l(n, 4, 0, n.context.$implicit);
            l(n, 3, 0, e, ei(n.parent.parent.parent, 32))
        }), null)
    }

    function tM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, null, null, null, null, null, null, null))], null, null)
    }

    function iM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [["class", "p-2 cursor-pointer"], ["hover-class", "bg-dark text-light"]], null, [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== ei(l, 1).onMouseEnter() && t), "mouseleave" === n && (t = !1 !== ei(l, 1).onMouseLeave() && t), "click" === n && (t = !1 !== i.move(l.context.$implicit, i.nego.player.giving, i.nego.player.available) && t), t
        }), null, null)), gi(1, 16384, null, 0, sg, [fe], {
            hoverClass: [0, "hoverClass"]
        }, null), (l()(), iu(16777216, null, null, 2, null, tM)), gi(3, 540672, null, 0, za, [Fe], {
            ngTemplateOutletContext: [0, "ngTemplateOutletContext"],
            ngTemplateOutlet: [1, "ngTemplateOutlet"]
        }, null), vu(4, {
            id: 0
        })], (function (l, n) {
            l(n, 1, 0, "bg-dark text-light");
            var e = l(n, 4, 0, n.context.$implicit);
            l(n, 3, 0, e, ei(n.parent.parent.parent, 32))
        }), null)
    }

    function sM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, null, null, null, null, null, null, null))], null, null)
    }

    function uM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [["class", "p-2 cursor-pointer"], ["hover-class", "bg-dark text-light"]], null, [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== ei(l, 1).onMouseEnter() && t), "mouseleave" === n && (t = !1 !== ei(l, 1).onMouseLeave() && t), "click" === n && (t = !1 !== i.move(l.context.$implicit, i.nego.ai.giving, i.nego.ai.available) && t), t
        }), null, null)), gi(1, 16384, null, 0, sg, [fe], {
            hoverClass: [0, "hoverClass"]
        }, null), (l()(), iu(16777216, null, null, 2, null, sM)), gi(3, 540672, null, 0, za, [Fe], {
            ngTemplateOutletContext: [0, "ngTemplateOutletContext"],
            ngTemplateOutlet: [1, "ngTemplateOutlet"]
        }, null), vu(4, {
            id: 0
        })], (function (l, n) {
            l(n, 1, 0, "bg-dark text-light");
            var e = l(n, 4, 0, n.context.$implicit);
            l(n, 3, 0, e, ei(n.parent.parent.parent, 32))
        }), null)
    }

    function rM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, null, null, null, null, null, null, null))], null, null)
    }

    function aM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "div", [["class", "p-2 cursor-pointer"], ["hover-class", "bg-dark text-light"]], null, [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== ei(l, 1).onMouseEnter() && t), "mouseleave" === n && (t = !1 !== ei(l, 1).onMouseLeave() && t), "click" === n && (t = !1 !== i.move(l.context.$implicit, i.nego.ai.available, i.nego.ai.giving) && t), t
        }), null, null)), gi(1, 16384, null, 0, sg, [fe], {
            hoverClass: [0, "hoverClass"]
        }, null), (l()(), iu(16777216, null, null, 2, null, rM)), gi(3, 540672, null, 0, za, [Fe], {
            ngTemplateOutletContext: [0, "ngTemplateOutletContext"],
            ngTemplateOutlet: [1, "ngTemplateOutlet"]
        }, null), vu(4, {
            id: 0
        })], (function (l, n) {
            l(n, 1, 0, "bg-dark text-light");
            var e = l(n, 4, 0, n.context.$implicit);
            l(n, 3, 0, e, ei(n.parent.parent.parent, 32))
        }), null)
    }

    function oM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(-1, null, ["You will need 1 governor to administer the new city."]))], null, null)
    }

    function cM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(1, null, ["You will need ", " governors to administer the new cities."]))], null, (function (l, n) {
            l(n, 1, 0, n.component.nego.ai.giving.length)
        }))
    }

    function dM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "bg-warning font-weight-bold d-inline-block p-2 m-2 text-dark"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, oM)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, cM)), gi(5, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, 1 == e.nego.ai.giving.length), l(n, 5, 0, e.nego.ai.giving.length > 1)
        }), (function (l, n) {
            l(n, 1, 0, n.component.icons.support + " mr-2")
        }))
    }

    function hM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 36, "div", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "div", [], null, null, null, null, null)), (l()(), _u(2, null, ["", ""])), (l()(), su(3, 0, null, null, 24, "div", [["class", "d-flex align-items-stretch overflow-auto"], ["style", "height:300px"]], null, null, null, null, null)), (l()(), su(4, 0, null, null, 4, "div", [["class", "d-flex flex-column align-items-stretch border overflow-auto"], ["style", "width:20%"]], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "div", [["class", "p-2 bg-dark text-light"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Your cities"])), (l()(), iu(16777216, null, null, 1, null, eM)), gi(8, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(9, 0, null, null, 1, "div", [["class", "px-4 d-flex align-items-center text-200"]], null, null, null, null, null)), (l()(), su(10, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(11, 0, null, null, 4, "div", [["class", "d-flex flex-column align-items-stretch border overflow-auto"], ["style", "width:20%"]], null, null, null, null, null)), (l()(), su(12, 0, null, null, 1, "div", [["class", "p-2 bg-dark text-light"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Your offers"])), (l()(), iu(16777216, null, null, 1, null, iM)), gi(15, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(16, 0, null, null, 4, "div", [["class", "d-flex flex-column align-items-stretch border overflow-auto"], ["style", "width:20%"]], null, null, null, null, null)), (l()(), su(17, 0, null, null, 1, "div", [["class", "p-2 bg-dark text-light"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Your demands"])), (l()(), iu(16777216, null, null, 1, null, uM)), gi(20, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(21, 0, null, null, 1, "div", [["class", "px-4 d-flex align-items-center text-200"]], null, null, null, null, null)), (l()(), su(22, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(23, 0, null, null, 4, "div", [["class", "d-flex flex-column align-items-stretch border overflow-auto"], ["style", "width:20%"]], null, null, null, null, null)), (l()(), su(24, 0, null, null, 1, "div", [["class", "p-2 bg-dark text-light"]], null, null, null, null, null)), (l()(), _u(25, null, ["", " cities"])), (l()(), iu(16777216, null, null, 1, null, aM)), gi(27, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, dM)), gi(29, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(30, 0, null, null, 0, "br", [], null, null, null, null, null)), (l()(), su(31, 0, null, null, 1, "button", [["class", "btn btn-secondary mr-3"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== (l.component.nego = void 0) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Cancel"])), (l()(), su(33, 0, null, null, 3, "button", [["ngClass", "btn btn-primary"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.offerPeace() && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(35, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), (l()(), _u(-1, null, ["Offer peace"]))], (function (l, n) {
            var e = n.component;
            l(n, 8, 0, e.nego.player.available), l(n, 15, 0, e.nego.player.giving), l(n, 20, 0, e.nego.ai.giving), l(n, 27, 0, e.nego.ai.available), l(n, 29, 0, e.nego.ai.giving.length), l(n, 35, 0, "btn btn-primary")
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.offerResponse()), l(n, 10, 0, e.icons.arrow_right), l(n, 22, 0, e.icons.arrow_left), l(n, 25, 0, e.dataService.player(e.nego.ai.id).name), l(n, 33, 0, !e.isAcceptable())
        }))
    }

    function pM(l) {
        return ku(0, [(l()(), iu(16777216, null, null, 1, null, HD)), gi(1, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, lM)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, hM)), gi(5, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, !e.nego && !e.hasDiplo), l(n, 3, 0, !e.nego && e.hasDiplo), l(n, 5, 0, e.nego)
        }), null)
    }

    function fM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, ":svg:line", [], [[1, "x1", 0], [1, "x2", 0], [1, "y1", 0], [1, "y2", 0], [1, "stroke", 0]], null, null, null, null))], null, (function (l, n) {
            l(n, 0, 0, n.context.$implicit.x1, n.context.$implicit.x2, n.context.$implicit.y1, n.context.$implicit.y2, n.context.$implicit.color)
        }))
    }

    function gM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, ":svg:g", [], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.selectPlayer(l.context.$implicit.id) && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(2, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(3, {
            selected: 0
        }), (l()(), su(4, 0, null, null, 0, ":svg:circle", [["r", "45"]], [[8, "id", 0], [1, "cx", 0], [1, "cy", 0], [1, "stroke", 0], [1, "fill", 0]], null, null, null, null)), (l()(), su(5, 0, null, null, 1, ":svg:text", [["dy", ".3em"], ["text-anchor", "middle"]], [[1, "x", 0], [1, "y", 0], [1, "fill", 0]], null, null, null, null)), (l()(), _u(6, null, ["", ""]))], (function (l, n) {
            var e = l(n, 3, 0, n.context.$implicit.id == n.component.svg.selected);
            l(n, 2, 0, e)
        }), (function (l, n) {
            l(n, 4, 0, Mt(1, "player-", n.context.$implicit.id, ""), n.context.$implicit.x, n.context.$implicit.y, n.context.$implicit.color, n.context.$implicit.color2), l(n, 5, 0, n.context.$implicit.x, n.context.$implicit.y, n.context.$implicit.color), l(n, 6, 0, n.context.$implicit.name)
        }))
    }

    function mM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, ":svg:svg", [["class", "diplo-global"]], [[1, "width", 0], [1, "height", 0]], null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, fM)), gi(2, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, gM)), gi(4, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.svg.relations), l(n, 4, 0, e.svg.nodes)
        }), (function (l, n) {
            var e = n.component;
            l(n, 0, 0, e.svg.width, e.svg.height)
        }))
    }

    function yM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 15, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, mM)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(3, 0, null, null, 12, "div", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 0, "div", [["class", "line bg-primary"]], null, null, null, null, null)), (l()(), _u(-1, null, [" Peace "])), (l()(), su(7, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(8, 0, null, null, 0, "div", [["class", "line bg-danger"]], null, null, null, null, null)), (l()(), _u(-1, null, [" War "])), (l()(), su(10, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(11, 0, null, null, 0, "div", [["class", "line bg-secondary"]], null, null, null, null, null)), (l()(), _u(-1, null, [" Truce "])), (l()(), su(13, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(14, 0, null, null, 0, "div", [["class", "line bg-success"]], null, null, null, null, null)), (l()(), _u(-1, null, [" Alliance "]))], (function (l, n) {
            l(n, 2, 0, n.component.svg)
        }), null)
    }

    function vM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "ngb-tab", [["id", "tab_global"], ["title", "Global Diplomacy"]], null, null, null, null, null)), gi(1, 2113536, [[1, 4]], 2, ev, [], {
            id: [0, "id"],
            title: [1, "title"]
        }, null), cu(603979776, 4, {
            titleTpls: 1
        }), cu(603979776, 5, {
            contentTpls: 1
        }), (l()(), iu(0, null, null, 1, null, yM)), gi(5, 16384, [[5, 4]], 0, nv, [$e], null, null)], (function (l, n) {
            l(n, 1, 0, "tab_global", "Global Diplomacy")
        }), null)
    }

    function bM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "span", [], null, null, null, null, null)), (l()(), _u(-1, null, [" ("])), (l()(), su(2, 0, null, null, 3, "span", [["class", "text-culture"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(4, null, [" ", ""])), yu(5, 1), (l()(), _u(-1, null, [") "]))], null, (function (l, n) {
            var e = n.component;
            l(n, 3, 0, e.icons.culture);
            var t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent.parent.parent.parent.parent, 0), e.dataService.promotionCost(0)));
            l(n, 4, 0, t)
        }))
    }

    function _M(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "span", [], null, null, null, null, null)), (l()(), _u(1, null, ["(Allowed in ", ")"])), yu(2, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 1, 0, l(n, 2, 0, ei(n.parent.parent.parent.parent.parent.parent, 1), e.promoteCooldown(e.p(n.parent.parent.context.$implicit).id)));
            l(n, 1, 0, t)
        }))
    }

    function wM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "td", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 5, "button", [["class", "btn btn-warning"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (t = !1 !== i.promote(i.p(l.parent.context.$implicit).id) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Promote culture "])), (l()(), iu(16777216, null, null, 1, null, bM)), gi(4, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, _M)), gi(6, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, e.isPromotionAllowed(e.p(n.parent.context.$implicit).id)), l(n, 6, 0, !e.isPromotionAllowed(e.p(n.parent.context.$implicit).id))
        }), (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.dataService.promotionCost(0) > e.dataService.player().culture || !e.isPromotionAllowed(e.p(n.parent.context.$implicit).id))
        }))
    }

    function xM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 16, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 3, "td", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 2, "b", [], null, null, null, null, null)), (l()(), su(3, 0, null, null, 1, "player", [], null, null, null, xE, _E)), gi(4, 114688, null, 0, bE, [zg], {
            id: [0, "id"]
        }, null), (l()(), su(5, 0, null, null, 9, "td", [], null, null, null, null, null)), (l()(), su(6, 0, null, null, 1, "span", [["class", "text-influence text-120"]], null, null, null, null, null)), (l()(), su(7, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(8, 0, null, null, 2, "span", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(9, null, [" ", "% "])), yu(10, 2), (l()(), _u(-1, null, [" ("])), (l()(), su(12, 0, null, null, 1, "span", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(13, 2), (l()(), _u(-1, null, [") "])), (l()(), iu(16777216, null, null, 1, null, wM)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 4, 0, e.p(n.context.$implicit).id), l(n, 16, 0, e.dataService.isUnlocked("promotion"))
        }), (function (l, n) {
            var e = n.component;
            l(n, 7, 0, e.icons.influence), l(n, 8, 0, Mt(1, "", e.influence(e.p(n.context.$implicit).id) > 0 ? "text-success" : "text-danger", " text-120 font-weight-bold"));
            var t = et(n, 9, 0, l(n, 10, 0, ei(n.parent.parent.parent.parent, 0), e.influence(e.p(n.context.$implicit).id), "+.1"));
            l(n, 9, 0, t);
            var i = et(n, 12, 0, l(n, 13, 0, ei(n.parent.parent.parent.parent, 0), e.influenceDiff(e.p(n.context.$implicit).id), "+.0c"));
            l(n, 12, 0, i)
        }))
    }

    function kM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "table", [["class", "table"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, xM)), gi(3, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            l(n, 3, 0, n.component.dataService.getRelations(0))
        }), null)
    }

    function SM(l) {
        return ku(0, [(l()(), iu(16777216, null, null, 1, null, kM)), gi(1, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, !e.nego && e.hasDiplo)
        }), null)
    }

    function CM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "ngb-tab", [["id", "tab_influence"], ["title", "Influence"]], null, null, null, null, null)), gi(1, 2113536, [[1, 4]], 2, ev, [], {
            id: [0, "id"],
            title: [1, "title"]
        }, null), cu(603979776, 6, {
            titleTpls: 1
        }), cu(603979776, 7, {
            contentTpls: 1
        }), (l()(), iu(0, null, null, 1, null, SM)), gi(5, 16384, [[7, 4]], 0, nv, [$e], null, null)], (function (l, n) {
            l(n, 1, 0, "tab_influence", "Influence")
        }), null)
    }

    function IM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 29, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(3, 114688, null, 0, nx, [Pg, zg], {
            x: [0, "x"],
            y: [1, "y"]
        }, null), (l()(), su(4, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(6, 114688, null, 0, nx, [Pg, zg], {
            x: [0, "x"],
            y: [1, "y"]
        }, null), (l()(), su(7, 0, null, null, 3, "td", [["class", "text-gold"]], null, null, null, null, null)), (l()(), su(8, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(9, null, [" +", ""])), yu(10, 1), (l()(), su(11, 0, null, null, 3, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), su(12, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(13, null, [" +", " "])), yu(14, 1), (l()(), su(15, 0, null, null, 3, "td", [["class", "text-diplomacy"]], null, null, null, null, null)), (l()(), su(16, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(17, null, [" +", ""])), yu(18, 2), (l()(), su(19, 0, null, null, 3, "td", [["class", "text-science"]], null, null, null, null, null)), (l()(), su(20, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(21, null, [" +", " "])), yu(22, 1), (l()(), su(23, 0, null, null, 3, "td", [["class", "text-faith"]], null, null, null, null, null)), (l()(), su(24, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(25, null, [" +", ""])), yu(26, 1), (l()(), su(27, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(28, 0, null, null, 1, "button", [["class", "btn btn-danger"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.deleteRoute(l.context.$implicit) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Delete route"]))], (function (l, n) {
            l(n, 3, 0, n.context.$implicit.from.x, n.context.$implicit.from.y), l(n, 6, 0, n.context.$implicit.to.x, n.context.$implicit.to.y)
        }), (function (l, n) {
            var e = n.component;
            l(n, 8, 0, e.icons.gold);
            var t = et(n, 9, 0, l(n, 10, 0, ei(n.parent.parent.parent, 0), e.values[n.context.index].gold * (0 == n.context.$implicit.ownerid ? 1 : e.conf.trade_route_ratio)));
            l(n, 9, 0, t), l(n, 12, 0, e.icons.culture);
            var i = et(n, 13, 0, l(n, 14, 0, ei(n.parent.parent.parent, 0), e.values[n.context.index].culture * (0 == n.context.$implicit.ownerid ? 1 : e.conf.trade_route_ratio)));
            l(n, 13, 0, i), l(n, 16, 0, e.icons.diplomacy);
            var s = et(n, 17, 0, l(n, 18, 0, ei(n.parent.parent.parent, 0), e.values[n.context.index].diplomacy, ".1"));
            l(n, 17, 0, s), l(n, 20, 0, e.icons.science);
            var u = et(n, 21, 0, l(n, 22, 0, ei(n.parent.parent.parent, 0), e.values[n.context.index].science * (0 == n.context.$implicit.ownerid ? 1 : e.conf.trade_route_ratio)));
            l(n, 21, 0, u), l(n, 24, 0, e.icons.faith);
            var r = et(n, 25, 0, l(n, 26, 0, ei(n.parent.parent.parent, 0), e.values[n.context.index].faith * (0 == n.context.$implicit.ownerid ? 1 : e.conf.trade_route_ratio)));
            l(n, 25, 0, r)
        }))
    }

    function TM(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 2, "b", [["class", "d-inline-block m-3"], ["container", "body"]], null, null, null, null, null)), gi(1, 737280, null, 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            container: [1, "container"]
        }, null), (l()(), _u(2, null, ["Maximum nb of trade routes : ", ""])), (l()(), su(3, 0, null, null, 20, "table", [["class", "table table-sm"]], null, null, null, null, null)), (l()(), su(4, 0, null, null, 16, "thead", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 15, "tr", [], null, null, null, null, null)), (l()(), su(6, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["From"])), (l()(), su(8, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["To"])), (l()(), su(10, 0, null, null, 1, "th", [["class", "text-gold"]], null, null, null, null, null)), (l()(), su(11, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(12, 0, null, null, 1, "th", [["class", "text-culture"]], null, null, null, null, null)), (l()(), su(13, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(14, 0, null, null, 1, "th", [["class", "text-diplomacy"]], null, null, null, null, null)), (l()(), su(15, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(16, 0, null, null, 1, "th", [["class", "text-science"]], null, null, null, null, null)), (l()(), su(17, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(18, 0, null, null, 1, "th", [["class", "text-faith"]], null, null, null, null, null)), (l()(), su(19, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(20, 0, null, null, 0, "th", [], null, null, null, null, null)), (l()(), su(21, 0, null, null, 2, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, IM)), gi(23, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(24, 0, null, null, 2, "div", [["class", "p-2 d-inline-block"]], null, null, null, null, null)), (l()(), su(25, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, ["Deleting a trade route results in loosing the associated caravan. "]))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, ei(n.parent.parent, 33), "body"), l(n, 23, 0, e.trades)
        }), (function (l, n) {
            var e = n.component;
            l(n, 2, 0, e.dataService.maxTradeRoute()), l(n, 11, 0, e.icons.gold), l(n, 13, 0, e.icons.culture), l(n, 15, 0, e.icons.diplomacy), l(n, 17, 0, e.icons.science), l(n, 19, 0, e.icons.faith), l(n, 25, 0, e.icons.warning)
        }))
    }

    function EM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "ngb-tab", [["id", "tab_trade"], ["title", "Trade Routes"]], null, null, null, null, null)), gi(1, 2113536, [[1, 4]], 2, ev, [], {
            id: [0, "id"],
            title: [1, "title"]
        }, null), cu(603979776, 8, {
            titleTpls: 1
        }), cu(603979776, 9, {
            contentTpls: 1
        }), (l()(), iu(0, null, null, 1, null, TM)), gi(5, 16384, [[9, 4]], 0, nv, [$e], null, null)], (function (l, n) {
            l(n, 1, 0, "tab_trade", "Trade Routes")
        }), null)
    }

    function AM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(1, 114688, null, 0, nx, [Pg, zg], {
            id: [0, "id"]
        }, null)], (function (l, n) {
            l(n, 1, 0, n.parent.context.$implicit.cityid)
        }), null)
    }

    function PM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "span", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "span", [["style", "color: #999"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Unknown city "]))], null, (function (l, n) {
            l(n, 2, 0, n.component.icons.player)
        }))
    }

    function DM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 11, null, null, null, null, null, null, null)), (l()(), su(1, 0, null, null, 10, "tr", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(3, null, ["", ""])), (l()(), su(4, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "player", [], null, null, null, xE, _E)), gi(6, 114688, null, 0, bE, [zg], {
            id: [0, "id"]
        }, null), (l()(), su(7, 0, null, null, 4, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, AM)), gi(9, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, PM)), gi(11, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 6, 0, n.context.$implicit.playerid), l(n, 9, 0, -1 != n.context.$implicit.cityid), l(n, 11, 0, -1 == n.context.$implicit.cityid)
        }), (function (l, n) {
            l(n, 3, 0, n.context.$implicit.label)
        }))
    }

    function MM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 11, "table", [["class", "table table-sm"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 7, "thead", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 6, "tr", [], null, null, null, null, null)), (l()(), su(3, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Wonder"])), (l()(), su(5, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Owner"])), (l()(), su(7, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["City"])), (l()(), su(9, 0, null, null, 2, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, DM)), gi(11, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"],
            ngForTrackBy: [1, "ngForTrackBy"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 11, 0, e.wonders(), e.trackItem)
        }), null)
    }

    function OM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "city", [], null, null, null, ix, ex)), gi(1, 114688, null, 0, nx, [Pg, zg], {
            id: [0, "id"]
        }, null)], (function (l, n) {
            l(n, 1, 0, n.parent.context.$implicit.cityid)
        }), null)
    }

    function NM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "span", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "span", [["style", "color: #999"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Unknown city "]))], null, (function (l, n) {
            l(n, 2, 0, n.component.icons.player)
        }))
    }

    function RM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 12, null, null, null, null, null, null, null)), (l()(), su(1, 0, null, null, 11, "tr", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(3, 0, null, null, 1, "player", [], null, null, null, xE, _E)), gi(4, 114688, null, 0, bE, [zg], {
            id: [0, "id"]
        }, null), (l()(), su(5, 0, null, null, 4, "td", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, OM)), gi(7, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, NM)), gi(9, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(10, 0, null, null, 2, "td", [["class", "text-colony"]], null, null, null, null, null)), (l()(), su(11, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(12, null, [" ", ""]))], (function (l, n) {
            l(n, 4, 0, n.context.$implicit.playerid), l(n, 7, 0, -1 != n.context.$implicit.cityid), l(n, 9, 0, -1 == n.context.$implicit.cityid)
        }), (function (l, n) {
            l(n, 11, 0, n.component.icons.colony), l(n, 12, 0, n.context.$implicit.nb)
        }))
    }

    function BM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 12, "table", [["class", "table table-sm"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 8, "thead", [], null, null, null, null, null)), (l()(), su(2, 0, null, null, 7, "tr", [], null, null, null, null, null)), (l()(), su(3, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Owner"])), (l()(), su(5, 0, null, null, 1, "th", [], null, null, null, null, null)), (l()(), _u(-1, null, ["City"])), (l()(), su(7, 0, null, null, 2, "th", [["class", "text-colony"]], null, null, null, null, null)), (l()(), su(8, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" Colonies"])), (l()(), su(10, 0, null, null, 2, "tbody", [], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, RM)), gi(12, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"],
            ngForTrackBy: [1, "ngForTrackBy"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 12, 0, e.colonies(), e.trackItem)
        }), (function (l, n) {
            l(n, 8, 0, n.component.icons.colony)
        }))
    }

    function zM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "ngb-tab", [["id", "tab_colonies"], ["title", "Colonies"]], null, null, null, null, null)), gi(1, 2113536, [[1, 4]], 2, ev, [], {
            id: [0, "id"],
            title: [1, "title"]
        }, null), cu(603979776, 12, {
            titleTpls: 1
        }), cu(603979776, 13, {
            contentTpls: 1
        }), (l()(), iu(0, null, null, 1, null, BM)), gi(5, 16384, [[13, 4]], 0, nv, [$e], null, null)], (function (l, n) {
            l(n, 1, 0, "tab_colonies", "Colonies")
        }), null)
    }

    function $M(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(1, null, [" ", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.parent.context.$implicit.cities)
        }))
    }

    function LM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), _u(1, null, [" ", ". "])), (l()(), su(2, 0, null, null, 1, "player", [["class", "flex-fill"]], null, null, null, xE, _E)), gi(3, 114688, null, 0, bE, [zg], {
            id: [0, "id"]
        }, null), (l()(), iu(16777216, null, null, 1, null, $M)), gi(5, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, n.context.$implicit.id), l(n, 5, 0, n.context.$implicit.id <= 1 || e.dataService.haveRelation(0, n.context.$implicit.id))
        }), (function (l, n) {
            l(n, 1, 0, n.context.index + 1)
        }))
    }

    function FM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(1, null, ["", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.parent.context.$implicit.pop)
        }))
    }

    function qM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), _u(1, null, [" ", ". "])), (l()(), su(2, 0, null, null, 1, "player", [["class", "flex-fill"]], null, null, null, xE, _E)), gi(3, 114688, null, 0, bE, [zg], {
            id: [0, "id"]
        }, null), (l()(), iu(16777216, null, null, 1, null, FM)), gi(5, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, n.context.$implicit.id), l(n, 5, 0, n.context.$implicit.id <= 1 || e.dataService.haveRelation(0, n.context.$implicit.id))
        }), (function (l, n) {
            l(n, 1, 0, n.context.index + 1)
        }))
    }

    function UM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "span", [], null, null, null, null, null)), (l()(), _u(1, null, [" ", ""])), yu(2, 1)], null, (function (l, n) {
            var e = et(n, 1, 0, l(n, 2, 0, ei(n.parent.parent.parent, 0), n.parent.context.$implicit.troops));
            l(n, 1, 0, e)
        }))
    }

    function HM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), _u(1, null, [" ", ". "])), (l()(), su(2, 0, null, null, 1, "player", [["class", "flex-fill"]], null, null, null, xE, _E)), gi(3, 114688, null, 0, bE, [zg], {
            id: [0, "id"]
        }, null), (l()(), iu(16777216, null, null, 1, null, UM)), gi(5, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 3, 0, n.context.$implicit.id), l(n, 5, 0, 0 == n.context.$implicit.id)
        }), (function (l, n) {
            l(n, 1, 0, n.context.index + 1)
        }))
    }

    function VM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(1, null, [" ", ""]))], null, (function (l, n) {
            l(n, 1, 0, n.parent.context.$implicit.sciences)
        }))
    }

    function jM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), _u(1, null, [" ", ". "])), (l()(), su(2, 0, null, null, 1, "player", [["class", "flex-fill"]], null, null, null, xE, _E)), gi(3, 114688, null, 0, bE, [zg], {
            id: [0, "id"]
        }, null), (l()(), iu(16777216, null, null, 1, null, VM)), gi(5, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 3, 0, n.context.$implicit.id), l(n, 5, 0, 0 == n.context.$implicit.id)
        }), (function (l, n) {
            l(n, 1, 0, n.context.index + 1)
        }))
    }

    function GM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "span", [], null, null, null, null, null)), (l()(), _u(1, null, [" ", ""])), yu(2, 1)], null, (function (l, n) {
            var e = et(n, 1, 0, l(n, 2, 0, ei(n.parent.parent.parent, 0), n.parent.context.$implicit.gold));
            l(n, 1, 0, e)
        }))
    }

    function WM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), _u(1, null, [" ", ". "])), (l()(), su(2, 0, null, null, 1, "player", [["class", "flex-fill"]], null, null, null, xE, _E)), gi(3, 114688, null, 0, bE, [zg], {
            id: [0, "id"]
        }, null), (l()(), iu(16777216, null, null, 1, null, GM)), gi(5, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            l(n, 3, 0, n.context.$implicit.id), l(n, 5, 0, 0 == n.context.$implicit.id)
        }), (function (l, n) {
            l(n, 1, 0, n.context.index + 1)
        }))
    }

    function KM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "span", [], null, null, null, null, null)), (l()(), _u(1, null, [" ", ""])), yu(2, 1)], null, (function (l, n) {
            var e = et(n, 1, 0, l(n, 2, 0, ei(n.parent.parent.parent, 0), n.parent.context.$implicit.nb));
            l(n, 1, 0, e)
        }))
    }

    function ZM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), _u(1, null, [" ", ". "])), (l()(), su(2, 0, null, null, 1, "player", [["class", "flex-fill"]], null, null, null, xE, _E)), gi(3, 114688, null, 0, bE, [zg], {
            id: [0, "id"]
        }, null), (l()(), iu(16777216, null, null, 1, null, KM)), gi(5, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, n.context.$implicit.id), l(n, 5, 0, 0 == n.context.$implicit.id || e.dataService.haveRelation(0, n.context.$implicit.id))
        }), (function (l, n) {
            l(n, 1, 0, n.context.index + 1)
        }))
    }

    function QM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), _u(1, null, [" ", ". "])), (l()(), su(2, 0, null, null, 1, "player", [["class", "flex-fill"]], null, null, null, xE, _E)), gi(3, 114688, null, 0, bE, [zg], {
            id: [0, "id"]
        }, null), (l()(), su(4, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(5, null, ["", ""]))], (function (l, n) {
            l(n, 3, 0, n.context.$implicit.id)
        }), (function (l, n) {
            l(n, 1, 0, n.context.index + 1), l(n, 5, 0, n.context.$implicit.nb)
        }))
    }

    function YM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 27, "div", [["class", "d-flex border-bottom"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 6, "div", [["class", "mr-4 border-left pl-2"], ["style", "width:220px"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 3, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 1, "span", [["class", "flex-fill"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Global cities:"])), (l()(), _u(5, null, [" ", ""])), (l()(), iu(16777216, null, null, 1, null, LM)), gi(7, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(8, 0, null, null, 6, "div", [["class", "mr-4 border-left pl-2"], ["style", "width:220px"]], null, null, null, null, null)), (l()(), su(9, 0, null, null, 3, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), su(10, 0, null, null, 1, "span", [["class", "flex-fill"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Global population:"])), (l()(), _u(12, null, [" ", ""])), (l()(), iu(16777216, null, null, 1, null, qM)), gi(14, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(15, 0, null, null, 7, "div", [["class", "mr-4 border-left pl-2"], ["style", "width:220px"]], null, null, null, null, null)), (l()(), su(16, 0, null, null, 4, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), su(17, 0, null, null, 1, "span", [["class", "flex-fill"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Global troops number:"])), (l()(), _u(19, null, [" ", ""])), yu(20, 1), (l()(), iu(16777216, null, null, 1, null, HM)), gi(22, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(23, 0, null, null, 4, "div", [["class", "mr-4 border-left pl-2"], ["style", "width:220px"]], null, null, null, null, null)), (l()(), su(24, 0, null, null, 1, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Science"])), (l()(), iu(16777216, null, null, 1, null, jM)), gi(27, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(28, 0, null, null, 23, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), su(29, 0, null, null, 7, "div", [["class", "mr-4 border-left pl-2"], ["style", "width:220px"]], null, null, null, null, null)), (l()(), su(30, 0, null, null, 4, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), su(31, 0, null, null, 1, "span", [["class", "flex-fill"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Global gold:"])), (l()(), _u(33, null, [" ", ""])), yu(34, 1), (l()(), iu(16777216, null, null, 1, null, WM)), gi(36, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(37, 0, null, null, 7, "div", [["class", "mr-4 border-left pl-2"], ["style", "width:220px"]], null, null, null, null, null)), (l()(), su(38, 0, null, null, 4, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), su(39, 0, null, null, 1, "span", [["class", "flex-fill"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Global trade:"])), (l()(), _u(41, null, [" ", ""])), yu(42, 1), (l()(), iu(16777216, null, null, 1, null, ZM)), gi(44, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), su(45, 0, null, null, 6, "div", [["class", "mr-4 border-left pl-2"], ["style", "width:220px"]], null, null, null, null, null)), (l()(), su(46, 0, null, null, 3, "div", [["class", "d-flex"]], null, null, null, null, null)), (l()(), su(47, 0, null, null, 1, "span", [["class", "flex-fill"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Wonders:"])), (l()(), _u(49, null, [" ", ""])), (l()(), iu(16777216, null, null, 1, null, QM)), gi(51, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 7, 0, e.cityRanks), l(n, 14, 0, e.popRanks), l(n, 22, 0, e.troopRanks), l(n, 27, 0, e.scienceRanks), l(n, 36, 0, e.goldRanks), l(n, 44, 0, e.tradeRanks), l(n, 51, 0, e.wonderRanks)
        }), (function (l, n) {
            var e = n.component;
            l(n, 5, 0, e.globalCities), l(n, 12, 0, e.globalPop);
            var t = et(n, 19, 0, l(n, 20, 0, ei(n.parent, 0), e.globalTroops));
            l(n, 19, 0, t);
            var i = et(n, 33, 0, l(n, 34, 0, ei(n.parent, 0), e.globalGold));
            l(n, 33, 0, i);
            var s = et(n, 41, 0, l(n, 42, 0, ei(n.parent, 0), e.globalTrade));
            l(n, 41, 0, s), l(n, 49, 0, e.globalWonders)
        }))
    }

    function XM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["War"])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(-1, null, ["- 1"]))], null, null)
    }

    function JM(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Trade routes"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 2)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 0), e.dataService.diploTrade(n.parent.context.id, 0), ".1"));
            l(n, 4, 0, t)
        }))
    }

    function lO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Proximity"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-danger"]], null, null, null, null, null)), (l()(), _u(4, null, ["- ", ""])), yu(5, 2)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 0), e.dataService.diploProximity(n.parent.context.id, 0), ".1"));
            l(n, 4, 0, t)
        }))
    }

    function nO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Religion"])), (l()(), su(3, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(4, 2)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 3, 0, l(n, 4, 0, ei(n.parent.parent, 0), e.dataService.diploDeity(n.parent.context.id, 0), "+.0c"));
            l(n, 3, 0, t)
        }))
    }

    function eO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Relations"])), (l()(), su(3, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(4, 2)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 3, 0, l(n, 4, 0, ei(n.parent.parent, 0), e.dataService.diploRelations(n.parent.context.id, 0), "+.1c"));
            l(n, 3, 0, t)
        }))
    }

    function tO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "b", [["class", "text-center d-block border-bottom bg-dark text-light"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Relations"])), (l()(), su(2, 0, null, null, 21, "table", [["class", "popover-table"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 20, "tbody", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Base"])), (l()(), su(7, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(8, 2), (l()(), iu(16777216, null, null, 1, null, XM)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, JM)), gi(12, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, lO)), gi(14, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, nO)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, eO)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(19, 0, null, null, 4, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(20, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total"])), (l()(), su(22, 0, null, null, 1, "td", [], [[8, "innerHTML", 1]], null, null, null, null)), yu(23, 2)], (function (l, n) {
            var e = n.component;
            l(n, 10, 0, e.dataService.atWar(n.context.id, 0)), l(n, 12, 0, e.dataService.diploTrade(n.context.id, 0)), l(n, 14, 0, e.dataService.diploProximity(n.context.id, 0)), l(n, 16, 0, e.dataService.diploDeity(n.context.id, 0)), l(n, 18, 0, e.dataService.diploRelations(n.context.id, 0))
        }), (function (l, n) {
            var e = n.component,
                t = et(n, 7, 0, l(n, 8, 0, ei(n.parent, 0), e.dataService.diploBase(n.context.id, 0), "+.1c"));
            l(n, 7, 0, t);
            var i = et(n, 22, 0, l(n, 23, 0, ei(n.parent, 0), e.dataService.diploDiff(n.context.id, 0), "+.1c"));
            l(n, 22, 0, i)
        }))
    }

    function iO(l) {
        return ku(0, [(l()(), _u(0, null, [" ", " (", ")\n"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 0, 0, e.dataService.city(n.context.id).name, e.dataService.pop(e.dataService.city(n.context.id)))
        }))
    }

    function sO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-science"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Diplomacy: "])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 1"]))], null, null)
    }

    function uO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-science"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Optics: "])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 1"]))], null, null)
    }

    function rO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-science"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Engineering: "])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 1"]))], null, null)
    }

    function aO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Pacifism: "])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 2"]))], null, null)
    }

    function oO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Platonic Academy: "])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 1"]))], null, null)
    }

    function cO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Trade Node"])), (l()(), su(3, 0, null, null, 2, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""])), yu(5, 1)], null, (function (l, n) {
            var e = n.component,
                t = et(n, 4, 0, l(n, 5, 0, ei(n.parent.parent, 0), e.dataService.tradeNodeBonus()));
            l(n, 4, 0, t)
        }))
    }

    function dO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Colossus: "])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 1"]))], null, null)
    }

    function hO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Panama Canal: "])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(-1, null, ["+ 2"]))], null, null)
    }

    function pO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "td", [["class", "text-culture"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Upgrades: "])), (l()(), su(3, 0, null, null, 1, "td", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(4, null, ["+ ", ""]))], null, (function (l, n) {
            l(n, 4, 0, n.component.dataService.upgradeTrade(0))
        }))
    }

    function fO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "b", [["class", "text-center d-block border-bottom bg-dark text-light"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Maximum Nb of trade routes"])), (l()(), su(2, 0, null, null, 28, "table", [["class", "popover-table"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 27, "tbody", [], null, null, null, null, null)), (l()(), su(4, 0, null, null, 4, "tr", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Base"])), (l()(), su(7, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["1"])), (l()(), iu(16777216, null, null, 1, null, sO)), gi(10, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, uO)), gi(12, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, rO)), gi(14, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, aO)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, oO)), gi(18, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, cO)), gi(20, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, dO)), gi(22, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, hO)), gi(24, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, pO)), gi(26, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(27, 0, null, null, 3, "tr", [["class", "border-top"]], null, null, null, null, null)), (l()(), su(28, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Total"])), (l()(), su(30, 0, null, null, 0, "td", [], [[8, "innerHTML", 1]], null, null, null, null))], (function (l, n) {
            var e = n.component;
            l(n, 10, 0, e.dataService.hasScience("diplomacy")), l(n, 12, 0, e.dataService.hasScience("optics")), l(n, 14, 0, e.dataService.hasScience("engineering")), l(n, 16, 0, e.dataService.hasPolicyGroup("pacifism")), l(n, 18, 0, e.dataService.hasPolicy("academy")), l(n, 20, 0, e.data.charging.tradenode), l(n, 22, 0, e.dataService.hasWonder(0, "colossus")), l(n, 24, 0, e.dataService.hasWonder(0, "panama")), l(n, 26, 0, e.dataService.upgradeTrade(0))
        }), (function (l, n) {
            l(n, 30, 0, n.component.dataService.maxTradeRoute())
        }))
    }

    function gO(l) {
        return ku(0, [mi(0, zv, []), mi(0, gv, []), (l()(), su(2, 0, null, null, 28, "ngb-tabset", [["class", "d-block h-100 pl-2"]], null, [[null, "tabChange"]], (function (l, n, e) {
            var t = !0;
            return "tabChange" === n && (t = !1 !== l.component.beforeChange(e) && t), t
        }), K_, U_)), gi(3, 2146304, null, 1, tv, [Jy], {
            activeId: [0, "activeId"]
        }, {
            tabChange: "tabChange"
        }), cu(603979776, 1, {
            tabs: 1
        }), (l()(), su(5, 0, null, null, 5, "ngb-tab", [["title", "Diplomacy"]], null, null, null, null, null)), gi(6, 2113536, [[1, 4]], 2, ev, [], {
            title: [0, "title"]
        }, null), cu(603979776, 2, {
            titleTpls: 1
        }), cu(603979776, 3, {
            contentTpls: 1
        }), (l()(), iu(0, null, null, 1, null, pM)), gi(10, 16384, [[3, 4]], 0, nv, [$e], null, null), (l()(), iu(16777216, null, null, 1, null, vM)), gi(12, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, CM)), gi(14, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, EM)), gi(16, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(17, 0, null, null, 5, "ngb-tab", [["id", "tab_wonders"], ["title", "Wonders"]], null, null, null, null, null)), gi(18, 2113536, [[1, 4]], 2, ev, [], {
            id: [0, "id"],
            title: [1, "title"]
        }, null), cu(603979776, 10, {
            titleTpls: 1
        }), cu(603979776, 11, {
            contentTpls: 1
        }), (l()(), iu(0, null, null, 1, null, MM)), gi(22, 16384, [[11, 4]], 0, nv, [$e], null, null), (l()(), iu(16777216, null, null, 1, null, zM)), gi(24, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), su(25, 0, null, null, 5, "ngb-tab", [["id", "tab_stats"], ["title", "Stats"]], null, null, null, null, null)), gi(26, 2113536, [[1, 4]], 2, ev, [], {
            id: [0, "id"],
            title: [1, "title"]
        }, null), cu(603979776, 14, {
            titleTpls: 1
        }), cu(603979776, 15, {
            contentTpls: 1
        }), (l()(), iu(0, null, null, 1, null, YM)), gi(30, 16384, [[15, 4]], 0, nv, [$e], null, null), (l()(), iu(0, [["popDiplo", 2]], null, 0, null, tO)), (l()(), iu(0, [["city", 2]], null, 0, null, iO)), (l()(), iu(0, [["maxTrade", 2]], null, 0, null, fO))], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, e.activetabeid), l(n, 6, 0, "Diplomacy"), l(n, 12, 0, e.dataService.isUnlocked("diplo_global")), l(n, 14, 0, e.hasDiplo), l(n, 16, 0, e.dataService.isUnlocked("trade")), l(n, 18, 0, "tab_wonders", "Wonders"), l(n, 24, 0, e.dataService.isUnlocked("colonization")), l(n, 26, 0, "tab_stats", "Stats")
        }), null)
    }

    function mO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-diplomacy", [], null, null, null, gO, UD)), gi(1, 114688, null, 0, qD, [oh, Pg, Tg, zg], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var yO = jt("app-diplomacy", qD, mO, {}, {}, []); class vO {
        constructor(l, n, e, t, i) {
            this.modalService = l, this.conf = n, this.data = e, this.dataService = t, this.activatedRoute = i, this.icons = ug
        }
        ngOnInit() {
            this.activatedRoute.fragment.subscribe(l => {
                l && (this.activetabeid = l)
            })
        }
        available(l) {
            return this.dataService.powerAvailable(0, l)
        }
        addPower(l) {
            this.available(l.id) && this.dataService.addPower(0, l.id)
        }
        isUpgradeVisible(l, n) {
            return !this.dataService.hasUpgrade(l) && n.cost <= 10 * this.data.prestige
        }
        isUpgradeAvailable(l) {
            return l.cost <= this.data.prestige
        }
        buy(l, n, e, t = !1) {
            this.isUpgradeAvailable(n) && (!t && n.cost > this.data.prestige / 10 ? (this.up = n, this.key = l, this.modalService.open(e)) : (this.data.prestige -= n.cost, this.data.upgrades.push(l)))
        }
        mouseenter(l, n) {
            l.open({
                title: n.name,
                power: n
            })
        }
        mouseleave(l) {
            l.close()
        }
    }
    var bO = st({
        encapsulation: 0,
        styles: [[""]],
        data: {}
    });

    function _O(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "span", [["class", "mr-3 text-center text-favor"], ["style", "width: 85px"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 3, "i", [], [[8, "className", 0]], null, null, null, null)), yi(512, null, Oa, Na, [fe, Ne, be]), gi(3, 278528, null, 0, Ba, [Oa], {
            ngStyle: [0, "ngStyle"]
        }, null), vu(4, {
            color: 0
        }), (l()(), _u(5, null, [" ", " "])), yu(6, 1)], (function (l, n) {
            var e = l(n, 4, 0, n.context.$implicit.key ? n.component.conf.deities[n.context.$implicit.key].color : "#000");
            l(n, 3, 0, e)
        }), (function (l, n) {
            l(n, 1, 0, n.component.icons.favor);
            var e = et(n, 5, 0, l(n, 6, 0, ei(n.parent.parent, 0), n.context.$implicit.value));
            l(n, 5, 0, e)
        }))
    }

    function wO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "option", [], null, null, null, null, null)), gi(1, 147456, null, 0, If, [fe, be, [2, Cf]], {
            value: [0, "value"]
        }, null), gi(2, 147456, null, 0, Ef, [fe, be, [8, null]], {
            value: [0, "value"]
        }, null), (l()(), _u(3, null, ["", ""]))], (function (l, n) {
            l(n, 1, 0, n.parent.context.$implicit.id), l(n, 2, 0, n.parent.context.$implicit.id)
        }), (function (l, n) {
            l(n, 3, 0, n.parent.context.$implicit.name)
        }))
    }

    function xO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, wO)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, n.context.$implicit.id > 1)
        }), null)
    }

    function kO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (l()(), _u(1, null, ["", ""]))], null, (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.dataService.player(e.aiid).powers[n.parent.context.$implicit.key] || 0)
        }))
    }

    function SO(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 11, "tr", [["placement", "right"], ["triggers", "manual"]], null, [[null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== i.mouseenter(ei(l, 1), l.context.$implicit.value) && t), "mouseleave" === n && (t = !1 !== i.mouseleave(ei(l, 1)) && t), t
        }), null, null)), gi(1, 737280, [["p1", 4]], 0, Zy, [fe, be, Ln, ce, Fe, Gy, ys, Ua, Rn, zs], {
            ngbPopover: [0, "ngbPopover"],
            popoverTitle: [1, "popoverTitle"],
            placement: [2, "placement"],
            triggers: [3, "triggers"]
        }, null), (l()(), su(2, 0, null, null, 1, "td", [], null, null, null, null, null)), (l()(), _u(3, null, ["", ""])), (l()(), su(4, 0, null, null, 1, "td", [["class", "font-weight-bold"]], null, null, null, null, null)), (l()(), _u(5, null, ["", ""])), (l()(), su(6, 0, null, null, 2, "td", [], null, null, null, null, null)), (l()(), su(7, 0, null, null, 1, "button", [["class", "btn btn-primary btn-sm line-height-1 font-weight-bold"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.addPower(l.context.$implicit.value) && t), t
        }), null, null)), (l()(), _u(-1, null, ["+"])), (l()(), su(9, 0, null, null, 2, "td", [["class", "text-center"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, kO)), gi(11, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, ei(n.parent.parent, 14), ei(n.parent.parent, 13), "right", "manual"), l(n, 11, 0, e.aiid)
        }), (function (l, n) {
            var e = n.component;
            l(n, 3, 0, n.context.$implicit.value.name), l(n, 5, 0, e.dataService.player().powers[n.context.$implicit.key] || 0), l(n, 7, 0, !e.available(n.context.$implicit.key))
        }))
    }

    function CO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "h3", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Powers"])), (l()(), iu(16777216, null, null, 2, null, _O)), gi(3, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne]), (l()(), su(5, 0, null, null, 17, "table", [["class", "table table-borderless w-auto table-sm"]], null, null, null, null, null)), (l()(), su(6, 0, null, null, 16, "tbody", [], null, null, null, null, null)), (l()(), su(7, 0, null, null, 12, "tr", [], null, null, null, null, null)), (l()(), su(8, 0, null, null, 0, "td", [], null, null, null, null, null)), (l()(), su(9, 0, null, null, 1, "td", [["class", "font-weight-bold"], ["colspan", "2"]], null, null, null, null, null)), (l()(), _u(10, null, ["", ""])), (l()(), su(11, 0, null, null, 8, "td", [], null, null, null, null, null)), (l()(), su(12, 0, null, null, 7, "select", [], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "change" === n && (t = !1 !== ei(l, 13).onChange(e.target.value) && t), "blur" === n && (t = !1 !== ei(l, 13).onTouched() && t), "ngModelChange" === n && (t = !1 !== (i.aiid = e) && t), t
        }), null, null)), gi(13, 16384, null, 0, Cf, [be, fe], null, null), yi(1024, null, lf, (function (l) {
            return [l]
        }), [Cf]), gi(15, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, lf]], {
            model: [0, "model"]
        }, {
            update: "ngModelChange"
        }), yi(2048, null, af, null, [lg]), gi(17, 16384, null, 0, cf, [[4, af]], null, null), (l()(), iu(16777216, null, null, 1, null, xO)), gi(19, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), (l()(), iu(16777216, null, null, 2, null, SO)), gi(21, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne])], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, et(n, 3, 0, ei(n, 4).transform(e.data.favors[0]))), l(n, 15, 0, e.aiid), l(n, 19, 0, e.data.players), l(n, 21, 0, et(n, 21, 0, ei(n, 22).transform(e.conf.powers)))
        }), (function (l, n) {
            l(n, 10, 0, n.component.dataService.player().name), l(n, 12, 0, ei(n, 17).ngClassUntouched, ei(n, 17).ngClassTouched, ei(n, 17).ngClassPristine, ei(n, 17).ngClassDirty, ei(n, 17).ngClassValid, ei(n, 17).ngClassInvalid, ei(n, 17).ngClassPending)
        }))
    }

    function IO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 14, "div", [["class", "p-2 d-flex align-items-center border m-1"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 10, "div", [["class", "flex-fill"], ["style", "height:auto!important"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(3, null, ["", ""])), (l()(), su(4, 0, null, null, 0, "br", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 0, "span", [], [[8, "innerHTML", 1]], null, null, null, null)), (l()(), su(6, 0, null, null, 0, "br", [], null, null, null, null, null)), (l()(), _u(-1, null, [" Cost: "])), (l()(), su(8, 0, null, null, 3, "span", [["class", "text-prestige"]], null, null, null, null, null)), (l()(), su(9, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(10, null, [" ", ""])), yu(11, 1), (l()(), su(12, 0, null, null, 2, "div", [], null, null, null, null, null)), (l()(), su(13, 0, null, null, 1, "button", [["class", "btn btn-primary"]], [[8, "disabled", 0]], [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.buy(l.parent.context.$implicit.key, l.parent.context.$implicit.value, ei(l.parent.parent.parent.parent, 15)) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Buy"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 3, 0, n.parent.context.$implicit.value.name), l(n, 5, 0, n.parent.context.$implicit.value.desc), l(n, 9, 0, e.icons.prestige);
            var t = et(n, 10, 0, l(n, 11, 0, ei(n.parent.parent.parent.parent, 0), n.parent.context.$implicit.value.cost));
            l(n, 10, 0, t), l(n, 13, 0, !e.isUpgradeAvailable(n.parent.context.$implicit.value))
        }))
    }

    function TO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, IO)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, n.component.isUpgradeVisible(n.context.$implicit.key, n.context.$implicit.value))
        }), null)
    }

    function EO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "p-2 d-flex align-items-center border m-1"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 4, "div", [["class", "flex-fill"], ["style", "height:auto!important"]], null, null, null, null, null)), (l()(), su(2, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(3, null, ["", ""])), (l()(), su(4, 0, null, null, 0, "br", [], null, null, null, null, null)), (l()(), su(5, 0, null, null, 0, "span", [], [[8, "innerHTML", 1]], null, null, null, null))], null, (function (l, n) {
            l(n, 3, 0, n.parent.context.$implicit.value.name), l(n, 5, 0, n.parent.context.$implicit.value.desc)
        }))
    }

    function AO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, null, null, null, null, null, null, null)), (l()(), iu(16777216, null, null, 1, null, EO)), gi(2, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 2, 0, n.component.dataService.hasUpgrade(n.context.$implicit.key))
        }), null)
    }

    function PO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["You have "])), (l()(), su(2, 0, null, null, 3, "span", [["class", "text-prestige"]], null, null, null, null, null)), (l()(), _u(3, null, ["", " "])), yu(4, 1), (l()(), su(5, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(6, 0, null, null, 6, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Current bonus : "])), (l()(), su(8, 0, null, null, 2, "span", [["class", "text-success"]], null, null, null, null, null)), (l()(), _u(9, null, ["+ ", " "])), yu(10, 1), (l()(), su(11, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(12, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(13, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Available Upgrades"])), (l()(), su(15, 0, null, null, 3, "div", [["style", "width:450px"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, TO)), gi(17, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne]), (l()(), su(19, 0, null, null, 1, "h5", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Purchased Upgrades"])), (l()(), su(21, 0, null, null, 3, "div", [["style", "width:450px"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, AO)), gi(23, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne])], (function (l, n) {
            var e = n.component;
            l(n, 17, 0, et(n, 17, 0, ei(n, 18).transform(e.conf.upgrades))), l(n, 23, 0, et(n, 23, 0, ei(n, 24).transform(e.conf.upgrades)))
        }), (function (l, n) {
            var e = n.component,
                t = et(n, 3, 0, l(n, 4, 0, ei(n.parent.parent, 0), e.data.prestige));
            l(n, 3, 0, t), l(n, 5, 0, e.icons.prestige);
            var i = et(n, 9, 0, l(n, 10, 0, ei(n.parent.parent, 1), e.dataService.prestigeBonus(0)));
            l(n, 9, 0, i), l(n, 11, 0, e.icons.food + " text-food"), l(n, 12, 0, e.icons.prod + " text-prod")
        }))
    }

    function DO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "ngb-tab", [["id", "tab_prestige"], ["title", "Upgrades"]], null, null, null, null, null)), gi(1, 2113536, [[1, 4]], 2, ev, [], {
            id: [0, "id"],
            title: [1, "title"]
        }, null), cu(603979776, 4, {
            titleTpls: 1
        }), cu(603979776, 5, {
            contentTpls: 1
        }), (l()(), iu(0, null, null, 1, null, PO)), gi(5, 16384, [[5, 4]], 0, nv, [$e], null, null)], (function (l, n) {
            l(n, 1, 0, "tab_prestige", "Upgrades")
        }), null)
    }

    function MO(l) {
        return ku(0, [(l()(), _u(0, null, ["", ""]))], null, (function (l, n) {
            l(n, 0, 0, n.context.title)
        }))
    }

    function OO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "span", [["class", "mr-2"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 3, "i", [], [[8, "className", 0]], null, null, null, null)), yi(512, null, Oa, Na, [fe, Ne, be]), gi(3, 278528, null, 0, Ba, [Oa], {
            ngStyle: [0, "ngStyle"]
        }, null), vu(4, {
            color: 0
        }), (l()(), _u(5, null, [" ", " "]))], (function (l, n) {
            var e = l(n, 4, 0, n.context.$implicit.key ? n.component.conf.deities[n.context.$implicit.key].color : "#000");
            l(n, 3, 0, e)
        }), (function (l, n) {
            var e = n.component;
            l(n, 1, 0, e.icons.favor), l(n, 5, 0, e.dataService.powerCost(0, n.parent.context.power.id) * n.context.$implicit.value)
        }))
    }

    function NO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 0, "div", [], [[8, "innerHTML", 1]], null, null, null, null)), (l()(), su(1, 0, null, null, 3, "div", [["class", "border-top"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, OO)), gi(3, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne])], (function (l, n) {
            l(n, 3, 0, et(n, 3, 0, ei(n, 4).transform(n.context.power.cost)))
        }), (function (l, n) {
            var e = n.component,
                t = n.context.power.description(e.data, e.dataService);
            l(n, 0, 0, t)
        }))
    }

    function RO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 5, "div", [["class", "modal-header"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "h4", [["class", "modal-title"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Upgrade"])), (l()(), su(3, 0, null, null, 2, "button", [["class", "close"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.context.$implicit.dismiss() && t), t
        }), null, null)), (l()(), su(4, 0, null, null, 1, "span", [["aria-hidden", "true"]], null, null, null, null, null)), (l()(), _u(-1, null, ["\xd7"])), (l()(), su(6, 0, null, null, 14, "div", [["class", "modal-body"]], null, null, null, null, null)), (l()(), su(7, 0, null, null, 1, "b", [], null, null, null, null, null)), (l()(), _u(8, null, ["Are you sure you want to buy ", " ?"])), (l()(), su(9, 0, null, null, 0, "br", [], null, null, null, null, null)), (l()(), su(10, 0, null, null, 6, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, ["This upgrade costs "])), (l()(), su(12, 0, null, null, 3, "span", [["class", "text-prestige"]], null, null, null, null, null)), (l()(), su(13, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(14, null, [" ", ""])), yu(15, 1), (l()(), _u(-1, null, [" which is more than 10% of your total."])), (l()(), su(17, 0, null, null, 3, "div", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Are you sure this upgrade is worth the loss of so much "])), (l()(), su(19, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" ? "])), (l()(), su(21, 0, null, null, 6, "div", [["class", "modal-footer"]], null, null, null, null, null)), (l()(), su(22, 0, null, null, 1, "button", [["class", "btn btn-outline-dark"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.context.$implicit.close() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Cancel"])), (l()(), su(24, 0, null, null, 3, "button", [["class", "btn btn-warning"], ["type", "button"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "click" === n && (l.context.$implicit.close(), t = !1 !== i.buy(i.key, i.up, ei(l.parent, 15), !0) && t), t
        }), null, null)), (l()(), _u(-1, null, ["Shut up and take my "])), (l()(), su(26, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), _u(-1, null, [" !"]))], null, (function (l, n) {
            var e = n.component;
            l(n, 8, 0, e.up.name), l(n, 13, 0, e.icons.prestige);
            var t = et(n, 14, 0, l(n, 15, 0, ei(n.parent, 0), e.up.cost));
            l(n, 14, 0, t), l(n, 19, 0, e.icons.prestige + " text-prestige"), l(n, 26, 0, e.icons.prestige)
        }))
    }

    function BO(l) {
        return ku(0, [mi(0, zv, []), mi(0, $v, []), (l()(), su(2, 0, null, null, 10, "ngb-tabset", [], null, null, null, K_, U_)), gi(3, 2146304, null, 1, tv, [Jy], {
            activeId: [0, "activeId"]
        }, null), cu(603979776, 1, {
            tabs: 1
        }), (l()(), su(5, 0, null, null, 5, "ngb-tab", [["title", "Powers"]], null, null, null, null, null)), gi(6, 2113536, [[1, 4]], 2, ev, [], {
            title: [0, "title"]
        }, null), cu(603979776, 2, {
            titleTpls: 1
        }), cu(603979776, 3, {
            contentTpls: 1
        }), (l()(), iu(0, null, null, 1, null, CO)), gi(10, 16384, [[3, 4]], 0, nv, [$e], null, null), (l()(), iu(16777216, null, null, 1, null, DO)), gi(12, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(0, [["popTitle", 2]], null, 0, null, MO)), (l()(), iu(0, [["popContent", 2]], null, 0, null, NO)), (l()(), iu(0, [["confirmation", 2]], null, 0, null, RO))], (function (l, n) {
            var e = n.component;
            l(n, 3, 0, e.activetabeid), l(n, 6, 0, "Powers"), l(n, 12, 0, e.data.prestige)
        }), null)
    }

    function zO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-powers", [], null, null, null, BO, bO)), gi(1, 114688, null, 0, vO, [Fy, Tg, Pg, zg, oh], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var $O = jt("app-powers", vO, zO, {}, {}, []);
    let LO = (() => {
        class l {
            constructor(l, n) {
                this.dataService = l, this.data = n, this.replay = !1, this.icons = ug
            }
            reset() {
                this.dataService.isDailyAllowed() && (this.cards.toArray().forEach(l => {
                    let n = l.nativeElement;
                    n.innerHTML = '<i class="fas fa-question"></i>', n.parentElement.classList.remove("bg-primary"), n.parentElement.classList.remove("text-light"), n.parentElement.classList.remove("bg-warning"), n.parentElement.classList.remove("bg-success")
                }), this.replay = !1, this.selectable = !0)
            }
            select(n) {
                if (this.selectable) {
                    this.selectable = !1;
                    let e = this.dataService.isDailyAllowed();
                    if (1 == e) this.data.saveddaily--;
                    else {
                        if (2 != e) return;
                        this.data.lastdaily = Date.now()
                    }
                    let t = this.cards.toArray()[n].nativeElement,
                        i = ["gold", "science", "food", "prod"];
                    this.dataService.hasScience("art") && i.push("culture"), this.dataService.isUnlocked("troops") && i.push("troops");
                    let s = yg.fromArray(i),
                        u = yg.fromArray(l.LEVELS),
                        r = this.quantity(s, u);
                    this.data.dailys.push({
                        bonus: s,
                        quantity: r
                    }), t.innerHTML = '<i class="' + ug[s] + '"></i> x ' + mg.format(r), 2 == u ? (t.parentElement.classList.remove("bg-primary"), t.parentElement.classList.add("bg-warning")) : 3 == u && (t.parentElement.classList.remove("bg-primary"), t.parentElement.classList.add("bg-success")), this.dataService.isDailyAllowed() && (this.replay = !0)
                }
            }
            quantity(l, n) {
                return "gold" == l ? Math.floor(20 * Math.pow(5, n) * Math.pow(1.5, this.dataService.currentScienceRank())) : "science" == l ? Math.floor(20 * Math.pow(5, n) * Math.pow(1.5, this.dataService.currentScienceRank())) : "culture" == l ? Math.floor(20 * Math.pow(5, n) * Math.pow(1.5, this.dataService.currentScienceRank())) : "prod" == l ? Math.floor(20 * Math.pow(5, n) * Math.pow(1.5, this.dataService.currentScienceRank())) : "food" == l ? Math.floor(20 * Math.pow(5, n) * Math.pow(1.5, this.dataService.currentScienceRank())) : "troops" == l ? Math.floor(1 * Math.pow(3, n) * Math.pow(1.2, this.dataService.currentScienceRank())) : 0
            }
            ngOnInit() {
                this.selectable = this.dataService.isDailyAllowed() > 0
            }
        }
        return l.LEVELS = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3], l
    })();
    var FO = st({
        encapsulation: 0,
        styles: [[""]],
        data: {}
    });

    function qO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "div", [["class", "card cursor-pointer border-primary m-3 rounded-lg text-primary"], ["style", "height:200px;"]], null, [[null, "click"], [null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0,
                i = l.component;
            return "mouseenter" === n && (t = !1 !== ei(l, 1).onMouseEnter() && t), "mouseleave" === n && (t = !1 !== ei(l, 1).onMouseLeave() && t), "click" === n && (t = !1 !== i.select(l.context.$implicit) && t), t
        }), null, null)), gi(1, 16384, null, 0, sg, [fe], {
            hoverClass: [0, "hoverClass"]
        }, null), (l()(), su(2, 0, [[1, 0], ["card", 1]], null, 1, "div", [["class", "card-body d-flex justify-content-center align-items-center h-100 text-300"]], null, null, null, null, null)), (l()(), su(3, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null))], (function (l, n) {
            l(n, 1, 0, n.component.selectable ? "bg-primary text-light" : "")
        }), (function (l, n) {
            l(n, 3, 0, n.component.icons.question)
        }))
    }

    function UO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "button", [["class", "btn btn-primary"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.reset() && t), t
        }), null, null)), (l()(), _u(-1, null, ["Replay !"]))], null, null)
    }

    function HO(l) {
        return ku(0, [cu(671088640, 1, {
            cards: 1
        }), (l()(), su(1, 0, null, null, 1, "h2", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Daily Bonus !"])), (l()(), su(3, 0, null, null, 3, "div", [["class", "card-deck"]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, qO)), gi(5, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), bu(32, 6, new Array(3)), (l()(), iu(16777216, null, null, 1, null, UO)), gi(8, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component,
                t = l(n, 6, 0, 0, 1, 2);
            l(n, 5, 0, t), l(n, 8, 0, e.replay)
        }), null)
    }

    function VO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-daily", [], null, null, null, HO, FO)), gi(1, 114688, null, 0, LO, [zg, Pg], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var jO = jt("app-daily", LO, VO, {}, {}, []); class GO {
        constructor(l, n, e) {
            this.conf = l, this.data = n, this.dataService = e
        }
        ngOnInit() {
            this.selectable = this.dataService.isDeitySelectionAllowed()
        }
        select(l) {
            this.selectable && (this.dataService.player().deity = l, this.data.deities[0] = l, this.selectable = !1, this.dataService.checkLocks())
        }
    }
    var WO = st({
        encapsulation: 0,
        styles: [[".card-body[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:auto!important}"]],
        data: {}
    });

    function KO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 15, "div", [], null, [[null, "mouseenter"], [null, "mouseleave"]], (function (l, n, e) {
            var t = !0;
            return "mouseenter" === n && (t = !1 !== ei(l, 4).onMouseEnter() && t), "mouseleave" === n && (t = !1 !== ei(l, 4).onMouseLeave() && t), t
        }), null, null)), yi(512, null, ka, Sa, [Oe, Ne, fe, be]), gi(2, 278528, null, 0, Ia, [ka], {
            ngClass: [0, "ngClass"]
        }, null), vu(3, {
            "card cursor-pointer border-0 my-1": 0,
            "bg-dark text-light dark-bg-light dark-text-dark": 1
        }), gi(4, 16384, null, 0, sg, [fe], {
            hoverClass: [0, "hoverClass"]
        }, null), (l()(), su(5, 0, null, null, 10, "div", [["class", "d-flex align-items-stretch"]], null, null, null, null, null)), (l()(), su(6, 0, null, null, 4, "div", [["class", "text-300 d-flex align-items-center px-3"]], null, null, null, null, null)), yi(512, null, Oa, Na, [fe, Ne, be]), gi(8, 278528, null, 0, Ba, [Oa], {
            ngStyle: [0, "ngStyle"]
        }, null), vu(9, {
            color: 0
        }), (l()(), su(10, 0, null, null, 0, "i", [], [[8, "className", 0]], null, null, null, null)), (l()(), su(11, 0, null, null, 4, "div", [["class", "card-body d-flex flex-fill align-items-center p-2"]], null, null, null, null, null)), (l()(), su(12, 0, null, null, 3, "div", [["class", "flex-fill"]], null, [[null, "click"]], (function (l, n, e) {
            var t = !0;
            return "click" === n && (t = !1 !== l.component.select(l.context.$implicit.key) && t), t
        }), null, null)), (l()(), su(13, 0, null, null, 1, "h5", [["class", "card-title"]], null, null, null, null, null)), (l()(), _u(14, null, ["", ""])), (l()(), su(15, 0, null, null, 0, "span", [["class", "card-text"]], [[8, "innerHTML", 1]], null, null, null, null))], (function (l, n) {
            var e = n.component,
                t = l(n, 3, 0, !0, e.dataService.player().deity == n.context.$implicit.key);
            l(n, 2, 0, t), l(n, 4, 0, e.selectable ? "bg-dark text-light dark-bg-light dark-text-dark" : "");
            var i = l(n, 9, 0, n.context.$implicit.value.color);
            l(n, 8, 0, i)
        }), (function (l, n) {
            l(n, 10, 0, n.context.$implicit.value.icon), l(n, 14, 0, n.context.$implicit.value.name), l(n, 15, 0, n.context.$implicit.value.description)
        }))
    }

    function ZO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 6, "div", [["class", "h-100 overflow-auto"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 1, "h2", [], null, null, null, null, null)), (l()(), _u(-1, null, ["Deity Selection"])), (l()(), su(3, 0, null, null, 3, "div", [["class", ""]], null, null, null, null, null)), (l()(), iu(16777216, null, null, 2, null, KO)), gi(5, 278528, null, 0, Ea, [Fe, $e, Oe], {
            ngForOf: [0, "ngForOf"]
        }, null), mi(0, ig, [Ne])], (function (l, n) {
            var e = n.component;
            l(n, 5, 0, et(n, 5, 0, ei(n, 6).transform(e.conf.deities)))
        }), null)
    }

    function QO(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-deity", [], null, null, null, ZO, WO)), gi(1, 114688, null, 0, GO, [Tg, Pg, zg], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var YO = jt("app-deity", GO, QO, {}, {}, []), XO = st({
        encapsulation: 0,
        styles: [[""]],
        data: {}
    });

    function JO(l) {
        return ku(0, [(l()(), su(0, 16777216, null, null, 1, "router-outlet", [], null, null, null, null, null)), gi(1, 212992, null, 0, Tp, [Ip, Fe, ce, [8, null], Rn], null, null), (l()(), iu(0, null, null, 0))], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }

    function lN(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 2, "div", [["class", "bg-dark p-3 text-light"]], null, null, null, null, null)), (l()(), su(1, 0, null, null, 0, "i", [["class", "fas fa-times"]], null, null, null, null, null)), (l()(), _u(2, null, [" ", ""]))], null, (function (l, n) {
            l(n, 2, 0, n.component.error)
        }))
    }

    function nN(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 3, "div", [["class", "text-dark text-150"]], null, null, null, null, null)), (l()(), _u(-1, null, ["This game is available for free on "])), (l()(), su(2, 0, null, null, 1, "a", [["class", "text-danger"], ["href", "https://www.kongregate.com/games/to_change_later/cividlization-2"]], null, null, null, null, null)), (l()(), _u(-1, null, ["Kongregate.com"]))], null, null)
    }

    function eN(l) {
        return ku(0, [(l()(), iu(16777216, null, null, 1, null, JO)), gi(1, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, lN)), gi(3, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null), (l()(), iu(16777216, null, null, 1, null, nN)), gi(5, 16384, null, 0, Pa, [Fe, $e], {
            ngIf: [0, "ngIf"]
        }, null)], (function (l, n) {
            var e = n.component;
            l(n, 1, 0, !e.error && !e.baddomain), l(n, 3, 0, e.error && !e.baddomain), l(n, 5, 0, e.baddomain)
        }), null)
    }

    function tN(l) {
        return ku(0, [(l()(), su(0, 0, null, null, 1, "app-root", [], null, null, null, eN, XO)), gi(1, 114688, null, 0, Mr, [Bg], null, null)], (function (l, n) {
            l(n, 1, 0)
        }), null)
    }
    var iN = jt("app-root", Mr, tN, {}, {}, []); class sN {}
    class uN {}
    const rN = "*";

    function aN(l, n = null) {
        return {
            type: 2,
            steps: l,
            options: n
        }
    }

    function oN(l) {
        return {
            type: 6,
            styles: l,
            offset: null
        }
    }

    function cN(l) {
        Promise.resolve(null).then(l)
    }
    class dN {
        constructor(l = 0, n = 0) {
            this._onDoneFns = [], this._onStartFns = [], this._onDestroyFns = [], this._started = !1, this._destroyed = !1, this._finished = !1, this.parentPlayer = null, this.totalTime = l + n
        }
        _onFinish() {
            this._finished || (this._finished = !0, this._onDoneFns.forEach(l => l()), this._onDoneFns = [])
        }
        onStart(l) {
            this._onStartFns.push(l)
        }
        onDone(l) {
            this._onDoneFns.push(l)
        }
        onDestroy(l) {
            this._onDestroyFns.push(l)
        }
        hasStarted() {
            return this._started
        }
        init() {}
        play() {
            this.hasStarted() || (this._onStart(), this.triggerMicrotask()), this._started = !0
        }
        triggerMicrotask() {
            cN(() => this._onFinish())
        }
        _onStart() {
            this._onStartFns.forEach(l => l()), this._onStartFns = []
        }
        pause() {}
        restart() {}
        finish() {
            this._onFinish()
        }
        destroy() {
            this._destroyed || (this._destroyed = !0, this.hasStarted() || this._onStart(), this.finish(), this._onDestroyFns.forEach(l => l()), this._onDestroyFns = [])
        }
        reset() {}
        setPosition(l) {}
        getPosition() {
            return 0
        }
        triggerCallback(l) {
            const n = "start" == l ? this._onStartFns : this._onDoneFns;
            n.forEach(l => l()), n.length = 0
        }
    }
    class hN {
        constructor(l) {
            this._onDoneFns = [], this._onStartFns = [], this._finished = !1, this._started = !1, this._destroyed = !1, this._onDestroyFns = [], this.parentPlayer = null, this.totalTime = 0, this.players = l;
            let n = 0,
                e = 0,
                t = 0;
            const i = this.players.length;
            0 == i ? cN(() => this._onFinish()) : this.players.forEach(l => {
                l.onDone(() => {
                    ++n == i && this._onFinish()
                }), l.onDestroy(() => {
                    ++e == i && this._onDestroy()
                }), l.onStart(() => {
                    ++t == i && this._onStart()
                })
            }), this.totalTime = this.players.reduce((l, n) => Math.max(l, n.totalTime), 0)
        }
        _onFinish() {
            this._finished || (this._finished = !0, this._onDoneFns.forEach(l => l()), this._onDoneFns = [])
        }
        init() {
            this.players.forEach(l => l.init())
        }
        onStart(l) {
            this._onStartFns.push(l)
        }
        _onStart() {
            this.hasStarted() || (this._started = !0, this._onStartFns.forEach(l => l()), this._onStartFns = [])
        }
        onDone(l) {
            this._onDoneFns.push(l)
        }
        onDestroy(l) {
            this._onDestroyFns.push(l)
        }
        hasStarted() {
            return this._started
        }
        play() {
            this.parentPlayer || this.init(), this._onStart(), this.players.forEach(l => l.play())
        }
        pause() {
            this.players.forEach(l => l.pause())
        }
        restart() {
            this.players.forEach(l => l.restart())
        }
        finish() {
            this._onFinish(), this.players.forEach(l => l.finish())
        }
        destroy() {
            this._onDestroy()
        }
        _onDestroy() {
            this._destroyed || (this._destroyed = !0, this._onFinish(), this.players.forEach(l => l.destroy()), this._onDestroyFns.forEach(l => l()), this._onDestroyFns = [])
        }
        reset() {
            this.players.forEach(l => l.reset()), this._destroyed = !1, this._finished = !1, this._started = !1
        }
        setPosition(l) {
            const n = l * this.totalTime;
            this.players.forEach(l => {
                const e = l.totalTime ? Math.min(1, n / l.totalTime) : 1;
                l.setPosition(e)
            })
        }
        getPosition() {
            let l = 0;
            return this.players.forEach(n => {
                const e = n.getPosition();
                l = Math.min(e, l)
            }), l
        }
        beforeDestroy() {
            this.players.forEach(l => {
                l.beforeDestroy && l.beforeDestroy()
            })
        }
        triggerCallback(l) {
            const n = "start" == l ? this._onStartFns : this._onDoneFns;
            n.forEach(l => l()), n.length = 0
        }
    }
    const pN = "!";

    function fN() {
        return "undefined" != typeof process
    }

    function gN(l) {
        switch (l.length) {
            case 0:
                return new dN;
            case 1:
                return l[0];
            default:
                return new hN(l)
        }
    }

    function mN(l, n, e, t, i = {}, s = {}) {
        const u = [],
            r = [];
        let a = -1,
            o = null;
        if (t.forEach(l => {
                const e = l.offset,
                    t = e == a,
                    c = t && o || {};
                Object.keys(l).forEach(e => {
                    let t = e,
                        r = l[e];
                    if ("offset" !== e) switch (t = n.normalizePropertyName(t, u), r) {
                        case pN:
                            r = i[e];
                            break;
                        case rN:
                            r = s[e];
                            break;
                        default:
                            r = n.normalizeStyleValue(e, t, r, u)
                    }
                    c[t] = r
                }), t || r.push(c), o = c, a = e
            }), u.length) {
            const l = "\n - ";
            throw new Error(`Unable to animate due to the following errors:${l}${u.join(l)}`)
        }
        return r
    }

    function yN(l, n, e, t) {
        switch (n) {
            case "start":
                l.onStart(() => t(e && vN(e, "start", l)));
                break;
            case "done":
                l.onDone(() => t(e && vN(e, "done", l)));
                break;
            case "destroy":
                l.onDestroy(() => t(e && vN(e, "destroy", l)))
        }
    }

    function vN(l, n, e) {
        const t = e.totalTime,
            i = bN(l.element, l.triggerName, l.fromState, l.toState, n || l.phaseName, null == t ? l.totalTime : t, !!e.disabled),
            s = l._data;
        return null != s && (i._data = s), i
    }

    function bN(l, n, e, t, i = "", s = 0, u) {
        return {
            element: l,
            triggerName: n,
            fromState: e,
            toState: t,
            phaseName: i,
            totalTime: s,
            disabled: !!u
        }
    }

    function _N(l, n, e) {
        let t;
        return l instanceof Map ? (t = l.get(n)) || l.set(n, t = e) : (t = l[n]) || (t = l[n] = e), t
    }

    function wN(l) {
        const n = l.indexOf(":");
        return [l.substring(1, n), l.substr(n + 1)]
    }
    let xN = (l, n) => !1, kN = (l, n) => !1, SN = (l, n, e) => [];
    const CN = fN();
    (CN || "undefined" != typeof Element) && (xN = (l, n) => l.contains(n), kN = (() => {
        if (CN || Element.prototype.matches) return (l, n) => l.matches(n); {
            const l = Element.prototype,
                n = l.matchesSelector || l.mozMatchesSelector || l.msMatchesSelector || l.oMatchesSelector || l.webkitMatchesSelector;
            return n ? (l, e) => n.apply(l, [e]) : kN
        }
    })(), SN = (l, n, e) => {
        let t = [];
        if (e) t.push(...l.querySelectorAll(n));
        else {
            const e = l.querySelector(n);
            e && t.push(e)
        }
        return t
    });
    let IN = null, TN = !1;

    function EN(l) {
        IN || (IN = ("undefined" != typeof document ? document.body : null) || {}, TN = !!IN.style && "WebkitAppearance" in IN.style);
        let n = !0;
        return IN.style && ! function (l) {
            return "ebkit" == l.substring(1, 6)
        }(l) && !(n = l in IN.style) && TN && (n = "Webkit" + l.charAt(0).toUpperCase() + l.substr(1) in IN.style), n
    }
    const AN = kN, PN = xN, DN = SN;

    function MN(l) {
        const n = {};
        return Object.keys(l).forEach(e => {
            const t = e.replace(/([a-z])([A-Z])/g, "$1-$2");
            n[t] = l[e]
        }), n
    }
    class ON {
        validateStyleProperty(l) {
            return EN(l)
        }
        matchesElement(l, n) {
            return AN(l, n)
        }
        containsElement(l, n) {
            return PN(l, n)
        }
        query(l, n, e) {
            return DN(l, n, e)
        }
        computeStyle(l, n, e) {
            return e || ""
        }
        animate(l, n, e, t, i, s = [], u) {
            return new dN(e, t)
        }
    }
    let NN = (() => {
        class l {}
        return l.NOOP = new ON, l
    })();
    const RN = 1e3, BN = "{{", zN = "ng-enter", $N = "ng-leave", LN = "ng-trigger", FN = ".ng-trigger", qN = "ng-animating", UN = ".ng-animating";

    function HN(l) {
        if ("number" == typeof l) return l;
        const n = l.match(/^(-?[\.\d]+)(m?s)/);
        return !n || n.length < 2 ? 0 : VN(parseFloat(n[1]), n[2])
    }

    function VN(l, n) {
        switch (n) {
            case "s":
                return l * RN;
            default:
                return l
        }
    }

    function jN(l, n, e) {
        return l.hasOwnProperty("duration") ? l : function (l, n, e) {
            let t, i = 0,
                s = "";
            if ("string" == typeof l) {
                const e = l.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);
                if (null === e) return n.push(`The provided timing value "${l}" is invalid.`), {
                    duration: 0,
                    delay: 0,
                    easing: ""
                };
                t = VN(parseFloat(e[1]), e[2]);
                const u = e[3];
                null != u && (i = VN(parseFloat(u), e[4]));
                const r = e[5];
                r && (s = r)
            } else t = l;
            if (!e) {
                let e = !1,
                    s = n.length;
                t < 0 && (n.push("Duration values below 0 are not allowed for this animation step."), e = !0), i < 0 && (n.push("Delay values below 0 are not allowed for this animation step."), e = !0), e && n.splice(s, 0, `The provided timing value "${l}" is invalid.`)
            }
            return {
                duration: t,
                delay: i,
                easing: s
            }
        }(l, n, e)
    }

    function GN(l, n = {}) {
        return Object.keys(l).forEach(e => {
            n[e] = l[e]
        }), n
    }

    function WN(l, n, e = {}) {
        if (n)
            for (let t in l) e[t] = l[t];
        else GN(l, e);
        return e
    }

    function KN(l, n, e) {
        return e ? n + ":" + e + ";" : ""
    }

    function ZN(l) {
        let n = "";
        for (let e = 0; e < l.style.length; e++) {
            const t = l.style.item(e);
            n += KN(0, t, l.style.getPropertyValue(t))
        }
        for (const e in l.style) l.style.hasOwnProperty(e) && !e.startsWith("_") && (n += KN(0, e.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase(), l.style[e]));
        l.setAttribute("style", n)
    }

    function QN(l, n, e) {
        l.style && (Object.keys(n).forEach(t => {
            const i = iR(t);
            e && !e.hasOwnProperty(t) && (e[t] = l.style[i]), l.style[i] = n[t]
        }), fN() && ZN(l))
    }

    function YN(l, n) {
        l.style && (Object.keys(n).forEach(n => {
            const e = iR(n);
            l.style[e] = ""
        }), fN() && ZN(l))
    }

    function XN(l) {
        return Array.isArray(l) ? 1 == l.length ? l[0] : aN(l) : l
    }
    const JN = new RegExp(`${BN}\\s*(.+?)\\s*}}`, "g");

    function lR(l) {
        let n = [];
        if ("string" == typeof l) {
            const e = l.toString();
            let t;
            for (; t = JN.exec(e);) n.push(t[1]);
            JN.lastIndex = 0
        }
        return n
    }

    function nR(l, n, e) {
        const t = l.toString(),
            i = t.replace(JN, (l, t) => {
                let i = n[t];
                return n.hasOwnProperty(t) || (e.push(`Please provide a value for the animation param ${t}`), i = ""), i.toString()
            });
        return i == t ? l : i
    }

    function eR(l) {
        const n = [];
        let e = l.next();
        for (; !e.done;) n.push(e.value), e = l.next();
        return n
    }
    const tR = /-+([a-z0-9])/g;

    function iR(l) {
        return l.replace(tR, (...l) => l[1].toUpperCase())
    }

    function sR(l, n) {
        return 0 === l || 0 === n
    }

    function uR(l, n, e) {
        const t = Object.keys(e);
        if (t.length && n.length) {
            let s = n[0],
                u = [];
            if (t.forEach(l => {
                    s.hasOwnProperty(l) || u.push(l), s[l] = e[l]
                }), u.length)
                for (var i = 1; i < n.length; i++) {
                    let e = n[i];
                    u.forEach((function (n) {
                        e[n] = aR(l, n)
                    }))
                }
        }
        return n
    }

    function rR(l, n, e) {
        switch (n.type) {
            case 7:
                return l.visitTrigger(n, e);
            case 0:
                return l.visitState(n, e);
            case 1:
                return l.visitTransition(n, e);
            case 2:
                return l.visitSequence(n, e);
            case 3:
                return l.visitGroup(n, e);
            case 4:
                return l.visitAnimate(n, e);
            case 5:
                return l.visitKeyframes(n, e);
            case 6:
                return l.visitStyle(n, e);
            case 8:
                return l.visitReference(n, e);
            case 9:
                return l.visitAnimateChild(n, e);
            case 10:
                return l.visitAnimateRef(n, e);
            case 11:
                return l.visitQuery(n, e);
            case 12:
                return l.visitStagger(n, e);
            default:
                throw new Error(`Unable to resolve animation metadata node #${n.type}`)
        }
    }

    function aR(l, n) {
        return window.getComputedStyle(l)[n]
    }
    const oR = "*";

    function cR(l, n) {
        const e = [];
        return "string" == typeof l ? l.split(/\s*,\s*/).forEach(l => (function (l, n, e) {
            if (":" == l[0]) {
                const t = function (l, n) {
                    switch (l) {
                        case ":enter":
                            return "void => *";
                        case ":leave":
                            return "* => void";
                        case ":increment":
                            return (l, n) => parseFloat(n) > parseFloat(l);
                        case ":decrement":
                            return (l, n) => parseFloat(n) < parseFloat(l);
                        default:
                            return n.push(`The transition alias value "${l}" is not supported`), "* => *"
                    }
                }(l, e);
                if ("function" == typeof t) return void n.push(t);
                l = t
            }
            const t = l.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);
            if (null == t || t.length < 4) return e.push(`The provided transition expression "${l}" is not supported`), n;
            const i = t[1],
                s = t[2],
                u = t[3];
            n.push(pR(i, u)), "<" != s[0] || i == oR && u == oR || n.push(pR(u, i))
        })(l, e, n)) : e.push(l), e
    }
    const dR = new Set(["true", "1"]), hR = new Set(["false", "0"]);

    function pR(l, n) {
        const e = dR.has(l) || hR.has(l),
            t = dR.has(n) || hR.has(n);
        return (i, s) => {
            let u = l == oR || l == i,
                r = n == oR || n == s;
            return !u && e && "boolean" == typeof i && (u = i ? dR.has(l) : hR.has(l)), !r && t && "boolean" == typeof s && (r = s ? dR.has(n) : hR.has(n)), u && r
        }
    }
    const fR = ":self", gR = new RegExp(`s*${fR}s*,?`, "g");

    function mR(l, n, e) {
        return new vR(l).build(n, e)
    }
    const yR = ""; class vR {
        constructor(l) {
            this._driver = l
        }
        build(l, n) {
            const e = new bR(n);
            return this._resetContextStyleTimingState(e), rR(this, XN(l), e)
        }
        _resetContextStyleTimingState(l) {
            l.currentQuerySelector = yR, l.collectedStyles = {}, l.collectedStyles[yR] = {}, l.currentTime = 0
        }
        visitTrigger(l, n) {
            let e = n.queryCount = 0,
                t = n.depCount = 0;
            const i = [],
                s = [];
            return "@" == l.name.charAt(0) && n.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"), l.definitions.forEach(l => {
                if (this._resetContextStyleTimingState(n), 0 == l.type) {
                    const e = l,
                        t = e.name;
                    t.toString().split(/\s*,\s*/).forEach(l => {
                        e.name = l, i.push(this.visitState(e, n))
                    }), e.name = t
                } else if (1 == l.type) {
                    const i = this.visitTransition(l, n);
                    e += i.queryCount, t += i.depCount, s.push(i)
                } else n.errors.push("only state() and transition() definitions can sit inside of a trigger()")
            }), {
                type: 7,
                name: l.name,
                states: i,
                transitions: s,
                queryCount: e,
                depCount: t,
                options: null
            }
        }
        visitState(l, n) {
            const e = this.visitStyle(l.styles, n),
                t = l.options && l.options.params || null;
            if (e.containsDynamicStyles) {
                const i = new Set,
                    s = t || {};
                if (e.styles.forEach(l => {
                        if (_R(l)) {
                            const n = l;
                            Object.keys(n).forEach(l => {
                                lR(n[l]).forEach(l => {
                                    s.hasOwnProperty(l) || i.add(l)
                                })
                            })
                        }
                    }), i.size) {
                    const e = eR(i.values());
                    n.errors.push(`state("${l.name}", ...) must define default values for all the following style substitutions: ${e.join(", ")}`)
                }
            }
            return {
                type: 0,
                name: l.name,
                style: e,
                options: t ? {
                    params: t
                } : null
            }
        }
        visitTransition(l, n) {
            n.queryCount = 0, n.depCount = 0;
            const e = rR(this, XN(l.animation), n);
            return {
                type: 1,
                matchers: cR(l.expr, n.errors),
                animation: e,
                queryCount: n.queryCount,
                depCount: n.depCount,
                options: wR(l.options)
            }
        }
        visitSequence(l, n) {
            return {
                type: 2,
                steps: l.steps.map(l => rR(this, l, n)),
                options: wR(l.options)
            }
        }
        visitGroup(l, n) {
            const e = n.currentTime;
            let t = 0;
            const i = l.steps.map(l => {
                n.currentTime = e;
                const i = rR(this, l, n);
                return t = Math.max(t, n.currentTime), i
            });
            return n.currentTime = t, {
                type: 3,
                steps: i,
                options: wR(l.options)
            }
        }
        visitAnimate(l, n) {
            const e = function (l, n) {
                let e = null;
                if (l.hasOwnProperty("duration")) e = l;
                else if ("number" == typeof l) return xR(jN(l, n).duration, 0, "");
                const t = l;
                if (t.split(/\s+/).some(l => "{" == l.charAt(0) && "{" == l.charAt(1))) {
                    const l = xR(0, 0, "");
                    return l.dynamic = !0, l.strValue = t, l
                }
                return xR((e = e || jN(t, n)).duration, e.delay, e.easing)
            }(l.timings, n.errors);
            let t;
            n.currentAnimateTimings = e;
            let i = l.styles ? l.styles : oN({});
            if (5 == i.type) t = this.visitKeyframes(i, n);
            else {
                let i = l.styles,
                    s = !1;
                if (!i) {
                    s = !0;
                    const l = {};
                    e.easing && (l.easing = e.easing), i = oN(l)
                }
                n.currentTime += e.duration + e.delay;
                const u = this.visitStyle(i, n);
                u.isEmptyStep = s, t = u
            }
            return n.currentAnimateTimings = null, {
                type: 4,
                timings: e,
                style: t,
                options: null
            }
        }
        visitStyle(l, n) {
            const e = this._makeStyleAst(l, n);
            return this._validateStyleAst(e, n), e
        }
        _makeStyleAst(l, n) {
            const e = [];
            Array.isArray(l.styles) ? l.styles.forEach(l => {
                "string" == typeof l ? l == rN ? e.push(l) : n.errors.push(`The provided style string value ${l} is not allowed.`) : e.push(l)
            }) : e.push(l.styles);
            let t = !1,
                i = null;
            return e.forEach(l => {
                if (_R(l)) {
                    const n = l,
                        e = n.easing;
                    if (e && (i = e, delete n.easing), !t)
                        for (let l in n)
                            if (n[l].toString().indexOf(BN) >= 0) {
                                t = !0;
                                break
                            }
                }
            }), {
                type: 6,
                styles: e,
                easing: i,
                offset: l.offset,
                containsDynamicStyles: t,
                options: null
            }
        }
        _validateStyleAst(l, n) {
            const e = n.currentAnimateTimings;
            let t = n.currentTime,
                i = n.currentTime;
            e && i > 0 && (i -= e.duration + e.delay), l.styles.forEach(l => {
                "string" != typeof l && Object.keys(l).forEach(e => {
                    if (!this._driver.validateStyleProperty(e)) return void n.errors.push(`The provided animation property "${e}" is not a supported CSS property for animations`);
                    const s = n.collectedStyles[n.currentQuerySelector],
                        u = s[e];
                    let r = !0;
                    u && (i != t && i >= u.startTime && t <= u.endTime && (n.errors.push(`The CSS property "${e}" that exists between the times of "${u.startTime}ms" and "${u.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${t}ms"`), r = !1), i = u.startTime), r && (s[e] = {
                        startTime: i,
                        endTime: t
                    }), n.options && function (l, n, e) {
                        const t = n.params || {},
                            i = lR(l);
                        i.length && i.forEach(l => {
                            t.hasOwnProperty(l) || e.push(`Unable to resolve the local animation param ${l} in the given list of values`)
                        })
                    }(l[e], n.options, n.errors)
                })
            })
        }
        visitKeyframes(l, n) {
            const e = {
                type: 5,
                styles: [],
                options: null
            };
            if (!n.currentAnimateTimings) return n.errors.push("keyframes() must be placed inside of a call to animate()"), e;
            let t = 0;
            const i = [];
            let s = !1,
                u = !1,
                r = 0;
            const a = l.steps.map(l => {
                const e = this._makeStyleAst(l, n);
                let a = null != e.offset ? e.offset : function (l) {
                        if ("string" == typeof l) return null;
                        let n = null;
                        if (Array.isArray(l)) l.forEach(l => {
                            if (_R(l) && l.hasOwnProperty("offset")) {
                                const e = l;
                                n = parseFloat(e.offset), delete e.offset
                            }
                        });
                        else if (_R(l) && l.hasOwnProperty("offset")) {
                            const e = l;
                            n = parseFloat(e.offset), delete e.offset
                        }
                        return n
                    }(e.styles),
                    o = 0;
                return null != a && (t++, o = e.offset = a), u = u || o < 0 || o > 1, s = s || o < r, r = o, i.push(o), e
            });
            u && n.errors.push("Please ensure that all keyframe offsets are between 0 and 1"), s && n.errors.push("Please ensure that all keyframe offsets are in order");
            const o = l.steps.length;
            let c = 0;
            t > 0 && t < o ? n.errors.push("Not all style() steps within the declared keyframes() contain offsets") : 0 == t && (c = 1 / (o - 1));
            const d = o - 1,
                h = n.currentTime,
                p = n.currentAnimateTimings,
                f = p.duration;
            return a.forEach((l, t) => {
                const s = c > 0 ? t == d ? 1 : c * t : i[t],
                    u = s * f;
                n.currentTime = h + p.delay + u, p.duration = u, this._validateStyleAst(l, n), l.offset = s, e.styles.push(l)
            }), e
        }
        visitReference(l, n) {
            return {
                type: 8,
                animation: rR(this, XN(l.animation), n),
                options: wR(l.options)
            }
        }
        visitAnimateChild(l, n) {
            return n.depCount++, {
                type: 9,
                options: wR(l.options)
            }
        }
        visitAnimateRef(l, n) {
            return {
                type: 10,
                animation: this.visitReference(l.animation, n),
                options: wR(l.options)
            }
        }
        visitQuery(l, n) {
            const e = n.currentQuerySelector,
                t = l.options || {};
            n.queryCount++, n.currentQuery = l;
            const [i, s] = function (l) {
                const n = !!l.split(/\s*,\s*/).find(l => l == fR);
                return n && (l = l.replace(gR, "")), [l = l.replace(/@\*/g, FN).replace(/@\w+/g, l => FN + "-" + l.substr(1)).replace(/:animating/g, UN), n]
            }(l.selector);
            n.currentQuerySelector = e.length ? e + " " + i : i, _N(n.collectedStyles, n.currentQuerySelector, {});
            const u = rR(this, XN(l.animation), n);
            return n.currentQuery = null, n.currentQuerySelector = e, {
                type: 11,
                selector: i,
                limit: t.limit || 0,
                optional: !!t.optional,
                includeSelf: s,
                animation: u,
                originalSelector: l.selector,
                options: wR(l.options)
            }
        }
        visitStagger(l, n) {
            n.currentQuery || n.errors.push("stagger() can only be used inside of query()");
            const e = "full" === l.timings ? {
                duration: 0,
                delay: 0,
                easing: "full"
            } : jN(l.timings, n.errors, !0);
            return {
                type: 12,
                animation: rR(this, XN(l.animation), n),
                timings: e,
                options: null
            }
        }
    }
    class bR {
        constructor(l) {
            this.errors = l, this.queryCount = 0, this.depCount = 0, this.currentTransition = null, this.currentQuery = null, this.currentQuerySelector = null, this.currentAnimateTimings = null, this.currentTime = 0, this.collectedStyles = {}, this.options = null
        }
    }

    function _R(l) {
        return !Array.isArray(l) && "object" == typeof l
    }

    function wR(l) {
        var n;
        return l ? (l = GN(l)).params && (l.params = (n = l.params) ? GN(n) : null) : l = {}, l
    }

    function xR(l, n, e) {
        return {
            duration: l,
            delay: n,
            easing: e
        }
    }

    function kR(l, n, e, t, i, s, u = null, r = !1) {
        return {
            type: 1,
            element: l,
            keyframes: n,
            preStyleProps: e,
            postStyleProps: t,
            duration: i,
            delay: s,
            totalTime: i + s,
            easing: u,
            subTimeline: r
        }
    }
    class SR {
        constructor() {
            this._map = new Map
        }
        consume(l) {
            let n = this._map.get(l);
            return n ? this._map.delete(l) : n = [], n
        }
        append(l, n) {
            let e = this._map.get(l);
            e || this._map.set(l, e = []), e.push(...n)
        }
        has(l) {
            return this._map.has(l)
        }
        clear() {
            this._map.clear()
        }
    }
    const CR = 1, IR = new RegExp(":enter", "g"), TR = new RegExp(":leave", "g");

    function ER(l, n, e, t, i, s = {}, u = {}, r, a, o = []) {
        return (new AR).buildKeyframes(l, n, e, t, i, s, u, r, a, o)
    }
    class AR {
        buildKeyframes(l, n, e, t, i, s, u, r, a, o = []) {
            a = a || new SR;
            const c = new DR(l, n, a, t, i, o, []);
            c.options = r, c.currentTimeline.setStyles([s], null, c.errors, r), rR(this, e, c);
            const d = c.timelines.filter(l => l.containsAnimation());
            if (d.length && Object.keys(u).length) {
                const l = d[d.length - 1];
                l.allowOnlyTimelineStyles() || l.setStyles([u], null, c.errors, r)
            }
            return d.length ? d.map(l => l.buildKeyframes()) : [kR(n, [], [], [], 0, 0, "", !1)]
        }
        visitTrigger(l, n) {}
        visitState(l, n) {}
        visitTransition(l, n) {}
        visitAnimateChild(l, n) {
            const e = n.subInstructions.consume(n.element);
            if (e) {
                const t = n.createSubContext(l.options),
                    i = n.currentTimeline.currentTime,
                    s = this._visitSubInstructions(e, t, t.options);
                i != s && n.transformIntoNewTimeline(s)
            }
            n.previousNode = l
        }
        visitAnimateRef(l, n) {
            const e = n.createSubContext(l.options);
            e.transformIntoNewTimeline(), this.visitReference(l.animation, e), n.transformIntoNewTimeline(e.currentTimeline.currentTime), n.previousNode = l
        }
        _visitSubInstructions(l, n, e) {
            let t = n.currentTimeline.currentTime;
            const i = null != e.duration ? HN(e.duration) : null,
                s = null != e.delay ? HN(e.delay) : null;
            return 0 !== i && l.forEach(l => {
                const e = n.appendInstructionToTimeline(l, i, s);
                t = Math.max(t, e.duration + e.delay)
            }), t
        }
        visitReference(l, n) {
            n.updateOptions(l.options, !0), rR(this, l.animation, n), n.previousNode = l
        }
        visitSequence(l, n) {
            const e = n.subContextCount;
            let t = n;
            const i = l.options;
            if (i && (i.params || i.delay) && ((t = n.createSubContext(i)).transformIntoNewTimeline(), null != i.delay)) {
                6 == t.previousNode.type && (t.currentTimeline.snapshotCurrentStyles(), t.previousNode = PR);
                const l = HN(i.delay);
                t.delayNextStep(l)
            }
            l.steps.length && (l.steps.forEach(l => rR(this, l, t)), t.currentTimeline.applyStylesToKeyframe(), t.subContextCount > e && t.transformIntoNewTimeline()), n.previousNode = l
        }
        visitGroup(l, n) {
            const e = [];
            let t = n.currentTimeline.currentTime;
            const i = l.options && l.options.delay ? HN(l.options.delay) : 0;
            l.steps.forEach(s => {
                const u = n.createSubContext(l.options);
                i && u.delayNextStep(i), rR(this, s, u), t = Math.max(t, u.currentTimeline.currentTime), e.push(u.currentTimeline)
            }), e.forEach(l => n.currentTimeline.mergeTimelineCollectedStyles(l)), n.transformIntoNewTimeline(t), n.previousNode = l
        }
        _visitTiming(l, n) {
            if (l.dynamic) {
                const e = l.strValue;
                return jN(n.params ? nR(e, n.params, n.errors) : e, n.errors)
            }
            return {
                duration: l.duration,
                delay: l.delay,
                easing: l.easing
            }
        }
        visitAnimate(l, n) {
            const e = n.currentAnimateTimings = this._visitTiming(l.timings, n),
                t = n.currentTimeline;
            e.delay && (n.incrementTime(e.delay), t.snapshotCurrentStyles());
            const i = l.style;
            5 == i.type ? this.visitKeyframes(i, n) : (n.incrementTime(e.duration), this.visitStyle(i, n), t.applyStylesToKeyframe()), n.currentAnimateTimings = null, n.previousNode = l
        }
        visitStyle(l, n) {
            const e = n.currentTimeline,
                t = n.currentAnimateTimings;
            !t && e.getCurrentStyleProperties().length && e.forwardFrame();
            const i = t && t.easing || l.easing;
            l.isEmptyStep ? e.applyEmptyStep(i) : e.setStyles(l.styles, i, n.errors, n.options), n.previousNode = l
        }
        visitKeyframes(l, n) {
            const e = n.currentAnimateTimings,
                t = n.currentTimeline.duration,
                i = e.duration,
                s = n.createSubContext().currentTimeline;
            s.easing = e.easing, l.styles.forEach(l => {
                s.forwardTime((l.offset || 0) * i), s.setStyles(l.styles, l.easing, n.errors, n.options), s.applyStylesToKeyframe()
            }), n.currentTimeline.mergeTimelineCollectedStyles(s), n.transformIntoNewTimeline(t + i), n.previousNode = l
        }
        visitQuery(l, n) {
            const e = n.currentTimeline.currentTime,
                t = l.options || {},
                i = t.delay ? HN(t.delay) : 0;
            i && (6 === n.previousNode.type || 0 == e && n.currentTimeline.getCurrentStyleProperties().length) && (n.currentTimeline.snapshotCurrentStyles(), n.previousNode = PR);
            let s = e;
            const u = n.invokeQuery(l.selector, l.originalSelector, l.limit, l.includeSelf, !!t.optional, n.errors);
            n.currentQueryTotal = u.length;
            let r = null;
            u.forEach((e, t) => {
                n.currentQueryIndex = t;
                const u = n.createSubContext(l.options, e);
                i && u.delayNextStep(i), e === n.element && (r = u.currentTimeline), rR(this, l.animation, u), u.currentTimeline.applyStylesToKeyframe(), s = Math.max(s, u.currentTimeline.currentTime)
            }), n.currentQueryIndex = 0, n.currentQueryTotal = 0, n.transformIntoNewTimeline(s), r && (n.currentTimeline.mergeTimelineCollectedStyles(r), n.currentTimeline.snapshotCurrentStyles()), n.previousNode = l
        }
        visitStagger(l, n) {
            const e = n.parentContext,
                t = n.currentTimeline,
                i = l.timings,
                s = Math.abs(i.duration),
                u = s * (n.currentQueryTotal - 1);
            let r = s * n.currentQueryIndex;
            switch (i.duration < 0 ? "reverse" : i.easing) {
                case "reverse":
                    r = u - r;
                    break;
                case "full":
                    r = e.currentStaggerTime
            }
            const a = n.currentTimeline;
            r && a.delayNextStep(r);
            const o = a.currentTime;
            rR(this, l.animation, n), n.previousNode = l, e.currentStaggerTime = t.currentTime - o + (t.startTime - e.currentTimeline.startTime)
        }
    }
    const PR = {}; class DR {
        constructor(l, n, e, t, i, s, u, r) {
            this._driver = l, this.element = n, this.subInstructions = e, this._enterClassName = t, this._leaveClassName = i, this.errors = s, this.timelines = u, this.parentContext = null, this.currentAnimateTimings = null, this.previousNode = PR, this.subContextCount = 0, this.options = {}, this.currentQueryIndex = 0, this.currentQueryTotal = 0, this.currentStaggerTime = 0, this.currentTimeline = r || new MR(this._driver, n, 0), u.push(this.currentTimeline)
        }
        get params() {
            return this.options.params
        }
        updateOptions(l, n) {
            if (!l) return;
            const e = l;
            let t = this.options;
            null != e.duration && (t.duration = HN(e.duration)), null != e.delay && (t.delay = HN(e.delay));
            const i = e.params;
            if (i) {
                let l = t.params;
                l || (l = this.options.params = {}), Object.keys(i).forEach(e => {
                    n && l.hasOwnProperty(e) || (l[e] = nR(i[e], l, this.errors))
                })
            }
        }
        _copyOptions() {
            const l = {};
            if (this.options) {
                const n = this.options.params;
                if (n) {
                    const e = l.params = {};
                    Object.keys(n).forEach(l => {
                        e[l] = n[l]
                    })
                }
            }
            return l
        }
        createSubContext(l = null, n, e) {
            const t = n || this.element,
                i = new DR(this._driver, t, this.subInstructions, this._enterClassName, this._leaveClassName, this.errors, this.timelines, this.currentTimeline.fork(t, e || 0));
            return i.previousNode = this.previousNode, i.currentAnimateTimings = this.currentAnimateTimings, i.options = this._copyOptions(), i.updateOptions(l), i.currentQueryIndex = this.currentQueryIndex, i.currentQueryTotal = this.currentQueryTotal, i.parentContext = this, this.subContextCount++, i
        }
        transformIntoNewTimeline(l) {
            return this.previousNode = PR, this.currentTimeline = this.currentTimeline.fork(this.element, l), this.timelines.push(this.currentTimeline), this.currentTimeline
        }
        appendInstructionToTimeline(l, n, e) {
            const t = {
                    duration: null != n ? n : l.duration,
                    delay: this.currentTimeline.currentTime + (null != e ? e : 0) + l.delay,
                    easing: ""
                },
                i = new OR(this._driver, l.element, l.keyframes, l.preStyleProps, l.postStyleProps, t, l.stretchStartingKeyframe);
            return this.timelines.push(i), t
        }
        incrementTime(l) {
            this.currentTimeline.forwardTime(this.currentTimeline.duration + l)
        }
        delayNextStep(l) {
            l > 0 && this.currentTimeline.delayNextStep(l)
        }
        invokeQuery(l, n, e, t, i, s) {
            let u = [];
            if (t && u.push(this.element), l.length > 0) {
                l = (l = l.replace(IR, "." + this._enterClassName)).replace(TR, "." + this._leaveClassName);
                let n = this._driver.query(this.element, l, 1 != e);
                0 !== e && (n = e < 0 ? n.slice(n.length + e, n.length) : n.slice(0, e)), u.push(...n)
            }
            return i || 0 != u.length || s.push(`\`query("${n}")\` returned zero elements. (Use \`query("${n}", { optional: true })\` if you wish to allow this.)`), u
        }
    }
    class MR {
        constructor(l, n, e, t) {
            this._driver = l, this.element = n, this.startTime = e, this._elementTimelineStylesLookup = t, this.duration = 0, this._previousKeyframe = {}, this._currentKeyframe = {}, this._keyframes = new Map, this._styleSummary = {}, this._pendingStyles = {}, this._backFill = {}, this._currentEmptyStepKeyframe = null, this._elementTimelineStylesLookup || (this._elementTimelineStylesLookup = new Map), this._localTimelineStyles = Object.create(this._backFill, {}), this._globalTimelineStyles = this._elementTimelineStylesLookup.get(n), this._globalTimelineStyles || (this._globalTimelineStyles = this._localTimelineStyles, this._elementTimelineStylesLookup.set(n, this._localTimelineStyles)), this._loadKeyframe()
        }
        containsAnimation() {
            switch (this._keyframes.size) {
                case 0:
                    return !1;
                case 1:
                    return this.getCurrentStyleProperties().length > 0;
                default:
                    return !0
            }
        }
        getCurrentStyleProperties() {
            return Object.keys(this._currentKeyframe)
        }
        get currentTime() {
            return this.startTime + this.duration
        }
        delayNextStep(l) {
            const n = 1 == this._keyframes.size && Object.keys(this._pendingStyles).length;
            this.duration || n ? (this.forwardTime(this.currentTime + l), n && this.snapshotCurrentStyles()) : this.startTime += l
        }
        fork(l, n) {
            return this.applyStylesToKeyframe(), new MR(this._driver, l, n || this.currentTime, this._elementTimelineStylesLookup)
        }
        _loadKeyframe() {
            this._currentKeyframe && (this._previousKeyframe = this._currentKeyframe), this._currentKeyframe = this._keyframes.get(this.duration), this._currentKeyframe || (this._currentKeyframe = Object.create(this._backFill, {}), this._keyframes.set(this.duration, this._currentKeyframe))
        }
        forwardFrame() {
            this.duration += CR, this._loadKeyframe()
        }
        forwardTime(l) {
            this.applyStylesToKeyframe(), this.duration = l, this._loadKeyframe()
        }
        _updateStyle(l, n) {
            this._localTimelineStyles[l] = n, this._globalTimelineStyles[l] = n, this._styleSummary[l] = {
                time: this.currentTime,
                value: n
            }
        }
        allowOnlyTimelineStyles() {
            return this._currentEmptyStepKeyframe !== this._currentKeyframe
        }
        applyEmptyStep(l) {
            l && (this._previousKeyframe.easing = l), Object.keys(this._globalTimelineStyles).forEach(l => {
                this._backFill[l] = this._globalTimelineStyles[l] || rN, this._currentKeyframe[l] = rN
            }), this._currentEmptyStepKeyframe = this._currentKeyframe
        }
        setStyles(l, n, e, t) {
            n && (this._previousKeyframe.easing = n);
            const i = t && t.params || {},
                s = function (l, n) {
                    const e = {};
                    let t;
                    return l.forEach(l => {
                        "*" === l ? (t = t || Object.keys(n)).forEach(l => {
                            e[l] = rN
                        }) : WN(l, !1, e)
                    }), e
                }(l, this._globalTimelineStyles);
            Object.keys(s).forEach(l => {
                const n = nR(s[l], i, e);
                this._pendingStyles[l] = n, this._localTimelineStyles.hasOwnProperty(l) || (this._backFill[l] = this._globalTimelineStyles.hasOwnProperty(l) ? this._globalTimelineStyles[l] : rN), this._updateStyle(l, n)
            })
        }
        applyStylesToKeyframe() {
            const l = this._pendingStyles,
                n = Object.keys(l);
            0 != n.length && (this._pendingStyles = {}, n.forEach(n => {
                this._currentKeyframe[n] = l[n]
            }), Object.keys(this._localTimelineStyles).forEach(l => {
                this._currentKeyframe.hasOwnProperty(l) || (this._currentKeyframe[l] = this._localTimelineStyles[l])
            }))
        }
        snapshotCurrentStyles() {
            Object.keys(this._localTimelineStyles).forEach(l => {
                const n = this._localTimelineStyles[l];
                this._pendingStyles[l] = n, this._updateStyle(l, n)
            })
        }
        getFinalKeyframe() {
            return this._keyframes.get(this.duration)
        }
        get properties() {
            const l = [];
            for (let n in this._currentKeyframe) l.push(n);
            return l
        }
        mergeTimelineCollectedStyles(l) {
            Object.keys(l._styleSummary).forEach(n => {
                const e = this._styleSummary[n],
                    t = l._styleSummary[n];
                (!e || t.time > e.time) && this._updateStyle(n, t.value)
            })
        }
        buildKeyframes() {
            this.applyStylesToKeyframe();
            const l = new Set,
                n = new Set,
                e = 1 === this._keyframes.size && 0 === this.duration;
            let t = [];
            this._keyframes.forEach((i, s) => {
                const u = WN(i, !0);
                Object.keys(u).forEach(e => {
                    const t = u[e];
                    t == pN ? l.add(e) : t == rN && n.add(e)
                }), e || (u.offset = s / this.duration), t.push(u)
            });
            const i = l.size ? eR(l.values()) : [],
                s = n.size ? eR(n.values()) : [];
            if (e) {
                const l = t[0],
                    n = GN(l);
                l.offset = 0, n.offset = 1, t = [l, n]
            }
            return kR(this.element, t, i, s, this.duration, this.startTime, this.easing, !1)
        }
    }
    class OR extends MR {
        constructor(l, n, e, t, i, s, u = !1) {
            super(l, n, s.delay), this.element = n, this.keyframes = e, this.preStyleProps = t, this.postStyleProps = i, this._stretchStartingKeyframe = u, this.timings = {
                duration: s.duration,
                delay: s.delay,
                easing: s.easing
            }
        }
        containsAnimation() {
            return this.keyframes.length > 1
        }
        buildKeyframes() {
            let l = this.keyframes,
                {
                    delay: n,
                    duration: e,
                    easing: t
                } = this.timings;
            if (this._stretchStartingKeyframe && n) {
                const i = [],
                    s = e + n,
                    u = n / s,
                    r = WN(l[0], !1);
                r.offset = 0, i.push(r);
                const a = WN(l[0], !1);
                a.offset = NR(u), i.push(a);
                const o = l.length - 1;
                for (let t = 1; t <= o; t++) {
                    let u = WN(l[t], !1);
                    u.offset = NR((n + u.offset * e) / s), i.push(u)
                }
                e = s, n = 0, t = "", l = i
            }
            return kR(this.element, l, this.preStyleProps, this.postStyleProps, e, n, t, !0)
        }
    }

    function NR(l, n = 3) {
        const e = Math.pow(10, n - 1);
        return Math.round(l * e) / e
    }
    class RR {}
    class BR extends RR {
        normalizePropertyName(l, n) {
            return iR(l)
        }
        normalizeStyleValue(l, n, e, t) {
            let i = "";
            const s = e.toString().trim();
            if (zR[n] && 0 !== e && "0" !== e)
                if ("number" == typeof e) i = "px";
                else {
                    const n = e.match(/^[+-]?[\d\.]+([a-z]*)$/);
                    n && 0 == n[1].length && t.push(`Please provide a CSS unit value for ${l}:${e}`)
                } return s + i
        }
    }
    const zR = (() => (function (l) {
        const n = {};
        return l.forEach(l => n[l] = !0), n
    })("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();

    function $R(l, n, e, t, i, s, u, r, a, o, c, d, h) {
        return {
            type: 0,
            element: l,
            triggerName: n,
            isRemovalTransition: i,
            fromState: e,
            fromStyles: s,
            toState: t,
            toStyles: u,
            timelines: r,
            queriedElements: a,
            preStyleProps: o,
            postStyleProps: c,
            totalTime: d,
            errors: h
        }
    }
    const LR = {}; class FR {
        constructor(l, n, e) {
            this._triggerName = l, this.ast = n, this._stateStyles = e
        }
        match(l, n, e, t) {
            return function (l, n, e, t, i) {
                return l.some(l => l(n, e, t, i))
            }(this.ast.matchers, l, n, e, t)
        }
        buildStyles(l, n, e) {
            const t = this._stateStyles["*"],
                i = this._stateStyles[l],
                s = t ? t.buildStyles(n, e) : {};
            return i ? i.buildStyles(n, e) : s
        }
        build(l, n, e, t, i, s, u, r, a, o) {
            const c = [],
                d = this.ast.options && this.ast.options.params || LR,
                h = this.buildStyles(e, u && u.params || LR, c),
                p = r && r.params || LR,
                f = this.buildStyles(t, p, c),
                g = new Set,
                m = new Map,
                y = new Map,
                v = "void" === t,
                b = {
                    params: Object.assign({}, d, p)
                },
                _ = o ? [] : ER(l, n, this.ast.animation, i, s, h, f, b, a, c);
            let w = 0;
            if (_.forEach(l => {
                    w = Math.max(l.duration + l.delay, w)
                }), c.length) return $R(n, this._triggerName, e, t, v, h, f, [], [], m, y, w, c);
            _.forEach(l => {
                const e = l.element,
                    t = _N(m, e, {});
                l.preStyleProps.forEach(l => t[l] = !0);
                const i = _N(y, e, {});
                l.postStyleProps.forEach(l => i[l] = !0), e !== n && g.add(e)
            });
            const x = eR(g.values());
            return $R(n, this._triggerName, e, t, v, h, f, _, x, m, y, w)
        }
    }
    class qR {
        constructor(l, n) {
            this.styles = l, this.defaultParams = n
        }
        buildStyles(l, n) {
            const e = {},
                t = GN(this.defaultParams);
            return Object.keys(l).forEach(n => {
                const e = l[n];
                null != e && (t[n] = e)
            }), this.styles.styles.forEach(l => {
                if ("string" != typeof l) {
                    const i = l;
                    Object.keys(i).forEach(l => {
                        let s = i[l];
                        s.length > 1 && (s = nR(s, t, n)), e[l] = s
                    })
                }
            }), e
        }
    }
    class UR {
        constructor(l, n) {
            this.name = l, this.ast = n, this.transitionFactories = [], this.states = {}, n.states.forEach(l => {
                this.states[l.name] = new qR(l.style, l.options && l.options.params || {})
            }), HR(this.states, "true", "1"), HR(this.states, "false", "0"), n.transitions.forEach(n => {
                this.transitionFactories.push(new FR(l, n, this.states))
            }), this.fallbackTransition = new FR(l, {
                type: 1,
                animation: {
                    type: 2,
                    steps: [],
                    options: null
                },
                matchers: [(l, n) => !0],
                options: null,
                queryCount: 0,
                depCount: 0
            }, this.states)
        }
        get containsQueries() {
            return this.ast.queryCount > 0
        }
        matchTransition(l, n, e, t) {
            return this.transitionFactories.find(i => i.match(l, n, e, t)) || null
        }
        matchStyles(l, n, e) {
            return this.fallbackTransition.buildStyles(l, n, e)
        }
    }

    function HR(l, n, e) {
        l.hasOwnProperty(n) ? l.hasOwnProperty(e) || (l[e] = l[n]) : l.hasOwnProperty(e) && (l[n] = l[e])
    }
    const VR = new SR; class jR {
        constructor(l, n, e) {
            this.bodyNode = l, this._driver = n, this._normalizer = e, this._animations = {}, this._playersById = {}, this.players = []
        }
        register(l, n) {
            const e = [],
                t = mR(this._driver, n, e);
            if (e.length) throw new Error(`Unable to build the animation due to the following errors: ${e.join("\n")}`);
            this._animations[l] = t
        }
        _buildPlayer(l, n, e) {
            const t = l.element,
                i = mN(0, this._normalizer, 0, l.keyframes, n, e);
            return this._driver.animate(t, i, l.duration, l.delay, l.easing, [], !0)
        }
        create(l, n, e = {}) {
            const t = [],
                i = this._animations[l];
            let s;
            const u = new Map;
            if (i ? (s = ER(this._driver, n, i, zN, $N, {}, {}, e, VR, t)).forEach(l => {
                    const n = _N(u, l.element, {});
                    l.postStyleProps.forEach(l => n[l] = null)
                }) : (t.push("The requested animation doesn't exist or has already been destroyed"), s = []), t.length) throw new Error(`Unable to create the animation due to the following errors: ${t.join("\n")}`);
            u.forEach((l, n) => {
                Object.keys(l).forEach(e => {
                    l[e] = this._driver.computeStyle(n, e, rN)
                })
            });
            const r = gN(s.map(l => {
                const n = u.get(l.element);
                return this._buildPlayer(l, {}, n)
            }));
            return this._playersById[l] = r, r.onDestroy(() => this.destroy(l)), this.players.push(r), r
        }
        destroy(l) {
            const n = this._getPlayer(l);
            n.destroy(), delete this._playersById[l];
            const e = this.players.indexOf(n);
            e >= 0 && this.players.splice(e, 1)
        }
        _getPlayer(l) {
            const n = this._playersById[l];
            if (!n) throw new Error(`Unable to find the timeline player referenced by ${l}`);
            return n
        }
        listen(l, n, e, t) {
            const i = bN(n, "", "", "");
            return yN(this._getPlayer(l), e, i, t), () => {}
        }
        command(l, n, e, t) {
            if ("register" == e) return void this.register(l, t[0]);
            if ("create" == e) return void this.create(l, n, t[0] || {});
            const i = this._getPlayer(l);
            switch (e) {
                case "play":
                    i.play();
                    break;
                case "pause":
                    i.pause();
                    break;
                case "reset":
                    i.reset();
                    break;
                case "restart":
                    i.restart();
                    break;
                case "finish":
                    i.finish();
                    break;
                case "init":
                    i.init();
                    break;
                case "setPosition":
                    i.setPosition(parseFloat(t[0]));
                    break;
                case "destroy":
                    this.destroy(l)
            }
        }
    }
    const GR = "ng-animate-queued", WR = ".ng-animate-queued", KR = "ng-animate-disabled", ZR = ".ng-animate-disabled", QR = "ng-star-inserted", YR = ".ng-star-inserted", XR = [], JR = {
        namespaceId: "",
        setForRemoval: !1,
        setForMove: !1,
        hasAnimation: !1,
        removedBeforeQueried: !1
    }, lB = {
        namespaceId: "",
        setForMove: !1,
        setForRemoval: !1,
        hasAnimation: !1,
        removedBeforeQueried: !0
    }, nB = "__ng_removed"; class eB {
        constructor(l, n = "") {
            this.namespaceId = n;
            const e = l && l.hasOwnProperty("value");
            if (this.value = null != (t = e ? l.value : l) ? t : null, e) {
                const n = GN(l);
                delete n.value, this.options = n
            } else this.options = {};
            var t;
            this.options.params || (this.options.params = {})
        }
        get params() {
            return this.options.params
        }
        absorbOptions(l) {
            const n = l.params;
            if (n) {
                const l = this.options.params;
                Object.keys(n).forEach(e => {
                    null == l[e] && (l[e] = n[e])
                })
            }
        }
    }
    const tB = "void", iB = new eB(tB); class sB {
        constructor(l, n, e) {
            this.id = l, this.hostElement = n, this._engine = e, this.players = [], this._triggers = {}, this._queue = [], this._elementListeners = new Map, this._hostClassName = "ng-tns-" + l, pB(n, this._hostClassName)
        }
        listen(l, n, e, t) {
            if (!this._triggers.hasOwnProperty(n)) throw new Error(`Unable to listen on the animation trigger event "${e}" because the animation trigger "${n}" doesn't exist!`);
            if (null == e || 0 == e.length) throw new Error(`Unable to listen on the animation trigger "${n}" because the provided event is undefined!`);
            if ("start" != (i = e) && "done" != i) throw new Error(`The provided animation trigger event "${e}" for the animation trigger "${n}" is not supported!`);
            var i;
            const s = _N(this._elementListeners, l, []),
                u = {
                    name: n,
                    phase: e,
                    callback: t
                };
            s.push(u);
            const r = _N(this._engine.statesByElement, l, {});
            return r.hasOwnProperty(n) || (pB(l, LN), pB(l, LN + "-" + n), r[n] = iB), () => {
                this._engine.afterFlush(() => {
                    const l = s.indexOf(u);
                    l >= 0 && s.splice(l, 1), this._triggers[n] || delete r[n]
                })
            }
        }
        register(l, n) {
            return !this._triggers[l] && (this._triggers[l] = n, !0)
        }
        _getTrigger(l) {
            const n = this._triggers[l];
            if (!n) throw new Error(`The provided animation trigger "${l}" has not been registered!`);
            return n
        }
        trigger(l, n, e, t = !0) {
            const i = this._getTrigger(n),
                s = new rB(this.id, n, l);
            let u = this._engine.statesByElement.get(l);
            u || (pB(l, LN), pB(l, LN + "-" + n), this._engine.statesByElement.set(l, u = {}));
            let r = u[n];
            const a = new eB(e, this.id);
            if (!(e && e.hasOwnProperty("value")) && r && a.absorbOptions(r.options), u[n] = a, r || (r = iB), a.value !== tB && r.value === a.value) {
                if (! function (l, n) {
                        const e = Object.keys(l),
                            t = Object.keys(n);
                        if (e.length != t.length) return !1;
                        for (let i = 0; i < e.length; i++) {
                            const t = e[i];
                            if (!n.hasOwnProperty(t) || l[t] !== n[t]) return !1
                        }
                        return !0
                    }(r.params, a.params)) {
                    const n = [],
                        e = i.matchStyles(r.value, r.params, n),
                        t = i.matchStyles(a.value, a.params, n);
                    n.length ? this._engine.reportError(n) : this._engine.afterFlush(() => {
                        YN(l, e), QN(l, t)
                    })
                }
                return
            }
            const o = _N(this._engine.playersByElement, l, []);
            o.forEach(l => {
                l.namespaceId == this.id && l.triggerName == n && l.queued && l.destroy()
            });
            let c = i.matchTransition(r.value, a.value, l, a.params),
                d = !1;
            if (!c) {
                if (!t) return;
                c = i.fallbackTransition, d = !0
            }
            return this._engine.totalQueuedPlayers++, this._queue.push({
                element: l,
                triggerName: n,
                transition: c,
                fromState: r,
                toState: a,
                player: s,
                isFallbackTransition: d
            }), d || (pB(l, GR), s.onStart(() => {
                fB(l, GR)
            })), s.onDone(() => {
                let n = this.players.indexOf(s);
                n >= 0 && this.players.splice(n, 1);
                const e = this._engine.playersByElement.get(l);
                if (e) {
                    let l = e.indexOf(s);
                    l >= 0 && e.splice(l, 1)
                }
            }), this.players.push(s), o.push(s), s
        }
        deregister(l) {
            delete this._triggers[l], this._engine.statesByElement.forEach((n, e) => {
                delete n[l]
            }), this._elementListeners.forEach((n, e) => {
                this._elementListeners.set(e, n.filter(n => n.name != l))
            })
        }
        clearElementCache(l) {
            this._engine.statesByElement.delete(l), this._elementListeners.delete(l);
            const n = this._engine.playersByElement.get(l);
            n && (n.forEach(l => l.destroy()), this._engine.playersByElement.delete(l))
        }
        _signalRemovalForInnerTriggers(l, n, e = !1) {
            this._engine.driver.query(l, FN, !0).forEach(l => {
                if (l[nB]) return;
                const e = this._engine.fetchNamespacesByElement(l);
                e.size ? e.forEach(e => e.triggerLeaveAnimation(l, n, !1, !0)) : this.clearElementCache(l)
            })
        }
        triggerLeaveAnimation(l, n, e, t) {
            const i = this._engine.statesByElement.get(l);
            if (i) {
                const s = [];
                if (Object.keys(i).forEach(n => {
                        if (this._triggers[n]) {
                            const e = this.trigger(l, n, tB, t);
                            e && s.push(e)
                        }
                    }), s.length) return this._engine.markElementAsRemoved(this.id, l, !0, n), e && gN(s).onDone(() => this._engine.processLeaveNode(l)), !0
            }
            return !1
        }
        prepareLeaveAnimationListeners(l) {
            const n = this._elementListeners.get(l);
            if (n) {
                const e = new Set;
                n.forEach(n => {
                    const t = n.name;
                    if (e.has(t)) return;
                    e.add(t);
                    const i = this._triggers[t].fallbackTransition,
                        s = this._engine.statesByElement.get(l)[t] || iB,
                        u = new eB(tB),
                        r = new rB(this.id, t, l);
                    this._engine.totalQueuedPlayers++, this._queue.push({
                        element: l,
                        triggerName: t,
                        transition: i,
                        fromState: s,
                        toState: u,
                        player: r,
                        isFallbackTransition: !0
                    })
                })
            }
        }
        removeNode(l, n) {
            const e = this._engine;
            if (l.childElementCount && this._signalRemovalForInnerTriggers(l, n, !0), this.triggerLeaveAnimation(l, n, !0)) return;
            let t = !1;
            if (e.totalAnimations) {
                const n = e.players.length ? e.playersByQueriedElement.get(l) : [];
                if (n && n.length) t = !0;
                else {
                    let n = l;
                    for (; n = n.parentNode;)
                        if (e.statesByElement.get(n)) {
                            t = !0;
                            break
                        }
                }
            }
            this.prepareLeaveAnimationListeners(l), t ? e.markElementAsRemoved(this.id, l, !1, n) : (e.afterFlush(() => this.clearElementCache(l)), e.destroyInnerAnimations(l), e._onRemovalComplete(l, n))
        }
        insertNode(l, n) {
            pB(l, this._hostClassName)
        }
        drainQueuedTransitions(l) {
            const n = [];
            return this._queue.forEach(e => {
                const t = e.player;
                if (t.destroyed) return;
                const i = e.element,
                    s = this._elementListeners.get(i);
                s && s.forEach(n => {
                    if (n.name == e.triggerName) {
                        const t = bN(i, e.triggerName, e.fromState.value, e.toState.value);
                        t._data = l, yN(e.player, n.phase, t, n.callback)
                    }
                }), t.markedForDestroy ? this._engine.afterFlush(() => {
                    t.destroy()
                }) : n.push(e)
            }), this._queue = [], n.sort((l, n) => {
                const e = l.transition.ast.depCount,
                    t = n.transition.ast.depCount;
                return 0 == e || 0 == t ? e - t : this._engine.driver.containsElement(l.element, n.element) ? 1 : -1
            })
        }
        destroy(l) {
            this.players.forEach(l => l.destroy()), this._signalRemovalForInnerTriggers(this.hostElement, l)
        }
        elementContainsData(l) {
            let n = !1;
            return this._elementListeners.has(l) && (n = !0), !!this._queue.find(n => n.element === l) || n
        }
    }
    class uB {
        constructor(l, n, e) {
            this.bodyNode = l, this.driver = n, this._normalizer = e, this.players = [], this.newHostElements = new Map, this.playersByElement = new Map, this.playersByQueriedElement = new Map, this.statesByElement = new Map, this.disabledNodes = new Set, this.totalAnimations = 0, this.totalQueuedPlayers = 0, this._namespaceLookup = {}, this._namespaceList = [], this._flushFns = [], this._whenQuietFns = [], this.namespacesByHostElement = new Map, this.collectedEnterElements = [], this.collectedLeaveElements = [], this.onRemovalComplete = (l, n) => {}
        }
        _onRemovalComplete(l, n) {
            this.onRemovalComplete(l, n)
        }
        get queuedPlayers() {
            const l = [];
            return this._namespaceList.forEach(n => {
                n.players.forEach(n => {
                    n.queued && l.push(n)
                })
            }), l
        }
        createNamespace(l, n) {
            const e = new sB(l, n, this);
            return n.parentNode ? this._balanceNamespaceList(e, n) : (this.newHostElements.set(n, e), this.collectEnterElement(n)), this._namespaceLookup[l] = e
        }
        _balanceNamespaceList(l, n) {
            const e = this._namespaceList.length - 1;
            if (e >= 0) {
                let t = !1;
                for (let i = e; i >= 0; i--)
                    if (this.driver.containsElement(this._namespaceList[i].hostElement, n)) {
                        this._namespaceList.splice(i + 1, 0, l), t = !0;
                        break
                    } t || this._namespaceList.splice(0, 0, l)
            } else this._namespaceList.push(l);
            return this.namespacesByHostElement.set(n, l), l
        }
        register(l, n) {
            let e = this._namespaceLookup[l];
            return e || (e = this.createNamespace(l, n)), e
        }
        registerTrigger(l, n, e) {
            let t = this._namespaceLookup[l];
            t && t.register(n, e) && this.totalAnimations++
        }
        destroy(l, n) {
            if (!l) return;
            const e = this._fetchNamespace(l);
            this.afterFlush(() => {
                this.namespacesByHostElement.delete(e.hostElement), delete this._namespaceLookup[l];
                const n = this._namespaceList.indexOf(e);
                n >= 0 && this._namespaceList.splice(n, 1)
            }), this.afterFlushAnimationsDone(() => e.destroy(n))
        }
        _fetchNamespace(l) {
            return this._namespaceLookup[l]
        }
        fetchNamespacesByElement(l) {
            const n = new Set,
                e = this.statesByElement.get(l);
            if (e) {
                const l = Object.keys(e);
                for (let t = 0; t < l.length; t++) {
                    const i = e[l[t]].namespaceId;
                    if (i) {
                        const l = this._fetchNamespace(i);
                        l && n.add(l)
                    }
                }
            }
            return n
        }
        trigger(l, n, e, t) {
            if (aB(n)) {
                const i = this._fetchNamespace(l);
                if (i) return i.trigger(n, e, t), !0
            }
            return !1
        }
        insertNode(l, n, e, t) {
            if (!aB(n)) return;
            const i = n[nB];
            if (i && i.setForRemoval) {
                i.setForRemoval = !1, i.setForMove = !0;
                const l = this.collectedLeaveElements.indexOf(n);
                l >= 0 && this.collectedLeaveElements.splice(l, 1)
            }
            if (l) {
                const t = this._fetchNamespace(l);
                t && t.insertNode(n, e)
            }
            t && this.collectEnterElement(n)
        }
        collectEnterElement(l) {
            this.collectedEnterElements.push(l)
        }
        markElementAsDisabled(l, n) {
            n ? this.disabledNodes.has(l) || (this.disabledNodes.add(l), pB(l, KR)) : this.disabledNodes.has(l) && (this.disabledNodes.delete(l), fB(l, KR))
        }
        removeNode(l, n, e, t) {
            if (aB(n)) {
                const i = l ? this._fetchNamespace(l) : null;
                if (i ? i.removeNode(n, t) : this.markElementAsRemoved(l, n, !1, t), e) {
                    const e = this.namespacesByHostElement.get(n);
                    e && e.id !== l && e.removeNode(n, t)
                }
            } else this._onRemovalComplete(n, t)
        }
        markElementAsRemoved(l, n, e, t) {
            this.collectedLeaveElements.push(n), n[nB] = {
                namespaceId: l,
                setForRemoval: t,
                hasAnimation: e,
                removedBeforeQueried: !1
            }
        }
        listen(l, n, e, t, i) {
            return aB(n) ? this._fetchNamespace(l).listen(n, e, t, i) : () => {}
        }
        _buildInstruction(l, n, e, t, i) {
            return l.transition.build(this.driver, l.element, l.fromState.value, l.toState.value, e, t, l.fromState.options, l.toState.options, n, i)
        }
        destroyInnerAnimations(l) {
            let n = this.driver.query(l, FN, !0);
            n.forEach(l => this.destroyActiveAnimationsForElement(l)), 0 != this.playersByQueriedElement.size && (n = this.driver.query(l, UN, !0)).forEach(l => this.finishActiveQueriedAnimationOnElement(l))
        }
        destroyActiveAnimationsForElement(l) {
            const n = this.playersByElement.get(l);
            n && n.forEach(l => {
                l.queued ? l.markedForDestroy = !0 : l.destroy()
            })
        }
        finishActiveQueriedAnimationOnElement(l) {
            const n = this.playersByQueriedElement.get(l);
            n && n.forEach(l => l.finish())
        }
        whenRenderingDone() {
            return new Promise(l => {
                if (this.players.length) return gN(this.players).onDone(() => l());
                l()
            })
        }
        processLeaveNode(l) {
            const n = l[nB];
            if (n && n.setForRemoval) {
                if (l[nB] = JR, n.namespaceId) {
                    this.destroyInnerAnimations(l);
                    const e = this._fetchNamespace(n.namespaceId);
                    e && e.clearElementCache(l)
                }
                this._onRemovalComplete(l, n.setForRemoval)
            }
            this.driver.matchesElement(l, ZR) && this.markElementAsDisabled(l, !1), this.driver.query(l, ZR, !0).forEach(l => {
                this.markElementAsDisabled(l, !1)
            })
        }
        flush(l = -1) {
            let n = [];
            if (this.newHostElements.size && (this.newHostElements.forEach((l, n) => this._balanceNamespaceList(l, n)), this.newHostElements.clear()), this.totalAnimations && this.collectedEnterElements.length)
                for (let e = 0; e < this.collectedEnterElements.length; e++) pB(this.collectedEnterElements[e], QR);
            if (this._namespaceList.length && (this.totalQueuedPlayers || this.collectedLeaveElements.length)) {
                const e = [];
                try {
                    n = this._flushAnimations(e, l)
                } finally {
                    for (let l = 0; l < e.length; l++) e[l]()
                }
            } else
                for (let e = 0; e < this.collectedLeaveElements.length; e++) this.processLeaveNode(this.collectedLeaveElements[e]);
            if (this.totalQueuedPlayers = 0, this.collectedEnterElements.length = 0, this.collectedLeaveElements.length = 0, this._flushFns.forEach(l => l()), this._flushFns = [], this._whenQuietFns.length) {
                const l = this._whenQuietFns;
                this._whenQuietFns = [], n.length ? gN(n).onDone(() => {
                    l.forEach(l => l())
                }) : l.forEach(l => l())
            }
        }
        reportError(l) {
            throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${l.join("\n")}`)
        }
        _flushAnimations(l, n) {
            const e = new SR,
                t = [],
                i = new Map,
                s = [],
                u = new Map,
                r = new Map,
                a = new Map,
                o = new Set;
            this.disabledNodes.forEach(l => {
                o.add(l);
                const n = this.driver.query(l, WR, !0);
                for (let e = 0; e < n.length; e++) o.add(n[e])
            });
            const c = this.bodyNode,
                d = Array.from(this.statesByElement.keys()),
                h = dB(d, this.collectedEnterElements),
                p = new Map;
            let f = 0;
            h.forEach((l, n) => {
                const e = zN + f++;
                p.set(n, e), l.forEach(l => pB(l, e))
            });
            const g = [],
                m = new Set,
                y = new Set;
            for (let P = 0; P < this.collectedLeaveElements.length; P++) {
                const l = this.collectedLeaveElements[P],
                    n = l[nB];
                n && n.setForRemoval && (g.push(l), m.add(l), n.hasAnimation ? this.driver.query(l, YR, !0).forEach(l => m.add(l)) : y.add(l))
            }
            const v = new Map,
                b = dB(d, Array.from(m));
            b.forEach((l, n) => {
                const e = $N + f++;
                v.set(n, e), l.forEach(l => pB(l, e))
            }), l.push(() => {
                h.forEach((l, n) => {
                    const e = p.get(n);
                    l.forEach(l => fB(l, e))
                }), b.forEach((l, n) => {
                    const e = v.get(n);
                    l.forEach(l => fB(l, e))
                }), g.forEach(l => {
                    this.processLeaveNode(l)
                })
            });
            const _ = [],
                w = [];
            for (let P = this._namespaceList.length - 1; P >= 0; P--) this._namespaceList[P].drainQueuedTransitions(n).forEach(l => {
                const n = l.player,
                    i = l.element;
                if (_.push(n), this.collectedEnterElements.length) {
                    const l = i[nB];
                    if (l && l.setForMove) return void n.destroy()
                }
                const o = !c || !this.driver.containsElement(c, i),
                    d = v.get(i),
                    h = p.get(i),
                    f = this._buildInstruction(l, e, h, d, o);
                if (!f.errors || !f.errors.length) return o ? (n.onStart(() => YN(i, f.fromStyles)), n.onDestroy(() => QN(i, f.toStyles)), void t.push(n)) : l.isFallbackTransition ? (n.onStart(() => YN(i, f.fromStyles)), n.onDestroy(() => QN(i, f.toStyles)), void t.push(n)) : (f.timelines.forEach(l => l.stretchStartingKeyframe = !0), e.append(i, f.timelines), s.push({
                    instruction: f,
                    player: n,
                    element: i
                }), f.queriedElements.forEach(l => _N(u, l, []).push(n)), f.preStyleProps.forEach((l, n) => {
                    const e = Object.keys(l);
                    if (e.length) {
                        let l = r.get(n);
                        l || r.set(n, l = new Set), e.forEach(n => l.add(n))
                    }
                }), void f.postStyleProps.forEach((l, n) => {
                    const e = Object.keys(l);
                    let t = a.get(n);
                    t || a.set(n, t = new Set), e.forEach(l => t.add(l))
                }));
                w.push(f)
            });
            if (w.length) {
                const l = [];
                w.forEach(n => {
                    l.push(`@${n.triggerName} has failed due to:\n`), n.errors.forEach(n => l.push(`- ${n}\n`))
                }), _.forEach(l => l.destroy()), this.reportError(l)
            }
            const x = new Map,
                k = new Map;
            s.forEach(l => {
                const n = l.element;
                e.has(n) && (k.set(n, n), this._beforeAnimationBuild(l.player.namespaceId, l.instruction, x))
            }), t.forEach(l => {
                const n = l.element;
                this._getPreviousPlayers(n, !1, l.namespaceId, l.triggerName, null).forEach(l => {
                    _N(x, n, []).push(l), l.destroy()
                })
            });
            const S = g.filter(l => mB(l, r, a)),
                C = new Map;
            cB(C, this.driver, y, a, rN).forEach(l => {
                mB(l, r, a) && S.push(l)
            });
            const I = new Map;
            h.forEach((l, n) => {
                cB(I, this.driver, new Set(l), r, pN)
            }), S.forEach(l => {
                const n = C.get(l),
                    e = I.get(l);
                C.set(l, Object.assign({}, n, e))
            });
            const T = [],
                E = [],
                A = {};
            s.forEach(l => {
                const {
                    element: n,
                    player: s,
                    instruction: u
                } = l;
                if (e.has(n)) {
                    if (o.has(n)) return s.onDestroy(() => QN(n, u.toStyles)), s.disabled = !0, s.overrideTotalTime(u.totalTime), void t.push(s);
                    let l = A;
                    if (k.size > 1) {
                        let e = n;
                        const t = [];
                        for (; e = e.parentNode;) {
                            const n = k.get(e);
                            if (n) {
                                l = n;
                                break
                            }
                            t.push(e)
                        }
                        t.forEach(n => k.set(n, l))
                    }
                    const e = this._buildAnimation(s.namespaceId, u, x, i, I, C);
                    if (s.setRealPlayer(e), l === A) T.push(s);
                    else {
                        const n = this.playersByElement.get(l);
                        n && n.length && (s.parentPlayer = gN(n)), t.push(s)
                    }
                } else YN(n, u.fromStyles), s.onDestroy(() => QN(n, u.toStyles)), E.push(s), o.has(n) && t.push(s)
            }), E.forEach(l => {
                const n = i.get(l.element);
                if (n && n.length) {
                    const e = gN(n);
                    l.setRealPlayer(e)
                }
            }), t.forEach(l => {
                l.parentPlayer ? l.syncPlayerEvents(l.parentPlayer) : l.destroy()
            });
            for (let P = 0; P < g.length; P++) {
                const l = g[P],
                    n = l[nB];
                if (fB(l, $N), n && n.hasAnimation) continue;
                let e = [];
                if (u.size) {
                    let n = u.get(l);
                    n && n.length && e.push(...n);
                    let t = this.driver.query(l, UN, !0);
                    for (let l = 0; l < t.length; l++) {
                        let n = u.get(t[l]);
                        n && n.length && e.push(...n)
                    }
                }
                const t = e.filter(l => !l.destroyed);
                t.length ? gB(this, l, t) : this.processLeaveNode(l)
            }
            return g.length = 0, T.forEach(l => {
                this.players.push(l), l.onDone(() => {
                    l.destroy();
                    const n = this.players.indexOf(l);
                    this.players.splice(n, 1)
                }), l.play()
            }), T
        }
        elementContainsData(l, n) {
            let e = !1;
            const t = n[nB];
            return t && t.setForRemoval && (e = !0), this.playersByElement.has(n) && (e = !0), this.playersByQueriedElement.has(n) && (e = !0), this.statesByElement.has(n) && (e = !0), this._fetchNamespace(l).elementContainsData(n) || e
        }
        afterFlush(l) {
            this._flushFns.push(l)
        }
        afterFlushAnimationsDone(l) {
            this._whenQuietFns.push(l)
        }
        _getPreviousPlayers(l, n, e, t, i) {
            let s = [];
            if (n) {
                const n = this.playersByQueriedElement.get(l);
                n && (s = n)
            } else {
                const n = this.playersByElement.get(l);
                if (n) {
                    const l = !i || i == tB;
                    n.forEach(n => {
                        n.queued || (l || n.triggerName == t) && s.push(n)
                    })
                }
            }
            return (e || t) && (s = s.filter(l => !(e && e != l.namespaceId || t && t != l.triggerName))), s
        }
        _beforeAnimationBuild(l, n, e) {
            const t = n.element,
                i = n.isRemovalTransition ? void 0 : l,
                s = n.isRemovalTransition ? void 0 : n.triggerName;
            for (const u of n.timelines) {
                const l = u.element,
                    r = l !== t,
                    a = _N(e, l, []);
                this._getPreviousPlayers(l, r, i, s, n.toState).forEach(l => {
                    const n = l.getRealPlayer();
                    n.beforeDestroy && n.beforeDestroy(), l.destroy(), a.push(l)
                })
            }
            YN(t, n.fromStyles)
        }
        _buildAnimation(l, n, e, t, i, s) {
            const u = n.triggerName,
                r = n.element,
                a = [],
                o = new Set,
                c = new Set,
                d = n.timelines.map(n => {
                    const d = n.element;
                    o.add(d);
                    const h = d[nB];
                    if (h && h.removedBeforeQueried) return new dN(n.duration, n.delay);
                    const p = d !== r,
                        f = function (l) {
                            const n = [];
                            return function l(n, e) {
                                for (let t = 0; t < n.length; t++) {
                                    const i = n[t];
                                    i instanceof hN ? l(i.players, e) : e.push(i)
                                }
                            }(l, n), n
                        }((e.get(d) || XR).map(l => l.getRealPlayer())).filter(l => !!l.element && l.element === d),
                        g = i.get(d),
                        m = s.get(d),
                        y = mN(0, this._normalizer, 0, n.keyframes, g, m),
                        v = this._buildPlayer(n, y, f);
                    if (n.subTimeline && t && c.add(d), p) {
                        const n = new rB(l, u, d);
                        n.setRealPlayer(v), a.push(n)
                    }
                    return v
                });
            a.forEach(l => {
                _N(this.playersByQueriedElement, l.element, []).push(l), l.onDone(() => (function (l, n, e) {
                    let t;
                    if (l instanceof Map) {
                        if (t = l.get(n)) {
                            if (t.length) {
                                const l = t.indexOf(e);
                                t.splice(l, 1)
                            }
                            0 == t.length && l.delete(n)
                        }
                    } else if (t = l[n]) {
                        if (t.length) {
                            const l = t.indexOf(e);
                            t.splice(l, 1)
                        }
                        0 == t.length && delete l[n]
                    }
                    return t
                })(this.playersByQueriedElement, l.element, l))
            }), o.forEach(l => pB(l, qN));
            const h = gN(d);
            return h.onDestroy(() => {
                o.forEach(l => fB(l, qN)), QN(r, n.toStyles)
            }), c.forEach(l => {
                _N(t, l, []).push(h)
            }), h
        }
        _buildPlayer(l, n, e) {
            return n.length > 0 ? this.driver.animate(l.element, n, l.duration, l.delay, l.easing, e) : new dN(l.duration, l.delay)
        }
    }
    class rB {
        constructor(l, n, e) {
            this.namespaceId = l, this.triggerName = n, this.element = e, this._player = new dN, this._containsRealPlayer = !1, this._queuedCallbacks = {}, this.destroyed = !1, this.markedForDestroy = !1, this.disabled = !1, this.queued = !0, this.totalTime = 0
        }
        setRealPlayer(l) {
            this._containsRealPlayer || (this._player = l, Object.keys(this._queuedCallbacks).forEach(n => {
                this._queuedCallbacks[n].forEach(e => yN(l, n, void 0, e))
            }), this._queuedCallbacks = {}, this._containsRealPlayer = !0, this.overrideTotalTime(l.totalTime), this.queued = !1)
        }
        getRealPlayer() {
            return this._player
        }
        overrideTotalTime(l) {
            this.totalTime = l
        }
        syncPlayerEvents(l) {
            const n = this._player;
            n.triggerCallback && l.onStart(() => n.triggerCallback("start")), l.onDone(() => this.finish()), l.onDestroy(() => this.destroy())
        }
        _queueEvent(l, n) {
            _N(this._queuedCallbacks, l, []).push(n)
        }
        onDone(l) {
            this.queued && this._queueEvent("done", l), this._player.onDone(l)
        }
        onStart(l) {
            this.queued && this._queueEvent("start", l), this._player.onStart(l)
        }
        onDestroy(l) {
            this.queued && this._queueEvent("destroy", l), this._player.onDestroy(l)
        }
        init() {
            this._player.init()
        }
        hasStarted() {
            return !this.queued && this._player.hasStarted()
        }
        play() {
            !this.queued && this._player.play()
        }
        pause() {
            !this.queued && this._player.pause()
        }
        restart() {
            !this.queued && this._player.restart()
        }
        finish() {
            this._player.finish()
        }
        destroy() {
            this.destroyed = !0, this._player.destroy()
        }
        reset() {
            !this.queued && this._player.reset()
        }
        setPosition(l) {
            this.queued || this._player.setPosition(l)
        }
        getPosition() {
            return this.queued ? 0 : this._player.getPosition()
        }
        triggerCallback(l) {
            const n = this._player;
            n.triggerCallback && n.triggerCallback(l)
        }
    }

    function aB(l) {
        return l && 1 === l.nodeType
    }

    function oB(l, n) {
        const e = l.style.display;
        return l.style.display = null != n ? n : "none", e
    }

    function cB(l, n, e, t, i) {
        const s = [];
        e.forEach(l => s.push(oB(l)));
        const u = [];
        t.forEach((e, t) => {
            const s = {};
            e.forEach(l => {
                const e = s[l] = n.computeStyle(t, l, i);
                e && 0 != e.length || (t[nB] = lB, u.push(t))
            }), l.set(t, s)
        });
        let r = 0;
        return e.forEach(l => oB(l, s[r++])), u
    }

    function dB(l, n) {
        const e = new Map;
        if (l.forEach(l => e.set(l, [])), 0 == n.length) return e;
        const t = new Set(n),
            i = new Map;
        return n.forEach(l => {
            const n = function l(n) {
                if (!n) return 1;
                let s = i.get(n);
                if (s) return s;
                const u = n.parentNode;
                return s = e.has(u) ? u : t.has(u) ? 1 : l(u), i.set(n, s), s
            }(l);
            1 !== n && e.get(n).push(l)
        }), e
    }
    const hB = "$$classes";

    function pB(l, n) {
        if (l.classList) l.classList.add(n);
        else {
            let e = l[hB];
            e || (e = l[hB] = {}), e[n] = !0
        }
    }

    function fB(l, n) {
        if (l.classList) l.classList.remove(n);
        else {
            let e = l[hB];
            e && delete e[n]
        }
    }

    function gB(l, n, e) {
        gN(e).onDone(() => l.processLeaveNode(n))
    }

    function mB(l, n, e) {
        const t = e.get(l);
        if (!t) return !1;
        let i = n.get(l);
        return i ? t.forEach(l => i.add(l)) : n.set(l, t), e.delete(l), !0
    }
    class yB {
        constructor(l, n, e) {
            this.bodyNode = l, this._driver = n, this._triggerCache = {}, this.onRemovalComplete = (l, n) => {}, this._transitionEngine = new uB(l, n, e), this._timelineEngine = new jR(l, n, e), this._transitionEngine.onRemovalComplete = (l, n) => this.onRemovalComplete(l, n)
        }
        registerTrigger(l, n, e, t, i) {
            const s = l + "-" + t;
            let u = this._triggerCache[s];
            if (!u) {
                const l = [],
                    n = mR(this._driver, i, l);
                if (l.length) throw new Error(`The animation trigger "${t}" has failed to build due to the following errors:\n - ${l.join("\n - ")}`);
                u = function (l, n) {
                    return new UR(l, n)
                }(t, n), this._triggerCache[s] = u
            }
            this._transitionEngine.registerTrigger(n, t, u)
        }
        register(l, n) {
            this._transitionEngine.register(l, n)
        }
        destroy(l, n) {
            this._transitionEngine.destroy(l, n)
        }
        onInsert(l, n, e, t) {
            this._transitionEngine.insertNode(l, n, e, t)
        }
        onRemove(l, n, e, t) {
            this._transitionEngine.removeNode(l, n, t || !1, e)
        }
        disableAnimations(l, n) {
            this._transitionEngine.markElementAsDisabled(l, n)
        }
        process(l, n, e, t) {
            if ("@" == e.charAt(0)) {
                const [l, i] = wN(e);
                this._timelineEngine.command(l, n, i, t)
            } else this._transitionEngine.trigger(l, n, e, t)
        }
        listen(l, n, e, t, i) {
            if ("@" == e.charAt(0)) {
                const [l, t] = wN(e);
                return this._timelineEngine.listen(l, n, t, i)
            }
            return this._transitionEngine.listen(l, n, e, t, i)
        }
        flush(l = -1) {
            this._transitionEngine.flush(l)
        }
        get players() {
            return this._transitionEngine.players.concat(this._timelineEngine.players)
        }
        whenRenderingDone() {
            return this._transitionEngine.whenRenderingDone()
        }
    }

    function vB(l, n) {
        let e = null,
            t = null;
        return Array.isArray(n) && n.length ? (e = _B(n[0]), n.length > 1 && (t = _B(n[n.length - 1]))) : n && (e = _B(n)), e || t ? new bB(l, e, t) : null
    }
    let bB = (() => {
        class l {
            constructor(n, e, t) {
                this._element = n, this._startStyles = e, this._endStyles = t, this._state = 0;
                let i = l.initialStylesByElement.get(n);
                i || l.initialStylesByElement.set(n, i = {}), this._initialStyles = i
            }
            start() {
                this._state < 1 && (this._startStyles && QN(this._element, this._startStyles, this._initialStyles), this._state = 1)
            }
            finish() {
                this.start(), this._state < 2 && (QN(this._element, this._initialStyles), this._endStyles && (QN(this._element, this._endStyles), this._endStyles = null), this._state = 1)
            }
            destroy() {
                this.finish(), this._state < 3 && (l.initialStylesByElement.delete(this._element), this._startStyles && (YN(this._element, this._startStyles), this._endStyles = null), this._endStyles && (YN(this._element, this._endStyles), this._endStyles = null), QN(this._element, this._initialStyles), this._state = 3)
            }
        }
        return l.initialStylesByElement = new WeakMap, l
    })();

    function _B(l) {
        let n = null;
        const e = Object.keys(l);
        for (let t = 0; t < e.length; t++) {
            const i = e[t];
            wB(i) && ((n = n || {})[i] = l[i])
        }
        return n
    }

    function wB(l) {
        return "display" === l || "position" === l
    }
    const xB = 3, kB = "animation", SB = "animationend", CB = 1e3; class IB {
        constructor(l, n, e, t, i, s, u) {
            this._element = l, this._name = n, this._duration = e, this._delay = t, this._easing = i, this._fillMode = s, this._onDoneFn = u, this._finished = !1, this._destroyed = !1, this._startTime = 0, this._position = 0, this._eventFn = l => this._handleCallback(l)
        }
        apply() {
            ! function (l, n) {
                const e = MB(l, "").trim();
                e.length && (function (l, n) {
                    let e = 0;
                    for (let t = 0; t < l.length; t++) "," === l.charAt(t) && e++
                }(e), n = `${e}, ${n}`), DB(l, "", n)
            }(this._element, `${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`), PB(this._element, this._eventFn, !1), this._startTime = Date.now()
        }
        pause() {
            TB(this._element, this._name, "paused")
        }
        resume() {
            TB(this._element, this._name, "running")
        }
        setPosition(l) {
            const n = EB(this._element, this._name);
            this._position = l * this._duration, DB(this._element, "Delay", `-${this._position}ms`, n)
        }
        getPosition() {
            return this._position
        }
        _handleCallback(l) {
            const n = l._ngTestManualTimestamp || Date.now(),
                e = parseFloat(l.elapsedTime.toFixed(xB)) * CB;
            l.animationName == this._name && Math.max(n - this._startTime, 0) >= this._delay && e >= this._duration && this.finish()
        }
        finish() {
            this._finished || (this._finished = !0, this._onDoneFn(), PB(this._element, this._eventFn, !0))
        }
        destroy() {
            this._destroyed || (this._destroyed = !0, this.finish(), function (l, n) {
                const e = MB(l, "").split(","),
                    t = AB(e, n);
                t >= 0 && (e.splice(t, 1), DB(l, "", e.join(",")))
            }(this._element, this._name))
        }
    }

    function TB(l, n, e) {
        DB(l, "PlayState", e, EB(l, n))
    }

    function EB(l, n) {
        const e = MB(l, "");
        return e.indexOf(",") > 0 ? AB(e.split(","), n) : AB([e], n)
    }

    function AB(l, n) {
        for (let e = 0; e < l.length; e++)
            if (l[e].indexOf(n) >= 0) return e;
        return -1
    }

    function PB(l, n, e) {
        e ? l.removeEventListener(SB, n) : l.addEventListener(SB, n)
    }

    function DB(l, n, e, t) {
        const i = kB + n;
        if (null != t) {
            const n = l.style[i];
            if (n.length) {
                const l = n.split(",");
                l[t] = e, e = l.join(",")
            }
        }
        l.style[i] = e
    }

    function MB(l, n) {
        return l.style[kB + n]
    }
    const OB = "forwards", NB = "linear"; class RB {
        constructor(l, n, e, t, i, s, u, r) {
            this.element = l, this.keyframes = n, this.animationName = e, this._duration = t, this._delay = i, this._finalStyles = u, this._specialStyles = r, this._onDoneFns = [], this._onStartFns = [], this._onDestroyFns = [], this._started = !1, this.currentSnapshot = {}, this._state = 0, this.easing = s || NB, this.totalTime = t + i, this._buildStyler()
        }
        onStart(l) {
            this._onStartFns.push(l)
        }
        onDone(l) {
            this._onDoneFns.push(l)
        }
        onDestroy(l) {
            this._onDestroyFns.push(l)
        }
        destroy() {
            this.init(), this._state >= 4 || (this._state = 4, this._styler.destroy(), this._flushStartFns(), this._flushDoneFns(), this._specialStyles && this._specialStyles.destroy(), this._onDestroyFns.forEach(l => l()), this._onDestroyFns = [])
        }
        _flushDoneFns() {
            this._onDoneFns.forEach(l => l()), this._onDoneFns = []
        }
        _flushStartFns() {
            this._onStartFns.forEach(l => l()), this._onStartFns = []
        }
        finish() {
            this.init(), this._state >= 3 || (this._state = 3, this._styler.finish(), this._flushStartFns(), this._specialStyles && this._specialStyles.finish(), this._flushDoneFns())
        }
        setPosition(l) {
            this._styler.setPosition(l)
        }
        getPosition() {
            return this._styler.getPosition()
        }
        hasStarted() {
            return this._state >= 2
        }
        init() {
            this._state >= 1 || (this._state = 1, this._styler.apply(), this._delay && this._styler.pause())
        }
        play() {
            this.init(), this.hasStarted() || (this._flushStartFns(), this._state = 2, this._specialStyles && this._specialStyles.start()), this._styler.resume()
        }
        pause() {
            this.init(), this._styler.pause()
        }
        restart() {
            this.reset(), this.play()
        }
        reset() {
            this._styler.destroy(), this._buildStyler(), this._styler.apply()
        }
        _buildStyler() {
            this._styler = new IB(this.element, this.animationName, this._duration, this._delay, this.easing, OB, () => this.finish())
        }
        triggerCallback(l) {
            const n = "start" == l ? this._onStartFns : this._onDoneFns;
            n.forEach(l => l()), n.length = 0
        }
        beforeDestroy() {
            this.init();
            const l = {};
            if (this.hasStarted()) {
                const n = this._state >= 3;
                Object.keys(this._finalStyles).forEach(e => {
                    "offset" != e && (l[e] = n ? this._finalStyles[e] : aR(this.element, e))
                })
            }
            this.currentSnapshot = l
        }
    }
    class BB extends dN {
        constructor(l, n) {
            super(), this.element = l, this._startingStyles = {}, this.__initialized = !1, this._styles = MN(n)
        }
        init() {
            !this.__initialized && this._startingStyles && (this.__initialized = !0, Object.keys(this._styles).forEach(l => {
                this._startingStyles[l] = this.element.style[l]
            }), super.init())
        }
        play() {
            this._startingStyles && (this.init(), Object.keys(this._styles).forEach(l => this.element.style.setProperty(l, this._styles[l])), super.play())
        }
        destroy() {
            this._startingStyles && (Object.keys(this._startingStyles).forEach(l => {
                const n = this._startingStyles[l];
                n ? this.element.style.setProperty(l, n) : this.element.style.removeProperty(l)
            }), this._startingStyles = null, super.destroy())
        }
    }
    const zB = "gen_css_kf_", $B = " "; class LB {
        constructor() {
            this._count = 0, this._head = document.querySelector("head"), this._warningIssued = !1
        }
        validateStyleProperty(l) {
            return EN(l)
        }
        matchesElement(l, n) {
            return AN(l, n)
        }
        containsElement(l, n) {
            return PN(l, n)
        }
        query(l, n, e) {
            return DN(l, n, e)
        }
        computeStyle(l, n, e) {
            return window.getComputedStyle(l)[n]
        }
        buildKeyframeElement(l, n, e) {
            e = e.map(l => MN(l));
            let t = `@keyframes ${n} {\n`,
                i = "";
            e.forEach(l => {
                i = $B;
                const n = parseFloat(l.offset);
                t += `${i}${100*n}% {\n`, i += $B, Object.keys(l).forEach(n => {
                    const e = l[n];
                    switch (n) {
                        case "offset":
                            return;
                        case "easing":
                            return void(e && (t += `${i}animation-timing-function: ${e};\n`));
                        default:
                            return void(t += `${i}${n}: ${e};\n`)
                    }
                }), t += `${i}}\n`
            }), t += "}\n";
            const s = document.createElement("style");
            return s.innerHTML = t, s
        }
        animate(l, n, e, t, i, s = [], u) {
            u && this._notifyFaultyScrubber();
            const r = s.filter(l => l instanceof RB),
                a = {};
            sR(e, t) && r.forEach(l => {
                let n = l.currentSnapshot;
                Object.keys(n).forEach(l => a[l] = n[l])
            });
            const o = function (l) {
                let n = {};
                return l && (Array.isArray(l) ? l : [l]).forEach(l => {
                    Object.keys(l).forEach(e => {
                        "offset" != e && "easing" != e && (n[e] = l[e])
                    })
                }), n
            }(n = uR(l, n, a));
            if (0 == e) return new BB(l, o);
            const c = `${zB}${this._count++}`,
                d = this.buildKeyframeElement(l, c, n);
            document.querySelector("head").appendChild(d);
            const h = vB(l, n),
                p = new RB(l, n, c, e, t, i, o, h);
            return p.onDestroy(() => (function (l) {
                l.parentNode.removeChild(l)
            })(d)), p
        }
        _notifyFaultyScrubber() {
            this._warningIssued || (console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n", "  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."), this._warningIssued = !0)
        }
    }
    class FB {
        constructor(l, n, e, t) {
            this.element = l, this.keyframes = n, this.options = e, this._specialStyles = t, this._onDoneFns = [], this._onStartFns = [], this._onDestroyFns = [], this._initialized = !1, this._finished = !1, this._started = !1, this._destroyed = !1, this.time = 0, this.parentPlayer = null, this.currentSnapshot = {}, this._duration = e.duration, this._delay = e.delay || 0, this.time = this._duration + this._delay
        }
        _onFinish() {
            this._finished || (this._finished = !0, this._onDoneFns.forEach(l => l()), this._onDoneFns = [])
        }
        init() {
            this._buildPlayer(), this._preparePlayerBeforeStart()
        }
        _buildPlayer() {
            if (this._initialized) return;
            this._initialized = !0;
            const l = this.keyframes;
            this.domPlayer = this._triggerWebAnimation(this.element, l, this.options), this._finalKeyframe = l.length ? l[l.length - 1] : {}, this.domPlayer.addEventListener("finish", () => this._onFinish())
        }
        _preparePlayerBeforeStart() {
            this._delay ? this._resetDomPlayerState() : this.domPlayer.pause()
        }
        _triggerWebAnimation(l, n, e) {
            return l.animate(n, e)
        }
        onStart(l) {
            this._onStartFns.push(l)
        }
        onDone(l) {
            this._onDoneFns.push(l)
        }
        onDestroy(l) {
            this._onDestroyFns.push(l)
        }
        play() {
            this._buildPlayer(), this.hasStarted() || (this._onStartFns.forEach(l => l()), this._onStartFns = [], this._started = !0, this._specialStyles && this._specialStyles.start()), this.domPlayer.play()
        }
        pause() {
            this.init(), this.domPlayer.pause()
        }
        finish() {
            this.init(), this._specialStyles && this._specialStyles.finish(), this._onFinish(), this.domPlayer.finish()
        }
        reset() {
            this._resetDomPlayerState(), this._destroyed = !1, this._finished = !1, this._started = !1
        }
        _resetDomPlayerState() {
            this.domPlayer && this.domPlayer.cancel()
        }
        restart() {
            this.reset(), this.play()
        }
        hasStarted() {
            return this._started
        }
        destroy() {
            this._destroyed || (this._destroyed = !0, this._resetDomPlayerState(), this._onFinish(), this._specialStyles && this._specialStyles.destroy(), this._onDestroyFns.forEach(l => l()), this._onDestroyFns = [])
        }
        setPosition(l) {
            this.domPlayer.currentTime = l * this.time
        }
        getPosition() {
            return this.domPlayer.currentTime / this.time
        }
        get totalTime() {
            return this._delay + this._duration
        }
        beforeDestroy() {
            const l = {};
            this.hasStarted() && Object.keys(this._finalKeyframe).forEach(n => {
                "offset" != n && (l[n] = this._finished ? this._finalKeyframe[n] : aR(this.element, n))
            }), this.currentSnapshot = l
        }
        triggerCallback(l) {
            const n = "start" == l ? this._onStartFns : this._onDoneFns;
            n.forEach(l => l()), n.length = 0
        }
    }
    class qB {
        constructor() {
            this._isNativeImpl = /\{\s*\[native\s+code\]\s*\}/.test(UB().toString()), this._cssKeyframesDriver = new LB
        }
        validateStyleProperty(l) {
            return EN(l)
        }
        matchesElement(l, n) {
            return AN(l, n)
        }
        containsElement(l, n) {
            return PN(l, n)
        }
        query(l, n, e) {
            return DN(l, n, e)
        }
        computeStyle(l, n, e) {
            return window.getComputedStyle(l)[n]
        }
        overrideWebAnimationsSupport(l) {
            this._isNativeImpl = l
        }
        animate(l, n, e, t, i, s = [], u) {
            if (!u && !this._isNativeImpl) return this._cssKeyframesDriver.animate(l, n, e, t, i, s);
            const r = {
                duration: e,
                delay: t,
                fill: 0 == t ? "both" : "forwards"
            };
            i && (r.easing = i);
            const a = {},
                o = s.filter(l => l instanceof FB);
            sR(e, t) && o.forEach(l => {
                let n = l.currentSnapshot;
                Object.keys(n).forEach(l => a[l] = n[l])
            });
            const c = vB(l, n = uR(l, n = n.map(l => WN(l, !1)), a));
            return new FB(l, n, r, c)
        }
    }

    function UB() {
        return "undefined" != typeof window && void 0 !== window.document && Element.prototype.animate || {}
    }
    class HB extends sN {
        constructor(l, n) {
            super(), this._nextAnimationId = 0, this._renderer = l.createRenderer(n.body, {
                id: "0",
                encapsulation: Zl.None,
                styles: [],
                data: {
                    animation: []
                }
            })
        }
        build(l) {
            const n = this._nextAnimationId.toString();
            this._nextAnimationId++;
            const e = Array.isArray(l) ? aN(l) : l;
            return GB(this._renderer, null, n, "register", [e]), new VB(n, this._renderer)
        }
    }
    class VB extends uN {
        constructor(l, n) {
            super(), this._id = l, this._renderer = n
        }
        create(l, n) {
            return new jB(this._id, l, n || {}, this._renderer)
        }
    }
    class jB {
        constructor(l, n, e, t) {
            this.id = l, this.element = n, this._renderer = t, this.parentPlayer = null, this._started = !1, this.totalTime = 0, this._command("create", e)
        }
        _listen(l, n) {
            return this._renderer.listen(this.element, `@@${this.id}:${l}`, n)
        }
        _command(l, ...n) {
            return GB(this._renderer, this.element, this.id, l, n)
        }
        onDone(l) {
            this._listen("done", l)
        }
        onStart(l) {
            this._listen("start", l)
        }
        onDestroy(l) {
            this._listen("destroy", l)
        }
        init() {
            this._command("init")
        }
        hasStarted() {
            return this._started
        }
        play() {
            this._command("play"), this._started = !0
        }
        pause() {
            this._command("pause")
        }
        restart() {
            this._command("restart")
        }
        finish() {
            this._command("finish")
        }
        destroy() {
            this._command("destroy")
        }
        reset() {
            this._command("reset")
        }
        setPosition(l) {
            this._command("setPosition", l)
        }
        getPosition() {
            return 0
        }
    }

    function GB(l, n, e, t, i) {
        return l.setProperty(n, `@@${e}:${t}`, i)
    }
    const WB = "@", KB = "@.disabled"; class ZB {
        constructor(l, n, e) {
            this.delegate = l, this.engine = n, this._zone = e, this._currentId = 0, this._microtaskId = 1, this._animationCallbacksBuffer = [], this._rendererCache = new Map, this._cdRecurDepth = 0, this.promise = Promise.resolve(0), n.onRemovalComplete = (l, n) => {
                n && n.parentNode(l) && n.removeChild(l.parentNode, l)
            }
        }
        createRenderer(l, n) {
            const e = this.delegate.createRenderer(l, n);
            if (!(l && n && n.data && n.data.animation)) {
                let l = this._rendererCache.get(e);
                return l || (l = new QB("", e, this.engine), this._rendererCache.set(e, l)), l
            }
            const t = n.id,
                i = n.id + "-" + this._currentId;
            return this._currentId++, this.engine.register(i, l), n.data.animation.forEach(n => this.engine.registerTrigger(t, i, l, n.name, n)), new YB(this, i, e, this.engine)
        }
        begin() {
            this._cdRecurDepth++, this.delegate.begin && this.delegate.begin()
        }
        _scheduleCountTask() {
            this.promise.then(() => {
                this._microtaskId++
            })
        }
        scheduleListenerCallback(l, n, e) {
            l >= 0 && l < this._microtaskId ? this._zone.run(() => n(e)) : (0 == this._animationCallbacksBuffer.length && Promise.resolve(null).then(() => {
                this._zone.run(() => {
                    this._animationCallbacksBuffer.forEach(l => {
                        const [n, e] = l;
                        n(e)
                    }), this._animationCallbacksBuffer = []
                })
            }), this._animationCallbacksBuffer.push([n, e]))
        }
        end() {
            this._cdRecurDepth--, 0 == this._cdRecurDepth && this._zone.runOutsideAngular(() => {
                this._scheduleCountTask(), this.engine.flush(this._microtaskId)
            }), this.delegate.end && this.delegate.end()
        }
        whenRenderingDone() {
            return this.engine.whenRenderingDone()
        }
    }
    class QB {
        constructor(l, n, e) {
            this.namespaceId = l, this.delegate = n, this.engine = e, this.destroyNode = this.delegate.destroyNode ? l => n.destroyNode(l) : null
        }
        get data() {
            return this.delegate.data
        }
        destroy() {
            this.engine.destroy(this.namespaceId, this.delegate), this.delegate.destroy()
        }
        createElement(l, n) {
            return this.delegate.createElement(l, n)
        }
        createComment(l) {
            return this.delegate.createComment(l)
        }
        createText(l) {
            return this.delegate.createText(l)
        }
        appendChild(l, n) {
            this.delegate.appendChild(l, n), this.engine.onInsert(this.namespaceId, n, l, !1)
        }
        insertBefore(l, n, e) {
            this.delegate.insertBefore(l, n, e), this.engine.onInsert(this.namespaceId, n, l, !0)
        }
        removeChild(l, n, e) {
            this.engine.onRemove(this.namespaceId, n, this.delegate, e)
        }
        selectRootElement(l, n) {
            return this.delegate.selectRootElement(l, n)
        }
        parentNode(l) {
            return this.delegate.parentNode(l)
        }
        nextSibling(l) {
            return this.delegate.nextSibling(l)
        }
        setAttribute(l, n, e, t) {
            this.delegate.setAttribute(l, n, e, t)
        }
        removeAttribute(l, n, e) {
            this.delegate.removeAttribute(l, n, e)
        }
        addClass(l, n) {
            this.delegate.addClass(l, n)
        }
        removeClass(l, n) {
            this.delegate.removeClass(l, n)
        }
        setStyle(l, n, e, t) {
            this.delegate.setStyle(l, n, e, t)
        }
        removeStyle(l, n, e) {
            this.delegate.removeStyle(l, n, e)
        }
        setProperty(l, n, e) {
            n.charAt(0) == WB && n == KB ? this.disableAnimations(l, !!e) : this.delegate.setProperty(l, n, e)
        }
        setValue(l, n) {
            this.delegate.setValue(l, n)
        }
        listen(l, n, e) {
            return this.delegate.listen(l, n, e)
        }
        disableAnimations(l, n) {
            this.engine.disableAnimations(l, n)
        }
    }
    class YB extends QB {
        constructor(l, n, e, t) {
            super(n, e, t), this.factory = l, this.namespaceId = n
        }
        setProperty(l, n, e) {
            n.charAt(0) == WB ? "." == n.charAt(1) && n == KB ? this.disableAnimations(l, e = void 0 === e || !!e) : this.engine.process(this.namespaceId, l, n.substr(1), e) : this.delegate.setProperty(l, n, e)
        }
        listen(l, n, e) {
            if (n.charAt(0) == WB) {
                const t = function (l) {
                    switch (l) {
                        case "body":
                            return document.body;
                        case "document":
                            return document;
                        case "window":
                            return window;
                        default:
                            return l
                    }
                }(l);
                let i = n.substr(1),
                    s = "";
                return i.charAt(0) != WB && ([i, s] = function (l) {
                    const n = l.indexOf(".");
                    return [l.substring(0, n), l.substr(n + 1)]
                }(i)), this.engine.listen(this.namespaceId, t, i, s, l => {
                    this.factory.scheduleListenerCallback(l._data || -1, e, l)
                })
            }
            return this.delegate.listen(l, n, e)
        }
    }
    class XB extends yB {
        constructor(l, n, e) {
            super(l.body, n, e)
        }
    }

    function JB() {
        return "function" == typeof UB() ? new qB : new LB
    }

    function lz() {
        return new BR
    }

    function nz(l, n, e) {
        return new ZB(l, n, e)
    }
    const ez = new El("AnimationModuleType"); class tz {}
    class iz {
        constructor(l, n) {
            this.data = l, this.router = n
        }
        canActivate() {
            return null != this.data.version || (this.router.navigate(["/"]), !1)
        }
    }
    class sz {}
    var uz = Er(Dr, [Mr], (function (l) {
        return function (l) {
            const n = {},
                e = [];
            let t = !1;
            for (let i = 0; i < l.length; i++) {
                const s = l[i];
                s.token === zn && !0 === s.value && (t = !0), 1073741824 & s.flags && e.push(s.token), s.index = i, n[nt(s.token)] = s
            }
            return {
                factory: null,
                providersByKey: n,
                providers: l,
                modules: e,
                isRoot: t
            }
        }([$t(512, ce, de, [[8, [Xp, em, lx, tk, sE, vE, bA, KA, eP, LP, nD, aD, kD, AD, FD, yO, $O, jO, YO, n_, N_, bw, kw, q_, tw, cw, iN]], [3, ce], jl]), $t(5120, Ji, nu, [[3, Ji]]), $t(4608, wa, xa, [Ji, [2, _a]]), $t(5120, Mi, eu, [ys]), $t(5120, Gi, Wi, []), $t(5120, Oe, Js, []), $t(5120, Ne, lu, []), $t(4608, Vc, jc, [Ua]), $t(6144, Pn, null, [Vc]), $t(4608, zc, Lc, []), $t(5120, sc, (function (l, n, e, t, i, s, u, r) {
            return [new Rc(l, n, e), new Hc(t), new Fc(i, s, u, r)]
        }), [Ua, ys, Qi, Ua, Ua, zc, Xi, [2, $c]]), $t(4608, uc, uc, [sc, ys]), $t(135680, oc, oc, [Ua]), $t(4608, mc, mc, [uc, oc, Gi]), $t(5120, NN, JB, []), $t(5120, RR, lz, []), $t(4608, yB, XB, [Ua, NN, RR]), $t(5120, ye, nz, [mc, yB, ys]), $t(6144, ac, null, [oc]), $t(4608, Ss, Ss, [ys]), $t(4608, sN, HB, [ye, Ua]), $t(5120, oh, Vp, [_p]), $t(4608, Dp, Dp, []), $t(6144, Ap, null, [Dp]), $t(135680, Mp, Mp, [_p, Ls, us, Ln, Ap]), $t(4608, Pp, Pp, []), $t(5120, Op, Lp, [_p, Va, Np]), $t(5120, Kp, Wp, [jp]), $t(5120, Yi, (function (l) {
            return [l]
        }), [Kp]), $t(4608, wf, wf, []), $t(4608, Fy, Fy, [ce, Ln, Ly, Ay]), $t(4608, Tg, Tg, []), $t(4608, Pg, Pg, [Tg]), $t(135680, vv, vv, [Tg, Pg, zg, Rg, $g]), $t(135680, qv, qv, [Tg, Pg, zg, Rg]), $t(4608, iz, iz, [Pg, _p]), $t(1073742336, qa, qa, []), $t(1024, tn, Jc, []), $t(1024, Ms, (function () {
            return [zp()]
        }), []), $t(512, jp, jp, [Ln]), $t(1024, Vi, (function (l, n) {
            return [(e = l, ec("probe", ic), ec("coreTokens", Object.assign({}, tc, (e || []).reduce((l, n) => (l[n.name] = n.token, l), {}))), () => ic), Gp(n)];
            var e
        }), [[2, Ms], jp]), $t(512, ji, ji, [[2, Vi]]), $t(131584, zs, zs, [ys, Xi, Ln, tn, ce, ji]), $t(1073742336, tu, tu, [zs]), $t(1073742336, ld, ld, [[3, ld]]), $t(1073742336, tz, tz, []), $t(1024, Rp, qp, [[3, _p]]), $t(512, qd, Ud, []), $t(512, Ip, Ip, []), $t(256, Np, {}, []), $t(1024, Rr, Fp, [Or, [2, Br], Np]), $t(512, zr, zr, [Rr, Or]), $t(512, us, us, []), $t(512, Ls, Vs, [us, [2, Us]]), $t(1024, pp, (function () {
            return [[{
                path: "",
                pathMatch: "full",
                redirectTo: "home"
            }, {
                path: "home",
                component: rg
            }, {
                path: "game",
                component: Aw,
                canActivate: [iz],
                children: [{
                    path: "",
                    pathMatch: "full",
                    redirectTo: "city"
                }, {
                    path: "empire",
                    component: sx
                }, {
                    path: "city/:id",
                    component: vT
                }, {
                    path: "city",
                    component: vT
                }, {
                    path: "science",
                    component: uE
                }, {
                    path: "world",
                    component: kE
                }, {
                    path: "attacks",
                    component: _A
                }, {
                    path: "simulator",
                    component: ZA
                }, {
                    path: "reports/:id",
                    component: tP
                }, {
                    path: "reports",
                    component: tP
                }, {
                    path: "policies",
                    component: FP
                }, {
                    path: "notifications",
                    component: eD
                }, {
                    path: "help",
                    component: dD
                }, {
                    path: "support",
                    component: SD
                }, {
                    path: "options",
                    component: PD
                }, {
                    path: "diplomacy",
                    component: qD
                }, {
                    path: "powers",
                    component: vO
                }, {
                    path: "daily",
                    component: LO
                }, {
                    path: "deity",
                    component: GO
                }]
            }]]
        }), []), $t(1024, _p, Hp, [zs, qd, Ip, zr, Ln, Ls, us, pp, Np, [2, gp], [2, dp]]), $t(1073742336, $p, $p, [[2, Rp], [2, _p]]), $t(1073742336, sz, sz, []), $t(1073742336, Vv, Vv, []), $t(1073742336, eg, eg, []), $t(1073742336, tg, tg, []), $t(1073742336, Pm, Pm, []), $t(1073742336, Om, Om, []), $t(1073742336, Nm, Nm, []), $t(1073742336, Rm, Rm, []), $t(1073742336, Bm, Bm, []), $t(1073742336, _y, _y, []), $t(1073742336, Ey, Ey, []), $t(1073742336, qy, qy, []), $t(1073742336, Uy, Uy, []), $t(1073742336, Qy, Qy, []), $t(1073742336, Yy, Yy, []), $t(1073742336, Xy, Xy, []), $t(1073742336, iv, iv, []), $t(1073742336, sv, sv, []), $t(1073742336, av, av, []), $t(1073742336, cv, cv, []), $t(1073742336, pv, pv, []), $t(1073742336, fv, fv, []), $t(1073742336, Dr, Dr, []), $t(256, zn, !0, []), $t(256, ez, "BrowserAnimations", [])])
    })); Pr.production && function () {
        if (un) throw new Error("Cannot enable prod mode after platform setup.");
        sn = !1
    }(), Xc().bootstrapModuleFactory(uz).catch(l => console.error(l))
}, zn8P: function (l, n) {
    function e(l) {
        return Promise.resolve().then((function () {
            var n = new Error("Cannot find module '" + l + "'");
            throw n.code = "MODULE_NOT_FOUND", n
        }))
    }
    e.keys = function () {
        return []
    }, e.resolve = e, l.exports = e, e.id = "zn8P"
}
}, [[0, 0]]]);
